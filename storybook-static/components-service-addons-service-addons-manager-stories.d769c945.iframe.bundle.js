"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[74533],{"./node_modules/next-intl/dist/esm/production/react-client/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c3:()=>e});var use_intl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/use-intl/dist/esm/production/react.js");function o(r,t){return(...r)=>{try{return t(...r)}catch{throw new Error(void 0)}}}const e=o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.c3);o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.kc)},"./src/components/service-addons/service-addons-manager.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>service_addons_manager_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),toast=__webpack_require__("./src/lib/toast.ts");function ServiceAddonsManager({addons:initialAddons,onAddonsChange,professionalId}){const t=(0,react_client.c3)("dashboard.pro.serviceAddons"),[addons,setAddons]=(0,react.useState)(initialAddons),[isAdding,setIsAdding]=(0,react.useState)(!1),[editingId,setEditingId]=(0,react.useState)(null),handleAddonsUpdate=newAddons=>{setAddons(newAddons),onAddonsChange?.(newAddons)},handleAddNew=()=>{setIsAdding(!0),setEditingId(null)},handleEdit=id=>{setEditingId(id),setIsAdding(!1)},handleToggleActive=id=>{const newAddons=addons.map(addon=>addon.id===id?{...addon,is_active:!addon.is_active}:addon);handleAddonsUpdate(newAddons)},handleDelete=async id=>{if(await(0,toast.l)(t("deleteConfirm"),"Delete Service Addon")){const newAddons=addons.filter(addon=>addon.id!==id);handleAddonsUpdate(newAddons)}},editingAddon=editingId?addons.find(addon=>addon.id===editingId):null,activeAddons=addons.filter(a=>a.is_active),inactiveAddons=addons.filter(a=>!a.is_active);return(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[activeAddons.length>0&&(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold text-[#0f172a] text-sm",children:t("activeAddons",{count:activeAddons.length})}),activeAddons.map(addon=>(0,jsx_runtime.jsx)(AddonCard,{addon,onDelete:()=>handleDelete(addon.id),onEdit:()=>handleEdit(addon.id),onToggleActive:()=>handleToggleActive(addon.id)},addon.id))]}),inactiveAddons.length>0&&(0,jsx_runtime.jsxs)("div",{className:"space-y-2",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold text-[#94a3b8] text-sm",children:t("inactiveAddons",{count:inactiveAddons.length})}),inactiveAddons.map(addon=>(0,jsx_runtime.jsx)(AddonCard,{addon,onDelete:()=>handleDelete(addon.id),onEdit:()=>handleEdit(addon.id),onToggleActive:()=>handleToggleActive(addon.id)},addon.id))]}),0===addons.length&&!isAdding&&(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-[#e2e8f0] bg-[#f8fafc]/90 p-8 text-center",children:[(0,jsx_runtime.jsx)("p",{className:"text-[#94a3b8] text-sm",children:t("emptyState")}),(0,jsx_runtime.jsx)("button",{className:"mt-3 font-semibold text-[#64748b] text-sm hover:text-[#64748b]",onClick:handleAddNew,type:"button",children:t("createFirst")})]}),addons.length>0&&!isAdding&&!editingId&&(0,jsx_runtime.jsxs)("button",{className:"flex w-full items-center justify-center gap-2 rounded-lg border-2 border-[#e2e8f0] border-dashed bg-[#f8fafc]/90 px-4 py-3 font-semibold text-[#94a3b8] text-sm transition hover:border-[#64748b] hover:text-[#64748b]",onClick:handleAddNew,type:"button",children:[(0,jsx_runtime.jsx)("span",{className:"text-lg",children:"+"}),t("addNew")]}),(isAdding||editingId)&&(0,jsx_runtime.jsx)(AddonForm,{addon:editingAddon,onCancel:()=>{setIsAdding(!1),setEditingId(null)},onSave:addon=>{let newAddons;newAddons=editingId?addons.map(a=>a.id===editingId?addon:a):[...addons,addon],handleAddonsUpdate(newAddons),setIsAdding(!1),setEditingId(null)},professionalId})]})}function AddonCard({addon,onEdit,onToggleActive,onDelete}){const t=(0,react_client.c3)("dashboard.pro.serviceAddons"),priceFormatted=new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0}).format(addon.price_cop),durationFormatted=addon.duration_minutes>0?60===addon.duration_minutes?t("duration.hour"):t("duration.minutes",{minutes:addon.duration_minutes}):t("duration.noExtra");return(0,jsx_runtime.jsx)("div",{className:"rounded-lg border p-4 transition "+(addon.is_active?"border-[#e2e8f0] bg-[#f8fafc]":"border-[#e2e8f0] bg-[#f8fafc] opacity-70"),children:(0,jsx_runtime.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold text-[#0f172a]",children:addon.name}),!addon.is_active&&(0,jsx_runtime.jsx)("span",{className:"rounded-full bg-[#e2e8f0] px-2 py-0.5 font-semibold text-[#94a3b8] text-xs",children:t("inactive")})]}),addon.description&&(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:addon.description}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 flex flex-wrap gap-x-4 gap-y-1 text-[#94a3b8] text-xs",children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold text-[#64748b]",children:priceFormatted}),(0,jsx_runtime.jsxs)("span",{children:["⏱️ ",durationFormatted]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-2",children:[(0,jsx_runtime.jsx)("button",{className:"rounded-md px-2 py-1 font-medium text-[#94a3b8] text-xs transition hover:bg-[#e2e8f0] hover:text-[#64748b]",onClick:onEdit,type:"button",children:t("actions.edit")}),(0,jsx_runtime.jsx)("button",{className:"rounded-md px-2 py-1 font-medium text-[#94a3b8] text-xs transition hover:bg-[#e2e8f0] hover:text-[#64748b]",onClick:onToggleActive,type:"button",children:addon.is_active?t("actions.deactivate"):t("actions.activate")}),(0,jsx_runtime.jsx)("button",{className:"rounded-md px-2 py-1 font-medium text-[#64748b] text-xs transition hover:bg-[#64748b]/10",onClick:onDelete,type:"button",children:t("actions.delete")})]})]})})}function AddonForm({addon,professionalId,onSave,onCancel}){const t=(0,react_client.c3)("dashboard.pro.serviceAddons"),[formData,setFormData]=(0,react.useState)({professional_id:addon?.professional_id||professionalId,name:addon?.name||"",description:addon?.description||"",price_cop:addon?.price_cop||0,duration_minutes:addon?.duration_minutes||0,is_active:addon?.is_active??!0});return(0,jsx_runtime.jsxs)("form",{className:"space-y-4 rounded-lg border border-[#e2e8f0] bg-[#f8fafc] p-4",onSubmit:e=>{e.preventDefault();const savedAddon={id:addon?.id||crypto.randomUUID(),...formData,created_at:addon?.created_at||(new Date).toISOString(),updated_at:(new Date).toISOString()};onSave(savedAddon)},children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold text-[#0f172a]",children:t(addon?"form.editTitle":"form.createTitle")}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-1 block font-medium text-[#0f172a] text-sm",htmlFor:"addon-name",children:t("form.fields.name.label")}),(0,jsx_runtime.jsx)("input",{className:"w-full rounded-md border border-[#e2e8f0] px-3 py-2 text-sm focus:border-[#64748b] focus:outline-none focus:ring-2 focus:ring-[#64748b]/20",id:"addon-name",onChange:e=>setFormData({...formData,name:e.target.value}),placeholder:t("form.fields.name.placeholder"),required:!0,type:"text",value:formData.name})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-1 block font-medium text-[#0f172a] text-sm",htmlFor:"addon-description",children:t("form.fields.description.label")}),(0,jsx_runtime.jsx)("textarea",{className:"w-full rounded-md border border-[#e2e8f0] px-3 py-2 text-sm focus:border-[#64748b] focus:outline-none focus:ring-2 focus:ring-[#64748b]/20",id:"addon-description",onChange:e=>setFormData({...formData,description:e.target.value}),placeholder:t("form.fields.description.placeholder"),rows:2,value:formData.description})]}),(0,jsx_runtime.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-1 block font-medium text-[#0f172a] text-sm",htmlFor:"addon-price",children:t("form.fields.price.label")}),(0,jsx_runtime.jsx)("input",{className:"w-full rounded-md border border-[#e2e8f0] px-3 py-2 text-sm focus:border-[#64748b] focus:outline-none focus:ring-2 focus:ring-[#64748b]/20",id:"addon-price",min:"0",onChange:e=>setFormData({...formData,price_cop:Number.parseInt(e.target.value,10)}),placeholder:t("form.fields.price.placeholder"),required:!0,step:"1000",type:"number",value:formData.price_cop})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-1 block font-medium text-[#0f172a] text-sm",htmlFor:"addon-duration",children:t("form.fields.extraTime.label")}),(0,jsx_runtime.jsx)("input",{className:"w-full rounded-md border border-[#e2e8f0] px-3 py-2 text-sm focus:border-[#64748b] focus:outline-none focus:ring-2 focus:ring-[#64748b]/20",id:"addon-duration",min:"0",onChange:e=>setFormData({...formData,duration_minutes:Number.parseInt(e.target.value,10)}),placeholder:t("form.fields.extraTime.placeholder"),step:"15",type:"number",value:formData.duration_minutes}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-xs",children:t("form.fields.extraTime.helper")})]})]}),(0,jsx_runtime.jsxs)("label",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("input",{checked:formData.is_active,className:"rounded",onChange:e=>setFormData({...formData,is_active:e.target.checked}),type:"checkbox"}),(0,jsx_runtime.jsx)("span",{className:"text-[#0f172a] text-sm",children:t("form.fields.active.label")})]}),(0,jsx_runtime.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,jsx_runtime.jsx)("button",{className:"rounded-md border border-[#e2e8f0] px-4 py-2 font-semibold text-[#94a3b8] text-sm transition hover:border-[#64748b] hover:text-[#64748b]",onClick:onCancel,type:"button",children:t("form.cancel")}),(0,jsx_runtime.jsx)("button",{className:"rounded-md bg-[#64748b] px-4 py-2 font-semibold text-sm text-[#f8fafc] transition hover:bg-[#64748b]",type:"submit",children:t(addon?"form.saveChanges":"form.createAddon")})]})]})}try{ServiceAddonsManager.displayName="ServiceAddonsManager",ServiceAddonsManager.__docgenInfo={description:"",displayName:"ServiceAddonsManager",props:{addons:{defaultValue:null,description:"",name:"addons",required:!0,type:{name:"ServiceAddon[]"}},onAddonsChange:{defaultValue:null,description:"",name:"onAddonsChange",required:!1,type:{name:"(addons: ServiceAddon[]) => void"}},professionalId:{defaultValue:null,description:"",name:"professionalId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/service-addons/service-addons-manager.tsx#ServiceAddonsManager"]={docgenInfo:ServiceAddonsManager.__docgenInfo,name:"ServiceAddonsManager",path:"src/components/service-addons/service-addons-manager.tsx#ServiceAddonsManager"})}catch(__react_docgen_typescript_loader_error){}const service_addons_manager_stories={title:"Service-addons/ServiceAddonsManager",component:ServiceAddonsManager,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]},"./src/lib/toast.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>confirm,o:()=>toast});let toastContainer=null;function showToast(message,options={}){const{duration=3e3,type="info"}=options,container=function getToastContainer(){return toastContainer&&document.body.contains(toastContainer)||(toastContainer=document.createElement("div"),toastContainer.id="toast-container",toastContainer.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    z-index: 9999;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    pointer-events: none;\n  ",document.body.appendChild(toastContainer)),toastContainer}(),toast=document.createElement("div");if(toast.textContent=message,toast.style.cssText=function getToastStyles(type){return"\n    padding: 12px 20px;\n    border-radius: 8px;\n    font-family: system-ui, -apple-system, sans-serif;\n    font-size: 14px;\n    font-weight: 500;\n    box-shadow: 0 4px 12px rgba(22, 22, 22, 0.15);\n    pointer-events: auto;\n    min-width: 300px;\n    max-width: 500px;\n    word-wrap: break-word;\n    animation: slideIn 0.3s ease-out;\n  "+{success:"background-color: #FF4444A22; color: white;",error:"background-color: #FF4444A22; color: white;",info:"background-color: #FF4444A22; color: white;",warning:"background-color: #FF4444A22; color: white;"}[type]}(type),!document.getElementById("toast-animations")){const style=document.createElement("style");style.id="toast-animations",style.textContent="\n      @keyframes slideIn {\n        from {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n      @keyframes slideOut {\n        from {\n          transform: translateX(0);\n          opacity: 1;\n        }\n        to {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(style)}container.appendChild(toast),setTimeout(()=>{toast.style.animation="slideOut 0.3s ease-in",setTimeout(()=>{toast.parentNode&&toast.parentNode.removeChild(toast),0===container.children.length&&container.parentNode&&(container.parentNode.removeChild(container),toastContainer=null)},300)},duration)}const toast={success:(message,duration)=>showToast(message,{type:"success",duration}),error:(message,duration)=>showToast(message,{type:"error",duration}),info:(message,duration)=>showToast(message,{type:"info",duration}),warning:(message,duration)=>showToast(message,{type:"warning",duration})};function confirm(message,title="Confirm"){return new Promise(resolve=>{const overlay=document.createElement("div");overlay.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: rgba(22, 22, 22, 0.5);\n      z-index: 10000;\n      display: flex;\n      align-items: center;\n      justify-center;\n      animation: fadeIn 0.2s ease-out;\n    ";const modal=document.createElement("div");modal.style.cssText="\n      background-color: white;\n      border-radius: 12px;\n      padding: 24px;\n      max-width: 400px;\n      width: 90%;\n      box-shadow: 0 20px 25px -5px rgba(22, 22, 22, 0.1);\n      animation: scaleIn 0.2s ease-out;\n    ";const titleElement=document.createElement("h3");titleElement.textContent=title,titleElement.style.cssText="\n      font-size: 18px;\n      font-weight: 600;\n      color: #116611616;\n      margin-bottom: 12px;\n    ";const messageElement=document.createElement("p");messageElement.textContent=message,messageElement.style.cssText="\n      font-size: 14px;\n      color: #116611616;\n      margin-bottom: 20px;\n      line-height: 1.5;\n    ";const buttonContainer=document.createElement("div");buttonContainer.style.cssText="\n      display: flex;\n      gap: 12px;\n      justify-content: flex-end;\n    ";const cancelButton=document.createElement("button");cancelButton.textContent="Cancel",cancelButton.style.cssText="\n      padding: 8px 16px;\n      border-radius: 8px;\n      border: 2px solid #EE44EE2E3;\n      background-color: white;\n      color: #116611616;\n      font-weight: 600;\n      font-size: 14px;\n      cursor: pointer;\n      transition: all 0.2s;\n    ",cancelButton.onmouseover=()=>{cancelButton.style.borderColor="#AA88AAAAC",cancelButton.style.color="#AA88AAAAC"},cancelButton.onmouseout=()=>{cancelButton.style.borderColor="#EE44EE2E3",cancelButton.style.color="#116611616"};const confirmButton=document.createElement("button");confirmButton.textContent="Confirm",confirmButton.style.cssText="\n      padding: 8px 16px;\n      border-radius: 8px;\n      border: none;\n      background-color: #AA88AAAAC;\n      color: white;\n      font-weight: 600;\n      font-size: 14px;\n      cursor: pointer;\n      transition: all 0.2s;\n    ",confirmButton.onmouseover=()=>{confirmButton.style.backgroundColor="#AA88AAAAC"},confirmButton.onmouseout=()=>{confirmButton.style.backgroundColor="#AA88AAAAC"};const cleanup=()=>{overlay.style.animation="fadeOut 0.2s ease-in",setTimeout(()=>{overlay.parentNode&&overlay.parentNode.removeChild(overlay)},200)};if(cancelButton.onclick=()=>{cleanup(),resolve(!1)},confirmButton.onclick=()=>{cleanup(),resolve(!0)},!document.getElementById("modal-animations")){const style=document.createElement("style");style.id="modal-animations",style.textContent="\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes fadeOut {\n          from { opacity: 1; }\n          to { opacity: 0; }\n        }\n        @keyframes scaleIn {\n          from {\n            transform: scale(0.9);\n            opacity: 0;\n          }\n          to {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n      ",document.head.appendChild(style)}buttonContainer.appendChild(cancelButton),buttonContainer.appendChild(confirmButton),modal.appendChild(titleElement),modal.appendChild(messageElement),modal.appendChild(buttonContainer),overlay.appendChild(modal),document.body.appendChild(overlay),confirmButton.focus()})}}}]);