/*! For license information please see components-admin-admin-header-stories.eef73a33.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[3545,77951,90223],{"./messages lazy recursive ^\\.\\/.*\\.json$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./en.json":["./messages/en.json"],"./es.json":["./messages/es.json",81775]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(()=>__webpack_require__.t(id,19))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./messages lazy recursive ^\\.\\/.*\\.json$",module.exports=webpackAsyncContext},"./node_modules/lucide-react/dist/esm/createLucideIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>createLucideIcon});var react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const toPascalCase=string=>{const camelCase=(string=>string.replace(/^([A-Z])|[\s-_]+(\w)/g,(match,p1,p2)=>p2?p2.toUpperCase():p1.toLowerCase()))(string);return camelCase.charAt(0).toUpperCase()+camelCase.slice(1)},mergeClasses=(...classes)=>classes.filter((className,index,array)=>Boolean(className)&&""!==className.trim()&&array.indexOf(className)===index).join(" ").trim(),hasA11yProp=props=>{for(const prop in props)if(prop.startsWith("aria-")||"role"===prop||"title"===prop)return!0};var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Icon=(0,react.forwardRef)(({color="currentColor",size=24,strokeWidth=2,absoluteStrokeWidth,className="",children,iconNode,...rest},ref)=>(0,react.createElement)("svg",{ref,...defaultAttributes,width:size,height:size,stroke:color,strokeWidth:absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth,className:mergeClasses("lucide",className),...!children&&!hasA11yProp(rest)&&{"aria-hidden":"true"},...rest},[...iconNode.map(([tag,attrs])=>(0,react.createElement)(tag,attrs)),...Array.isArray(children)?children:[children]])),createLucideIcon=(iconName,iconNode)=>{const Component=(0,react.forwardRef)(({className,...props},ref)=>{return(0,react.createElement)(Icon,{ref,iconNode,className:mergeClasses(`lucide-${string=toPascalCase(iconName),string.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${iconName}`,className),...props});var string});return Component.displayName=toPascalCase(iconName),Component}},"./node_modules/next-intl/dist/esm/production/server/react-client/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function e(e){return()=>{throw new Error(`\`${e}\` is not supported in Client Components.`)}}function t(...t){return e("getRequestConfig")}__webpack_require__.d(__webpack_exports__,{$:()=>i,M6:()=>t});e("getFormatter"),e("getNow"),e("getTimeZone"),e("getMessages"),e("getLocale");const i=e("getTranslations");e("setRequestLocale")},"./src/components/admin/admin-header.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,LongInformation:()=>LongInformation,MinimalInfo:()=>MinimalInfo,WithoutAvatar:()=>WithoutAvatar,__namedExportsOrder:()=>__namedExportsOrder,default:()=>admin_header_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),next_image=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),admin_mobile_sidebar=__webpack_require__("./src/components/admin/admin-mobile-sidebar.tsx"),command_palette=__webpack_require__("./src/components/command-palette/command-palette.tsx"),breadcrumbs=__webpack_require__("./src/components/navigation/breadcrumbs.tsx"),notifications_sheet=__webpack_require__("./src/components/notifications/notifications-sheet.tsx"),use_notification_unread_count=__webpack_require__("./src/hooks/use-notification-unread-count.ts"),routing=__webpack_require__("./src/i18n/routing.ts"),utils=__webpack_require__("./src/lib/utils.ts");function AdminHeader({userEmail,userName,avatarUrl}){const[showCommandPalette,setShowCommandPalette]=(0,react.useState)(!1),[showNotifications,setShowNotifications]=(0,react.useState)(!1),[showProfileMenu,setShowProfileMenu]=(0,react.useState)(!1),{unreadCount}=(0,use_notification_unread_count.b)();return(0,react.useEffect)(()=>{const down=e=>{"k"===e.key&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),setShowCommandPalette(open=>!open))};return document.addEventListener("keydown",down),()=>document.removeEventListener("keydown",down)},[]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("header",{className:"flex h-20 items-center justify-between border-b border-slate-200 bg-white dark:border-slate-800 dark:bg-slate-950",children:[(0,jsx_runtime.jsxs)("div",{className:"flex min-w-0 flex-1 items-center gap-6 px-8",children:[(0,jsx_runtime.jsx)("div",{className:"flex-shrink-0 lg:hidden",children:(0,jsx_runtime.jsx)(admin_mobile_sidebar.U,{})}),(0,jsx_runtime.jsx)("div",{className:"hidden h-full items-center lg:flex",children:(0,jsx_runtime.jsx)(breadcrumbs.B,{})})]}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-3 pr-6",children:[(0,jsx_runtime.jsxs)("button",{"aria-label":"Search",className:(0,utils.cn)("group flex w-64 items-center gap-2 rounded-lg border px-4 py-2 transition-colors","border-slate-200 bg-slate-50 hover:bg-slate-100","dark:border-slate-700 dark:bg-slate-900 dark:hover:bg-slate-800"),onClick:()=>setShowCommandPalette(!0),children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4 flex-shrink-0 text-slate-500 group-hover:text-slate-900 dark:text-slate-400 dark:group-hover:text-slate-100",icon:index_min.Bbl}),(0,jsx_runtime.jsx)("span",{className:"flex-1 text-left text-sm text-slate-500 group-hover:text-slate-900 dark:text-slate-400 dark:group-hover:text-slate-100",children:"Search"}),(0,jsx_runtime.jsx)("kbd",{className:"inline-flex flex-shrink-0 items-center gap-1 rounded border border-slate-200 bg-white px-1.5 py-0.5 font-mono text-[10px] text-slate-500 dark:border-slate-700 dark:bg-slate-950 dark:text-slate-400",children:"⌘K"})]}),(0,jsx_runtime.jsxs)("button",{"aria-label":"Notifications",className:"group relative rounded-lg p-2.5 transition-colors hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>setShowNotifications(!0),children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5 text-slate-600 group-hover:text-slate-900 dark:text-slate-400 dark:group-hover:text-slate-100",icon:index_min.Hl8}),unreadCount>0&&(0,jsx_runtime.jsxs)("span",{className:"absolute top-1.5 right-1.5 flex h-2 w-2",children:[(0,jsx_runtime.jsx)("span",{className:"absolute inline-flex h-full w-full animate-ping rounded-full bg-slate-900 opacity-75 dark:bg-slate-100"}),(0,jsx_runtime.jsx)("span",{className:"relative inline-flex h-2 w-2 rounded-full bg-slate-900 dark:bg-slate-100"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsxs)("button",{"aria-label":"Profile menu",className:"group flex items-center gap-2.5 rounded-lg p-2 transition-colors hover:bg-slate-100 dark:hover:bg-slate-800",onClick:()=>setShowProfileMenu(!showProfileMenu),children:[avatarUrl?(0,jsx_runtime.jsx)(next_image.A,{alt:userName||"Profile",className:"h-8 w-8 rounded-full border border-slate-200 object-cover dark:border-slate-700",height:32,src:avatarUrl,width:32}):(0,jsx_runtime.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-slate-100 transition-colors group-hover:bg-slate-200 dark:bg-slate-800 dark:group-hover:bg-slate-700",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5 text-slate-600 dark:text-slate-400",icon:index_min.rMq})}),(0,jsx_runtime.jsxs)("div",{className:"hidden text-left md:block",children:[(0,jsx_runtime.jsx)("p",{className:"text-sm font-medium text-slate-900 dark:text-slate-100",children:userName||"Admin"}),userEmail&&(0,jsx_runtime.jsx)("p",{className:"text-xs text-slate-600 dark:text-slate-400",children:userEmail})]})]}),showProfileMenu&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"fixed inset-0 z-40",onClick:()=>setShowProfileMenu(!1)}),(0,jsx_runtime.jsxs)("div",{className:"absolute right-0 top-full z-50 mt-2 w-64 overflow-hidden rounded-xl border border-slate-200 bg-white shadow-lg dark:border-slate-700 dark:bg-slate-900",children:[(0,jsx_runtime.jsx)("div",{className:"border-b border-slate-200 bg-slate-50 px-4 py-3 dark:border-slate-700 dark:bg-slate-800",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[avatarUrl?(0,jsx_runtime.jsx)(next_image.A,{alt:userName||"Profile",className:"h-10 w-10 rounded-full border border-slate-200 object-cover dark:border-slate-700",height:40,src:avatarUrl,width:40}):(0,jsx_runtime.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-slate-100 dark:bg-slate-800",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-6 w-6 text-slate-600 dark:text-slate-400",icon:index_min.rMq})}),(0,jsx_runtime.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,jsx_runtime.jsx)("p",{className:"truncate text-sm font-semibold text-slate-900 dark:text-slate-100",children:userName||"Admin User"}),userEmail&&(0,jsx_runtime.jsx)("p",{className:"mt-0.5 truncate text-xs text-slate-600 dark:text-slate-400",children:userEmail})]})]})}),(0,jsx_runtime.jsxs)("div",{className:"py-2",children:[(0,jsx_runtime.jsxs)(routing.N_,{className:"flex items-center gap-3 px-4 py-2.5 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800",href:"/admin/settings",onClick:()=>setShowProfileMenu(!1),children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5 text-slate-600 dark:text-slate-400",icon:index_min.AU2}),(0,jsx_runtime.jsx)("span",{className:"text-sm text-slate-700 dark:text-slate-300",children:"Settings"})]}),(0,jsx_runtime.jsxs)(routing.N_,{className:"group flex items-center gap-3 px-4 py-2.5 transition-colors hover:bg-slate-50 dark:hover:bg-slate-800",href:"/auth/sign-out",onClick:()=>setShowProfileMenu(!1),children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5 text-slate-600 group-hover:text-slate-900 dark:text-slate-400 dark:group-hover:text-slate-100",icon:index_min.hc1}),(0,jsx_runtime.jsx)("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 dark:text-slate-300 dark:group-hover:text-slate-100",children:"Sign out"})]})]})]})]})]})]})]}),(0,jsx_runtime.jsx)(command_palette.CommandPalette,{dashboardPath:"/admin",onClose:()=>setShowCommandPalette(!1),open:showCommandPalette}),(0,jsx_runtime.jsx)(notifications_sheet.NotificationsSheet,{isOpen:showNotifications,onClose:()=>setShowNotifications(!1)})]})}try{AdminHeader.displayName="AdminHeader",AdminHeader.__docgenInfo={description:"",displayName:"AdminHeader",props:{userEmail:{defaultValue:null,description:"",name:"userEmail",required:!1,type:{name:"string"}},userName:{defaultValue:null,description:"",name:"userName",required:!1,type:{name:"string"}},avatarUrl:{defaultValue:null,description:"",name:"avatarUrl",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/admin/admin-header.tsx#AdminHeader"]={docgenInfo:AdminHeader.__docgenInfo,name:"AdminHeader",path:"src/components/admin/admin-header.tsx#AdminHeader"})}catch(__react_docgen_typescript_loader_error){}const admin_header_stories={title:"Admin/AdminHeader",component:AdminHeader,parameters:{layout:"fullscreen"},tags:["autodocs"],argTypes:{userName:{control:"text",description:"User's display name"},userEmail:{control:"text",description:"User's email address"},avatarUrl:{control:"text",description:"URL to user's avatar image"}}},Default={args:{userName:"Admin User",userEmail:"admin@casaora.com",avatarUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=Admin"}},WithoutAvatar={args:{userName:"Admin User",userEmail:"admin@casaora.com"}},MinimalInfo={args:{userName:"Admin"}},LongInformation={args:{userName:"Administrator with a Very Long Name",userEmail:"administrator.with.very.long.email@casaora.com",avatarUrl:"https://api.dicebear.com/7.x/avataaars/svg?seed=LongName"}},__namedExportsOrder=["Default","WithoutAvatar","MinimalInfo","LongInformation"]},"./src/components/admin/admin-mobile-sidebar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>AdminMobileSidebar});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_admin_sidebar__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/admin/admin-sidebar.tsx");function AdminMobileSidebar(){const[isOpen,setIsOpen]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(!1);return(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>(document.body.style.overflow=isOpen?"hidden":"",()=>{document.body.style.overflow=""}),[isOpen]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{"aria-label":"Open menu",className:"rounded-lg p-2 text-slate-900 dark:text-slate-100 transition-colors hover:bg-white dark:bg-slate-950 hover:text-slate-900 dark:text-slate-100 lg:hidden",onClick:()=>setIsOpen(!0),type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-6 w-6",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.XkB})}),isOpen&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"fixed inset-0 z-40 bg-[#0f172a]/50 lg:hidden",onClick:()=>setIsOpen(!1)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"fixed top-0 left-0 z-50 h-full transform transition-transform duration-300 lg:hidden "+(isOpen?"translate-x-0":"-translate-x-full"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_admin_sidebar__WEBPACK_IMPORTED_MODULE_4__.a,{onClose:()=>setIsOpen(!1)})})]})}},"./src/components/admin/admin-sidebar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{a:()=>AdminSidebar});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_components_auth_sign_out_button__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/auth/sign-out-button.tsx"),_i18n_routing__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/i18n/routing.ts"),_lib_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/lib/utils.ts");const navSections=[{title:"Core",items:[{href:"/admin",label:"Vetting Queue",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.k1_},{href:"/admin/users",label:"Users",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.K6s},{href:"/admin/disputes",label:"Disputes",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Xix},{href:"/admin/audit-logs",label:"Audit Logs",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.uiJ}]},{title:"Business",items:[{href:"/admin/analytics",label:"Analytics",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.tG2},{href:"/admin/pricing",label:"Pricing",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.cqM}]},{title:"Content",items:[{href:"/admin/content",label:"Content Manager",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.gLZ}]},{title:"Community",items:[{href:"/admin/changelog",label:"Changelog",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Gg5},{href:"/admin/feedback",label:"Feedback",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.mjP},{href:"/admin/roadmap",label:"Roadmap",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.jwd}]}];function AdminSidebar({isCollapsed:controlledCollapsed,onToggleCollapse,onClose}){const pathname=(0,_i18n_routing__WEBPACK_IMPORTED_MODULE_5__.a8)(),[internalCollapsed,setInternalCollapsed]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(!1),isCollapsed=void 0!==controlledCollapsed?controlledCollapsed:internalCollapsed,handleToggle=onToggleCollapse||(()=>setInternalCollapsed(!internalCollapsed));return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("aside",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__.cn)("flex h-screen flex-col border-r bg-white transition-all duration-300","border-slate-200 dark:border-slate-800 dark:bg-slate-950",isCollapsed?"w-16":"w-64"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__.cn)("flex h-20 items-center border-b px-6","border-slate-200 dark:border-slate-800",isCollapsed?"justify-center":"justify-between"),children:[!isCollapsed&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_i18n_routing__WEBPACK_IMPORTED_MODULE_5__.N_,{className:"flex items-center",href:"/",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-lg font-bold tracking-tight text-slate-900 dark:text-slate-100",children:"CASAORA"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{"aria-label":isCollapsed?"Expand sidebar":"Collapse sidebar",className:"rounded-lg p-2 text-slate-600 transition-colors hover:bg-slate-100 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-100",onClick:onClose||handleToggle,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.XkB})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("nav",{className:"flex-1 overflow-y-auto py-6",children:navSections.map((section,idx)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:idx>0?"mt-8":"",children:[!isCollapsed&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-3 px-6",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"text-xs font-semibold uppercase tracking-wider text-slate-600 dark:text-slate-400",children:section.title})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-1 px-3",children:section.items.map(item=>{const active="/admin"===(href=item.href)?pathname===href:pathname.startsWith(href);var href;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_i18n_routing__WEBPACK_IMPORTED_MODULE_5__.N_,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 text-sm font-medium transition-all",active?"bg-slate-100 text-slate-900 dark:bg-slate-800 dark:text-slate-100":"text-slate-600 hover:bg-slate-50 hover:text-slate-900 dark:text-slate-400 dark:hover:bg-slate-800 dark:hover:text-slate-100",isCollapsed?"justify-center":""),href:item.href,onClick:onClose,title:isCollapsed?item.label:void 0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 flex-shrink-0",icon:item.icon}),!isCollapsed&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:item.label})]},item.href)})})]},section.title))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"border-t border-slate-200 p-3 dark:border-slate-800",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_auth_sign_out_button__WEBPACK_IMPORTED_MODULE_4__.c,{isCollapsed,showLabel:!isCollapsed})})]})}try{AdminSidebar.displayName="AdminSidebar",AdminSidebar.__docgenInfo={description:"",displayName:"AdminSidebar",props:{isCollapsed:{defaultValue:null,description:"",name:"isCollapsed",required:!1,type:{name:"boolean"}},onToggleCollapse:{defaultValue:null,description:"",name:"onToggleCollapse",required:!1,type:{name:"() => void"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/admin/admin-sidebar.tsx#AdminSidebar"]={docgenInfo:AdminSidebar.__docgenInfo,name:"AdminSidebar",path:"src/components/admin/admin-sidebar.tsx#AdminSidebar"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/auth/sign-out-button.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{c:()=>SignOutButton});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),auth=__webpack_require__("./src/lib/auth/index.ts"),server_client=__webpack_require__("./src/lib/supabase/server-client.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");var utils=__webpack_require__("./src/lib/utils.ts");function SignOutButton({className,showLabel=!0,isCollapsed=!1}){const[isPending,startTransition]=(0,react.useTransition)(),[isSigningOut,setIsSigningOut]=(0,react.useState)(!1),isLoading=isPending||isSigningOut;return(0,jsx_runtime.jsxs)("button",{"aria-label":isLoading?"Signing out...":"Sign out",className:(0,utils.cn)("flex items-center gap-3 rounded-lg px-3 py-2.5 font-medium text-[#94a3b8] text-sm transition-all hover:bg-[#f8fafc] hover:text-[#64748b]",isCollapsed&&"justify-center",isLoading&&"cursor-wait opacity-50",className),disabled:isLoading,onClick:()=>{setIsSigningOut(!0),startTransition(async()=>{try{await async function signOutAction(){const supabase=await(0,server_client.d)(),{error}=await supabase.auth.signOut();error&&console.error("[SignOut] Error signing out:",error),(0,navigation.redirect)(`${auth.Ei.signIn}?signedOut=true`)}()}catch(_error){setIsSigningOut(!1)}})},title:isCollapsed?isLoading?"Signing out...":"Sign out":void 0,type:"button",children:[(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("relative",isLoading&&"animate-pulse"),children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5 flex-shrink-0",icon:index_min.hc1}),isLoading&&(0,jsx_runtime.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,jsx_runtime.jsx)("div",{className:"h-5 w-5 animate-spin rounded-full border-2 border-[#64748b] border-t-transparent"})})]}),showLabel&&!isCollapsed&&(0,jsx_runtime.jsx)("span",{className:(0,utils.cn)(isLoading&&"opacity-70"),children:isLoading?"Signing out...":"Sign out"})]})}try{SignOutButton.displayName="SignOutButton",SignOutButton.__docgenInfo={description:"Sign Out Button with loading state and visual feedback\nProvides a smooth logout experience with immediate visual response",displayName:"SignOutButton",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},showLabel:{defaultValue:{value:"true"},description:"",name:"showLabel",required:!1,type:{name:"boolean"}},isCollapsed:{defaultValue:{value:"false"},description:"",name:"isCollapsed",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/auth/sign-out-button.tsx#SignOutButton"]={docgenInfo:SignOutButton.__docgenInfo,name:"SignOutButton",path:"src/components/auth/sign-out-button.tsx#SignOutButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/command-palette/command-palette.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{CommandPalette:()=>CommandPalette});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),cmdk__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/cmdk/dist/index.mjs"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_i18n_routing__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/i18n/routing.ts"),_lib_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/lib/utils.ts");function CommandPalette({open,onClose,role,dashboardPath}){const router=(0,_i18n_routing__WEBPACK_IMPORTED_MODULE_5__.rd)(),[search,setSearch]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(""),navigate=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(path=>{router.push(path),onClose()},[router,onClose]),commands=[{id:"goto-dashboard",label:"Go to Dashboard",description:"View your dashboard home",category:"Navigation",action:()=>{dashboardPath&&navigate(dashboardPath)}},{id:"goto-bookings",label:"Go to Bookings",description:"Manage your bookings",category:"Navigation",action:()=>{"customer"===role&&navigate("/dashboard/customer/bookings"),"professional"===role&&navigate("/dashboard/pro/bookings")}},{id:"goto-messages",label:"Go to Messages",description:"View your messages",category:"Navigation",action:()=>{"customer"===role&&navigate("/dashboard/customer/messages"),"professional"===role&&navigate("/dashboard/pro/messages")}},{id:"goto-notifications",label:"Go to Notifications",description:"View your notifications",category:"Navigation",action:()=>{"customer"===role&&navigate("/dashboard/customer/notifications"),"professional"===role&&navigate("/dashboard/pro/notifications")}},{id:"goto-profile",label:"Go to Profile",description:"Edit your profile",category:"Navigation",roles:["professional"],action:()=>navigate("/dashboard/pro/profile")},{id:"goto-favorites",label:"Go to Favorites",description:"View your favorite professionals",category:"Navigation",roles:["customer"],action:()=>navigate("/dashboard/customer/favorites")},{id:"goto-payments",label:"professional"===role?"Go to Finances":"Go to Payments",description:"professional"===role?"View your earnings and payouts":"View your payment history",category:"Navigation",action:()=>{"customer"===role&&navigate("/dashboard/customer/payments"),"professional"===role&&navigate("/dashboard/pro/finances")}},{id:"goto-availability",label:"Go to Availability",description:"Manage your availability",category:"Navigation",roles:["professional"],action:()=>navigate("/dashboard/pro/availability")},{id:"goto-portfolio",label:"Go to Portfolio",description:"Manage your portfolio",category:"Navigation",roles:["professional"],action:()=>navigate("/dashboard/pro/portfolio")},{id:"goto-leads",label:"Go to Lead Queue",description:"View pending booking requests",category:"Navigation",roles:["professional"],action:()=>navigate("/dashboard/pro/leads")},{id:"goto-documents",label:"Go to Documents",description:"Manage your verification documents",category:"Navigation",roles:["professional"],action:()=>navigate("/dashboard/pro/documents")},{id:"goto-onboarding",label:"Go to Onboarding",description:"Complete your professional setup",category:"Navigation",roles:["professional"],action:()=>navigate("/dashboard/pro/onboarding")},{id:"goto-addresses",label:"Go to Addresses",description:"Manage your service addresses",category:"Navigation",roles:["customer"],action:()=>navigate("/dashboard/customer/addresses")},{id:"goto-favorites-customer",label:"Go to Favorites",description:"View your favorite professionals",category:"Navigation",roles:["customer"],action:()=>navigate("/dashboard/customer/favorites")},{id:"goto-recurring-plans",label:"Go to Recurring Plans",description:"Manage your recurring service plans",category:"Navigation",roles:["customer"],action:()=>navigate("/dashboard/customer/recurring-plans")},{id:"create-booking",label:"Find a Professional",description:"Search for professionals and create a booking",category:"Actions",roles:["customer"],action:()=>navigate("/professionals")},{id:"create-availability",label:"Add Availability",description:"Add new availability slots",category:"Actions",roles:["professional"],action:()=>navigate("/dashboard/pro/availability")},{id:"goto-settings",label:"Go to Settings",description:"Manage your account settings",category:"Settings",action:()=>{"customer"===role&&navigate("/dashboard/customer/settings"),"professional"===role&&navigate("/dashboard/pro/settings")}}].filter(cmd=>!cmd.roles||!!role&&cmd.roles.includes(role)),categories=Array.from(new Set(commands.map(cmd=>cmd.category)));return(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{open||setSearch("")},[open]),(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{const down=e=>{"Escape"===e.key&&open&&onClose()};return document.addEventListener("keydown",down),()=>document.removeEventListener("keydown",down)},[open,onClose]),open?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"fixed inset-0 z-60 bg-[#0f172a]/50 backdrop-blur-sm",onClick:onClose,onKeyDown:e=>{"Escape"===e.key&&onClose()},role:"button",tabIndex:0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"-translate-x-1/2 fixed top-[20%] left-1/2 z-60 w-full max-w-2xl",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(cmdk__WEBPACK_IMPORTED_MODULE_3__.uB,{className:"rounded-2xl border border-[#e2e8f0] bg-[#f8fafc] shadow-2xl",shouldFilter:!0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center border-[#e2e8f0] border-b px-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{"aria-hidden":"true",className:"mr-3 h-5 w-5 text-[#94a3b8]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__.uB.Input,{className:"h-14 w-full bg-transparent text-[#0f172a] text-base placeholder:text-[#94a3b8] focus:outline-none",onValueChange:setSearch,placeholder:"Search for commands...",value:search}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{"aria-label":"Close command palette",className:"ml-2 rounded-lg p-2 text-[#94a3b8] transition-colors hover:bg-[#f8fafc] hover:text-[#0f172a]",onClick:onClose,type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.bJi})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(cmdk__WEBPACK_IMPORTED_MODULE_3__.uB.List,{className:"max-h-[400px] overflow-y-auto p-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__.uB.Empty,{className:"px-4 py-8 text-center text-[#94a3b8] text-sm",children:"No results found."}),categories.map(category=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(cmdk__WEBPACK_IMPORTED_MODULE_3__.uB.Group,{className:"[&_[cmdk-group-heading]]:px-3 [&_[cmdk-group-heading]]:py-2 [&_[cmdk-group-heading]]:font-semibold [&_[cmdk-group-heading]]:text-[#94a3b8] [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:uppercase [&_[cmdk-group-heading]]:tracking-wider",heading:category,children:commands.filter(cmd=>cmd.category===category).map(cmd=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(cmdk__WEBPACK_IMPORTED_MODULE_3__.uB.Item,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_6__.cn)("group relative flex cursor-pointer items-center gap-3 rounded-lg px-3 py-3 text-sm transition-colors","text-[#0f172a]","hover:bg-[#f8fafc]","aria-selected:bg-[#64748b] aria-selected:text-[#f8fafc]"),onSelect:()=>{cmd.action()},value:`${cmd.label} ${cmd.description||""}`,children:[cmd.icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-md bg-[#f8fafc] text-[#94a3b8] group-aria-selected:bg-[#f8fafc]/20 group-aria-selected:text-[#f8fafc]",children:cmd.icon}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-1 flex-col gap-0.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium",children:cmd.label}),cmd.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#94a3b8] text-xs group-aria-selected:text-[#f8fafc]/80",children:cmd.description})]})]},cmd.id))},category))]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex items-center justify-between border-[#e2e8f0] border-t px-4 py-3 text-[#94a3b8] text-xs",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("kbd",{className:"rounded border border-[#e2e8f0] bg-[#f8fafc] px-1.5 py-1 font-mono text-xs",children:"↑↓"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"Navigate"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("kbd",{className:"rounded border border-[#e2e8f0] bg-[#f8fafc] px-1.5 py-1 font-mono text-xs",children:"↵"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"Select"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("kbd",{className:"rounded border border-[#e2e8f0] bg-[#f8fafc] px-1.5 py-1 font-mono text-xs",children:"Esc"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:"Close"})]})]})})]})})]}):null}try{CommandPalette.displayName="CommandPalette",CommandPalette.__docgenInfo={description:"",displayName:"CommandPalette",props:{open:{defaultValue:null,description:"",name:"open",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}},role:{defaultValue:null,description:"",name:"role",required:!1,type:{name:"AppRole"}},dashboardPath:{defaultValue:null,description:"",name:"dashboardPath",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/command-palette/command-palette.tsx#CommandPalette"]={docgenInfo:CommandPalette.__docgenInfo,name:"CommandPalette",path:"src/components/command-palette/command-palette.tsx#CommandPalette"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/navigation/breadcrumbs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{B:()=>Breadcrumbs});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),routing=__webpack_require__("./src/i18n/routing.ts"),createLucideIcon=__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js");const House=(0,createLucideIcon.A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]),ChevronRight=(0,createLucideIcon.A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function Breadcrumbs(){const segments=(0,routing.a8)().split("/").filter(Boolean),breadcrumbs=[];let currentPath="";for(let index=0;index<segments.length;index++){const segment=segments[index];if(!segment)continue;currentPath+=`/${segment}`;let label=segment.split("-").map(word=>word.charAt(0).toUpperCase()+word.slice(1)).join(" ");"pro"===segment?label="Professional":"customer"===segment&&(label="Customer"),index===segments.length-1?breadcrumbs.push({label}):breadcrumbs.push({label,href:currentPath})}return 0===breadcrumbs.length?null:(0,jsx_runtime.jsx)("nav",{"aria-label":"Breadcrumb",children:(0,jsx_runtime.jsxs)("ol",{className:"flex items-center gap-2 rounded-lg border border-slate-200 bg-white px-4 py-3 text-sm shadow-sm",children:[(0,jsx_runtime.jsx)("li",{children:(0,jsx_runtime.jsxs)(routing.N_,{className:"flex items-center gap-1.5 text-slate-600 transition hover:text-slate-900",href:"/",children:[(0,jsx_runtime.jsx)(House,{className:"h-4 w-4"}),(0,jsx_runtime.jsx)("span",{children:"Home"})]})}),breadcrumbs.map((item,index)=>(0,jsx_runtime.jsxs)("li",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(ChevronRight,{className:"h-4 w-4 text-slate-400","aria-hidden":"true"}),item.href?(0,jsx_runtime.jsx)(routing.N_,{className:"text-slate-600 transition hover:text-slate-900",href:item.href,children:item.label}):(0,jsx_runtime.jsx)("span",{className:"font-medium text-slate-900",children:item.label})]},index))]})})}},"./src/components/notifications/notifications-sheet.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{NotificationsSheet:()=>NotificationsSheet});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_barrel_optimize_names_formatDistanceToNow_date_fns__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/date-fns/formatDistanceToNow.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_i18n_routing__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/i18n/routing.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");function NotificationsSheet({isOpen,onClose}){const[notifications,setNotifications]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)([]),[loading,setLoading]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!0),[filter,setFilter]=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)("unread"),fetchNotifications=(0,react__WEBPACK_IMPORTED_MODULE_2__.useCallback)(async()=>{try{setLoading(!0);const params=new URLSearchParams({limit:"20",offset:"0"});"unread"===filter&&params.set("unreadOnly","true");const response=await fetch(`/api/notifications/history?${params}`);if(!response.ok)throw new Error("Failed to fetch notifications");const data=await response.json();setNotifications(data.notifications||[])}catch(err){console.warn("Failed to fetch notifications:",err)}finally{setLoading(!1)}},[filter]);(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{isOpen&&fetchNotifications()},[isOpen,fetchNotifications]);const markAsRead=async notificationIds=>{try{if(!(await fetch("/api/notifications/mark-read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({notificationIds})})).ok)throw new Error("Failed to mark as read");setNotifications(prev=>prev.map(notif=>notificationIds.includes(notif.id)?{...notif,read_at:(new Date).toISOString()}:notif))}catch(err){console.warn("Failed to mark notifications as read:",err)}},unreadCount=notifications.filter(n=>!n.read_at).length;return isOpen?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"fixed inset-0 z-40 bg-[#0f172a]/20",onClick:onClose,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),onClose())},role:"button",tabIndex:0}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"fixed top-0 right-0 z-50 flex h-full w-full max-w-md flex-col bg-[#f8fafc] shadow-2xl",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between border-[#e2e8f0] border-b px-6 py-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h2",{className:"font-semibold text-[#0f172a] text-xl",children:"Notifications"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"rounded-lg p-2 text-[#94a3b8] transition hover:bg-[#f8fafc]",onClick:onClose,type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{"aria-hidden":"true",className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{d:"M6 18L18 6M6 6l12 12",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between border-[#e2e8f0] border-b px-6 py-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{className:"font-medium text-sm transition "+("unread"===filter?"text-[#0f172a]":"text-[#94a3b8] hover:text-[#0f172a]"),onClick:()=>setFilter("unread"),type:"button",children:["Unread ",unreadCount>0&&`(${unreadCount})`]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"font-medium text-sm transition "+("all"===filter?"text-[#0f172a]":"text-[#94a3b8] hover:text-[#0f172a]"),onClick:()=>setFilter("all"),type:"button",children:"All"})]}),unreadCount>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"font-medium text-[#64748b] text-xs transition hover:text-[#64748b]",onClick:async()=>{try{if(!(await fetch("/api/notifications/mark-read",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({markAllRead:!0})})).ok)throw new Error("Failed to mark all as read");await fetchNotifications()}catch(err){console.warn("Failed to mark all notifications as read:",err)}},type:"button",children:"Mark all read"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex-1 overflow-y-auto",children:loading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex items-center justify-center p-12",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"h-8 w-8 animate-spin rounded-full border-[#64748b] border-b-2"})}):0===notifications.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col items-center justify-center p-12",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-[#f8fafc]",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("svg",{"aria-hidden":"true",className:"h-8 w-8 text-[#94a3b8]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-semibold text-base text-[#0f172a]",children:"unread"===filter?"All caught up!":"No notifications"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-1 text-center text-[#94a3b8] text-sm",children:"unread"===filter?"You've read all your notifications":"You'll see notifications here when there's activity"})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"divide-y divide-[#e2e8f0]",children:notifications.map(notification=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-4 transition hover:bg-[#f8fafc] "+(notification.read_at?"":"bg-[#64748b]/5"),children:notification.url?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_i18n_routing__WEBPACK_IMPORTED_MODULE_3__.N_,{className:"block",href:notification.url,onClick:()=>{markAsRead([notification.id]),onClose()},children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-semibold text-[#0f172a] text-sm",children:notification.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:notification.body}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-1 text-[#94a3b8] text-xs",children:(0,_barrel_optimize_names_formatDistanceToNow_date_fns__WEBPACK_IMPORTED_MODULE_1__.m)(new Date(notification.created_at),{addSuffix:!0})})]}),!notification.read_at&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-1 h-2 w-2 flex-shrink-0 rounded-full bg-[#64748b]"})]})}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-semibold text-[#0f172a] text-sm",children:notification.title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:notification.body}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-1 text-[#94a3b8] text-xs",children:(0,_barrel_optimize_names_formatDistanceToNow_date_fns__WEBPACK_IMPORTED_MODULE_1__.m)(new Date(notification.created_at),{addSuffix:!0})})]}),!notification.read_at&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"mt-1 h-2 w-2 flex-shrink-0 rounded-full bg-[#64748b] transition hover:bg-[#64748b]",onClick:()=>markAsRead([notification.id]),type:"button"})]})},notification.id))})})]})]}):null}try{NotificationsSheet.displayName="NotificationsSheet",NotificationsSheet.__docgenInfo={description:"",displayName:"NotificationsSheet",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/notifications/notifications-sheet.tsx#NotificationsSheet"]={docgenInfo:NotificationsSheet.__docgenInfo,name:"NotificationsSheet",path:"src/components/notifications/notifications-sheet.tsx#NotificationsSheet"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/use-notification-unread-count.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{b:()=>useNotificationUnreadCount});var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@tanstack/react-query/build/modern/useQuery.js"),_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function useNotificationUnreadCount(){const queryClient=(0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__.jE)(),{data,isLoading,error,refetch}=(0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__.I)({queryKey:["notifications","unread-count"],queryFn:async()=>{const response=await fetch("/api/notifications/unread-count");if(!response.ok)throw new Error("Failed to fetch unread count");return(await response.json()).unreadCount||0},staleTime:3e4,refetchInterval:6e4,refetchOnWindowFocus:!1});return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{Promise.all([__webpack_require__.e(60921),__webpack_require__.e(52136)]).then(__webpack_require__.bind(__webpack_require__,"./src/lib/supabase/browser-client.ts")).then(({createSupabaseBrowserClient})=>{const supabase=createSupabaseBrowserClient(),channel=supabase.channel("notification-unread-count-updates").on("postgres_changes",{event:"*",schema:"public",table:"notifications"},()=>{queryClient.invalidateQueries({queryKey:["notifications","unread-count"]})}).subscribe(status=>{"CHANNEL_ERROR"===status&&console.warn("Notification channel error")});return()=>{supabase.removeChannel(channel)}})},[queryClient]),{unreadCount:data??0,isLoading,error:error?error instanceof Error?error.message:"Unknown error":null,refresh:()=>refetch()}}},"./src/i18n/routing.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{DT:()=>routing,N_:()=>Link,a8:()=>usePathname,rd:()=>useRouter});var next_intl_navigation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next-intl/dist/esm/production/navigation/react-client/createNavigation.js");const routing=(0,__webpack_require__("./node_modules/next-intl/dist/esm/production/routing/defineRouting.js").A)({locales:["en","es"],defaultLocale:"en",localeCookie:{name:"NEXT_LOCALE",maxAge:31536e3}}),{Link,redirect,usePathname,useRouter}=(0,next_intl_navigation__WEBPACK_IMPORTED_MODULE_0__.A)(routing)},"./src/lib/auth/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ei:()=>AUTH_ROUTES,bH:()=>getDashboardRouteForRole,Ht:()=>getSession,JR:()=>requireUser});const DASHBOARD_ROUTES={professional:"/dashboard/pro",customer:"/dashboard/customer",admin:"/admin"};function getDashboardRouteForRole(role,locale){const path=DASHBOARD_ROUTES[role]??"/dashboard";return locale?`/${locale}${path}`:path}const AUTH_ROUTES={signIn:"/auth/sign-in",signUp:"/auth/sign-up",signOut:"/auth/sign-out"};var headers=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/server/react-client/index.js"),routing=__webpack_require__("./src/i18n/routing.ts");const locales=["en","es"],defaultLocale="en";(0,react_client.M6)(async({requestLocale})=>{const locale=await requestLocale,validatedLocale=locale&&locales.includes(locale)?locale:routing.DT.defaultLocale;return{locale:validatedLocale,messages:(await __webpack_require__("./messages lazy recursive ^\\.\\/.*\\.json$")(`./${validatedLocale}.json`)).default}});var server_client=__webpack_require__("./src/lib/supabase/server-client.ts");const LOCALE_PATTERN=/^\/?([a-z]{2})\//;async function getLocaleFromHeaders(){const headersList=await(0,headers.b3)(),match=(headersList.get("x-pathname")||headersList.get("referer")||"").match(LOCALE_PATTERN);return match?.[1]||defaultLocale}async function getSession(){const supabase=await(0,server_client.d)(),{data:{session}}=await supabase.auth.getSession();if(!session?.user)return{user:null};const appUser=await async function fetchProfileForUser(supabase,userId,roleFallback="customer"){const[{data:profile,error:profileError},{data:authUser,error:authError}]=await Promise.all([supabase.from("profiles").select("role, locale, onboarding_status").eq("id",userId).maybeSingle(),supabase.auth.getUser()]);if(profileError)return null;if(authError)return null;const user=authUser.user;if(!user)return null;const role=profile?.role??roleFallback,locale=profile?.locale??"en-US",onboardingStatus=profile?.onboarding_status??"application_pending";return{id:user.id,email:user.email??null,role,locale,onboardingStatus}}(supabase,session.user.id);return{user:appUser}}async function requireUser(options={}){const{allowedRoles,fallback}=options,{user}=await getSession();if(!user){const locale=await getLocaleFromHeaders(),redirectPath=fallback||function getAuthRoute(route,locale){const path=AUTH_ROUTES[route];return locale?`/${locale}${path}`:path}("signIn",locale);(0,navigation.redirect)(redirectPath)}if(allowedRoles&&!allowedRoles.includes(user.role)){const locale=await async function getUserLocale(user){return user?.locale?user.locale.split("-")[0]||defaultLocale:await getLocaleFromHeaders()}(user);(0,navigation.redirect)(getDashboardRouteForRole(user.role,locale))}return user}},"./src/lib/supabase/server-client.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>createSupabaseServerClient});var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@supabase/ssr/dist/module/index.js"),next_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/cache/index.js"),next_headers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js");async function createSupabaseServerClient(){(0,next_cache__WEBPACK_IMPORTED_MODULE_1__.Mo)();const supabaseUrl="https://hvnetxfsrtplextvtwfx.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2bmV0eGZzcnRwbGV4dHZ0d2Z4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1ODc0NTEsImV4cCI6MjA3NzE2MzQ1MX0.7-N06om_ntUuGP1NZ0Zcqz01s975xJfiKno34aIW__o";const cookieStore=await(0,next_headers__WEBPACK_IMPORTED_MODULE_2__.UL)();return(0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl,supabaseKey,{cookies:{getAll:()=>cookieStore.getAll(),setAll(cookiesToSet){try{cookiesToSet.forEach(({name,value,options})=>cookieStore.set(name,value,options))}catch{}}}})}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function cn(...classes){return classes.filter(Boolean).join(" ")}__webpack_require__.d(__webpack_exports__,{cn:()=>cn})}}]);