"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[29214],{"./src/components/admin/user-management-dashboard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>user_management_dashboard_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),user_management_table=__webpack_require__("./src/components/admin/user-management-table.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");const user_management_dashboard_stories={title:"Admin/User Management Dashboard",component:function UserManagementDashboard(){const[users,setUsers]=(0,react.useState)([]),[pagination,setPagination]=(0,react.useState)({page:1,limit:20,total:0,totalPages:0}),[isLoading,setIsLoading]=(0,react.useState)(!0),[roleFilter,setRoleFilter]=(0,react.useState)("all"),[suspensionFilter,setSuspensionFilter]=(0,react.useState)("all"),[search,setSearch]=(0,react.useState)(""),[showFilters,setShowFilters]=(0,react.useState)(!1),loadUsers=(0,react.useCallback)(async()=>{setIsLoading(!0);try{const params=new URLSearchParams({page:pagination.page.toString(),limit:pagination.limit.toString()});"all"!==roleFilter&&params.append("role",roleFilter),"all"!==suspensionFilter&&params.append("suspensionFilter",suspensionFilter),search&&params.append("search",search);const url=`/api/admin/users?${params.toString()}`,response=await fetch(url);if(!response.ok)throw new Error("Failed to fetch users");const data=await response.json();setUsers(data.users),setPagination(data.pagination)}catch(error){console.error("Error loading users:",error)}finally{setIsLoading(!1)}},[pagination.page,pagination.limit,roleFilter,suspensionFilter,search]);(0,react.useEffect)(()=>{loadUsers()},[loadUsers]);const activeFiltersCount=("all"!==roleFilter?1:0)+("all"!==suspensionFilter?1:0);return(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"relative",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"-translate-y-1/2 absolute top-1/2 left-4 h-5 w-5 text-slate-600 dark:text-slate-400",icon:index_min.Bbl}),(0,jsx_runtime.jsx)("input",{className:"w-full rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 py-3 pr-4 pl-12 text-slate-900 dark:text-slate-100 placeholder:text-slate-600 dark:text-slate-400 focus:border-slate-900 dark:border-slate-100 focus:outline-none focus:ring-2 focus:ring-[#64748b]",onChange:e=>{return value=e.target.value,setSearch(value),void setPagination(prev=>({...prev,page:1}));var value},placeholder:"Search by name or email...",type:"text",value:search})]}),(0,jsx_runtime.jsxs)("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-4 py-2 font-medium text-slate-900 dark:text-slate-100 text-sm transition-colors hover:bg-white dark:bg-slate-950",onClick:()=>setShowFilters(!showFilters),children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.YGH}),"Filters",activeFiltersCount>0&&(0,jsx_runtime.jsx)("span",{className:"ml-1 rounded-full bg-slate-900 dark:bg-slate-100 px-2 py-0.5 font-semibold text-white dark:text-slate-950 text-xs",children:activeFiltersCount})]}),showFilters&&(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-6",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-2 block font-semibold text-slate-600 dark:text-slate-400 text-xs uppercase tracking-wider",children:"Role"}),(0,jsx_runtime.jsxs)("select",{className:"w-full rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-4 py-2.5 text-slate-900 dark:text-slate-100 focus:border-slate-900 dark:border-slate-100 focus:outline-none focus:ring-2 focus:ring-[#64748b]",onChange:e=>{setRoleFilter(e.target.value),setPagination(prev=>({...prev,page:1}))},value:roleFilter,children:[(0,jsx_runtime.jsx)("option",{value:"all",children:"All Roles"}),(0,jsx_runtime.jsx)("option",{value:"customer",children:"Customer"}),(0,jsx_runtime.jsx)("option",{value:"professional",children:"Professional"}),(0,jsx_runtime.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-2 block font-semibold text-slate-600 dark:text-slate-400 text-xs uppercase tracking-wider",children:"Account Status"}),(0,jsx_runtime.jsxs)("select",{className:"w-full rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-4 py-2.5 text-slate-900 dark:text-slate-100 focus:border-slate-900 dark:border-slate-100 focus:outline-none focus:ring-2 focus:ring-[#64748b]",onChange:e=>{setSuspensionFilter(e.target.value),setPagination(prev=>({...prev,page:1}))},value:suspensionFilter,children:[(0,jsx_runtime.jsx)("option",{value:"all",children:"All Statuses"}),(0,jsx_runtime.jsx)("option",{value:"active",children:"Active Only"}),(0,jsx_runtime.jsx)("option",{value:"suspended",children:"Suspended"}),(0,jsx_runtime.jsx)("option",{value:"banned",children:"Banned"})]})]})]}),activeFiltersCount>0&&(0,jsx_runtime.jsx)("div",{className:"mt-4 border-slate-200 dark:border-slate-800 border-t pt-4",children:(0,jsx_runtime.jsx)("button",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm transition-colors hover:text-slate-900 dark:text-slate-100",onClick:()=>{setRoleFilter("all"),setSuspensionFilter("all"),setPagination(prev=>({...prev,page:1}))},children:"Clear all filters"})})]})]}),(0,jsx_runtime.jsx)(user_management_table.h,{isLoading,onPageChange:page=>setPagination(prev=>({...prev,page})),pagination,users})]})},parameters:{layout:"centered"},tags:["autodocs"]},Default={args:{}},__namedExportsOrder=["Default"]}}]);