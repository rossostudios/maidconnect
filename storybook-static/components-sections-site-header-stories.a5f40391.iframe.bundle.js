(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[2246],{"./messages lazy recursive ^\\.\\/.*\\.json$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./en.json":["./messages/en.json"],"./es.json":["./messages/es.json",81775]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(()=>__webpack_require__.t(id,19))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./messages lazy recursive ^\\.\\/.*\\.json$",module.exports=webpackAsyncContext},"./node_modules/next-intl/dist/esm/production/server/react-client/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function e(e){return()=>{throw new Error(`\`${e}\` is not supported in Client Components.`)}}function t(...t){return e("getRequestConfig")}__webpack_require__.d(__webpack_exports__,{$:()=>i,M6:()=>t});e("getFormatter"),e("getNow"),e("getTimeZone"),e("getMessages"),e("getLocale");const i=e("getTranslations");e("setRequestLocale")},"./src/components/sections/site-header-client.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>SiteHeaderClient});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),next_intl__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js"),next_intl__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/use-intl/dist/esm/production/react.js"),_components_navigation_language_switcher__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/navigation/language-switcher.tsx"),_components_navigation_mobile_menu__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/navigation/mobile-menu.tsx"),_components_search_search_trigger__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/components/search/search-trigger.tsx"),_i18n_routing__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/i18n/routing.ts"),_lib_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/lib/utils.ts");function SiteHeaderClient({isAuthenticated,dashboardHref,onSignOut}){const t=(0,next_intl__WEBPACK_IMPORTED_MODULE_1__.c3)("navigation"),tp=(0,next_intl__WEBPACK_IMPORTED_MODULE_1__.c3)("product"),locale=(0,next_intl__WEBPACK_IMPORTED_MODULE_2__.Ym)(),menuLinks=[{href:"/professionals",label:t("professionals")},{href:"/pricing",label:t("pricing")},{href:"/contact",label:"Contact"},{href:"/product/booking-platform",label:tp("bookingPlatform.title")},{href:"/product/professional-profiles",label:tp("professionalProfiles.title")},{href:"/product/secure-messaging",label:tp("secureMessaging.title")},{href:"/product/payment-processing",label:tp("paymentProcessing.title")},{href:"/product/reviews-ratings",label:tp("reviewsRatings.title")},{href:"/product/admin-dashboard",label:tp("adminDashboard.title")}],mainLinks=[{href:"/professionals",label:t("professionals")},{href:"/how-it-works",label:"How It Works"},{href:"/pricing",label:t("pricing")},{href:"/contact",label:"Contact"}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("nav",{className:"hidden items-center gap-8 lg:flex",children:[mainLinks.map(link=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_i18n_routing__WEBPACK_IMPORTED_MODULE_6__.N_,{className:"font-medium text-sm transition-colors hover:text-slate-700",href:link.href,children:link.label},link.href)),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_search_search_trigger__WEBPACK_IMPORTED_MODULE_5__.H,{locale,variant:"icon"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_navigation_language_switcher__WEBPACK_IMPORTED_MODULE_3__.c,{}),isAuthenticated?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_i18n_routing__WEBPACK_IMPORTED_MODULE_6__.N_,{href:dashboardHref||"/dashboard",className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_7__.cn)("inline-flex items-center justify-center rounded-full bg-slate-900 px-6 py-2.5 font-semibold text-sm text-white shadow-sm","transition-all hover:bg-slate-700 active:scale-95"),children:t("dashboard")}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_i18n_routing__WEBPACK_IMPORTED_MODULE_6__.N_,{className:"font-medium text-sm transition-colors hover:text-slate-700",href:"/auth/sign-in",children:t("login")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_i18n_routing__WEBPACK_IMPORTED_MODULE_6__.N_,{href:"/auth/sign-up",className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_7__.cn)("inline-flex items-center justify-center rounded-full bg-slate-900 px-6 py-2.5 font-semibold text-sm text-white shadow-sm","transition-all hover:bg-slate-700 active:scale-95"),children:t("signUp")})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"lg:hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_components_navigation_mobile_menu__WEBPACK_IMPORTED_MODULE_4__.q,{dashboardHref,isAuthenticated,links:menuLinks,onSignOut})})]})}try{SiteHeaderClient.displayName="SiteHeaderClient",SiteHeaderClient.__docgenInfo={description:"",displayName:"SiteHeaderClient",props:{isAuthenticated:{defaultValue:null,description:"",name:"isAuthenticated",required:!0,type:{name:"boolean"}},dashboardHref:{defaultValue:null,description:"",name:"dashboardHref",required:!1,type:{name:"string"}},onSignOut:{defaultValue:null,description:"",name:"onSignOut",required:!1,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/sections/site-header-client.tsx#SiteHeaderClient"]={docgenInfo:SiteHeaderClient.__docgenInfo,name:"SiteHeaderClient",path:"src/components/sections/site-header-client.tsx#SiteHeaderClient"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/sections/site-header.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>site_header_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),container=__webpack_require__("./src/components/ui/container.tsx"),routing=__webpack_require__("./src/i18n/routing.ts"),auth=__webpack_require__("./src/lib/auth/index.ts"),site_header_client=__webpack_require__("./src/components/sections/site-header-client.tsx");const site_header_stories={title:"Sections/SiteHeader",component:async function SiteHeader(){const{user}=await(0,auth.Ht)(),dashboardHref=user?(0,auth.bH)(user.role):void 0;return(0,jsx_runtime.jsx)("header",{className:"sticky top-0 z-50 bg-slate-50 py-4 shadow-sm",children:(0,jsx_runtime.jsxs)(container.m,{className:"flex items-center justify-between gap-8 text-slate-900",children:[(0,jsx_runtime.jsx)(routing.N_,{className:"flex items-center gap-2 transition-opacity hover:opacity-80",href:"/",children:(0,jsx_runtime.jsx)("span",{className:"font-semibold text-xl uppercase tracking-wider lg:text-2xl",children:"CASAORA"})}),(0,jsx_runtime.jsx)(site_header_client.i,{dashboardHref,isAuthenticated:!!user})]})})},parameters:{layout:"fullscreen",nextjs:{appDirectory:!0}},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]},"./src/components/ui/container.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{m:()=>Container});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/lib/utils.ts");function Container({className,children}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_1__.cn)("mx-auto w-full max-w-[1320px] px-5 sm:px-8 lg:px-12 xl:px-16",className),children})}try{Container.displayName="Container",Container.__docgenInfo={description:"",displayName:"Container",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/container.tsx#Container"]={docgenInfo:Container.__docgenInfo,name:"Container",path:"src/components/ui/container.tsx#Container"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/auth/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ei:()=>AUTH_ROUTES,bH:()=>getDashboardRouteForRole,Ht:()=>getSession,JR:()=>requireUser});const DASHBOARD_ROUTES={professional:"/dashboard/pro",customer:"/dashboard/customer",admin:"/admin"};function getDashboardRouteForRole(role,locale){const path=DASHBOARD_ROUTES[role]??"/dashboard";return locale?`/${locale}${path}`:path}const AUTH_ROUTES={signIn:"/auth/sign-in",signUp:"/auth/sign-up",signOut:"/auth/sign-out"};var headers=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/server/react-client/index.js"),routing=__webpack_require__("./src/i18n/routing.ts");const locales=["en","es"],defaultLocale="en";(0,react_client.M6)(async({requestLocale})=>{const locale=await requestLocale,validatedLocale=locale&&locales.includes(locale)?locale:routing.DT.defaultLocale;return{locale:validatedLocale,messages:(await __webpack_require__("./messages lazy recursive ^\\.\\/.*\\.json$")(`./${validatedLocale}.json`)).default}});var server_client=__webpack_require__("./src/lib/supabase/server-client.ts");const LOCALE_PATTERN=/^\/?([a-z]{2})\//;async function getLocaleFromHeaders(){const headersList=await(0,headers.b3)(),match=(headersList.get("x-pathname")||headersList.get("referer")||"").match(LOCALE_PATTERN);return match?.[1]||defaultLocale}async function getSession(){const supabase=await(0,server_client.d)(),{data:{session}}=await supabase.auth.getSession();if(!session?.user)return{user:null};const appUser=await async function fetchProfileForUser(supabase,userId,roleFallback="customer"){const[{data:profile,error:profileError},{data:authUser,error:authError}]=await Promise.all([supabase.from("profiles").select("role, locale, onboarding_status").eq("id",userId).maybeSingle(),supabase.auth.getUser()]);if(profileError)return null;if(authError)return null;const user=authUser.user;if(!user)return null;const role=profile?.role??roleFallback,locale=profile?.locale??"en-US",onboardingStatus=profile?.onboarding_status??"application_pending";return{id:user.id,email:user.email??null,role,locale,onboardingStatus}}(supabase,session.user.id);return{user:appUser}}async function requireUser(options={}){const{allowedRoles,fallback}=options,{user}=await getSession();if(!user){const locale=await getLocaleFromHeaders(),redirectPath=fallback||function getAuthRoute(route,locale){const path=AUTH_ROUTES[route];return locale?`/${locale}${path}`:path}("signIn",locale);(0,navigation.redirect)(redirectPath)}if(allowedRoles&&!allowedRoles.includes(user.role)){const locale=await async function getUserLocale(user){return user?.locale?user.locale.split("-")[0]||defaultLocale:await getLocaleFromHeaders()}(user);(0,navigation.redirect)(getDashboardRouteForRole(user.role,locale))}return user}},"./src/lib/supabase/server-client.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>createSupabaseServerClient});var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@supabase/ssr/dist/module/index.js"),next_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/cache/index.js"),next_headers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js");async function createSupabaseServerClient(){(0,next_cache__WEBPACK_IMPORTED_MODULE_1__.Mo)();const supabaseUrl="https://hvnetxfsrtplextvtwfx.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2bmV0eGZzcnRwbGV4dHZ0d2Z4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1ODc0NTEsImV4cCI6MjA3NzE2MzQ1MX0.7-N06om_ntUuGP1NZ0Zcqz01s975xJfiKno34aIW__o";const cookieStore=await(0,next_headers__WEBPACK_IMPORTED_MODULE_2__.UL)();return(0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl,supabaseKey,{cookies:{getAll:()=>cookieStore.getAll(),setAll(cookiesToSet){try{cookiesToSet.forEach(({name,value,options})=>cookieStore.set(name,value,options))}catch{}}}})}}}]);