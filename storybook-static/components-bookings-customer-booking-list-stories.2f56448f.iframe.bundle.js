"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[29512],{"./src/components/bookings/customer-booking-list.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>customer_booking_list_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),dynamic=__webpack_require__("./node_modules/next/dynamic.js"),dynamic_default=__webpack_require__.n(dynamic),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),routing=__webpack_require__("./src/i18n/routing.ts"),dispute_modal=__webpack_require__("./src/components/bookings/dispute-modal.tsx");const CancelBookingModal=dynamic_default()(()=>__webpack_require__.e(46934).then(__webpack_require__.bind(__webpack_require__,"./src/components/bookings/cancel-booking-modal.tsx")).then(mod=>mod.CancelBookingModal),{loadableGenerated:{webpack:()=>["./src/components/bookings/cancel-booking-modal.tsx"]},ssr:!1}),DisputeModal=dynamic_default()(()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,"./src/components/bookings/dispute-modal.tsx")).then(mod=>mod.DisputeModal),{loadableGenerated:{webpack:()=>["./src/components/bookings/dispute-modal.tsx"]},ssr:!1}),RebookModal=dynamic_default()(()=>__webpack_require__.e(6255).then(__webpack_require__.bind(__webpack_require__,"./src/components/bookings/rebook-modal.tsx")).then(mod=>mod.RebookModal),{loadableGenerated:{webpack:()=>["./src/components/bookings/rebook-modal.tsx"]},ssr:!1}),RescheduleBookingModal=dynamic_default()(()=>__webpack_require__.e(86081).then(__webpack_require__.bind(__webpack_require__,"./src/components/bookings/reschedule-booking-modal.tsx")).then(mod=>mod.RescheduleBookingModal),{loadableGenerated:{webpack:()=>["./src/components/bookings/reschedule-booking-modal.tsx"]},ssr:!1});function CustomerBookingList({bookings}){const t=(0,react_client.c3)("dashboard.customer.bookingList");if(0===bookings.length)return(0,jsx_runtime.jsxs)("div",{className:"rounded-2xl border border-[#e2e8f0] bg-[#f8fafc] p-12 text-center",children:[(0,jsx_runtime.jsx)("p",{className:"text-base text-[#94a3b8]",children:t("emptyState.noBookings")}),(0,jsx_runtime.jsxs)("p",{className:"mt-3 text-base text-[#94a3b8]",children:[t("emptyState.browseText")," ",(0,jsx_runtime.jsx)(routing.N_,{className:"font-semibold text-[#64748b] hover:text-[#64748b]",href:"/professionals",children:t("emptyState.professionalDirectory")})," ",t("emptyState.bookFirstService")]})]});const now=new Date,upcomingBookings=bookings.filter(b=>!!b.scheduled_start&&(new Date(b.scheduled_start)>now&&!["declined","canceled","completed"].includes(b.status))),pastBookings=bookings.filter(b=>!b.scheduled_start||(new Date(b.scheduled_start)<=now||["declined","canceled","completed"].includes(b.status)));return(0,jsx_runtime.jsxs)("div",{className:"space-y-8",children:[upcomingBookings.length>0&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"mb-6 font-semibold text-[#0f172a] text-xl",children:t("sections.upcomingServices")}),(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:upcomingBookings.map(booking=>(0,jsx_runtime.jsx)(BookingCard,{booking,isUpcoming:!0},booking.id))})]}),pastBookings.length>0&&(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"mb-6 font-semibold text-[#0f172a] text-xl",children:t("sections.pastServices")}),(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:pastBookings.map(booking=>(0,jsx_runtime.jsx)(BookingCard,{booking,isUpcoming:!1},booking.id))})]})]})}function BookingCard({booking,isUpcoming}){const t=(0,react_client.c3)("dashboard.customer.bookingList"),[showCancelModal,setShowCancelModal]=(0,react.useState)(!1),[showRescheduleModal,setShowRescheduleModal]=(0,react.useState)(!1),[showDisputeModal,setShowDisputeModal]=(0,react.useState)(!1),[showRebookModal,setShowRebookModal]=(0,react.useState)(!1),canReportIssue=(0,dispute_modal.c)(booking,booking.completed_at),scheduled=booking.scheduled_start?new Date(booking.scheduled_start).toLocaleString("en-US",{dateStyle:"medium",timeStyle:"short"}):t("card.notScheduled"),amount=booking.amount_captured||booking.amount_authorized,amountDisplay=amount?new Intl.NumberFormat("es-CO",{style:"currency",currency:booking.currency||"COP",maximumFractionDigits:0}).format(amount/100):"â€”",statusColor={pending_payment:"bg-[#e2e8f0]/30 text-[#0f172a]",authorized:"bg-[#64748b]/10 text-[#64748b]",confirmed:"bg-[#64748b]/10 text-[#64748b]",declined:"bg-[#64748b]/10 text-[#64748b]",canceled:"bg-[#e2e8f0]/30 text-[#0f172a]",completed:"bg-[#f8fafc] text-[#64748b]"}[booking.status]||"bg-[#e2e8f0]/30 text-[#0f172a]",statusTranslationKey=`card.status.${booking.status}`,statusLabel=(booking.status in{pending_payment:1,authorized:1,confirmed:1,declined:1,canceled:1,completed:1,in_progress:1}?t(statusTranslationKey):booking.status.replace(/_/g," "))||booking.status.replace(/_/g," ");return(0,jsx_runtime.jsxs)("div",{className:"rounded-2xl border border-[#e2e8f0] bg-[#f8fafc] p-6 shadow-sm transition hover:shadow-md",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-start justify-between gap-6",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold text-[#0f172a] text-lg",children:booking.service_name||t("card.service")}),(0,jsx_runtime.jsx)("span",{className:`inline-flex items-center rounded-full px-3 py-1 font-semibold text-xs ${statusColor}`,children:statusLabel})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-4 space-y-2 text-base text-[#94a3b8]",children:[(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold text-[#0f172a]",children:t("card.professional")})," ",booking.professional?.full_name||t("card.notAssigned")]}),(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold text-[#0f172a]",children:t("card.scheduled")})," ",scheduled]}),booking.duration_minutes&&(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold text-[#0f172a]",children:t("card.duration")})," ",t("card.minutes",{minutes:booking.duration_minutes})]}),(0,jsx_runtime.jsxs)("p",{children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold text-[#0f172a]",children:t("card.amount")})," ",amountDisplay]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-3",children:[("confirmed"===booking.status||"authorized"===booking.status)&&isUpcoming&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{className:"inline-flex items-center justify-center rounded-full border-2 border-[#e2e8f0] px-5 py-2.5 font-semibold text-[#0f172a] text-sm transition hover:border-[#64748b] hover:text-[#64748b]",onClick:()=>setShowRescheduleModal(!0),type:"button",children:t("card.actions.reschedule")}),(0,jsx_runtime.jsx)("button",{className:"inline-flex items-center justify-center rounded-full border-2 border-[#64748b]/20 px-5 py-2.5 font-semibold text-[#64748b] text-sm transition hover:bg-[#64748b]/10",onClick:()=>setShowCancelModal(!0),type:"button",children:t("card.actions.cancel")})]}),"completed"===booking.status&&!isUpcoming&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("button",{className:"inline-flex items-center justify-center rounded-full bg-[#64748b] px-5 py-2.5 font-semibold text-sm text-[#f8fafc] shadow-[0_4px_12px_rgba(244,74,34,0.22)] transition hover:bg-[#64748b]",type:"button",children:t("card.actions.leaveReview")}),canReportIssue&&(0,jsx_runtime.jsx)("button",{className:"inline-flex items-center justify-center rounded-full border-2 border-[#64748b]/20 px-5 py-2.5 font-semibold text-sm text-[#64748b] transition hover:bg-[#64748b]/10",onClick:()=>setShowDisputeModal(!0),type:"button",children:"Report Issue"}),(0,jsx_runtime.jsx)("button",{className:"inline-flex items-center justify-center rounded-full border-2 border-[#e2e8f0] px-5 py-2.5 font-semibold text-[#0f172a] text-sm transition hover:border-[#64748b] hover:text-[#64748b]",onClick:()=>setShowRebookModal(!0),type:"button",children:t("card.actions.bookAgain")})]})]})]}),(0,jsx_runtime.jsx)(CancelBookingModal,{booking,isOpen:showCancelModal,onClose:()=>setShowCancelModal(!1)}),(0,jsx_runtime.jsx)(RescheduleBookingModal,{booking,isOpen:showRescheduleModal,onClose:()=>setShowRescheduleModal(!1)}),(0,jsx_runtime.jsx)(DisputeModal,{booking,isOpen:showDisputeModal,onClose:()=>setShowDisputeModal(!1)}),(0,jsx_runtime.jsx)(RebookModal,{booking,isOpen:showRebookModal,onClose:()=>setShowRebookModal(!1)})]})}try{CustomerBookingList.displayName="CustomerBookingList",CustomerBookingList.__docgenInfo={description:"",displayName:"CustomerBookingList",props:{bookings:{defaultValue:null,description:"",name:"bookings",required:!0,type:{name:"CustomerBooking[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/bookings/customer-booking-list.tsx#CustomerBookingList"]={docgenInfo:CustomerBookingList.__docgenInfo,name:"CustomerBookingList",path:"src/components/bookings/customer-booking-list.tsx#CustomerBookingList"})}catch(__react_docgen_typescript_loader_error){}const customer_booking_list_stories={title:"Bookings/CustomerBookingList",component:CustomerBookingList,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]},"./src/i18n/routing.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DT:()=>routing,N_:()=>Link,a8:()=>usePathname,rd:()=>useRouter});var next_intl_navigation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next-intl/dist/esm/production/navigation/react-client/createNavigation.js");const routing=(0,__webpack_require__("./node_modules/next-intl/dist/esm/production/routing/defineRouting.js").A)({locales:["en","es"],defaultLocale:"en",localeCookie:{name:"NEXT_LOCALE",maxAge:31536e3}}),{Link,redirect,usePathname,useRouter}=(0,next_intl_navigation__WEBPACK_IMPORTED_MODULE_0__.A)(routing)}}]);