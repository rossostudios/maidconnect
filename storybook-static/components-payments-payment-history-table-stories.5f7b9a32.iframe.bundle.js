"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[24081,88e3],{"./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HugeiconsIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none"},HugeiconsIcon=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({color="currentColor",size=24,strokeWidth,absoluteStrokeWidth=!1,className="",altIcon,showAlt=!1,icon,primaryColor,secondaryColor,disableSecondaryOpacity=!1,...rest},ref)=>{const calculatedStrokeWidth=void 0!==strokeWidth?absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth:void 0,strokeProps=void 0!==calculatedStrokeWidth?{strokeWidth:calculatedStrokeWidth,stroke:"currentColor"}:{},elementProps={ref,...defaultAttributes,width:size,height:size,color:primaryColor||color,className,...strokeProps,...rest},svgChildren=[...showAlt&&altIcon?altIcon:icon].sort(([,a],[,b])=>{const hasOpacityA=void 0!==a.opacity;return void 0!==b.opacity?1:hasOpacityA?-1:0}).map(([tag,attrs])=>{const isSecondaryPath=void 0!==attrs.opacity,pathOpacity=isSecondaryPath&&!disableSecondaryOpacity?attrs.opacity:void 0,fillProps=secondaryColor?{...void 0!==attrs.stroke?{stroke:isSecondaryPath?secondaryColor:primaryColor||color}:{fill:isSecondaryPath?secondaryColor:primaryColor||color}}:{};return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(tag,{...attrs,...strokeProps,...fillProps,opacity:pathOpacity,key:attrs.key})});return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("svg",elementProps,svgChildren)});HugeiconsIcon.displayName="HugeiconsIcon"},"./node_modules/class-variance-authority/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{F:()=>cva});var clsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs");const falsyToString=value=>"boolean"==typeof value?`${value}`:0===value?"0":value,cx=clsx__WEBPACK_IMPORTED_MODULE_0__.$,cva=(base,config)=>props=>{var _config_compoundVariants;if(null==(null==config?void 0:config.variants))return cx(base,null==props?void 0:props.class,null==props?void 0:props.className);const{variants,defaultVariants}=config,getVariantClassNames=Object.keys(variants).map(variant=>{const variantProp=null==props?void 0:props[variant],defaultVariantProp=null==defaultVariants?void 0:defaultVariants[variant];if(null===variantProp)return null;const variantKey=falsyToString(variantProp)||falsyToString(defaultVariantProp);return variants[variant][variantKey]}),propsWithoutUndefined=props&&Object.entries(props).reduce((acc,param)=>{let[key,value]=param;return void 0===value||(acc[key]=value),acc},{}),getCompoundVariantClassNames=null==config||null===(_config_compoundVariants=config.compoundVariants)||void 0===_config_compoundVariants?void 0:_config_compoundVariants.reduce((acc,param)=>{let{class:cvClass,className:cvClassName,...compoundVariantOptions}=param;return Object.entries(compoundVariantOptions).every(param=>{let[key,value]=param;return Array.isArray(value)?value.includes({...defaultVariants,...propsWithoutUndefined}[key]):{...defaultVariants,...propsWithoutUndefined}[key]===value})?[...acc,cvClass,cvClassName]:acc},[]);return cx(base,getVariantClassNames,getCompoundVariantClassNames,null==props?void 0:props.class,null==props?void 0:props.className)}},"./node_modules/clsx/dist/clsx.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function r(e){var t,f,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var o=e.length;for(t=0;t<o;t++)e[t]&&(f=r(e[t]))&&(n&&(n+=" "),n+=f)}else for(f in e)e[f]&&(n&&(n+=" "),n+=f);return n}function clsx(){for(var e,t,f=0,n="",o=arguments.length;f<o;f++)(e=arguments[f])&&(t=r(e))&&(n&&(n+=" "),n+=t);return n}__webpack_require__.d(__webpack_exports__,{$:()=>clsx})},"./src/components/payments/payment-history-table.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Empty:()=>Empty,SingleBooking:()=>SingleBooking,WithBookings:()=>WithBookings,__namedExportsOrder:()=>__namedExportsOrder,default:()=>payment_history_table_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),lib=__webpack_require__("./node_modules/@tanstack/table-core/build/lib/index.mjs"),build_lib=__webpack_require__("./node_modules/@tanstack/react-table/build/lib/index.mjs"),format=__webpack_require__("./node_modules/date-fns/format.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),badge=__webpack_require__("./src/components/ui/badge.tsx"),utils=__webpack_require__("./src/lib/utils.ts");const columnHelper=(0,lib.FB)();function formatCurrency(amount){return amount?new Intl.NumberFormat("en-US",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(amount):"—"}function PaymentHistoryTable({bookings}){const[sorting,setSorting]=(0,react.useState)([{id:"created_at",desc:!0}]),columns=(0,react.useMemo)(()=>[columnHelper.accessor("created_at",{header:"Date",cell:info=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"font-medium text-slate-900",children:(0,format.GP)(new Date(info.getValue()),"MMM dd, yyyy")}),(0,jsx_runtime.jsx)("p",{className:"text-slate-600 text-sm",children:(0,format.GP)(new Date(info.getValue()),"h:mm a")})]})}),columnHelper.accessor("service_name",{header:"Service",cell:info=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"font-medium text-slate-900",children:info.getValue()||"—"}),(0,jsx_runtime.jsx)("p",{className:"text-slate-600 text-sm",children:info.row.original.professional?.full_name||"Unknown professional"})]})}),columnHelper.accessor("amount_authorized",{header:"Amount",cell:info=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"font-medium text-slate-900",children:formatCurrency(info.row.original.amount_captured||info.getValue())}),info.row.original.amount_captured&&info.getValue()!==info.row.original.amount_captured&&(0,jsx_runtime.jsxs)("p",{className:"text-slate-600 text-sm",children:["Auth: ",formatCurrency(info.getValue())]})]})}),columnHelper.accessor("status",{header:"Status",cell:info=>function getStatusBadge(status){const config={completed:{variant:"success",label:"Paid"},confirmed:{variant:"info",label:"Authorized"},pending:{variant:"warning",label:"Pending"},cancelled:{variant:"secondary",label:"Cancelled"},declined:{variant:"danger",label:"Declined"}}[status]||{variant:"default",label:status};return(0,jsx_runtime.jsx)(badge.E,{variant:config.variant,size:"sm",children:config.label})}(info.getValue())}),columnHelper.accessor("stripe_payment_intent_id",{header:"Transaction ID",cell:info=>{const id=info.getValue();return id?(0,jsx_runtime.jsxs)("span",{className:"font-mono text-slate-500 text-xs",children:[id.substring(0,20),"..."]}):(0,jsx_runtime.jsx)("span",{className:"text-slate-500",children:"—"})}})],[]),table=(0,build_lib.N4)({data:bookings,columns,state:{sorting},onSortingChange:setSorting,getCoreRowModel:(0,lib.HT)(),getSortedRowModel:(0,lib.h5)(),getFilteredRowModel:(0,lib.hM)(),getPaginationRowModel:(0,lib.kW)(),initialState:{pagination:{pageSize:10}}});return 0===bookings.length?(0,jsx_runtime.jsx)("div",{className:"py-12 text-center",children:(0,jsx_runtime.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,jsx_runtime.jsx)("div",{className:"mb-4 flex justify-center",children:(0,jsx_runtime.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-100",children:(0,jsx_runtime.jsxs)("svg",{className:"h-6 w-6 text-slate-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,jsx_runtime.jsx)("title",{children:"Credit card icon"}),(0,jsx_runtime.jsx)("path",{d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})]})})}),(0,jsx_runtime.jsx)("h3",{className:"font-semibold text-base text-slate-900",children:"No payment history"}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-slate-600 text-sm",children:"Your payment history will appear here after you make your first booking."})]})}):(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)("div",{className:"overflow-hidden rounded-lg border border-slate-200",children:(0,jsx_runtime.jsx)("div",{className:"overflow-x-auto",children:(0,jsx_runtime.jsxs)("table",{className:"w-full min-w-[640px]",children:[(0,jsx_runtime.jsx)("thead",{className:"bg-slate-50",children:table.getHeaderGroups().map(headerGroup=>(0,jsx_runtime.jsx)("tr",{children:headerGroup.headers.map(header=>(0,jsx_runtime.jsx)("th",{className:"px-6 py-4 text-left font-semibold text-slate-600 text-xs uppercase tracking-wider",children:header.isPlaceholder?null:header.column.getCanSort()?(0,jsx_runtime.jsxs)("button",{className:"flex w-full cursor-pointer select-none items-center gap-2 text-left hover:text-slate-900",onClick:header.column.getToggleSortingHandler(),type:"button",children:[(0,build_lib.Kv)(header.column.columnDef.header,header.getContext()),(0,jsx_runtime.jsx)("span",{className:"text-slate-400",children:{asc:"↑",desc:"↓"}[header.column.getIsSorted()]??"↕"})]}):(0,jsx_runtime.jsx)("div",{children:(0,build_lib.Kv)(header.column.columnDef.header,header.getContext())})},header.id))},headerGroup.id))}),(0,jsx_runtime.jsx)("tbody",{className:"divide-y divide-slate-200 bg-white",children:table.getRowModel().rows.map(row=>(0,jsx_runtime.jsx)("tr",{className:"transition hover:bg-slate-50",children:row.getVisibleCells().map(cell=>(0,jsx_runtime.jsx)("td",{className:"px-6 py-4",children:(0,build_lib.Kv)(cell.column.columnDef.cell,cell.getContext())},cell.id))},row.id))})]})})}),table.getPageCount()>1&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 sm:flex-row",children:[(0,jsx_runtime.jsxs)("div",{className:"text-slate-600 text-sm",children:["Page ",table.getState().pagination.pageIndex+1," of ",table.getPageCount()]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("rounded-lg border px-4 py-2.5 font-semibold text-sm transition","border-slate-300 text-slate-700 hover:border-slate-400 hover:text-slate-900","disabled:opacity-50 disabled:cursor-not-allowed"),disabled:!table.getCanPreviousPage(),onClick:()=>table.previousPage(),type:"button",children:"Previous"}),(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("rounded-lg border px-4 py-2.5 font-semibold text-sm transition","border-slate-300 text-slate-700 hover:border-slate-400 hover:text-slate-900","disabled:opacity-50 disabled:cursor-not-allowed"),disabled:!table.getCanNextPage(),onClick:()=>table.nextPage(),type:"button",children:"Next"})]})]})]})}try{PaymentHistoryTable.displayName="PaymentHistoryTable",PaymentHistoryTable.__docgenInfo={description:"",displayName:"PaymentHistoryTable",props:{bookings:{defaultValue:null,description:"",name:"bookings",required:!0,type:{name:"Booking[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/payments/payment-history-table.tsx#PaymentHistoryTable"]={docgenInfo:PaymentHistoryTable.__docgenInfo,name:"PaymentHistoryTable",path:"src/components/payments/payment-history-table.tsx#PaymentHistoryTable"})}catch(__react_docgen_typescript_loader_error){}const payment_history_table_stories={title:"Payments/PaymentHistoryTable",component:PaymentHistoryTable,parameters:{layout:"padded",docs:{description:{component:"Sortable and paginated payment history table showing all customer transactions."}}},tags:["autodocs"]},sampleBookings=[{id:"1",status:"completed",scheduled_start:"2025-01-15T10:00:00Z",amount_authorized:15e4,amount_captured:15e4,currency:"COP",service_name:"House Cleaning",created_at:"2025-01-10T09:00:00Z",stripe_payment_intent_id:"pi_1234567890abcdefghij",professional:{full_name:"Maria Garcia"}},{id:"2",status:"confirmed",scheduled_start:"2025-01-20T14:00:00Z",amount_authorized:2e5,amount_captured:null,currency:"COP",service_name:"Deep Cleaning",created_at:"2025-01-18T11:30:00Z",stripe_payment_intent_id:"pi_0987654321jihgfedcba",professional:{full_name:"Ana Rodriguez"}},{id:"3",status:"pending",scheduled_start:"2025-01-25T09:00:00Z",amount_authorized:12e4,amount_captured:null,currency:"COP",service_name:"Regular Cleaning",created_at:"2025-01-22T16:45:00Z",stripe_payment_intent_id:"pi_abcdef1234567890ghij",professional:{full_name:"Carmen Lopez"}},{id:"4",status:"cancelled",scheduled_start:null,amount_authorized:18e4,amount_captured:null,currency:"COP",service_name:"Office Cleaning",created_at:"2025-01-08T13:20:00Z",stripe_payment_intent_id:null,professional:{full_name:"Sofia Martinez"}}],WithBookings={args:{bookings:sampleBookings}},Empty={args:{bookings:[]}},SingleBooking={args:{bookings:[sampleBookings[0]]}},__namedExportsOrder=["WithBookings","Empty","SingleBooking"]},"./src/components/ui/badge.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{E:()=>Badge});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),class_variance_authority__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/class-variance-authority/dist/index.mjs"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),_lib_utils__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./src/lib/utils.ts"));const badgeVariants=(0,class_variance_authority__WEBPACK_IMPORTED_MODULE_1__.F)("inline-flex items-center gap-1.5 rounded-full font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2",{variants:{variant:{default:"border border-slate-200 bg-white text-slate-900",secondary:"bg-slate-100 text-slate-700 border border-slate-200",success:"bg-green-50 text-green-700 border border-green-200",warning:"bg-yellow-50 text-yellow-700 border border-yellow-200",danger:"bg-red-50 text-red-700 border border-red-200",info:"bg-blue-50 text-blue-700 border border-blue-200",outline:"border border-slate-300 bg-transparent text-slate-700",pending:"bg-yellow-50 text-yellow-700 border border-yellow-200",confirmed:"bg-blue-50 text-blue-700 border border-blue-200",in_progress:"bg-slate-100 text-slate-700 border border-slate-200",completed:"bg-green-50 text-green-700 border border-green-200",cancelled:"bg-red-50 text-red-700 border border-red-200"},size:{sm:"px-2 py-0.5 text-xs",md:"px-2.5 py-1 text-xs",lg:"px-3 py-1.5 text-sm"}},defaultVariants:{variant:"default",size:"md"}});function Badge({className,variant,size,icon,dot,dotColor,children,...props}){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)(badgeVariants({variant,size}),className),...props,children:[dot&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("h-1.5 w-1.5 rounded-full",dotColor||"bg-current"),"aria-hidden":"true"}),icon&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{icon,className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_4__.cn)("sm"===size&&"h-3 w-3","md"===size&&"h-3.5 w-3.5","lg"===size&&"h-4 w-4")}),children]})}try{Badge.displayName="Badge",Badge.__docgenInfo={description:"",displayName:"Badge",props:{icon:{defaultValue:null,description:"Optional icon to display",name:"icon",required:!1,type:{name:"HugeIcon"}},dot:{defaultValue:null,description:"Show a dot indicator",name:"dot",required:!1,type:{name:"boolean"}},dotColor:{defaultValue:null,description:"Dot color override",name:"dotColor",required:!1,type:{name:"string"}},variant:{defaultValue:null,description:"",name:"variant",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"secondary"'},{value:'"success"'},{value:'"warning"'},{value:'"danger"'},{value:'"info"'},{value:'"outline"'},{value:'"pending"'},{value:'"confirmed"'},{value:'"in_progress"'},{value:'"completed"'},{value:'"cancelled"'}]}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:'"sm"'},{value:'"md"'},{value:'"lg"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/badge.tsx#Badge"]={docgenInfo:Badge.__docgenInfo,name:"Badge",path:"src/components/ui/badge.tsx#Badge"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function cn(...classes){return classes.filter(Boolean).join(" ")}__webpack_require__.d(__webpack_exports__,{cn:()=>cn})}}]);