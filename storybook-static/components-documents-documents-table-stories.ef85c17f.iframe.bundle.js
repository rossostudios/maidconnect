"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[9428],{"./src/components/documents/documents-table.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>documents_table_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),lib=__webpack_require__("./node_modules/@tanstack/table-core/build/lib/index.mjs"),build_lib=__webpack_require__("./node_modules/@tanstack/react-table/build/lib/index.mjs"),format=__webpack_require__("./node_modules/date-fns/format.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const columnHelper=(0,lib.FB)();function formatFileSize(bytes){if(!bytes)return"—";const i=Math.floor(Math.log(bytes)/Math.log(1024));return`${(bytes/1024**i).toFixed(0===i?0:1)} ${["B","KB","MB","GB"][i]}`}function DocumentsTable({documents,labels}){const[sorting,setSorting]=(0,react.useState)([]),[columnFilters,setColumnFilters]=(0,react.useState)([]),columns=(0,react.useMemo)(()=>[columnHelper.accessor("document_type",{header:"Document Type",cell:info=>(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"font-medium text-[#0f172a]",children:labels[info.getValue()]??info.getValue()}),info.row.original.metadata?.note&&(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:info.row.original.metadata.note})]})}),columnHelper.accessor(row=>row.metadata?.originalName,{id:"filename",header:"File Name",cell:info=>(0,jsx_runtime.jsx)("span",{className:"text-[#0f172a]",children:info.getValue()??"Unnamed file"})}),columnHelper.accessor(row=>row.metadata?.size,{id:"size",header:"Size",cell:info=>(0,jsx_runtime.jsx)("span",{className:"text-[#94a3b8]",children:formatFileSize(info.getValue())})}),columnHelper.accessor("uploaded_at",{header:"Uploaded",cell:info=>(0,jsx_runtime.jsx)("span",{className:"text-[#94a3b8]",children:(0,format.GP)(new Date(info.getValue()),"MMM dd, yyyy")})}),columnHelper.accessor("metadata",{id:"mimeType",header:"Type",cell:info=>{const mimeType=info.getValue()?.mimeType||"",extension=mimeType.split("/")[1]?.toUpperCase()||"—";return(0,jsx_runtime.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#e2e8f0] px-2.5 py-1 font-medium text-[#0f172a] text-xs",children:extension})}}),columnHelper.accessor("signedUrl",{header:"Actions",cell:info=>{const url=info.getValue();return url?(0,jsx_runtime.jsxs)("a",{className:"inline-flex items-center gap-1.5 rounded-lg border border-[#e2e8f0] px-3 py-1.5 font-semibold text-[#64748b] text-sm transition hover:border-[#64748b] hover:bg-[#f8fafc]",href:url,rel:"noopener noreferrer",target:"_blank",children:[(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)("path",{d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})}),"Download"]}):(0,jsx_runtime.jsx)("span",{className:"text-[#64748b] text-sm",children:"URL unavailable"})},enableSorting:!1})],[labels]),table=(0,build_lib.N4)({data:documents,columns,state:{sorting,columnFilters},onSortingChange:setSorting,onColumnFiltersChange:setColumnFilters,getCoreRowModel:(0,lib.HT)(),getSortedRowModel:(0,lib.h5)(),getFilteredRowModel:(0,lib.hM)(),getPaginationRowModel:(0,lib.kW)(),initialState:{pagination:{pageSize:10}}});return 0===documents.length?(0,jsx_runtime.jsx)("div",{className:"py-12 text-center",children:(0,jsx_runtime.jsxs)("div",{className:"mx-auto max-w-md",children:[(0,jsx_runtime.jsx)("div",{className:"mb-4 flex justify-center",children:(0,jsx_runtime.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-[#e2e8f0]",children:(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"h-6 w-6 text-[#94a3b8]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)("path",{d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})})})}),(0,jsx_runtime.jsx)("h3",{className:"font-semibold text-base text-[#0f172a]",children:"No documents uploaded"}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:"Upload your verification documents to get started."})]})}):(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-4",children:[(0,jsx_runtime.jsxs)("div",{className:"relative flex-1",children:[(0,jsx_runtime.jsx)("input",{className:"w-full rounded-lg border border-[#e2e8f0] px-4 py-2 pl-10 text-[#0f172a] text-sm placeholder-[#94a3b8] focus:border-[#64748b] focus:outline-none focus:ring-1 focus:ring-[#64748b]",onChange:e=>table.getColumn("document_type")?.setFilterValue(e.target.value),placeholder:"Search documents...",type:"text",value:table.getColumn("document_type")?.getFilterValue()??""}),(0,jsx_runtime.jsx)("svg",{"aria-hidden":"true",className:"absolute top-2.5 left-3 h-5 w-5 text-[#94a3b8]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,jsx_runtime.jsx)("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2})})]}),(0,jsx_runtime.jsxs)("div",{className:"text-[#94a3b8] text-sm",children:[table.getFilteredRowModel().rows.length," document",1!==table.getFilteredRowModel().rows.length?"s":""]})]}),(0,jsx_runtime.jsx)("div",{className:"overflow-hidden rounded-lg border border-[#e2e8f0]",children:(0,jsx_runtime.jsx)("div",{className:"overflow-x-auto",children:(0,jsx_runtime.jsxs)("table",{className:"w-full min-w-[640px]",children:[(0,jsx_runtime.jsx)("thead",{className:"bg-[#f8fafc]",children:table.getHeaderGroups().map(headerGroup=>(0,jsx_runtime.jsx)("tr",{children:headerGroup.headers.map(header=>(0,jsx_runtime.jsx)("th",{className:"px-6 py-4 text-left font-semibold text-[#94a3b8] text-xs uppercase tracking-[0.2em]",children:header.isPlaceholder?null:header.column.getCanSort()?(0,jsx_runtime.jsxs)("button",{className:"flex w-full cursor-pointer select-none items-center gap-2 text-left hover:text-[#64748b]",onClick:header.column.getToggleSortingHandler(),type:"button",children:[(0,build_lib.Kv)(header.column.columnDef.header,header.getContext()),(0,jsx_runtime.jsx)("span",{className:"text-[#94a3b8]",children:{asc:"↑",desc:"↓"}[header.column.getIsSorted()]??"↕"})]}):(0,jsx_runtime.jsx)("div",{children:(0,build_lib.Kv)(header.column.columnDef.header,header.getContext())})},header.id))},headerGroup.id))}),(0,jsx_runtime.jsx)("tbody",{className:"divide-y divide-[#e2e8f0] bg-[#f8fafc]",children:table.getRowModel().rows.map(row=>(0,jsx_runtime.jsx)("tr",{className:"transition hover:bg-[#f8fafc]",children:row.getVisibleCells().map(cell=>(0,jsx_runtime.jsx)("td",{className:"px-6 py-4",children:(0,build_lib.Kv)(cell.column.columnDef.cell,cell.getContext())},cell.id))},row.id))})]})})}),table.getPageCount()>1&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-center justify-between gap-3 sm:flex-row",children:[(0,jsx_runtime.jsxs)("div",{className:"text-[#94a3b8] text-sm",children:["Page ",table.getState().pagination.pageIndex+1," of ",table.getPageCount()]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("button",{className:"rounded-lg border border-[#e2e8f0] px-4 py-2.5 font-semibold text-[#0f172a] text-sm transition hover:border-[#64748b] hover:text-[#64748b] disabled:opacity-50",disabled:!table.getCanPreviousPage(),onClick:()=>table.previousPage(),type:"button",children:"Previous"}),(0,jsx_runtime.jsx)("button",{className:"rounded-lg border border-[#e2e8f0] px-4 py-2.5 font-semibold text-[#0f172a] text-sm transition hover:border-[#64748b] hover:text-[#64748b] disabled:opacity-50",disabled:!table.getCanNextPage(),onClick:()=>table.nextPage(),type:"button",children:"Next"})]})]})]})}try{DocumentsTable.displayName="DocumentsTable",DocumentsTable.__docgenInfo={description:"",displayName:"DocumentsTable",props:{documents:{defaultValue:null,description:"",name:"documents",required:!0,type:{name:"Document[]"}},labels:{defaultValue:null,description:"",name:"labels",required:!0,type:{name:"Record<string, string>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/documents/documents-table.tsx#DocumentsTable"]={docgenInfo:DocumentsTable.__docgenInfo,name:"DocumentsTable",path:"src/components/documents/documents-table.tsx#DocumentsTable"})}catch(__react_docgen_typescript_loader_error){}const documents_table_stories={title:"Documents/DocumentsTable",component:DocumentsTable,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]}}]);