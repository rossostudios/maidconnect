"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[24081,82979],{"./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HugeiconsIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none"},HugeiconsIcon=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({color="currentColor",size=24,strokeWidth,absoluteStrokeWidth=!1,className="",altIcon,showAlt=!1,icon,primaryColor,secondaryColor,disableSecondaryOpacity=!1,...rest},ref)=>{const calculatedStrokeWidth=void 0!==strokeWidth?absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth:void 0,strokeProps=void 0!==calculatedStrokeWidth?{strokeWidth:calculatedStrokeWidth,stroke:"currentColor"}:{},elementProps={ref,...defaultAttributes,width:size,height:size,color:primaryColor||color,className,...strokeProps,...rest},svgChildren=[...showAlt&&altIcon?altIcon:icon].sort(([,a],[,b])=>{const hasOpacityA=void 0!==a.opacity;return void 0!==b.opacity?1:hasOpacityA?-1:0}).map(([tag,attrs])=>{const isSecondaryPath=void 0!==attrs.opacity,pathOpacity=isSecondaryPath&&!disableSecondaryOpacity?attrs.opacity:void 0,fillProps=secondaryColor?{...void 0!==attrs.stroke?{stroke:isSecondaryPath?secondaryColor:primaryColor||color}:{fill:isSecondaryPath?secondaryColor:primaryColor||color}}:{};return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(tag,{...attrs,...strokeProps,...fillProps,opacity:pathOpacity,key:attrs.key})});return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("svg",elementProps,svgChildren)});HugeiconsIcon.displayName="HugeiconsIcon"},"./src/components/professionals/professional-availability-calendar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>professional_availability_calendar_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),availability_calendar=__webpack_require__("./src/components/shared/availability-calendar.tsx");const STATUS_LABELS={pending_payment:"Awaiting payment",authorized:"Authorized hold",confirmed:"Confirmed visit",completed:"Completed",cancelled:"Canceled",canceled:"Canceled"};function ProfessionalAvailabilityCalendar({availability,bookings}){const[selectedDate,setSelectedDate]=(0,react.useState)(new Date),availabilityByWeekday=(0,react.useMemo)(()=>{const map=new Map;for(const slot of availability){const dayKey=normalizeSlotWeekday(slot);dayKey&&(map.has(dayKey)||map.set(dayKey,[]),map.get(dayKey)?.push(slot))}return map},[availability]),bookingsByDate=(0,react.useMemo)(()=>{const map=new Map;for(const booking of bookings){if(!booking.scheduledStart)continue;const key=formatDateKey(new Date(booking.scheduledStart));map.has(key)||map.set(key,[]),map.get(key)?.push(booking)}return map},[bookings]),selectedDateKey=selectedDate?formatDateKey(selectedDate):null,selectedWeekday=selectedDate?normalizeWeekdayLabel(selectedDate):null,selectedAvailability=selectedWeekday?availabilityByWeekday.get(selectedWeekday)??[]:[],selectedBookings=selectedDateKey?bookingsByDate.get(selectedDateKey)??[]:[];return(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("div",{className:"mb-4 flex items-center justify-between",children:(0,jsx_runtime.jsx)("p",{className:"text-[#94a3b8] text-sm",children:"Browse upcoming availability and see booked dates"})}),(0,jsx_runtime.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[minmax(0,_2fr)_minmax(0,_1fr)]",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(availability_calendar.K,{dataSource:{type:"props",availability:[],getDateAvailability:date=>{const weekdayKey=normalizeWeekdayLabel(date),weekdayAvailability=availabilityByWeekday.get(weekdayKey),hasAvailability=Boolean(weekdayAvailability&&weekdayAvailability.length>0),dateKey=formatDateKey(date),dateBookings=bookingsByDate.get(dateKey),hasBookings=Boolean(dateBookings&&dateBookings.length>0);let status;return status=hasAvailability?hasBookings?"limited":"available":"blocked",hasAvailability||hasBookings?{date:dateKey,status,availableSlots:[],bookingCount:dateBookings?.length??0,maxBookings:10}:null}},locale:"es-CO",onDateSelect:setSelectedDate,renderDayContent:(calendarDate,dayAvailability)=>(0,jsx_runtime.jsx)(CustomDayContent,{availability:dayAvailability,bookingsCount:bookingsByDate.get(formatDateKey(calendarDate))?.length??0,date:calendarDate,hasAvailability:Boolean(availabilityByWeekday.get(normalizeWeekdayLabel(calendarDate))?.length)}),selectedDate,showLegend:!1,showTimeSlots:!1,showTodayButton:!0,size:"compact",theme:"professional"})}),(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-[#e2e8f0] bg-[#f8fafc] p-4 text-[#94a3b8] text-sm",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold text-[#0f172a] text-sm",children:"Day details"}),selectedDate&&(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-xs",children:selectedDate.toLocaleDateString("es-CO",{weekday:"long",year:"numeric",month:"short",day:"numeric"})}),selectedAvailability.length>0?(0,jsx_runtime.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold text-[#94a3b8] text-xs uppercase tracking-[0.18em]",children:"Available windows"}),(0,jsx_runtime.jsx)("ul",{className:"space-y-1 text-[#0f172a] text-sm",children:selectedAvailability.map((slot,index)=>(0,jsx_runtime.jsxs)("li",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{"aria-hidden":"true",className:"h-3.5 w-3.5 text-[#64748b]",icon:index_min.p19}),(0,jsx_runtime.jsxs)("span",{children:[slot.start??"--"," – ",slot.end??"--"]}),slot.notes?(0,jsx_runtime.jsxs)("span",{className:"text-[#94a3b8] text-xs",children:["· ",slot.notes]}):null]},`${slot.day}-${slot.start}-${slot.end}-${index}`))})]}):(0,jsx_runtime.jsx)("p",{className:"mt-3 text-[#94a3b8] text-sm",children:"No published availability. Request a booking and we'll coordinate directly with the professional."}),(0,jsx_runtime.jsxs)("div",{className:"mt-4",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold text-[#94a3b8] text-xs uppercase tracking-[0.18em]",children:"Bookings"}),0===selectedBookings.length?(0,jsx_runtime.jsx)("p",{className:"mt-2 text-[#94a3b8] text-sm",children:"No bookings scheduled for this day."}):(0,jsx_runtime.jsx)("ul",{className:"mt-2 space-y-3",children:selectedBookings.slice().sort((a,b)=>(a.scheduledStart?new Date(a.scheduledStart).getTime():0)-(b.scheduledStart?new Date(b.scheduledStart).getTime():0)).map(booking=>{const startDate=booking.scheduledStart?new Date(booking.scheduledStart):null,label=booking.status in STATUS_LABELS?STATUS_LABELS[booking.status]:booking.status??"Booking";return(0,jsx_runtime.jsxs)("li",{className:"rounded-2xl border border-[#e2e8f0] bg-[#f8fafc] px-3 py-2 text-[#94a3b8] text-sm",children:[(0,jsx_runtime.jsxs)("p",{className:"font-semibold text-[#0f172a]",children:[startDate?(date=startDate,date.toLocaleTimeString("es-CO",{hour:"2-digit",minute:"2-digit"})):"Scheduled"," ·"," ",booking.serviceName??"Service"]}),(0,jsx_runtime.jsx)("p",{className:"text-[#94a3b8] text-xs",children:label}),formatCOP(booking.amountEstimated??booking.amountAuthorized??booking.amountCaptured)?(0,jsx_runtime.jsxs)("p",{className:"text-[#94a3b8] text-xs",children:["Hold"," ",formatCOP(booking.amountEstimated??booking.amountAuthorized??booking.amountCaptured)]}):null]},booking.id);var date})})]})]})]})]})}function CustomDayContent({date,availability:_availability,hasAvailability,bookingsCount}){return(0,jsx_runtime.jsxs)("div",{className:"flex h-full min-h-[50px] flex-col items-center justify-center",children:[(0,jsx_runtime.jsx)("span",{className:"font-semibold text-sm",children:date.getDate()}),hasAvailability&&(0,jsx_runtime.jsx)("span",{className:"mt-1 rounded-full bg-[#64748b]/12 px-2 py-0.5 font-semibold text-[#64748b] text-xs",children:"Open"}),bookingsCount>0&&(0,jsx_runtime.jsxs)("span",{className:"mt-1 font-medium text-[#94a3b8] text-[11px]",children:[bookingsCount," ",1===bookingsCount?"booking":"bookings"]})]})}function formatDateKey(date){return`${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,"0")}-${String(date.getDate()).padStart(2,"0")}`}function normalizeWeekdayLabel(date){return date.toLocaleDateString("en-US",{weekday:"long"}).toLowerCase()}function normalizeSlotWeekday(slot){return slot.day?slot.day.toLowerCase():null}function formatCOP(value){return!value||Number.isNaN(value)?null:new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",maximumFractionDigits:0}).format(value)}try{ProfessionalAvailabilityCalendar.displayName="ProfessionalAvailabilityCalendar",ProfessionalAvailabilityCalendar.__docgenInfo={description:"Professional Availability Calendar (V2 - Unified)\n\nThis component replaces the original professional-availability-calendar.tsx\nwith a cleaner implementation that uses the unified calendar component.\n\nKey features:\n- Uses unified calendar component for grid rendering\n- Props-based data source (availability and bookings provided as props)\n- Custom sidebar showing availability windows and bookings\n- Maintains original styling and user experience\n- Shows recurring availability patterns by weekday\n\nMigration: Replace imports of `ProfessionalAvailabilityCalendar` from\n`@/components/professionals/professional-availability-calendar` with this component.",displayName:"ProfessionalAvailabilityCalendar",props:{availability:{defaultValue:null,description:"",name:"availability",required:!0,type:{name:"AvailabilitySlot[]"}},bookings:{defaultValue:null,description:"",name:"bookings",required:!0,type:{name:"ProfessionalBookingSummary[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/professionals/professional-availability-calendar.tsx#ProfessionalAvailabilityCalendar"]={docgenInfo:ProfessionalAvailabilityCalendar.__docgenInfo,name:"ProfessionalAvailabilityCalendar",path:"src/components/professionals/professional-availability-calendar.tsx#ProfessionalAvailabilityCalendar"})}catch(__react_docgen_typescript_loader_error){}const professional_availability_calendar_stories={title:"Professionals/ProfessionalAvailabilityCalendar",component:ProfessionalAvailabilityCalendar,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]}}]);