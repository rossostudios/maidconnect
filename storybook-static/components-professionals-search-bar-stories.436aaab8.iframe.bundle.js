"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[24081,93353],{"./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HugeiconsIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none"},HugeiconsIcon=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({color="currentColor",size=24,strokeWidth,absoluteStrokeWidth=!1,className="",altIcon,showAlt=!1,icon,primaryColor,secondaryColor,disableSecondaryOpacity=!1,...rest},ref)=>{const calculatedStrokeWidth=void 0!==strokeWidth?absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth:void 0,strokeProps=void 0!==calculatedStrokeWidth?{strokeWidth:calculatedStrokeWidth,stroke:"currentColor"}:{},elementProps={ref,...defaultAttributes,width:size,height:size,color:primaryColor||color,className,...strokeProps,...rest},svgChildren=[...showAlt&&altIcon?altIcon:icon].sort(([,a],[,b])=>{const hasOpacityA=void 0!==a.opacity;return void 0!==b.opacity?1:hasOpacityA?-1:0}).map(([tag,attrs])=>{const isSecondaryPath=void 0!==attrs.opacity,pathOpacity=isSecondaryPath&&!disableSecondaryOpacity?attrs.opacity:void 0,fillProps=secondaryColor?{...void 0!==attrs.stroke?{stroke:isSecondaryPath?secondaryColor:primaryColor||color}:{fill:isSecondaryPath?secondaryColor:primaryColor||color}}:{};return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(tag,{...attrs,...strokeProps,...fillProps,opacity:pathOpacity,key:attrs.key})});return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("svg",elementProps,svgChildren)});HugeiconsIcon.displayName="HugeiconsIcon"},"./node_modules/next/dist/client/use-merged-ref.js":(module,exports,__webpack_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"useMergedRef",{enumerable:!0,get:function(){return useMergedRef}});const _react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function useMergedRef(refA,refB){const cleanupA=(0,_react.useRef)(null),cleanupB=(0,_react.useRef)(null);return(0,_react.useCallback)(current=>{if(null===current){const cleanupFnA=cleanupA.current;cleanupFnA&&(cleanupA.current=null,cleanupFnA());const cleanupFnB=cleanupB.current;cleanupFnB&&(cleanupB.current=null,cleanupFnB())}else refA&&(cleanupA.current=applyRef(refA,current)),refB&&(cleanupB.current=applyRef(refB,current))},[refA,refB])}function applyRef(refA,current){if("function"==typeof refA){const cleanup=refA(current);return"function"==typeof cleanup?cleanup:()=>refA(null)}return refA.current=current,()=>{refA.current=null}}("function"==typeof exports.default||"object"==typeof exports.default&&null!==exports.default)&&void 0===exports.default.__esModule&&(Object.defineProperty(exports.default,"__esModule",{value:!0}),Object.assign(exports.default,exports),module.exports=exports.default)},"./src/components/professionals/search-bar.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});const __WEBPACK_DEFAULT_EXPORT__={title:"Professionals/SearchBar",component:__webpack_require__("./src/components/professionals/search-bar.tsx").I,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]},"./src/components/professionals/search-bar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{I:()=>SearchBar});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),next_image__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.js"),react__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_hooks_use_debounce__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/hooks/use-debounce.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");function SearchBar({placeholder="Search by name, service, or location...",onSearch,onSuggestionSelect,className=""}){const[query,setQuery]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(""),[suggestions,setSuggestions]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)([]),[isOpen,setIsOpen]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(!1),[isLoading,setIsLoading]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(!1),[selectedIndex,setSelectedIndex]=(0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(-1),inputRef=(0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null),dropdownRef=(0,react__WEBPACK_IMPORTED_MODULE_4__.useRef)(null),debouncedQuery=(0,_hooks_use_debounce__WEBPACK_IMPORTED_MODULE_5__.d)(query,300);(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{(async()=>{if(debouncedQuery.length<2)return setSuggestions([]),void setIsOpen(!1);setIsLoading(!0);try{const response=await fetch(`/api/professionals/search?q=${encodeURIComponent(debouncedQuery)}&limit=8`);if(!response.ok)throw new Error("Search failed");const data=await response.json();setSuggestions(data.results||[]),setIsOpen(!0),setSelectedIndex(-1)}catch(error){console.error("[SearchBar] Error fetching suggestions:",error),setSuggestions([])}finally{setIsLoading(!1)}})().catch(()=>{})},[debouncedQuery]);const handleSearch=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(()=>{onSearch(query),setIsOpen(!1)},[onSearch,query]),handleSuggestionClick=(0,react__WEBPACK_IMPORTED_MODULE_4__.useCallback)(suggestion=>{setQuery(suggestion.name),setIsOpen(!1),onSuggestionSelect?.(suggestion)},[onSuggestionSelect]);return(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{const handleKeyDown=event=>{if(isOpen&&0!==suggestions.length)switch(event.key){case"ArrowDown":event.preventDefault(),setSelectedIndex(prev=>Math.min(prev+1,suggestions.length-1));break;case"ArrowUp":event.preventDefault(),setSelectedIndex(prev=>Math.max(prev-1,-1));break;case"Enter":event.preventDefault(),selectedIndex>=0&&selectedIndex<suggestions.length?handleSuggestionClick(suggestions[selectedIndex]):handleSearch();break;case"Escape":event.preventDefault(),setIsOpen(!1),setSelectedIndex(-1),inputRef.current?.blur()}};return document.addEventListener("keydown",handleKeyDown),()=>document.removeEventListener("keydown",handleKeyDown)},[isOpen,suggestions,selectedIndex,handleSearch,handleSuggestionClick]),(0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{const handleClickOutside=event=>{!dropdownRef.current||dropdownRef.current.contains(event.target)||inputRef.current?.contains(event.target)||setIsOpen(!1)};return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[]),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:`relative ${className}`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"-translate-y-1/2 pointer-events-none absolute top-1/2 left-5 h-6 w-6 text-[#94a3b8]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Bbl}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{"aria-autocomplete":"list","aria-controls":"search-suggestions","aria-expanded":isOpen,autoComplete:"off",className:"w-full rounded-full border border-[#e2e8f0] bg-[#f8fafc] py-4 pr-14 pl-14 text-base text-[#0f172a] shadow-[#0f172a]/5 shadow-inner outline-none transition focus:border-[#0f172a]",onChange:e=>{return value=e.target.value,setQuery(value),void onSearch(value);var value},onFocus:()=>{suggestions.length>0&&setIsOpen(!0)},placeholder,ref:inputRef,role:"combobox",type:"search",value:query}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"-translate-y-1/2 absolute top-1/2 right-5 flex items-center gap-2",children:[isLoading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 animate-spin text-[#94a3b8]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.H5m}),query.length>0&&!isLoading&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{"aria-label":"Clear search",className:"rounded-full p-1 transition hover:bg-[#e2e8f0]",onClick:()=>{setQuery(""),setSuggestions([]),setIsOpen(!1),onSearch(""),inputRef.current?.focus()},type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 text-[#94a3b8]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.bJi})})]})]}),isOpen&&suggestions.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"absolute top-full z-50 mt-2 w-full overflow-hidden rounded-2xl border border-[#e2e8f0] bg-[#f8fafc] shadow-[0_20px_60px_rgba(22,22,22,0.12)]",id:"search-suggestions",ref:dropdownRef,role:"listbox",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"max-h-[400px] overflow-y-auto",children:suggestions.map((suggestion,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{"aria-selected":index===selectedIndex,className:"flex w-full items-center gap-4 border-[#e2e8f0] border-b px-5 py-4 text-left transition last:border-b-0 "+(index===selectedIndex?"bg-[#f8fafc]":"hover:bg-[#f8fafc]"),onClick:()=>handleSuggestionClick(suggestion),role:"option",type:"button",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"h-12 w-12 flex-shrink-0 overflow-hidden rounded-full border-2 border-[#e2e8f0]",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_3__.A,{alt:suggestion.name,className:"h-full w-full object-cover",height:48,loading:"lazy",src:suggestion.photoUrl,width:48})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"font-semibold text-base text-[#0f172a]",children:highlightMatch(suggestion.name,query)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-[#94a3b8] text-sm",children:suggestion.service?highlightMatch(suggestion.service,query):"Flexible services"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-[#94a3b8] text-xs",children:highlightMatch(suggestion.location,query)})]}),void 0!==suggestion.rating&&suggestion.rating>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-shrink-0 items-center gap-1 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#0f172a]",children:"★"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-semibold text-[#0f172a]",children:suggestion.rating.toFixed(1)}),void 0!==suggestion.reviewCount&&suggestion.reviewCount>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-[#94a3b8]",children:["(",suggestion.reviewCount,")"]})]})]},suggestion.id))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"border-[#e2e8f0] border-t bg-[#f8fafc] px-5 py-3",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-center text-[#94a3b8] text-xs",children:"Use ↑↓ to navigate, Enter to select, Esc to close"})})]}),isOpen&&!isLoading&&query.length>=2&&0===suggestions.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute top-full z-50 mt-2 w-full overflow-hidden rounded-2xl border border-[#e2e8f0] bg-[#f8fafc] shadow-[0_20px_60px_rgba(22,22,22,0.12)]",ref:dropdownRef,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"px-5 py-8 text-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-[#94a3b8] text-sm",children:['No professionals found for "',query,'"']}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-1 text-[#94a3b8] text-xs",children:"Try searching by name, service type, or city"})]})})]})}function highlightMatch(text,query){if(!query||query.length<2)return text;const regex=new RegExp(`(${function escapeRegex(string){return string.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(query)})`,"gi");return text.split(regex).map((part,index)=>regex.test(part)?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("mark",{className:"bg-[#64748b]/10 font-semibold text-[#0f172a]",children:part},index):part)}try{SearchBar.displayName="SearchBar",SearchBar.__docgenInfo={description:"",displayName:"SearchBar",props:{placeholder:{defaultValue:{value:"Search by name, service, or location..."},description:"",name:"placeholder",required:!1,type:{name:"string"}},onSearch:{defaultValue:null,description:"",name:"onSearch",required:!0,type:{name:"(query: string) => void"}},onSuggestionSelect:{defaultValue:null,description:"",name:"onSuggestionSelect",required:!1,type:{name:"(suggestion: SearchSuggestion) => void"}},className:{defaultValue:{value:""},description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/professionals/search-bar.tsx#SearchBar"]={docgenInfo:SearchBar.__docgenInfo,name:"SearchBar",path:"src/components/professionals/search-bar.tsx#SearchBar"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/use-debounce.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>useDebounce});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function useDebounce(value,delay=500){const[debouncedValue,setDebouncedValue]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(value);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{const handler=setTimeout(()=>{setDebouncedValue(value)},delay);return()=>{clearTimeout(handler)}},[value,delay]),debouncedValue}}}]);