/*! For license information please see 53093.64c583bc.iframe.bundle.js.LICENSE.txt */
(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[53093],{"./node_modules/@ai-sdk/react/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y_:()=>useChat});var _messages,_status,_error,_messagesCallbacks,_statusCallbacks,_errorCallbacks,_callMessagesCallbacks,_callStatusCallbacks,_callErrorCallbacks,react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),ai__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/ai/dist/index.mjs"),throttleit__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/throttleit/index.js"),throttleit__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(throttleit__WEBPACK_IMPORTED_MODULE_2__),__accessCheck=(obj,member,msg)=>{if(!member.has(obj))throw TypeError("Cannot "+msg)},__privateGet=(obj,member,getter)=>(__accessCheck(obj,member,"read from private field"),getter?getter.call(obj):member.get(obj)),__privateAdd=(obj,member,value)=>{if(member.has(obj))throw TypeError("Cannot add the same private member more than once");member instanceof WeakSet?member.add(obj):member.set(obj,value)},__privateSet=(obj,member,value,setter)=>(__accessCheck(obj,member,"write to private field"),setter?setter.call(obj,value):member.set(obj,value),value);function throttle(fn,waitMs){return null!=waitMs?throttleit__WEBPACK_IMPORTED_MODULE_2___default()(fn,waitMs):fn}var _state,ReactChatState=class{constructor(initialMessages=[]){__privateAdd(this,_messages,void 0),__privateAdd(this,_status,"ready"),__privateAdd(this,_error,void 0),__privateAdd(this,_messagesCallbacks,new Set),__privateAdd(this,_statusCallbacks,new Set),__privateAdd(this,_errorCallbacks,new Set),this.pushMessage=message=>{__privateSet(this,_messages,__privateGet(this,_messages).concat(message)),__privateGet(this,_callMessagesCallbacks).call(this)},this.popMessage=()=>{__privateSet(this,_messages,__privateGet(this,_messages).slice(0,-1)),__privateGet(this,_callMessagesCallbacks).call(this)},this.replaceMessage=(index,message)=>{__privateSet(this,_messages,[...__privateGet(this,_messages).slice(0,index),this.snapshot(message),...__privateGet(this,_messages).slice(index+1)]),__privateGet(this,_callMessagesCallbacks).call(this)},this.snapshot=value=>structuredClone(value),this["~registerMessagesCallback"]=(onChange,throttleWaitMs)=>{const callback=throttleWaitMs?throttle(onChange,throttleWaitMs):onChange;return __privateGet(this,_messagesCallbacks).add(callback),()=>{__privateGet(this,_messagesCallbacks).delete(callback)}},this["~registerStatusCallback"]=onChange=>(__privateGet(this,_statusCallbacks).add(onChange),()=>{__privateGet(this,_statusCallbacks).delete(onChange)}),this["~registerErrorCallback"]=onChange=>(__privateGet(this,_errorCallbacks).add(onChange),()=>{__privateGet(this,_errorCallbacks).delete(onChange)}),__privateAdd(this,_callMessagesCallbacks,()=>{__privateGet(this,_messagesCallbacks).forEach(callback=>callback())}),__privateAdd(this,_callStatusCallbacks,()=>{__privateGet(this,_statusCallbacks).forEach(callback=>callback())}),__privateAdd(this,_callErrorCallbacks,()=>{__privateGet(this,_errorCallbacks).forEach(callback=>callback())}),__privateSet(this,_messages,initialMessages)}get status(){return __privateGet(this,_status)}set status(newStatus){__privateSet(this,_status,newStatus),__privateGet(this,_callStatusCallbacks).call(this)}get error(){return __privateGet(this,_error)}set error(newError){__privateSet(this,_error,newError),__privateGet(this,_callErrorCallbacks).call(this)}get messages(){return __privateGet(this,_messages)}set messages(newMessages){__privateSet(this,_messages,[...newMessages]),__privateGet(this,_callMessagesCallbacks).call(this)}};_messages=new WeakMap,_status=new WeakMap,_error=new WeakMap,_messagesCallbacks=new WeakMap,_statusCallbacks=new WeakMap,_errorCallbacks=new WeakMap,_callMessagesCallbacks=new WeakMap,_callStatusCallbacks=new WeakMap,_callErrorCallbacks=new WeakMap;var Chat=class extends ai__WEBPACK_IMPORTED_MODULE_1__.vl{constructor({messages,...init}){const state=new ReactChatState(messages);super({...init,state}),__privateAdd(this,_state,void 0),this["~registerMessagesCallback"]=(onChange,throttleWaitMs)=>__privateGet(this,_state)["~registerMessagesCallback"](onChange,throttleWaitMs),this["~registerStatusCallback"]=onChange=>__privateGet(this,_state)["~registerStatusCallback"](onChange),this["~registerErrorCallback"]=onChange=>__privateGet(this,_state)["~registerErrorCallback"](onChange),__privateSet(this,_state,state)}};function useChat({experimental_throttle:throttleWaitMs,resume=!1,...options}={}){const chatRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)("chat"in options?options.chat:new Chat(options));("chat"in options&&options.chat!==chatRef.current||"id"in options&&chatRef.current.id!==options.id)&&(chatRef.current="chat"in options?options.chat:new Chat(options));const optionsId="id"in options?options.id:null,subscribeToMessages=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(update=>chatRef.current["~registerMessagesCallback"](update,throttleWaitMs),[throttleWaitMs,optionsId]),messages=(0,react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore)(subscribeToMessages,()=>chatRef.current.messages,()=>chatRef.current.messages),status=(0,react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore)(chatRef.current["~registerStatusCallback"],()=>chatRef.current.status,()=>chatRef.current.status),error=(0,react__WEBPACK_IMPORTED_MODULE_0__.useSyncExternalStore)(chatRef.current["~registerErrorCallback"],()=>chatRef.current.error,()=>chatRef.current.error),setMessages=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(messagesParam=>{"function"==typeof messagesParam&&(messagesParam=messagesParam(chatRef.current.messages)),chatRef.current.messages=messagesParam},[chatRef]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{resume&&chatRef.current.resumeStream()},[resume,chatRef]),{id:chatRef.current.id,messages,setMessages,sendMessage:chatRef.current.sendMessage,regenerate:chatRef.current.regenerate,clearError:chatRef.current.clearError,stop:chatRef.current.stop,error,resumeStream:chatRef.current.resumeStream,status,addToolResult:chatRef.current.addToolOutput,addToolOutput:chatRef.current.addToolOutput}}_state=new WeakMap},"./node_modules/ai/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{vl:()=>AbstractChat,rL:()=>DefaultChatTransport});var _a,symbol=Symbol.for("vercel.ai.error"),_AISDKError=class _AISDKError extends Error{constructor({name:name14,message,cause}){super(message),this[_a]=!0,this.name=name14,this.cause=cause}static isInstance(error){return _AISDKError.hasMarker(error,"vercel.ai.error")}static hasMarker(error,marker15){const markerSymbol=Symbol.for(marker15);return null!=error&&"object"==typeof error&&markerSymbol in error&&"boolean"==typeof error[markerSymbol]&&!0===error[markerSymbol]}};_a=symbol;var AISDKError=_AISDKError,marker2="vercel.ai.error.AI_APICallError",symbol2=Symbol.for(marker2);var name2="AI_EmptyResponseBodyError",marker3=`vercel.ai.error.${name2}`,symbol3=Symbol.for(marker3);function getErrorMessage(error){return null==error?"unknown error":"string"==typeof error?error:error instanceof Error?error.message:JSON.stringify(error)}var _a4,name3="AI_InvalidArgumentError",marker4=`vercel.ai.error.${name3}`,symbol4=Symbol.for(marker4),InvalidArgumentError=class extends AISDKError{constructor({message,cause,argument}){super({name:name3,message,cause}),this[_a4]=!0,this.argument=argument}static isInstance(error){return AISDKError.hasMarker(error,marker4)}};_a4=symbol4;var name4="AI_InvalidPromptError",marker5=`vercel.ai.error.${name4}`,symbol5=Symbol.for(marker5);var name5="AI_InvalidResponseDataError",marker6=`vercel.ai.error.${name5}`,symbol6=Symbol.for(marker6);var _a7,name6="AI_JSONParseError",marker7=`vercel.ai.error.${name6}`,symbol7=Symbol.for(marker7),dist_JSONParseError=class extends AISDKError{constructor({text,cause}){super({name:name6,message:`JSON parsing failed: Text: ${text}.\nError message: ${getErrorMessage(cause)}`,cause}),this[_a7]=!0,this.text=text}static isInstance(error){return AISDKError.hasMarker(error,marker7)}};_a7=symbol7;var name7="AI_LoadAPIKeyError",marker8=`vercel.ai.error.${name7}`,symbol8=Symbol.for(marker8);var name8="AI_LoadSettingError",marker9=`vercel.ai.error.${name8}`,symbol9=Symbol.for(marker9);var name9="AI_NoContentGeneratedError",marker10=`vercel.ai.error.${name9}`,symbol10=Symbol.for(marker10);var name10="AI_NoSuchModelError",marker11=`vercel.ai.error.${name10}`,symbol11=Symbol.for(marker11);var name11="AI_TooManyEmbeddingValuesForCallError",marker12=`vercel.ai.error.${name11}`,symbol12=Symbol.for(marker12);var _a13,name12="AI_TypeValidationError",marker13=`vercel.ai.error.${name12}`,symbol13=Symbol.for(marker13);_a13=symbol13;var TypeValidationError=class _TypeValidationError extends AISDKError{constructor({value,cause}){super({name:name12,message:`Type validation failed: Value: ${JSON.stringify(value)}.\nError message: ${getErrorMessage(cause)}`,cause}),this[_a13]=!0,this.value=value}static isInstance(error){return AISDKError.hasMarker(error,marker13)}static wrap({value,cause}){return _TypeValidationError.isInstance(cause)&&cause.value===value?cause:new _TypeValidationError({value,cause})}},name13="AI_UnsupportedFunctionalityError",marker14=`vercel.ai.error.${name13}`,symbol14=Symbol.for(marker14);class ParseError extends Error{constructor(message,options){super(message),this.name="ParseError",this.type=options.type,this.field=options.field,this.value=options.value,this.line=options.line}}function noop(_arg){}function createParser(callbacks){if("function"==typeof callbacks)throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent=noop,onError=noop,onRetry=noop,onComment}=callbacks;let id,incompleteLine="",isFirstChunk=!0,data="",eventType="";function parseLine(line){if(""===line)return void function dispatchEvent(){data.length>0&&onEvent({id,event:eventType||void 0,data:data.endsWith("\n")?data.slice(0,-1):data}),id=void 0,data="",eventType=""}();if(line.startsWith(":"))return void(onComment&&onComment(line.slice(line.startsWith(": ")?2:1)));const fieldSeparatorIndex=line.indexOf(":");if(-1!==fieldSeparatorIndex){const field=line.slice(0,fieldSeparatorIndex),offset=" "===line[fieldSeparatorIndex+1]?2:1;return void processField(field,line.slice(fieldSeparatorIndex+offset),line)}processField(line,"",line)}function processField(field,value,line){switch(field){case"event":eventType=value;break;case"data":data=`${data}${value}\n`;break;case"id":id=value.includes("\0")?void 0:value;break;case"retry":/^\d+$/.test(value)?onRetry(parseInt(value,10)):onError(new ParseError(`Invalid \`retry\` value: "${value}"`,{type:"invalid-retry",value,line}));break;default:onError(new ParseError(`Unknown field "${field.length>20?`${field.slice(0,20)}â€¦`:field}"`,{type:"unknown-field",field,value,line}))}}return{feed:function feed(newChunk){const chunk=isFirstChunk?newChunk.replace(/^\xEF\xBB\xBF/,""):newChunk,[complete,incomplete]=function splitLines(chunk){const lines=[];let incompleteLine="",searchIndex=0;for(;searchIndex<chunk.length;){const crIndex=chunk.indexOf("\r",searchIndex),lfIndex=chunk.indexOf("\n",searchIndex);let lineEnd=-1;if(-1!==crIndex&&-1!==lfIndex?lineEnd=Math.min(crIndex,lfIndex):-1!==crIndex?lineEnd=crIndex===chunk.length-1?-1:crIndex:-1!==lfIndex&&(lineEnd=lfIndex),-1===lineEnd){incompleteLine=chunk.slice(searchIndex);break}{const line=chunk.slice(searchIndex,lineEnd);lines.push(line),searchIndex=lineEnd+1,"\r"===chunk[searchIndex-1]&&"\n"===chunk[searchIndex]&&searchIndex++}}return[lines,incompleteLine]}(`${incompleteLine}${chunk}`);for(const line of complete)parseLine(line);incompleteLine=incomplete,isFirstChunk=!1},reset:function reset(options={}){incompleteLine&&options.consume&&parseLine(incompleteLine),isFirstChunk=!0,id=void 0,data="",eventType="",incompleteLine=""}}}class EventSourceParserStream extends TransformStream{constructor({onError,onRetry,onComment}={}){let parser;super({start(controller){parser=createParser({onEvent:event=>{controller.enqueue(event)},onError(error){"terminate"===onError?controller.error(error):"function"==typeof onError&&onError(error)},onRetry,onComment})},transform(chunk){parser.feed(chunk)}})}}var external=__webpack_require__("./node_modules/zod/v4/classic/external.js");var util,objectUtil;!function(util){util.assertEqual=_=>{},util.assertIs=function assertIs(_arg){},util.assertNever=function assertNever(_x){throw new Error},util.arrayToEnum=items=>{const obj={};for(const item of items)obj[item]=item;return obj},util.getValidEnumValues=obj=>{const validKeys=util.objectKeys(obj).filter(k=>"number"!=typeof obj[obj[k]]),filtered={};for(const k of validKeys)filtered[k]=obj[k];return util.objectValues(filtered)},util.objectValues=obj=>util.objectKeys(obj).map(function(e){return obj[e]}),util.objectKeys="function"==typeof Object.keys?obj=>Object.keys(obj):object=>{const keys=[];for(const key in object)Object.prototype.hasOwnProperty.call(object,key)&&keys.push(key);return keys},util.find=(arr,checker)=>{for(const item of arr)if(checker(item))return item},util.isInteger="function"==typeof Number.isInteger?val=>Number.isInteger(val):val=>"number"==typeof val&&Number.isFinite(val)&&Math.floor(val)===val,util.joinValues=function joinValues(array,separator=" | "){return array.map(val=>"string"==typeof val?`'${val}'`:val).join(separator)},util.jsonStringifyReplacer=(_,value)=>"bigint"==typeof value?value.toString():value}(util||(util={})),function(objectUtil){objectUtil.mergeShapes=(first,second)=>({...first,...second})}(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=data=>{switch(typeof data){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return Number.isNaN(data)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(data)?ZodParsedType.array:null===data?ZodParsedType.null:data.then&&"function"==typeof data.then&&data.catch&&"function"==typeof data.catch?ZodParsedType.promise:"undefined"!=typeof Map&&data instanceof Map?ZodParsedType.map:"undefined"!=typeof Set&&data instanceof Set?ZodParsedType.set:"undefined"!=typeof Date&&data instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class ZodError extends Error{get errors(){return this.issues}constructor(issues){super(),this.issues=[],this.addIssue=sub=>{this.issues=[...this.issues,sub]},this.addIssues=(subs=[])=>{this.issues=[...this.issues,...subs]};const actualProto=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,actualProto):this.__proto__=actualProto,this.name="ZodError",this.issues=issues}format(_mapper){const mapper=_mapper||function(issue){return issue.message},fieldErrors={_errors:[]},processError=error=>{for(const issue of error.issues)if("invalid_union"===issue.code)issue.unionErrors.map(processError);else if("invalid_return_type"===issue.code)processError(issue.returnTypeError);else if("invalid_arguments"===issue.code)processError(issue.argumentsError);else if(0===issue.path.length)fieldErrors._errors.push(mapper(issue));else{let curr=fieldErrors,i=0;for(;i<issue.path.length;){const el=issue.path[i];i===issue.path.length-1?(curr[el]=curr[el]||{_errors:[]},curr[el]._errors.push(mapper(issue))):curr[el]=curr[el]||{_errors:[]},curr=curr[el],i++}}};return processError(this),fieldErrors}static assert(value){if(!(value instanceof ZodError))throw new Error(`Not a ZodError: ${value}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return 0===this.issues.length}flatten(mapper=issue=>issue.message){const fieldErrors=Object.create(null),formErrors=[];for(const sub of this.issues)if(sub.path.length>0){const firstEl=sub.path[0];fieldErrors[firstEl]=fieldErrors[firstEl]||[],fieldErrors[firstEl].push(mapper(sub))}else formErrors.push(mapper(sub));return{formErrors,fieldErrors}}get formErrors(){return this.flatten()}}ZodError.create=issues=>new ZodError(issues);const en=(issue,_ctx)=>{let message;switch(issue.code){case ZodIssueCode.invalid_type:message=issue.received===ZodParsedType.undefined?"Required":`Expected ${issue.expected}, received ${issue.received}`;break;case ZodIssueCode.invalid_literal:message=`Invalid literal value, expected ${JSON.stringify(issue.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:message=`Unrecognized key(s) in object: ${util.joinValues(issue.keys,", ")}`;break;case ZodIssueCode.invalid_union:message="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:message=`Invalid discriminator value. Expected ${util.joinValues(issue.options)}`;break;case ZodIssueCode.invalid_enum_value:message=`Invalid enum value. Expected ${util.joinValues(issue.options)}, received '${issue.received}'`;break;case ZodIssueCode.invalid_arguments:message="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:message="Invalid function return type";break;case ZodIssueCode.invalid_date:message="Invalid date";break;case ZodIssueCode.invalid_string:"object"==typeof issue.validation?"includes"in issue.validation?(message=`Invalid input: must include "${issue.validation.includes}"`,"number"==typeof issue.validation.position&&(message=`${message} at one or more positions greater than or equal to ${issue.validation.position}`)):"startsWith"in issue.validation?message=`Invalid input: must start with "${issue.validation.startsWith}"`:"endsWith"in issue.validation?message=`Invalid input: must end with "${issue.validation.endsWith}"`:util.assertNever(issue.validation):message="regex"!==issue.validation?`Invalid ${issue.validation}`:"Invalid";break;case ZodIssueCode.too_small:message="array"===issue.type?`Array must contain ${issue.exact?"exactly":issue.inclusive?"at least":"more than"} ${issue.minimum} element(s)`:"string"===issue.type?`String must contain ${issue.exact?"exactly":issue.inclusive?"at least":"over"} ${issue.minimum} character(s)`:"number"===issue.type||"bigint"===issue.type?`Number must be ${issue.exact?"exactly equal to ":issue.inclusive?"greater than or equal to ":"greater than "}${issue.minimum}`:"date"===issue.type?`Date must be ${issue.exact?"exactly equal to ":issue.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(issue.minimum))}`:"Invalid input";break;case ZodIssueCode.too_big:message="array"===issue.type?`Array must contain ${issue.exact?"exactly":issue.inclusive?"at most":"less than"} ${issue.maximum} element(s)`:"string"===issue.type?`String must contain ${issue.exact?"exactly":issue.inclusive?"at most":"under"} ${issue.maximum} character(s)`:"number"===issue.type?`Number must be ${issue.exact?"exactly":issue.inclusive?"less than or equal to":"less than"} ${issue.maximum}`:"bigint"===issue.type?`BigInt must be ${issue.exact?"exactly":issue.inclusive?"less than or equal to":"less than"} ${issue.maximum}`:"date"===issue.type?`Date must be ${issue.exact?"exactly":issue.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(issue.maximum))}`:"Invalid input";break;case ZodIssueCode.custom:message="Invalid input";break;case ZodIssueCode.invalid_intersection_types:message="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:message=`Number must be a multiple of ${issue.multipleOf}`;break;case ZodIssueCode.not_finite:message="Number must be finite";break;default:message=_ctx.defaultError,util.assertNever(issue)}return{message}};let overrideErrorMap=en;function getErrorMap(){return overrideErrorMap}const makeIssue=params=>{const{data,path,errorMaps,issueData}=params,fullPath=[...path,...issueData.path||[]],fullIssue={...issueData,path:fullPath};if(void 0!==issueData.message)return{...issueData,path:fullPath,message:issueData.message};let errorMessage="";const maps=errorMaps.filter(m=>!!m).slice().reverse();for(const map of maps)errorMessage=map(fullIssue,{data,defaultError:errorMessage}).message;return{...issueData,path:fullPath,message:errorMessage}};function addIssueToContext(ctx,issueData){const overrideMap=getErrorMap(),issue=makeIssue({issueData,data:ctx.data,path:ctx.path,errorMaps:[ctx.common.contextualErrorMap,ctx.schemaErrorMap,overrideMap,overrideMap===en?void 0:en].filter(x=>!!x)});ctx.common.issues.push(issue)}class ParseStatus{constructor(){this.value="valid"}dirty(){"valid"===this.value&&(this.value="dirty")}abort(){"aborted"!==this.value&&(this.value="aborted")}static mergeArray(status,results){const arrayValue=[];for(const s of results){if("aborted"===s.status)return parseUtil_INVALID;"dirty"===s.status&&status.dirty(),arrayValue.push(s.value)}return{status:status.value,value:arrayValue}}static async mergeObjectAsync(status,pairs){const syncPairs=[];for(const pair of pairs){const key=await pair.key,value=await pair.value;syncPairs.push({key,value})}return ParseStatus.mergeObjectSync(status,syncPairs)}static mergeObjectSync(status,pairs){const finalObject={};for(const pair of pairs){const{key,value}=pair;if("aborted"===key.status)return parseUtil_INVALID;if("aborted"===value.status)return parseUtil_INVALID;"dirty"===key.status&&status.dirty(),"dirty"===value.status&&status.dirty(),"__proto__"===key.value||void 0===value.value&&!pair.alwaysSet||(finalObject[key.value]=value.value)}return{status:status.value,value:finalObject}}}const parseUtil_INVALID=Object.freeze({status:"aborted"}),DIRTY=value=>({status:"dirty",value}),OK=value=>({status:"valid",value}),isAborted=x=>"aborted"===x.status,isDirty=x=>"dirty"===x.status,isValid=x=>"valid"===x.status,isAsync=x=>"undefined"!=typeof Promise&&x instanceof Promise;var errorUtil;!function(errorUtil){errorUtil.errToObj=message=>"string"==typeof message?{message}:message||{},errorUtil.toString=message=>"string"==typeof message?message:message?.message}(errorUtil||(errorUtil={}));class ParseInputLazyPath{constructor(parent,value,path,key){this._cachedPath=[],this.parent=parent,this.data=value,this._path=path,this._key=key}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(ctx,result)=>{if(isValid(result))return{success:!0,data:result.value};if(!ctx.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const error=new ZodError(ctx.common.issues);return this._error=error,this._error}}};function processCreateParams(params){if(!params)return{};const{errorMap,invalid_type_error,required_error,description}=params;if(errorMap&&(invalid_type_error||required_error))throw new Error('Can\'t use "invalid_type_error" or "required_error" in conjunction with custom error map.');if(errorMap)return{errorMap,description};return{errorMap:(iss,ctx)=>{const{message}=params;return"invalid_enum_value"===iss.code?{message:message??ctx.defaultError}:void 0===ctx.data?{message:message??required_error??ctx.defaultError}:"invalid_type"!==iss.code?{message:ctx.defaultError}:{message:message??invalid_type_error??ctx.defaultError}},description}}class ZodType{get description(){return this._def.description}_getType(input){return getParsedType(input.data)}_getOrReturnCtx(input,ctx){return ctx||{common:input.parent.common,data:input.data,parsedType:getParsedType(input.data),schemaErrorMap:this._def.errorMap,path:input.path,parent:input.parent}}_processInputParams(input){return{status:new ParseStatus,ctx:{common:input.parent.common,data:input.data,parsedType:getParsedType(input.data),schemaErrorMap:this._def.errorMap,path:input.path,parent:input.parent}}}_parseSync(input){const result=this._parse(input);if(isAsync(result))throw new Error("Synchronous parse encountered promise.");return result}_parseAsync(input){const result=this._parse(input);return Promise.resolve(result)}parse(data,params){const result=this.safeParse(data,params);if(result.success)return result.data;throw result.error}safeParse(data,params){const ctx={common:{issues:[],async:params?.async??!1,contextualErrorMap:params?.errorMap},path:params?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data,parsedType:getParsedType(data)},result=this._parseSync({data,path:ctx.path,parent:ctx});return handleResult(ctx,result)}"~validate"(data){const ctx={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data,parsedType:getParsedType(data)};if(!this["~standard"].async)try{const result=this._parseSync({data,path:[],parent:ctx});return isValid(result)?{value:result.value}:{issues:ctx.common.issues}}catch(err){err?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),ctx.common={issues:[],async:!0}}return this._parseAsync({data,path:[],parent:ctx}).then(result=>isValid(result)?{value:result.value}:{issues:ctx.common.issues})}async parseAsync(data,params){const result=await this.safeParseAsync(data,params);if(result.success)return result.data;throw result.error}async safeParseAsync(data,params){const ctx={common:{issues:[],contextualErrorMap:params?.errorMap,async:!0},path:params?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data,parsedType:getParsedType(data)},maybeAsyncResult=this._parse({data,path:ctx.path,parent:ctx}),result=await(isAsync(maybeAsyncResult)?maybeAsyncResult:Promise.resolve(maybeAsyncResult));return handleResult(ctx,result)}refine(check,message){const getIssueProperties=val=>"string"==typeof message||void 0===message?{message}:"function"==typeof message?message(val):message;return this._refinement((val,ctx)=>{const result=check(val),setError=()=>ctx.addIssue({code:ZodIssueCode.custom,...getIssueProperties(val)});return"undefined"!=typeof Promise&&result instanceof Promise?result.then(data=>!!data||(setError(),!1)):!!result||(setError(),!1)})}refinement(check,refinementData){return this._refinement((val,ctx)=>!!check(val)||(ctx.addIssue("function"==typeof refinementData?refinementData(val,ctx):refinementData),!1))}_refinement(refinement){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement}})}superRefine(refinement){return this._refinement(refinement)}constructor(def){this.spa=this.safeParseAsync,this._def=def,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:data=>this["~validate"](data)}}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this)}promise(){return ZodPromise.create(this,this._def)}or(option){return ZodUnion.create([this,option],this._def)}and(incoming){return ZodIntersection.create(this,incoming,this._def)}transform(transform){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform}})}default(def){const defaultValueFunc="function"==typeof def?def:()=>def;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:defaultValueFunc,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(def){const catchValueFunc="function"==typeof def?def:()=>def;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:catchValueFunc,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(description){return new(0,this.constructor)({...this._def,description})}pipe(target){return ZodPipeline.create(this,target)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/i,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,jwtRegex=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i;let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv4CidrRegex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,ipv6Regex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,ipv6CidrRegex=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,base64urlRegex=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(args){let secondsRegexSource="[0-5]\\d";args.precision?secondsRegexSource=`${secondsRegexSource}\\.\\d{${args.precision}}`:null==args.precision&&(secondsRegexSource=`${secondsRegexSource}(\\.\\d+)?`);return`([01]\\d|2[0-3]):[0-5]\\d(:${secondsRegexSource})${args.precision?"+":"?"}`}function timeRegex(args){return new RegExp(`^${timeRegexSource(args)}$`)}function datetimeRegex(args){let regex=`${dateRegexSource}T${timeRegexSource(args)}`;const opts=[];return opts.push(args.local?"Z?":"Z"),args.offset&&opts.push("([+-]\\d{2}:?\\d{2})"),regex=`${regex}(${opts.join("|")})`,new RegExp(`^${regex}$`)}function isValidIP(ip,version){return!("v4"!==version&&version||!ipv4Regex.test(ip))||!("v6"!==version&&version||!ipv6Regex.test(ip))}function isValidJWT(jwt,alg){if(!jwtRegex.test(jwt))return!1;try{const[header]=jwt.split(".");if(!header)return!1;const base64=header.replace(/-/g,"+").replace(/_/g,"/").padEnd(header.length+(4-header.length%4)%4,"="),decoded=JSON.parse(atob(base64));return"object"==typeof decoded&&null!==decoded&&((!("typ"in decoded)||"JWT"===decoded?.typ)&&(!!decoded.alg&&(!alg||decoded.alg===alg)))}catch{return!1}}function isValidCidr(ip,version){return!("v4"!==version&&version||!ipv4CidrRegex.test(ip))||!("v6"!==version&&version||!ipv6CidrRegex.test(ip))}class ZodString extends ZodType{_parse(input){this._def.coerce&&(input.data=String(input.data));if(this._getType(input)!==ZodParsedType.string){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:ctx.parsedType}),parseUtil_INVALID}const status=new ParseStatus;let ctx;for(const check of this._def.checks)if("min"===check.kind)input.data.length<check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"string",inclusive:!0,exact:!1,message:check.message}),status.dirty());else if("max"===check.kind)input.data.length>check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"string",inclusive:!0,exact:!1,message:check.message}),status.dirty());else if("length"===check.kind){const tooBig=input.data.length>check.value,tooSmall=input.data.length<check.value;(tooBig||tooSmall)&&(ctx=this._getOrReturnCtx(input,ctx),tooBig?addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"string",inclusive:!0,exact:!0,message:check.message}):tooSmall&&addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"string",inclusive:!0,exact:!0,message:check.message}),status.dirty())}else if("email"===check.kind)emailRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"email",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("emoji"===check.kind)emojiRegex||(emojiRegex=new RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),emojiRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"emoji",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("uuid"===check.kind)uuidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"uuid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("nanoid"===check.kind)nanoidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("cuid"===check.kind)cuidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"cuid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("cuid2"===check.kind)cuid2Regex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("ulid"===check.kind)ulidRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"ulid",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty());else if("url"===check.kind)try{new URL(input.data)}catch{ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"url",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()}else if("regex"===check.kind){check.regex.lastIndex=0;check.regex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"regex",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty())}else if("trim"===check.kind)input.data=input.data.trim();else if("includes"===check.kind)input.data.includes(check.value,check.position)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:{includes:check.value,position:check.position},message:check.message}),status.dirty());else if("toLowerCase"===check.kind)input.data=input.data.toLowerCase();else if("toUpperCase"===check.kind)input.data=input.data.toUpperCase();else if("startsWith"===check.kind)input.data.startsWith(check.value)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:{startsWith:check.value},message:check.message}),status.dirty());else if("endsWith"===check.kind)input.data.endsWith(check.value)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:{endsWith:check.value},message:check.message}),status.dirty());else if("datetime"===check.kind){datetimeRegex(check).test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:"datetime",message:check.message}),status.dirty())}else if("date"===check.kind){dateRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:"date",message:check.message}),status.dirty())}else if("time"===check.kind){timeRegex(check).test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_string,validation:"time",message:check.message}),status.dirty())}else"duration"===check.kind?durationRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"duration",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()):"ip"===check.kind?isValidIP(input.data,check.version)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"ip",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()):"jwt"===check.kind?isValidJWT(input.data,check.alg)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"jwt",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()):"cidr"===check.kind?isValidCidr(input.data,check.version)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"cidr",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()):"base64"===check.kind?base64Regex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"base64",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()):"base64url"===check.kind?base64urlRegex.test(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{validation:"base64url",code:ZodIssueCode.invalid_string,message:check.message}),status.dirty()):util.assertNever(check);return{status:status.value,value:input.data}}_regex(regex,validation,message){return this.refinement(data=>regex.test(data),{validation,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(message)})}_addCheck(check){return new ZodString({...this._def,checks:[...this._def.checks,check]})}email(message){return this._addCheck({kind:"email",...errorUtil.errToObj(message)})}url(message){return this._addCheck({kind:"url",...errorUtil.errToObj(message)})}emoji(message){return this._addCheck({kind:"emoji",...errorUtil.errToObj(message)})}uuid(message){return this._addCheck({kind:"uuid",...errorUtil.errToObj(message)})}nanoid(message){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(message)})}cuid(message){return this._addCheck({kind:"cuid",...errorUtil.errToObj(message)})}cuid2(message){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(message)})}ulid(message){return this._addCheck({kind:"ulid",...errorUtil.errToObj(message)})}base64(message){return this._addCheck({kind:"base64",...errorUtil.errToObj(message)})}base64url(message){return this._addCheck({kind:"base64url",...errorUtil.errToObj(message)})}jwt(options){return this._addCheck({kind:"jwt",...errorUtil.errToObj(options)})}ip(options){return this._addCheck({kind:"ip",...errorUtil.errToObj(options)})}cidr(options){return this._addCheck({kind:"cidr",...errorUtil.errToObj(options)})}datetime(options){return"string"==typeof options?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:options}):this._addCheck({kind:"datetime",precision:void 0===options?.precision?null:options?.precision,offset:options?.offset??!1,local:options?.local??!1,...errorUtil.errToObj(options?.message)})}date(message){return this._addCheck({kind:"date",message})}time(options){return"string"==typeof options?this._addCheck({kind:"time",precision:null,message:options}):this._addCheck({kind:"time",precision:void 0===options?.precision?null:options?.precision,...errorUtil.errToObj(options?.message)})}duration(message){return this._addCheck({kind:"duration",...errorUtil.errToObj(message)})}regex(regex,message){return this._addCheck({kind:"regex",regex,...errorUtil.errToObj(message)})}includes(value,options){return this._addCheck({kind:"includes",value,position:options?.position,...errorUtil.errToObj(options?.message)})}startsWith(value,message){return this._addCheck({kind:"startsWith",value,...errorUtil.errToObj(message)})}endsWith(value,message){return this._addCheck({kind:"endsWith",value,...errorUtil.errToObj(message)})}min(minLength,message){return this._addCheck({kind:"min",value:minLength,...errorUtil.errToObj(message)})}max(maxLength,message){return this._addCheck({kind:"max",value:maxLength,...errorUtil.errToObj(message)})}length(len,message){return this._addCheck({kind:"length",value:len,...errorUtil.errToObj(message)})}nonempty(message){return this.min(1,errorUtil.errToObj(message))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(ch=>"datetime"===ch.kind)}get isDate(){return!!this._def.checks.find(ch=>"date"===ch.kind)}get isTime(){return!!this._def.checks.find(ch=>"time"===ch.kind)}get isDuration(){return!!this._def.checks.find(ch=>"duration"===ch.kind)}get isEmail(){return!!this._def.checks.find(ch=>"email"===ch.kind)}get isURL(){return!!this._def.checks.find(ch=>"url"===ch.kind)}get isEmoji(){return!!this._def.checks.find(ch=>"emoji"===ch.kind)}get isUUID(){return!!this._def.checks.find(ch=>"uuid"===ch.kind)}get isNANOID(){return!!this._def.checks.find(ch=>"nanoid"===ch.kind)}get isCUID(){return!!this._def.checks.find(ch=>"cuid"===ch.kind)}get isCUID2(){return!!this._def.checks.find(ch=>"cuid2"===ch.kind)}get isULID(){return!!this._def.checks.find(ch=>"ulid"===ch.kind)}get isIP(){return!!this._def.checks.find(ch=>"ip"===ch.kind)}get isCIDR(){return!!this._def.checks.find(ch=>"cidr"===ch.kind)}get isBase64(){return!!this._def.checks.find(ch=>"base64"===ch.kind)}get isBase64url(){return!!this._def.checks.find(ch=>"base64url"===ch.kind)}get minLength(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return min}get maxLength(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return max}}function floatSafeRemainder(val,step){const valDecCount=(val.toString().split(".")[1]||"").length,stepDecCount=(step.toString().split(".")[1]||"").length,decCount=valDecCount>stepDecCount?valDecCount:stepDecCount;return Number.parseInt(val.toFixed(decCount).replace(".",""))%Number.parseInt(step.toFixed(decCount).replace(".",""))/10**decCount}ZodString.create=params=>new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:params?.coerce??!1,...processCreateParams(params)});class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(input){this._def.coerce&&(input.data=Number(input.data));if(this._getType(input)!==ZodParsedType.number){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:ctx.parsedType}),parseUtil_INVALID}let ctx;const status=new ParseStatus;for(const check of this._def.checks)if("int"===check.kind)util.isInteger(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:check.message}),status.dirty());else if("min"===check.kind){(check.inclusive?input.data<check.value:input.data<=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:check.value,type:"number",inclusive:check.inclusive,exact:!1,message:check.message}),status.dirty())}else if("max"===check.kind){(check.inclusive?input.data>check.value:input.data>=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:check.value,type:"number",inclusive:check.inclusive,exact:!1,message:check.message}),status.dirty())}else"multipleOf"===check.kind?0!==floatSafeRemainder(input.data,check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.not_multiple_of,multipleOf:check.value,message:check.message}),status.dirty()):"finite"===check.kind?Number.isFinite(input.data)||(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.not_finite,message:check.message}),status.dirty()):util.assertNever(check);return{status:status.value,value:input.data}}gte(value,message){return this.setLimit("min",value,!0,errorUtil.toString(message))}gt(value,message){return this.setLimit("min",value,!1,errorUtil.toString(message))}lte(value,message){return this.setLimit("max",value,!0,errorUtil.toString(message))}lt(value,message){return this.setLimit("max",value,!1,errorUtil.toString(message))}setLimit(kind,value,inclusive,message){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind,value,inclusive,message:errorUtil.toString(message)}]})}_addCheck(check){return new ZodNumber({...this._def,checks:[...this._def.checks,check]})}int(message){return this._addCheck({kind:"int",message:errorUtil.toString(message)})}positive(message){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(message)})}negative(message){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(message)})}nonpositive(message){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(message)})}nonnegative(message){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(message)})}multipleOf(value,message){return this._addCheck({kind:"multipleOf",value,message:errorUtil.toString(message)})}finite(message){return this._addCheck({kind:"finite",message:errorUtil.toString(message)})}safe(message){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(message)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(message)})}get minValue(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return min}get maxValue(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return max}get isInt(){return!!this._def.checks.find(ch=>"int"===ch.kind||"multipleOf"===ch.kind&&util.isInteger(ch.value))}get isFinite(){let max=null,min=null;for(const ch of this._def.checks){if("finite"===ch.kind||"int"===ch.kind||"multipleOf"===ch.kind)return!0;"min"===ch.kind?(null===min||ch.value>min)&&(min=ch.value):"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value)}return Number.isFinite(min)&&Number.isFinite(max)}}ZodNumber.create=params=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:params?.coerce||!1,...processCreateParams(params)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(input){if(this._def.coerce)try{input.data=BigInt(input.data)}catch{return this._getInvalidInput(input)}if(this._getType(input)!==ZodParsedType.bigint)return this._getInvalidInput(input);let ctx;const status=new ParseStatus;for(const check of this._def.checks)if("min"===check.kind){(check.inclusive?input.data<check.value:input.data<=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,type:"bigint",minimum:check.value,inclusive:check.inclusive,message:check.message}),status.dirty())}else if("max"===check.kind){(check.inclusive?input.data>check.value:input.data>=check.value)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,type:"bigint",maximum:check.value,inclusive:check.inclusive,message:check.message}),status.dirty())}else"multipleOf"===check.kind?input.data%check.value!==BigInt(0)&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.not_multiple_of,multipleOf:check.value,message:check.message}),status.dirty()):util.assertNever(check);return{status:status.value,value:input.data}}_getInvalidInput(input){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:ctx.parsedType}),parseUtil_INVALID}gte(value,message){return this.setLimit("min",value,!0,errorUtil.toString(message))}gt(value,message){return this.setLimit("min",value,!1,errorUtil.toString(message))}lte(value,message){return this.setLimit("max",value,!0,errorUtil.toString(message))}lt(value,message){return this.setLimit("max",value,!1,errorUtil.toString(message))}setLimit(kind,value,inclusive,message){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind,value,inclusive,message:errorUtil.toString(message)}]})}_addCheck(check){return new ZodBigInt({...this._def,checks:[...this._def.checks,check]})}positive(message){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(message)})}negative(message){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(message)})}nonpositive(message){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(message)})}nonnegative(message){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(message)})}multipleOf(value,message){return this._addCheck({kind:"multipleOf",value,message:errorUtil.toString(message)})}get minValue(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return min}get maxValue(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return max}}ZodBigInt.create=params=>new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:params?.coerce??!1,...processCreateParams(params)});class ZodBoolean extends ZodType{_parse(input){this._def.coerce&&(input.data=Boolean(input.data));if(this._getType(input)!==ZodParsedType.boolean){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:ctx.parsedType}),parseUtil_INVALID}return OK(input.data)}}ZodBoolean.create=params=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:params?.coerce||!1,...processCreateParams(params)});class ZodDate extends ZodType{_parse(input){this._def.coerce&&(input.data=new Date(input.data));if(this._getType(input)!==ZodParsedType.date){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:ctx.parsedType}),parseUtil_INVALID}if(Number.isNaN(input.data.getTime())){return addIssueToContext(this._getOrReturnCtx(input),{code:ZodIssueCode.invalid_date}),parseUtil_INVALID}const status=new ParseStatus;let ctx;for(const check of this._def.checks)"min"===check.kind?input.data.getTime()<check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_small,message:check.message,inclusive:!0,exact:!1,minimum:check.value,type:"date"}),status.dirty()):"max"===check.kind?input.data.getTime()>check.value&&(ctx=this._getOrReturnCtx(input,ctx),addIssueToContext(ctx,{code:ZodIssueCode.too_big,message:check.message,inclusive:!0,exact:!1,maximum:check.value,type:"date"}),status.dirty()):util.assertNever(check);return{status:status.value,value:new Date(input.data.getTime())}}_addCheck(check){return new ZodDate({...this._def,checks:[...this._def.checks,check]})}min(minDate,message){return this._addCheck({kind:"min",value:minDate.getTime(),message:errorUtil.toString(message)})}max(maxDate,message){return this._addCheck({kind:"max",value:maxDate.getTime(),message:errorUtil.toString(message)})}get minDate(){let min=null;for(const ch of this._def.checks)"min"===ch.kind&&(null===min||ch.value>min)&&(min=ch.value);return null!=min?new Date(min):null}get maxDate(){let max=null;for(const ch of this._def.checks)"max"===ch.kind&&(null===max||ch.value<max)&&(max=ch.value);return null!=max?new Date(max):null}}ZodDate.create=params=>new ZodDate({checks:[],coerce:params?.coerce||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(params)});class ZodSymbol extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.symbol){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:ctx.parsedType}),parseUtil_INVALID}return OK(input.data)}}ZodSymbol.create=params=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(params)});class ZodUndefined extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.undefined){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:ctx.parsedType}),parseUtil_INVALID}return OK(input.data)}}ZodUndefined.create=params=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(params)});class ZodNull extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.null){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:ctx.parsedType}),parseUtil_INVALID}return OK(input.data)}}ZodNull.create=params=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(params)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(input){return OK(input.data)}}ZodAny.create=params=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(params)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(input){return OK(input.data)}}ZodUnknown.create=params=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(params)});class ZodNever extends ZodType{_parse(input){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:ctx.parsedType}),parseUtil_INVALID}}ZodNever.create=params=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(params)});class ZodVoid extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.undefined){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:ctx.parsedType}),parseUtil_INVALID}return OK(input.data)}}ZodVoid.create=params=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(params)});class ZodArray extends ZodType{_parse(input){const{ctx,status}=this._processInputParams(input),def=this._def;if(ctx.parsedType!==ZodParsedType.array)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:ctx.parsedType}),parseUtil_INVALID;if(null!==def.exactLength){const tooBig=ctx.data.length>def.exactLength.value,tooSmall=ctx.data.length<def.exactLength.value;(tooBig||tooSmall)&&(addIssueToContext(ctx,{code:tooBig?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:tooSmall?def.exactLength.value:void 0,maximum:tooBig?def.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:def.exactLength.message}),status.dirty())}if(null!==def.minLength&&ctx.data.length<def.minLength.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:def.minLength.value,type:"array",inclusive:!0,exact:!1,message:def.minLength.message}),status.dirty()),null!==def.maxLength&&ctx.data.length>def.maxLength.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:def.maxLength.value,type:"array",inclusive:!0,exact:!1,message:def.maxLength.message}),status.dirty()),ctx.common.async)return Promise.all([...ctx.data].map((item,i)=>def.type._parseAsync(new ParseInputLazyPath(ctx,item,ctx.path,i)))).then(result=>ParseStatus.mergeArray(status,result));const result=[...ctx.data].map((item,i)=>def.type._parseSync(new ParseInputLazyPath(ctx,item,ctx.path,i)));return ParseStatus.mergeArray(status,result)}get element(){return this._def.type}min(minLength,message){return new ZodArray({...this._def,minLength:{value:minLength,message:errorUtil.toString(message)}})}max(maxLength,message){return new ZodArray({...this._def,maxLength:{value:maxLength,message:errorUtil.toString(message)}})}length(len,message){return new ZodArray({...this._def,exactLength:{value:len,message:errorUtil.toString(message)}})}nonempty(message){return this.min(1,message)}}function deepPartialify(schema){if(schema instanceof ZodObject){const newShape={};for(const key in schema.shape){const fieldSchema=schema.shape[key];newShape[key]=ZodOptional.create(deepPartialify(fieldSchema))}return new ZodObject({...schema._def,shape:()=>newShape})}return schema instanceof ZodArray?new ZodArray({...schema._def,type:deepPartialify(schema.element)}):schema instanceof ZodOptional?ZodOptional.create(deepPartialify(schema.unwrap())):schema instanceof ZodNullable?ZodNullable.create(deepPartialify(schema.unwrap())):schema instanceof ZodTuple?ZodTuple.create(schema.items.map(item=>deepPartialify(item))):schema}ZodArray.create=(schema,params)=>new ZodArray({type:schema,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(params)});class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(null!==this._cached)return this._cached;const shape=this._def.shape(),keys=util.objectKeys(shape);return this._cached={shape,keys},this._cached}_parse(input){if(this._getType(input)!==ZodParsedType.object){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:ctx.parsedType}),parseUtil_INVALID}const{status,ctx}=this._processInputParams(input),{shape,keys:shapeKeys}=this._getCached(),extraKeys=[];if(!(this._def.catchall instanceof ZodNever&&"strip"===this._def.unknownKeys))for(const key in ctx.data)shapeKeys.includes(key)||extraKeys.push(key);const pairs=[];for(const key of shapeKeys){const keyValidator=shape[key],value=ctx.data[key];pairs.push({key:{status:"valid",value:key},value:keyValidator._parse(new ParseInputLazyPath(ctx,value,ctx.path,key)),alwaysSet:key in ctx.data})}if(this._def.catchall instanceof ZodNever){const unknownKeys=this._def.unknownKeys;if("passthrough"===unknownKeys)for(const key of extraKeys)pairs.push({key:{status:"valid",value:key},value:{status:"valid",value:ctx.data[key]}});else if("strict"===unknownKeys)extraKeys.length>0&&(addIssueToContext(ctx,{code:ZodIssueCode.unrecognized_keys,keys:extraKeys}),status.dirty());else if("strip"!==unknownKeys)throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const catchall=this._def.catchall;for(const key of extraKeys){const value=ctx.data[key];pairs.push({key:{status:"valid",value:key},value:catchall._parse(new ParseInputLazyPath(ctx,value,ctx.path,key)),alwaysSet:key in ctx.data})}}return ctx.common.async?Promise.resolve().then(async()=>{const syncPairs=[];for(const pair of pairs){const key=await pair.key,value=await pair.value;syncPairs.push({key,value,alwaysSet:pair.alwaysSet})}return syncPairs}).then(syncPairs=>ParseStatus.mergeObjectSync(status,syncPairs)):ParseStatus.mergeObjectSync(status,pairs)}get shape(){return this._def.shape()}strict(message){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...void 0!==message?{errorMap:(issue,ctx)=>{const defaultError=this._def.errorMap?.(issue,ctx).message??ctx.defaultError;return"unrecognized_keys"===issue.code?{message:errorUtil.errToObj(message).message??defaultError}:{message:defaultError}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(augmentation){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...augmentation})})}merge(merging){return new ZodObject({unknownKeys:merging._def.unknownKeys,catchall:merging._def.catchall,shape:()=>({...this._def.shape(),...merging._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(key,schema){return this.augment({[key]:schema})}catchall(index){return new ZodObject({...this._def,catchall:index})}pick(mask){const shape={};for(const key of util.objectKeys(mask))mask[key]&&this.shape[key]&&(shape[key]=this.shape[key]);return new ZodObject({...this._def,shape:()=>shape})}omit(mask){const shape={};for(const key of util.objectKeys(this.shape))mask[key]||(shape[key]=this.shape[key]);return new ZodObject({...this._def,shape:()=>shape})}deepPartial(){return deepPartialify(this)}partial(mask){const newShape={};for(const key of util.objectKeys(this.shape)){const fieldSchema=this.shape[key];mask&&!mask[key]?newShape[key]=fieldSchema:newShape[key]=fieldSchema.optional()}return new ZodObject({...this._def,shape:()=>newShape})}required(mask){const newShape={};for(const key of util.objectKeys(this.shape))if(mask&&!mask[key])newShape[key]=this.shape[key];else{let newField=this.shape[key];for(;newField instanceof ZodOptional;)newField=newField._def.innerType;newShape[key]=newField}return new ZodObject({...this._def,shape:()=>newShape})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(shape,params)=>new ZodObject({shape:()=>shape,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)}),ZodObject.strictCreate=(shape,params)=>new ZodObject({shape:()=>shape,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)}),ZodObject.lazycreate=(shape,params)=>new ZodObject({shape,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(params)});class ZodUnion extends ZodType{_parse(input){const{ctx}=this._processInputParams(input),options=this._def.options;if(ctx.common.async)return Promise.all(options.map(async option=>{const childCtx={...ctx,common:{...ctx.common,issues:[]},parent:null};return{result:await option._parseAsync({data:ctx.data,path:ctx.path,parent:childCtx}),ctx:childCtx}})).then(function handleResults(results){for(const result of results)if("valid"===result.result.status)return result.result;for(const result of results)if("dirty"===result.result.status)return ctx.common.issues.push(...result.ctx.common.issues),result.result;const unionErrors=results.map(result=>new ZodError(result.ctx.common.issues));return addIssueToContext(ctx,{code:ZodIssueCode.invalid_union,unionErrors}),parseUtil_INVALID});{let dirty;const issues=[];for(const option of options){const childCtx={...ctx,common:{...ctx.common,issues:[]},parent:null},result=option._parseSync({data:ctx.data,path:ctx.path,parent:childCtx});if("valid"===result.status)return result;"dirty"!==result.status||dirty||(dirty={result,ctx:childCtx}),childCtx.common.issues.length&&issues.push(childCtx.common.issues)}if(dirty)return ctx.common.issues.push(...dirty.ctx.common.issues),dirty.result;const unionErrors=issues.map(issues=>new ZodError(issues));return addIssueToContext(ctx,{code:ZodIssueCode.invalid_union,unionErrors}),parseUtil_INVALID}}get options(){return this._def.options}}ZodUnion.create=(types,params)=>new ZodUnion({options:types,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(params)});function mergeValues(a,b){const aType=getParsedType(a),bType=getParsedType(b);if(a===b)return{valid:!0,data:a};if(aType===ZodParsedType.object&&bType===ZodParsedType.object){const bKeys=util.objectKeys(b),sharedKeys=util.objectKeys(a).filter(key=>-1!==bKeys.indexOf(key)),newObj={...a,...b};for(const key of sharedKeys){const sharedValue=mergeValues(a[key],b[key]);if(!sharedValue.valid)return{valid:!1};newObj[key]=sharedValue.data}return{valid:!0,data:newObj}}if(aType===ZodParsedType.array&&bType===ZodParsedType.array){if(a.length!==b.length)return{valid:!1};const newArray=[];for(let index=0;index<a.length;index++){const sharedValue=mergeValues(a[index],b[index]);if(!sharedValue.valid)return{valid:!1};newArray.push(sharedValue.data)}return{valid:!0,data:newArray}}return aType===ZodParsedType.date&&bType===ZodParsedType.date&&+a===+b?{valid:!0,data:a}:{valid:!1}}class ZodIntersection extends ZodType{_parse(input){const{status,ctx}=this._processInputParams(input),handleParsed=(parsedLeft,parsedRight)=>{if(isAborted(parsedLeft)||isAborted(parsedRight))return parseUtil_INVALID;const merged=mergeValues(parsedLeft.value,parsedRight.value);return merged.valid?((isDirty(parsedLeft)||isDirty(parsedRight))&&status.dirty(),{status:status.value,value:merged.data}):(addIssueToContext(ctx,{code:ZodIssueCode.invalid_intersection_types}),parseUtil_INVALID)};return ctx.common.async?Promise.all([this._def.left._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}),this._def.right._parseAsync({data:ctx.data,path:ctx.path,parent:ctx})]).then(([left,right])=>handleParsed(left,right)):handleParsed(this._def.left._parseSync({data:ctx.data,path:ctx.path,parent:ctx}),this._def.right._parseSync({data:ctx.data,path:ctx.path,parent:ctx}))}}ZodIntersection.create=(left,right,params)=>new ZodIntersection({left,right,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(params)});class ZodTuple extends ZodType{_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.array)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:ctx.parsedType}),parseUtil_INVALID;if(ctx.data.length<this._def.items.length)return addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),parseUtil_INVALID;!this._def.rest&&ctx.data.length>this._def.items.length&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),status.dirty());const items=[...ctx.data].map((item,itemIndex)=>{const schema=this._def.items[itemIndex]||this._def.rest;return schema?schema._parse(new ParseInputLazyPath(ctx,item,ctx.path,itemIndex)):null}).filter(x=>!!x);return ctx.common.async?Promise.all(items).then(results=>ParseStatus.mergeArray(status,results)):ParseStatus.mergeArray(status,items)}get items(){return this._def.items}rest(rest){return new ZodTuple({...this._def,rest})}}ZodTuple.create=(schemas,params)=>{if(!Array.isArray(schemas))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:schemas,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(params)})};class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.map)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:ctx.parsedType}),parseUtil_INVALID;const keyType=this._def.keyType,valueType=this._def.valueType,pairs=[...ctx.data.entries()].map(([key,value],index)=>({key:keyType._parse(new ParseInputLazyPath(ctx,key,ctx.path,[index,"key"])),value:valueType._parse(new ParseInputLazyPath(ctx,value,ctx.path,[index,"value"]))}));if(ctx.common.async){const finalMap=new Map;return Promise.resolve().then(async()=>{for(const pair of pairs){const key=await pair.key,value=await pair.value;if("aborted"===key.status||"aborted"===value.status)return parseUtil_INVALID;"dirty"!==key.status&&"dirty"!==value.status||status.dirty(),finalMap.set(key.value,value.value)}return{status:status.value,value:finalMap}})}{const finalMap=new Map;for(const pair of pairs){const key=pair.key,value=pair.value;if("aborted"===key.status||"aborted"===value.status)return parseUtil_INVALID;"dirty"!==key.status&&"dirty"!==value.status||status.dirty(),finalMap.set(key.value,value.value)}return{status:status.value,value:finalMap}}}}ZodMap.create=(keyType,valueType,params)=>new ZodMap({valueType,keyType,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(params)});class ZodSet extends ZodType{_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.set)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:ctx.parsedType}),parseUtil_INVALID;const def=this._def;null!==def.minSize&&ctx.data.size<def.minSize.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_small,minimum:def.minSize.value,type:"set",inclusive:!0,exact:!1,message:def.minSize.message}),status.dirty()),null!==def.maxSize&&ctx.data.size>def.maxSize.value&&(addIssueToContext(ctx,{code:ZodIssueCode.too_big,maximum:def.maxSize.value,type:"set",inclusive:!0,exact:!1,message:def.maxSize.message}),status.dirty());const valueType=this._def.valueType;function finalizeSet(elements){const parsedSet=new Set;for(const element of elements){if("aborted"===element.status)return parseUtil_INVALID;"dirty"===element.status&&status.dirty(),parsedSet.add(element.value)}return{status:status.value,value:parsedSet}}const elements=[...ctx.data.values()].map((item,i)=>valueType._parse(new ParseInputLazyPath(ctx,item,ctx.path,i)));return ctx.common.async?Promise.all(elements).then(elements=>finalizeSet(elements)):finalizeSet(elements)}min(minSize,message){return new ZodSet({...this._def,minSize:{value:minSize,message:errorUtil.toString(message)}})}max(maxSize,message){return new ZodSet({...this._def,maxSize:{value:maxSize,message:errorUtil.toString(message)}})}size(size,message){return this.min(size,message).max(size,message)}nonempty(message){return this.min(1,message)}}ZodSet.create=(valueType,params)=>new ZodSet({valueType,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(params)});class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(input){const{ctx}=this._processInputParams(input);return this._def.getter()._parse({data:ctx.data,path:ctx.path,parent:ctx})}}ZodLazy.create=(getter,params)=>new ZodLazy({getter,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(params)});class ZodLiteral extends ZodType{_parse(input){if(input.data!==this._def.value){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{received:ctx.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),parseUtil_INVALID}return{status:"valid",value:input.data}}get value(){return this._def.value}}function createZodEnum(values,params){return new ZodEnum({values,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(params)})}ZodLiteral.create=(value,params)=>new ZodLiteral({value,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(params)});class ZodEnum extends ZodType{_parse(input){if("string"!=typeof input.data){const ctx=this._getOrReturnCtx(input),expectedValues=this._def.values;return addIssueToContext(ctx,{expected:util.joinValues(expectedValues),received:ctx.parsedType,code:ZodIssueCode.invalid_type}),parseUtil_INVALID}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(input.data)){const ctx=this._getOrReturnCtx(input),expectedValues=this._def.values;return addIssueToContext(ctx,{received:ctx.data,code:ZodIssueCode.invalid_enum_value,options:expectedValues}),parseUtil_INVALID}return OK(input.data)}get options(){return this._def.values}get enum(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}get Values(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}get Enum(){const enumValues={};for(const val of this._def.values)enumValues[val]=val;return enumValues}extract(values,newDef=this._def){return ZodEnum.create(values,{...this._def,...newDef})}exclude(values,newDef=this._def){return ZodEnum.create(this.options.filter(opt=>!values.includes(opt)),{...this._def,...newDef})}}ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{_parse(input){const nativeEnumValues=util.getValidEnumValues(this._def.values),ctx=this._getOrReturnCtx(input);if(ctx.parsedType!==ZodParsedType.string&&ctx.parsedType!==ZodParsedType.number){const expectedValues=util.objectValues(nativeEnumValues);return addIssueToContext(ctx,{expected:util.joinValues(expectedValues),received:ctx.parsedType,code:ZodIssueCode.invalid_type}),parseUtil_INVALID}if(this._cache||(this._cache=new Set(util.getValidEnumValues(this._def.values))),!this._cache.has(input.data)){const expectedValues=util.objectValues(nativeEnumValues);return addIssueToContext(ctx,{received:ctx.data,code:ZodIssueCode.invalid_enum_value,options:expectedValues}),parseUtil_INVALID}return OK(input.data)}get enum(){return this._def.values}}ZodNativeEnum.create=(values,params)=>new ZodNativeEnum({values,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(params)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(input){const{ctx}=this._processInputParams(input);if(ctx.parsedType!==ZodParsedType.promise&&!1===ctx.common.async)return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:ctx.parsedType}),parseUtil_INVALID;const promisified=ctx.parsedType===ZodParsedType.promise?ctx.data:Promise.resolve(ctx.data);return OK(promisified.then(data=>this._def.type.parseAsync(data,{path:ctx.path,errorMap:ctx.common.contextualErrorMap})))}}ZodPromise.create=(schema,params)=>new ZodPromise({type:schema,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(params)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(input){const{status,ctx}=this._processInputParams(input),effect=this._def.effect||null,checkCtx={addIssue:arg=>{addIssueToContext(ctx,arg),arg.fatal?status.abort():status.dirty()},get path(){return ctx.path}};if(checkCtx.addIssue=checkCtx.addIssue.bind(checkCtx),"preprocess"===effect.type){const processed=effect.transform(ctx.data,checkCtx);if(ctx.common.async)return Promise.resolve(processed).then(async processed=>{if("aborted"===status.value)return parseUtil_INVALID;const result=await this._def.schema._parseAsync({data:processed,path:ctx.path,parent:ctx});return"aborted"===result.status?parseUtil_INVALID:"dirty"===result.status||"dirty"===status.value?DIRTY(result.value):result});{if("aborted"===status.value)return parseUtil_INVALID;const result=this._def.schema._parseSync({data:processed,path:ctx.path,parent:ctx});return"aborted"===result.status?parseUtil_INVALID:"dirty"===result.status||"dirty"===status.value?DIRTY(result.value):result}}if("refinement"===effect.type){const executeRefinement=acc=>{const result=effect.refinement(acc,checkCtx);if(ctx.common.async)return Promise.resolve(result);if(result instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return acc};if(!1===ctx.common.async){const inner=this._def.schema._parseSync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inner.status?parseUtil_INVALID:("dirty"===inner.status&&status.dirty(),executeRefinement(inner.value),{status:status.value,value:inner.value})}return this._def.schema._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}).then(inner=>"aborted"===inner.status?parseUtil_INVALID:("dirty"===inner.status&&status.dirty(),executeRefinement(inner.value).then(()=>({status:status.value,value:inner.value}))))}if("transform"===effect.type){if(!1===ctx.common.async){const base=this._def.schema._parseSync({data:ctx.data,path:ctx.path,parent:ctx});if(!isValid(base))return parseUtil_INVALID;const result=effect.transform(base.value,checkCtx);if(result instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:status.value,value:result}}return this._def.schema._parseAsync({data:ctx.data,path:ctx.path,parent:ctx}).then(base=>isValid(base)?Promise.resolve(effect.transform(base.value,checkCtx)).then(result=>({status:status.value,value:result})):parseUtil_INVALID)}util.assertNever(effect)}}ZodEffects.create=(schema,effect,params)=>new ZodEffects({schema,typeName:ZodFirstPartyTypeKind.ZodEffects,effect,...processCreateParams(params)}),ZodEffects.createWithPreprocess=(preprocess,schema,params)=>new ZodEffects({schema,effect:{type:"preprocess",transform:preprocess},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(params)});class ZodOptional extends ZodType{_parse(input){return this._getType(input)===ZodParsedType.undefined?OK(void 0):this._def.innerType._parse(input)}unwrap(){return this._def.innerType}}ZodOptional.create=(type,params)=>new ZodOptional({innerType:type,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(params)});class ZodNullable extends ZodType{_parse(input){return this._getType(input)===ZodParsedType.null?OK(null):this._def.innerType._parse(input)}unwrap(){return this._def.innerType}}ZodNullable.create=(type,params)=>new ZodNullable({innerType:type,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(params)});class ZodDefault extends ZodType{_parse(input){const{ctx}=this._processInputParams(input);let data=ctx.data;return ctx.parsedType===ZodParsedType.undefined&&(data=this._def.defaultValue()),this._def.innerType._parse({data,path:ctx.path,parent:ctx})}removeDefault(){return this._def.innerType}}ZodDefault.create=(type,params)=>new ZodDefault({innerType:type,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:"function"==typeof params.default?params.default:()=>params.default,...processCreateParams(params)});class ZodCatch extends ZodType{_parse(input){const{ctx}=this._processInputParams(input),newCtx={...ctx,common:{...ctx.common,issues:[]}},result=this._def.innerType._parse({data:newCtx.data,path:newCtx.path,parent:{...newCtx}});return isAsync(result)?result.then(result=>({status:"valid",value:"valid"===result.status?result.value:this._def.catchValue({get error(){return new ZodError(newCtx.common.issues)},input:newCtx.data})})):{status:"valid",value:"valid"===result.status?result.value:this._def.catchValue({get error(){return new ZodError(newCtx.common.issues)},input:newCtx.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(type,params)=>new ZodCatch({innerType:type,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:"function"==typeof params.catch?params.catch:()=>params.catch,...processCreateParams(params)});class ZodNaN extends ZodType{_parse(input){if(this._getType(input)!==ZodParsedType.nan){const ctx=this._getOrReturnCtx(input);return addIssueToContext(ctx,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:ctx.parsedType}),parseUtil_INVALID}return{status:"valid",value:input.data}}}ZodNaN.create=params=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(params)});Symbol("zod_brand");class ZodBranded extends ZodType{_parse(input){const{ctx}=this._processInputParams(input),data=ctx.data;return this._def.type._parse({data,path:ctx.path,parent:ctx})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(input){const{status,ctx}=this._processInputParams(input);if(ctx.common.async){return(async()=>{const inResult=await this._def.in._parseAsync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inResult.status?parseUtil_INVALID:"dirty"===inResult.status?(status.dirty(),DIRTY(inResult.value)):this._def.out._parseAsync({data:inResult.value,path:ctx.path,parent:ctx})})()}{const inResult=this._def.in._parseSync({data:ctx.data,path:ctx.path,parent:ctx});return"aborted"===inResult.status?parseUtil_INVALID:"dirty"===inResult.status?(status.dirty(),{status:"dirty",value:inResult.value}):this._def.out._parseSync({data:inResult.value,path:ctx.path,parent:ctx})}}static create(a,b){return new ZodPipeline({in:a,out:b,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(input){const result=this._def.innerType._parse(input),freeze=data=>(isValid(data)&&(data.value=Object.freeze(data.value)),data);return isAsync(result)?result.then(data=>freeze(data)):freeze(result)}unwrap(){return this._def.innerType}}ZodReadonly.create=(type,params)=>new ZodReadonly({innerType:type,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(params)});ZodObject.lazycreate;var ZodFirstPartyTypeKind;!function(ZodFirstPartyTypeKind){ZodFirstPartyTypeKind.ZodString="ZodString",ZodFirstPartyTypeKind.ZodNumber="ZodNumber",ZodFirstPartyTypeKind.ZodNaN="ZodNaN",ZodFirstPartyTypeKind.ZodBigInt="ZodBigInt",ZodFirstPartyTypeKind.ZodBoolean="ZodBoolean",ZodFirstPartyTypeKind.ZodDate="ZodDate",ZodFirstPartyTypeKind.ZodSymbol="ZodSymbol",ZodFirstPartyTypeKind.ZodUndefined="ZodUndefined",ZodFirstPartyTypeKind.ZodNull="ZodNull",ZodFirstPartyTypeKind.ZodAny="ZodAny",ZodFirstPartyTypeKind.ZodUnknown="ZodUnknown",ZodFirstPartyTypeKind.ZodNever="ZodNever",ZodFirstPartyTypeKind.ZodVoid="ZodVoid",ZodFirstPartyTypeKind.ZodArray="ZodArray",ZodFirstPartyTypeKind.ZodObject="ZodObject",ZodFirstPartyTypeKind.ZodUnion="ZodUnion",ZodFirstPartyTypeKind.ZodDiscriminatedUnion="ZodDiscriminatedUnion",ZodFirstPartyTypeKind.ZodIntersection="ZodIntersection",ZodFirstPartyTypeKind.ZodTuple="ZodTuple",ZodFirstPartyTypeKind.ZodRecord="ZodRecord",ZodFirstPartyTypeKind.ZodMap="ZodMap",ZodFirstPartyTypeKind.ZodSet="ZodSet",ZodFirstPartyTypeKind.ZodFunction="ZodFunction",ZodFirstPartyTypeKind.ZodLazy="ZodLazy",ZodFirstPartyTypeKind.ZodLiteral="ZodLiteral",ZodFirstPartyTypeKind.ZodEnum="ZodEnum",ZodFirstPartyTypeKind.ZodEffects="ZodEffects",ZodFirstPartyTypeKind.ZodNativeEnum="ZodNativeEnum",ZodFirstPartyTypeKind.ZodOptional="ZodOptional",ZodFirstPartyTypeKind.ZodNullable="ZodNullable",ZodFirstPartyTypeKind.ZodDefault="ZodDefault",ZodFirstPartyTypeKind.ZodCatch="ZodCatch",ZodFirstPartyTypeKind.ZodPromise="ZodPromise",ZodFirstPartyTypeKind.ZodBranded="ZodBranded",ZodFirstPartyTypeKind.ZodPipeline="ZodPipeline",ZodFirstPartyTypeKind.ZodReadonly="ZodReadonly"}(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));ZodString.create,ZodNumber.create,ZodNaN.create,ZodBigInt.create,ZodBoolean.create,ZodDate.create,ZodSymbol.create,ZodUndefined.create,ZodNull.create,ZodAny.create,ZodUnknown.create,ZodNever.create,ZodVoid.create,ZodArray.create,ZodObject.create,ZodObject.strictCreate,ZodUnion.create,ZodIntersection.create,ZodTuple.create,ZodMap.create,ZodSet.create,ZodLazy.create,ZodLiteral.create,ZodEnum.create,ZodNativeEnum.create,ZodPromise.create,ZodEffects.create,ZodOptional.create,ZodNullable.create,ZodEffects.createWithPreprocess,ZodPipeline.create;__webpack_require__("./node_modules/process/browser.js");var console=__webpack_require__("./node_modules/console-browserify/index.js");var createIdGenerator=({prefix,size=16,alphabet="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",separator="-"}={})=>{const generator=()=>{const alphabetLength=alphabet.length,chars=new Array(size);for(let i=0;i<size;i++)chars[i]=alphabet[Math.random()*alphabetLength|0];return chars.join("")};if(null==prefix)return generator;if(alphabet.includes(separator))throw new InvalidArgumentError({argument:"separator",message:`The separator "${separator}" must not be part of the alphabet "${alphabet}".`});return()=>`${prefix}${separator}${generator()}`},dist_generateId=createIdGenerator();function dist_getRuntimeEnvironmentUserAgent(globalThisAny=globalThis){var _a,_b,_c;return globalThisAny.window?"runtime/browser":(null==(_a=globalThisAny.navigator)?void 0:_a.userAgent)?`runtime/${globalThisAny.navigator.userAgent.toLowerCase()}`:(null==(_c=null==(_b=globalThisAny.process)?void 0:_b.versions)?void 0:_c.node)?`runtime/node.js/${globalThisAny.process.version.substring(0)}`:globalThisAny.EdgeRuntime?"runtime/vercel-edge":"runtime/unknown"}function normalizeHeaders(headers){if(null==headers)return{};const normalized={};if(headers instanceof Headers)headers.forEach((value,key)=>{normalized[key.toLowerCase()]=value});else{Array.isArray(headers)||(headers=Object.entries(headers));for(const[key,value]of headers)null!=value&&(normalized[key.toLowerCase()]=value)}return normalized}function dist_withUserAgentSuffix(headers,...userAgentSuffixParts){const normalizedHeaders=new Headers(normalizeHeaders(headers)),currentUserAgentHeader=normalizedHeaders.get("user-agent")||"";return normalizedHeaders.set("user-agent",[currentUserAgentHeader,...userAgentSuffixParts].filter(Boolean).join(" ")),Object.fromEntries(normalizedHeaders.entries())}var suspectProtoRx=/"__proto__"\s*:/,suspectConstructorRx=/"constructor"\s*:/;function _parse(text){const obj=JSON.parse(text);return null===obj||"object"!=typeof obj||!1===suspectProtoRx.test(text)&&!1===suspectConstructorRx.test(text)?obj:function filter(obj){let next=[obj];for(;next.length;){const nodes=next;next=[];for(const node of nodes){if(Object.prototype.hasOwnProperty.call(node,"__proto__"))throw new SyntaxError("Object contains forbidden prototype property");if(Object.prototype.hasOwnProperty.call(node,"constructor")&&Object.prototype.hasOwnProperty.call(node.constructor,"prototype"))throw new SyntaxError("Object contains forbidden prototype property");for(const key in node){const value=node[key];value&&"object"==typeof value&&next.push(value)}}}return obj}(obj)}function secureJsonParse(text){const{stackTraceLimit}=Error;Error.stackTraceLimit=0;try{return _parse(text)}finally{Error.stackTraceLimit=stackTraceLimit}}var validatorSymbol=Symbol.for("vercel.ai.validator");function lazyValidator(createValidator){let validator2;return()=>(null==validator2&&(validator2=createValidator()),validator2)}function asValidator(value){return function isValidator(value){return"object"==typeof value&&null!==value&&validatorSymbol in value&&!0===value[validatorSymbol]&&"validate"in value}(value)?value:"function"==typeof value?value():function standardSchemaValidator(standardSchema){return function validator(validate){return{[validatorSymbol]:!0,validate}}(async value=>{const result=await standardSchema["~standard"].validate(value);return null==result.issues?{success:!0,value:result.value}:{success:!1,error:new TypeValidationError({value,cause:result.issues})}})}(value)}async function validateTypes({value,schema}){const result=await dist_safeValidateTypes({value,schema});if(!result.success)throw TypeValidationError.wrap({value,cause:result.error});return result.value}async function dist_safeValidateTypes({value,schema}){const validator2=asValidator(schema);try{if(null==validator2.validate)return{success:!0,value,rawValue:value};const result=await validator2.validate(value);return result.success?{success:!0,value:result.value,rawValue:value}:{success:!1,error:TypeValidationError.wrap({value,cause:result.error}),rawValue:value}}catch(error){return{success:!1,error:TypeValidationError.wrap({value,cause:error}),rawValue:value}}}async function dist_safeParseJSON({text,schema}){try{const value=secureJsonParse(text);return null==schema?{success:!0,value,rawValue:value}:await dist_safeValidateTypes({value,schema})}catch(error){return{success:!1,error:dist_JSONParseError.isInstance(error)?error:new dist_JSONParseError({text,cause:error}),rawValue:void 0}}}function dist_parseJsonEventStream({stream,schema}){return stream.pipeThrough(new TextDecoderStream).pipeThrough(new EventSourceParserStream).pipeThrough(new TransformStream({async transform({data},controller){"[DONE]"!==data&&controller.enqueue(await dist_safeParseJSON({text:data,schema}))}}))}async function resolve(value){return"function"==typeof value&&(value=value()),Promise.resolve(value)}var getRelativePath=(pathA,pathB)=>{let i=0;for(;i<pathA.length&&i<pathB.length&&pathA[i]===pathB[i];i++);return[(pathA.length-i).toString(),...pathB.slice(i)].join("/")},ignoreOverride=Symbol("Let zodToJsonSchema decide on which parser to use"),defaultOptions={name:void 0,$refStrategy:"root",basePath:["#"],effectStrategy:"input",pipeStrategy:"all",dateStrategy:"format:date-time",mapStrategy:"entries",removeAdditionalStrategy:"passthrough",allowedAdditionalProperties:!0,rejectedAdditionalProperties:!1,definitionPath:"definitions",strictUnions:!1,definitions:{},errorMessages:!1,patternStrategy:"escape",applyRegexFlags:!1,emailStrategy:"format:email",base64Strategy:"contentEncoding:base64",nameStrategy:"ref"};function parseBrandedDef(_def,refs){return parseDef(_def.type._def,refs)}function parseDateDef(def,refs,overrideDateStrategy){const strategy=null!=overrideDateStrategy?overrideDateStrategy:refs.dateStrategy;if(Array.isArray(strategy))return{anyOf:strategy.map((item,i)=>parseDateDef(def,refs,item))};switch(strategy){case"string":case"format:date-time":return{type:"string",format:"date-time"};case"format:date":return{type:"string",format:"date"};case"integer":return integerDateParser(def)}}var integerDateParser=def=>{const res={type:"integer",format:"unix-time"};for(const check of def.checks)switch(check.kind){case"min":res.minimum=check.value;break;case"max":res.maximum=check.value}return res};var dist_emojiRegex=void 0,zodPatterns_cuid=/^[cC][^\s-]{8,}$/,zodPatterns_cuid2=/^[0-9a-z]+$/,zodPatterns_ulid=/^[0-9A-HJKMNP-TV-Z]{26}$/,zodPatterns_email=/^(?!\.)(?!.*\.\.)([a-zA-Z0-9_'+\-\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\-]*\.)+[a-zA-Z]{2,}$/,zodPatterns_emoji=()=>(void 0===dist_emojiRegex&&(dist_emojiRegex=RegExp("^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$","u")),dist_emojiRegex),zodPatterns_ipv4Cidr=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,zodPatterns_ipv6Cidr=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,zodPatterns_base64=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,zodPatterns_base64url=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,zodPatterns_nanoid=/^[a-zA-Z0-9_-]{21}$/,zodPatterns_jwt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/;function parseStringDef(def,refs){const res={type:"string"};if(def.checks)for(const check of def.checks)switch(check.kind){case"min":res.minLength="number"==typeof res.minLength?Math.max(res.minLength,check.value):check.value;break;case"max":res.maxLength="number"==typeof res.maxLength?Math.min(res.maxLength,check.value):check.value;break;case"email":switch(refs.emailStrategy){case"format:email":addFormat(res,"email",check.message,refs);break;case"format:idn-email":addFormat(res,"idn-email",check.message,refs);break;case"pattern:zod":addPattern(res,zodPatterns_email,check.message,refs)}break;case"url":addFormat(res,"uri",check.message,refs);break;case"uuid":addFormat(res,"uuid",check.message,refs);break;case"regex":addPattern(res,check.regex,check.message,refs);break;case"cuid":addPattern(res,zodPatterns_cuid,check.message,refs);break;case"cuid2":addPattern(res,zodPatterns_cuid2,check.message,refs);break;case"startsWith":addPattern(res,RegExp(`^${escapeLiteralCheckValue(check.value,refs)}`),check.message,refs);break;case"endsWith":addPattern(res,RegExp(`${escapeLiteralCheckValue(check.value,refs)}$`),check.message,refs);break;case"datetime":addFormat(res,"date-time",check.message,refs);break;case"date":addFormat(res,"date",check.message,refs);break;case"time":addFormat(res,"time",check.message,refs);break;case"duration":addFormat(res,"duration",check.message,refs);break;case"length":res.minLength="number"==typeof res.minLength?Math.max(res.minLength,check.value):check.value,res.maxLength="number"==typeof res.maxLength?Math.min(res.maxLength,check.value):check.value;break;case"includes":addPattern(res,RegExp(escapeLiteralCheckValue(check.value,refs)),check.message,refs);break;case"ip":"v6"!==check.version&&addFormat(res,"ipv4",check.message,refs),"v4"!==check.version&&addFormat(res,"ipv6",check.message,refs);break;case"base64url":addPattern(res,zodPatterns_base64url,check.message,refs);break;case"jwt":addPattern(res,zodPatterns_jwt,check.message,refs);break;case"cidr":"v6"!==check.version&&addPattern(res,zodPatterns_ipv4Cidr,check.message,refs),"v4"!==check.version&&addPattern(res,zodPatterns_ipv6Cidr,check.message,refs);break;case"emoji":addPattern(res,zodPatterns_emoji(),check.message,refs);break;case"ulid":addPattern(res,zodPatterns_ulid,check.message,refs);break;case"base64":switch(refs.base64Strategy){case"format:binary":addFormat(res,"binary",check.message,refs);break;case"contentEncoding:base64":res.contentEncoding="base64";break;case"pattern:zod":addPattern(res,zodPatterns_base64,check.message,refs)}break;case"nanoid":addPattern(res,zodPatterns_nanoid,check.message,refs)}return res}function escapeLiteralCheckValue(literal,refs){return"escape"===refs.patternStrategy?function escapeNonAlphaNumeric(source){let result="";for(let i=0;i<source.length;i++)ALPHA_NUMERIC.has(source[i])||(result+="\\"),result+=source[i];return result}(literal):literal}var ALPHA_NUMERIC=new Set("ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789");function addFormat(schema,value,message,refs){var _a;schema.format||(null==(_a=schema.anyOf)?void 0:_a.some(x=>x.format))?(schema.anyOf||(schema.anyOf=[]),schema.format&&(schema.anyOf.push({format:schema.format}),delete schema.format),schema.anyOf.push({format:value,...message&&refs.errorMessages&&{errorMessage:{format:message}}})):schema.format=value}function addPattern(schema,regex,message,refs){var _a;schema.pattern||(null==(_a=schema.allOf)?void 0:_a.some(x=>x.pattern))?(schema.allOf||(schema.allOf=[]),schema.pattern&&(schema.allOf.push({pattern:schema.pattern}),delete schema.pattern),schema.allOf.push({pattern:stringifyRegExpWithFlags(regex,refs),...message&&refs.errorMessages&&{errorMessage:{pattern:message}}})):schema.pattern=stringifyRegExpWithFlags(regex,refs)}function stringifyRegExpWithFlags(regex,refs){var _a;if(!refs.applyRegexFlags||!regex.flags)return regex.source;const flags_i=regex.flags.includes("i"),flags_m=regex.flags.includes("m"),flags_s=regex.flags.includes("s"),source=flags_i?regex.source.toLowerCase():regex.source;let pattern="",isEscaped=!1,inCharGroup=!1,inCharRange=!1;for(let i=0;i<source.length;i++)if(isEscaped)pattern+=source[i],isEscaped=!1;else{if(flags_i)if(inCharGroup){if(source[i].match(/[a-z]/)){inCharRange?(pattern+=source[i],pattern+=`${source[i-2]}-${source[i]}`.toUpperCase(),inCharRange=!1):"-"===source[i+1]&&(null==(_a=source[i+2])?void 0:_a.match(/[a-z]/))?(pattern+=source[i],inCharRange=!0):pattern+=`${source[i]}${source[i].toUpperCase()}`;continue}}else if(source[i].match(/[a-z]/)){pattern+=`[${source[i]}${source[i].toUpperCase()}]`;continue}if(flags_m){if("^"===source[i]){pattern+="(^|(?<=[\r\n]))";continue}if("$"===source[i]){pattern+="($|(?=[\r\n]))";continue}}flags_s&&"."===source[i]?pattern+=inCharGroup?`${source[i]}\r\n`:`[${source[i]}\r\n]`:(pattern+=source[i],"\\"===source[i]?isEscaped=!0:inCharGroup&&"]"===source[i]?inCharGroup=!1:inCharGroup||"["!==source[i]||(inCharGroup=!0))}try{new RegExp(pattern)}catch(e){return console.warn(`Could not convert regex pattern at ${refs.currentPath.join("/")} to a flag-independent form! Falling back to the flag-ignorant source`),regex.source}return pattern}function parseRecordDef(def,refs){var _a,_b,_c,_d,_e,_f;const schema={type:"object",additionalProperties:null!=(_a=parseDef(def.valueType._def,{...refs,currentPath:[...refs.currentPath,"additionalProperties"]}))?_a:refs.allowedAdditionalProperties};if((null==(_b=def.keyType)?void 0:_b._def.typeName)===ZodFirstPartyTypeKind.ZodString&&(null==(_c=def.keyType._def.checks)?void 0:_c.length)){const{type,...keyType}=parseStringDef(def.keyType._def,refs);return{...schema,propertyNames:keyType}}if((null==(_d=def.keyType)?void 0:_d._def.typeName)===ZodFirstPartyTypeKind.ZodEnum)return{...schema,propertyNames:{enum:def.keyType._def.values}};if((null==(_e=def.keyType)?void 0:_e._def.typeName)===ZodFirstPartyTypeKind.ZodBranded&&def.keyType._def.type._def.typeName===ZodFirstPartyTypeKind.ZodString&&(null==(_f=def.keyType._def.type._def.checks)?void 0:_f.length)){const{type,...keyType}=parseBrandedDef(def.keyType._def,refs);return{...schema,propertyNames:keyType}}return schema}var primitiveMappings={ZodString:"string",ZodNumber:"number",ZodBigInt:"integer",ZodBoolean:"boolean",ZodNull:"null"};var asAnyOf=(def,refs)=>{const anyOf=(def.options instanceof Map?Array.from(def.options.values()):def.options).map((x,i)=>parseDef(x._def,{...refs,currentPath:[...refs.currentPath,"anyOf",`${i}`]})).filter(x=>!!x&&(!refs.strictUnions||"object"==typeof x&&Object.keys(x).length>0));return anyOf.length?{anyOf}:void 0};function parseObjectDef(def,refs){const result={type:"object",properties:{}},required=[],shape=def.shape();for(const propName in shape){let propDef=shape[propName];if(void 0===propDef||void 0===propDef._def)continue;const propOptional=safeIsOptional(propDef),parsedDef=parseDef(propDef._def,{...refs,currentPath:[...refs.currentPath,"properties",propName],propertyPath:[...refs.currentPath,"properties",propName]});void 0!==parsedDef&&(result.properties[propName]=parsedDef,propOptional||required.push(propName))}required.length&&(result.required=required);const additionalProperties=function decideAdditionalProperties(def,refs){if("ZodNever"!==def.catchall._def.typeName)return parseDef(def.catchall._def,{...refs,currentPath:[...refs.currentPath,"additionalProperties"]});switch(def.unknownKeys){case"passthrough":return refs.allowedAdditionalProperties;case"strict":return refs.rejectedAdditionalProperties;case"strip":return"strict"===refs.removeAdditionalStrategy?refs.allowedAdditionalProperties:refs.rejectedAdditionalProperties}}(def,refs);return void 0!==additionalProperties&&(result.additionalProperties=additionalProperties),result}function safeIsOptional(schema){try{return schema.isOptional()}catch(e){return!0}}var selectParser=(def,typeName,refs)=>{switch(typeName){case ZodFirstPartyTypeKind.ZodString:return parseStringDef(def,refs);case ZodFirstPartyTypeKind.ZodNumber:return function parseNumberDef(def){const res={type:"number"};if(!def.checks)return res;for(const check of def.checks)switch(check.kind){case"int":res.type="integer";break;case"min":check.inclusive?res.minimum=check.value:res.exclusiveMinimum=check.value;break;case"max":check.inclusive?res.maximum=check.value:res.exclusiveMaximum=check.value;break;case"multipleOf":res.multipleOf=check.value}return res}(def);case ZodFirstPartyTypeKind.ZodObject:return parseObjectDef(def,refs);case ZodFirstPartyTypeKind.ZodBigInt:return function parseBigintDef(def){const res={type:"integer",format:"int64"};if(!def.checks)return res;for(const check of def.checks)switch(check.kind){case"min":check.inclusive?res.minimum=check.value:res.exclusiveMinimum=check.value;break;case"max":check.inclusive?res.maximum=check.value:res.exclusiveMaximum=check.value;break;case"multipleOf":res.multipleOf=check.value}return res}(def);case ZodFirstPartyTypeKind.ZodBoolean:return{type:"boolean"};case ZodFirstPartyTypeKind.ZodDate:return parseDateDef(def,refs);case ZodFirstPartyTypeKind.ZodUndefined:return{not:{}};case ZodFirstPartyTypeKind.ZodNull:return{type:"null"};case ZodFirstPartyTypeKind.ZodArray:return function parseArrayDef(def,refs){var _a,_b,_c;const res={type:"array"};return(null==(_a=def.type)?void 0:_a._def)&&(null==(_c=null==(_b=def.type)?void 0:_b._def)?void 0:_c.typeName)!==ZodFirstPartyTypeKind.ZodAny&&(res.items=parseDef(def.type._def,{...refs,currentPath:[...refs.currentPath,"items"]})),def.minLength&&(res.minItems=def.minLength.value),def.maxLength&&(res.maxItems=def.maxLength.value),def.exactLength&&(res.minItems=def.exactLength.value,res.maxItems=def.exactLength.value),res}(def,refs);case ZodFirstPartyTypeKind.ZodUnion:case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:return function parseUnionDef(def,refs){const options=def.options instanceof Map?Array.from(def.options.values()):def.options;if(options.every(x=>x._def.typeName in primitiveMappings&&(!x._def.checks||!x._def.checks.length))){const types=options.reduce((types2,x)=>{const type=primitiveMappings[x._def.typeName];return type&&!types2.includes(type)?[...types2,type]:types2},[]);return{type:types.length>1?types:types[0]}}if(options.every(x=>"ZodLiteral"===x._def.typeName&&!x.description)){const types=options.reduce((acc,x)=>{const type=typeof x._def.value;switch(type){case"string":case"number":case"boolean":return[...acc,type];case"bigint":return[...acc,"integer"];case"object":if(null===x._def.value)return[...acc,"null"];default:return acc}},[]);if(types.length===options.length){const uniqueTypes=types.filter((x,i,a)=>a.indexOf(x)===i);return{type:uniqueTypes.length>1?uniqueTypes:uniqueTypes[0],enum:options.reduce((acc,x)=>acc.includes(x._def.value)?acc:[...acc,x._def.value],[])}}}else if(options.every(x=>"ZodEnum"===x._def.typeName))return{type:"string",enum:options.reduce((acc,x)=>[...acc,...x._def.values.filter(x2=>!acc.includes(x2))],[])};return asAnyOf(def,refs)}(def,refs);case ZodFirstPartyTypeKind.ZodIntersection:return function parseIntersectionDef(def,refs){const allOf=[parseDef(def.left._def,{...refs,currentPath:[...refs.currentPath,"allOf","0"]}),parseDef(def.right._def,{...refs,currentPath:[...refs.currentPath,"allOf","1"]})].filter(x=>!!x),mergedAllOf=[];return allOf.forEach(schema=>{if("type"in(type=schema)&&"string"===type.type||!("allOf"in type)){let nestedSchema=schema;if("additionalProperties"in schema&&!1===schema.additionalProperties){const{additionalProperties,...rest}=schema;nestedSchema=rest}mergedAllOf.push(nestedSchema)}else mergedAllOf.push(...schema.allOf);var type}),mergedAllOf.length?{allOf:mergedAllOf}:void 0}(def,refs);case ZodFirstPartyTypeKind.ZodTuple:return function parseTupleDef(def,refs){return def.rest?{type:"array",minItems:def.items.length,items:def.items.map((x,i)=>parseDef(x._def,{...refs,currentPath:[...refs.currentPath,"items",`${i}`]})).reduce((acc,x)=>void 0===x?acc:[...acc,x],[]),additionalItems:parseDef(def.rest._def,{...refs,currentPath:[...refs.currentPath,"additionalItems"]})}:{type:"array",minItems:def.items.length,maxItems:def.items.length,items:def.items.map((x,i)=>parseDef(x._def,{...refs,currentPath:[...refs.currentPath,"items",`${i}`]})).reduce((acc,x)=>void 0===x?acc:[...acc,x],[])}}(def,refs);case ZodFirstPartyTypeKind.ZodRecord:return parseRecordDef(def,refs);case ZodFirstPartyTypeKind.ZodLiteral:return function parseLiteralDef(def){const parsedType=typeof def.value;return"bigint"!==parsedType&&"number"!==parsedType&&"boolean"!==parsedType&&"string"!==parsedType?{type:Array.isArray(def.value)?"array":"object"}:{type:"bigint"===parsedType?"integer":parsedType,const:def.value}}(def);case ZodFirstPartyTypeKind.ZodEnum:return function parseEnumDef(def){return{type:"string",enum:Array.from(def.values)}}(def);case ZodFirstPartyTypeKind.ZodNativeEnum:return function parseNativeEnumDef(def){const object=def.values,actualValues=Object.keys(def.values).filter(key=>"number"!=typeof object[object[key]]).map(key=>object[key]),parsedTypes=Array.from(new Set(actualValues.map(values=>typeof values)));return{type:1===parsedTypes.length?"string"===parsedTypes[0]?"string":"number":["string","number"],enum:actualValues}}(def);case ZodFirstPartyTypeKind.ZodNullable:return function parseNullableDef(def,refs){if(["ZodString","ZodNumber","ZodBigInt","ZodBoolean","ZodNull"].includes(def.innerType._def.typeName)&&(!def.innerType._def.checks||!def.innerType._def.checks.length))return{type:[primitiveMappings[def.innerType._def.typeName],"null"]};const base=parseDef(def.innerType._def,{...refs,currentPath:[...refs.currentPath,"anyOf","0"]});return base&&{anyOf:[base,{type:"null"}]}}(def,refs);case ZodFirstPartyTypeKind.ZodOptional:return((def,refs)=>{var _a;if(refs.currentPath.toString()===(null==(_a=refs.propertyPath)?void 0:_a.toString()))return parseDef(def.innerType._def,refs);const innerSchema=parseDef(def.innerType._def,{...refs,currentPath:[...refs.currentPath,"anyOf","1"]});return innerSchema?{anyOf:[{not:{}},innerSchema]}:{}})(def,refs);case ZodFirstPartyTypeKind.ZodMap:return function parseMapDef(def,refs){return"record"===refs.mapStrategy?parseRecordDef(def,refs):{type:"array",maxItems:125,items:{type:"array",items:[parseDef(def.keyType._def,{...refs,currentPath:[...refs.currentPath,"items","items","0"]})||{},parseDef(def.valueType._def,{...refs,currentPath:[...refs.currentPath,"items","items","1"]})||{}],minItems:2,maxItems:2}}}(def,refs);case ZodFirstPartyTypeKind.ZodSet:return function parseSetDef(def,refs){const schema={type:"array",uniqueItems:!0,items:parseDef(def.valueType._def,{...refs,currentPath:[...refs.currentPath,"items"]})};return def.minSize&&(schema.minItems=def.minSize.value),def.maxSize&&(schema.maxItems=def.maxSize.value),schema}(def,refs);case ZodFirstPartyTypeKind.ZodLazy:return()=>def.getter()._def;case ZodFirstPartyTypeKind.ZodPromise:return function parsePromiseDef(def,refs){return parseDef(def.type._def,refs)}(def,refs);case ZodFirstPartyTypeKind.ZodNaN:case ZodFirstPartyTypeKind.ZodNever:return{not:{}};case ZodFirstPartyTypeKind.ZodEffects:return function parseEffectsDef(_def,refs){return"input"===refs.effectStrategy?parseDef(_def.schema._def,refs):{}}(def,refs);case ZodFirstPartyTypeKind.ZodAny:case ZodFirstPartyTypeKind.ZodUnknown:return{};case ZodFirstPartyTypeKind.ZodDefault:return function parseDefaultDef(_def,refs){return{...parseDef(_def.innerType._def,refs),default:_def.defaultValue()}}(def,refs);case ZodFirstPartyTypeKind.ZodBranded:return parseBrandedDef(def,refs);case ZodFirstPartyTypeKind.ZodReadonly:case ZodFirstPartyTypeKind.ZodCatch:return((def,refs)=>parseDef(def.innerType._def,refs))(def,refs);case ZodFirstPartyTypeKind.ZodPipeline:return((def,refs)=>{if("input"===refs.pipeStrategy)return parseDef(def.in._def,refs);if("output"===refs.pipeStrategy)return parseDef(def.out._def,refs);const a=parseDef(def.in._def,{...refs,currentPath:[...refs.currentPath,"allOf","0"]});return{allOf:[a,parseDef(def.out._def,{...refs,currentPath:[...refs.currentPath,"allOf",a?"1":"0"]})].filter(x=>void 0!==x)}})(def,refs);case ZodFirstPartyTypeKind.ZodFunction:case ZodFirstPartyTypeKind.ZodVoid:case ZodFirstPartyTypeKind.ZodSymbol:default:return}};function parseDef(def,refs,forceResolution=!1){var _a;const seenItem=refs.seen.get(def);if(refs.override){const overrideResult=null==(_a=refs.override)?void 0:_a.call(refs,def,refs,seenItem,forceResolution);if(overrideResult!==ignoreOverride)return overrideResult}if(seenItem&&!forceResolution){const seenSchema=get$ref(seenItem,refs);if(void 0!==seenSchema)return seenSchema}const newItem={def,path:refs.currentPath,jsonSchema:void 0};refs.seen.set(def,newItem);const jsonSchemaOrGetter=selectParser(def,def.typeName,refs),jsonSchema2="function"==typeof jsonSchemaOrGetter?parseDef(jsonSchemaOrGetter(),refs):jsonSchemaOrGetter;if(jsonSchema2&&addMeta(def,refs,jsonSchema2),refs.postProcess){const postProcessResult=refs.postProcess(jsonSchema2,def,refs);return newItem.jsonSchema=jsonSchema2,postProcessResult}return newItem.jsonSchema=jsonSchema2,jsonSchema2}var get$ref=(item,refs)=>{switch(refs.$refStrategy){case"root":return{$ref:item.path.join("/")};case"relative":return{$ref:getRelativePath(refs.currentPath,item.path)};case"none":case"seen":return item.path.length<refs.currentPath.length&&item.path.every((value,index)=>refs.currentPath[index]===value)?(console.warn(`Recursive reference detected at ${refs.currentPath.join("/")}! Defaulting to any`),{}):"seen"===refs.$refStrategy?{}:void 0}},addMeta=(def,refs,jsonSchema2)=>(def.description&&(jsonSchema2.description=def.description),jsonSchema2),getRefs=options=>{const _options=(options=>"string"==typeof options?{...defaultOptions,name:options}:{...defaultOptions,...options})(options),currentPath=void 0!==_options.name?[..._options.basePath,_options.definitionPath,_options.name]:_options.basePath;return{..._options,currentPath,propertyPath:void 0,seen:new Map(Object.entries(_options.definitions).map(([name,def])=>[def._def,{def:def._def,path:[..._options.basePath,_options.definitionPath,name],jsonSchema:void 0}]))}},zod_to_json_schema_default=(schema,options)=>{var _a;const refs=getRefs(options);let definitions="object"==typeof options&&options.definitions?Object.entries(options.definitions).reduce((acc,[name2,schema2])=>{var _a2;return{...acc,[name2]:null!=(_a2=parseDef(schema2._def,{...refs,currentPath:[...refs.basePath,refs.definitionPath,name2]},!0))?_a2:{}}},{}):void 0;const name="string"==typeof options?options:"title"===(null==options?void 0:options.nameStrategy)||null==options?void 0:options.name,main=null!=(_a=parseDef(schema._def,void 0===name?refs:{...refs,currentPath:[...refs.basePath,refs.definitionPath,name]},!1))?_a:{},title="object"==typeof options&&void 0!==options.name&&"title"===options.nameStrategy?options.name:void 0;void 0!==title&&(main.title=title);const combined=void 0===name?definitions?{...main,[refs.definitionPath]:definitions}:main:{$ref:[..."relative"===refs.$refStrategy?[]:refs.basePath,refs.definitionPath,name].join("/"),[refs.definitionPath]:{...definitions,[name]:main}};return combined.$schema="http://json-schema.org/draft-07/schema#",combined};function zodSchema(zodSchema2,options){return function isZod4Schema(zodSchema2){return"_zod"in zodSchema2}(zodSchema2)?function zod4Schema(zodSchema2,options){var _a;const useReferences=null!=(_a=null==options?void 0:options.useReferences)&&_a;return jsonSchema(()=>external.toJSONSchema(zodSchema2,{target:"draft-7",io:"output",reused:useReferences?"ref":"inline"}),{validate:async value=>{const result=await external.safeParseAsync(zodSchema2,value);return result.success?{success:!0,value:result.data}:{success:!1,error:result.error}}})}(zodSchema2,options):function zod3Schema(zodSchema2,options){var _a;const useReferences=null!=(_a=null==options?void 0:options.useReferences)&&_a;return jsonSchema(()=>zod_to_json_schema_default(zodSchema2,{$refStrategy:useReferences?"root":"none"}),{validate:async value=>{const result=await zodSchema2.safeParseAsync(value);return result.success?{success:!0,value:result.data}:{success:!1,error:result.error}}})}(zodSchema2,options)}var schemaSymbol=Symbol.for("vercel.ai.schema");function jsonSchema(jsonSchema2,{validate}={}){return{[schemaSymbol]:!0,_type:void 0,[validatorSymbol]:!0,get jsonSchema(){return"function"==typeof jsonSchema2&&(jsonSchema2=jsonSchema2()),jsonSchema2},validate}}function dist_asSchema(schema){return null==schema?jsonSchema({properties:{},additionalProperties:!1}):function isSchema(value){return"object"==typeof value&&null!==value&&schemaSymbol in value&&!0===value[schemaSymbol]&&"jsonSchema"in value&&"validate"in value}(schema)?schema:"function"==typeof schema?schema():zodSchema(schema)}var{btoa,atob:dist_atob}=globalThis;__webpack_require__("./node_modules/next/dist/compiled/@opentelemetry/api/index.js");var dist_console=__webpack_require__("./node_modules/console-browserify/index.js"),__defProp=Object.defineProperty,dist_marker="vercel.ai.error.AI_NoOutputSpecifiedError",dist_symbol=Symbol.for(dist_marker);var dist_marker2="vercel.ai.error.AI_InvalidArgumentError",dist_symbol2=Symbol.for(dist_marker2);var dist_marker3="vercel.ai.error.AI_InvalidStreamPartError",dist_symbol3=Symbol.for(dist_marker3);var dist_marker4="vercel.ai.error.AI_InvalidToolInputError",dist_symbol4=Symbol.for(dist_marker4);var dist_marker5="vercel.ai.error.AI_NoImageGeneratedError",dist_symbol5=Symbol.for(dist_marker5);var dist_a6,dist_marker6="vercel.ai.error.AI_NoObjectGeneratedError",dist_symbol6=Symbol.for(dist_marker6),NoObjectGeneratedError=class extends AISDKError{constructor({message="No object generated.",cause,text:text2,response,usage,finishReason}){super({name:"AI_NoObjectGeneratedError",message,cause}),this[dist_a6]=!0,this.text=text2,this.response=response,this.usage=usage,this.finishReason=finishReason}static isInstance(error){return AISDKError.hasMarker(error,dist_marker6)}};dist_a6=dist_symbol6;var dist_marker7="vercel.ai.error.AI_NoOutputGeneratedError",dist_symbol7=Symbol.for(dist_marker7);var dist_symbol8=Symbol.for("vercel.ai.error.AI_NoSuchToolError");var dist_marker9="vercel.ai.error.AI_ToolCallRepairError",dist_symbol9=Symbol.for(dist_marker9);var dist_marker10="vercel.ai.error.AI_InvalidDataContentError",dist_symbol10=Symbol.for(dist_marker10);var dist_marker11="vercel.ai.error.AI_InvalidMessageRoleError",dist_symbol11=Symbol.for(dist_marker11);var dist_marker12="vercel.ai.error.AI_MessageConversionError",dist_symbol12=Symbol.for(dist_marker12);var dist_symbol13=Symbol.for("vercel.ai.error.AI_DownloadError");var dist_symbol14=Symbol.for("vercel.ai.error.AI_RetryError");var dataContentSchema=external.union([external.string(),external.instanceof(Uint8Array),external.instanceof(ArrayBuffer),external.custom(value=>{var _a16,_b;return null!=(_b=null==(_a16=globalThis.Buffer)?void 0:_a16.isBuffer(value))&&_b},{message:"Must be a Buffer"})]);var jsonValueSchema=external.lazy(()=>external.union([external.null(),external.string(),external.number(),external.boolean(),external.record(external.string(),jsonValueSchema),external.array(jsonValueSchema)])),providerMetadataSchema=external.record(external.string(),external.record(external.string(),jsonValueSchema)),textPartSchema=external.object({type:external.literal("text"),text:external.string(),providerOptions:providerMetadataSchema.optional()}),imagePartSchema=external.object({type:external.literal("image"),image:external.union([dataContentSchema,external.instanceof(URL)]),mediaType:external.string().optional(),providerOptions:providerMetadataSchema.optional()}),filePartSchema=external.object({type:external.literal("file"),data:external.union([dataContentSchema,external.instanceof(URL)]),filename:external.string().optional(),mediaType:external.string(),providerOptions:providerMetadataSchema.optional()}),reasoningPartSchema=external.object({type:external.literal("reasoning"),text:external.string(),providerOptions:providerMetadataSchema.optional()}),toolCallPartSchema=external.object({type:external.literal("tool-call"),toolCallId:external.string(),toolName:external.string(),input:external.unknown(),providerOptions:providerMetadataSchema.optional(),providerExecuted:external.boolean().optional()}),outputSchema=external.discriminatedUnion("type",[external.object({type:external.literal("text"),value:external.string()}),external.object({type:external.literal("json"),value:jsonValueSchema}),external.object({type:external.literal("error-text"),value:external.string()}),external.object({type:external.literal("error-json"),value:jsonValueSchema}),external.object({type:external.literal("content"),value:external.array(external.union([external.object({type:external.literal("text"),text:external.string()}),external.object({type:external.literal("media"),data:external.string(),mediaType:external.string()})]))})]),toolResultPartSchema=external.object({type:external.literal("tool-result"),toolCallId:external.string(),toolName:external.string(),output:outputSchema,providerOptions:providerMetadataSchema.optional()}),systemModelMessageSchema=external.object({role:external.literal("system"),content:external.string(),providerOptions:providerMetadataSchema.optional()}),userModelMessageSchema=external.object({role:external.literal("user"),content:external.union([external.string(),external.array(external.union([textPartSchema,imagePartSchema,filePartSchema]))]),providerOptions:providerMetadataSchema.optional()}),assistantModelMessageSchema=external.object({role:external.literal("assistant"),content:external.union([external.string(),external.array(external.union([textPartSchema,filePartSchema,reasoningPartSchema,toolCallPartSchema,toolResultPartSchema]))]),providerOptions:providerMetadataSchema.optional()}),toolModelMessageSchema=external.object({role:external.literal("tool"),content:external.array(toolResultPartSchema),providerOptions:providerMetadataSchema.optional()});external.union([systemModelMessageSchema,userModelMessageSchema,assistantModelMessageSchema,toolModelMessageSchema]);createIdGenerator({prefix:"aitxt",size:24});TransformStream;var uiMessageChunkSchema=lazyValidator(()=>zodSchema(external.union([external.strictObject({type:external.literal("text-start"),id:external.string(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.literal("text-delta"),id:external.string(),delta:external.string(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.literal("text-end"),id:external.string(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.literal("error"),errorText:external.string()}),external.strictObject({type:external.literal("tool-input-start"),toolCallId:external.string(),toolName:external.string(),providerExecuted:external.boolean().optional(),dynamic:external.boolean().optional()}),external.strictObject({type:external.literal("tool-input-delta"),toolCallId:external.string(),inputTextDelta:external.string()}),external.strictObject({type:external.literal("tool-input-available"),toolCallId:external.string(),toolName:external.string(),input:external.unknown(),providerExecuted:external.boolean().optional(),providerMetadata:providerMetadataSchema.optional(),dynamic:external.boolean().optional()}),external.strictObject({type:external.literal("tool-input-error"),toolCallId:external.string(),toolName:external.string(),input:external.unknown(),providerExecuted:external.boolean().optional(),providerMetadata:providerMetadataSchema.optional(),dynamic:external.boolean().optional(),errorText:external.string()}),external.strictObject({type:external.literal("tool-output-available"),toolCallId:external.string(),output:external.unknown(),providerExecuted:external.boolean().optional(),dynamic:external.boolean().optional(),preliminary:external.boolean().optional()}),external.strictObject({type:external.literal("tool-output-error"),toolCallId:external.string(),errorText:external.string(),providerExecuted:external.boolean().optional(),dynamic:external.boolean().optional()}),external.strictObject({type:external.literal("reasoning-start"),id:external.string(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.literal("reasoning-delta"),id:external.string(),delta:external.string(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.literal("reasoning-end"),id:external.string(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.literal("source-url"),sourceId:external.string(),url:external.string(),title:external.string().optional(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.literal("source-document"),sourceId:external.string(),mediaType:external.string(),title:external.string(),filename:external.string().optional(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.literal("file"),url:external.string(),mediaType:external.string(),providerMetadata:providerMetadataSchema.optional()}),external.strictObject({type:external.custom(value=>"string"==typeof value&&value.startsWith("data-"),{message:'Type must start with "data-"'}),id:external.string().optional(),data:external.unknown(),transient:external.boolean().optional()}),external.strictObject({type:external.literal("start-step")}),external.strictObject({type:external.literal("finish-step")}),external.strictObject({type:external.literal("start"),messageId:external.string().optional(),messageMetadata:external.unknown().optional()}),external.strictObject({type:external.literal("finish"),messageMetadata:external.unknown().optional()}),external.strictObject({type:external.literal("abort")}),external.strictObject({type:external.literal("message-metadata"),messageMetadata:external.unknown()})])));function mergeObjects(base,overrides){if(void 0===base&&void 0===overrides)return;if(void 0===base)return overrides;if(void 0===overrides)return base;const result={...base};for(const key in overrides)if(Object.prototype.hasOwnProperty.call(overrides,key)){const overridesValue=overrides[key];if(void 0===overridesValue)continue;const baseValue=key in base?base[key]:void 0,isSourceObject=!(null===overridesValue||"object"!=typeof overridesValue||Array.isArray(overridesValue)||overridesValue instanceof Date||overridesValue instanceof RegExp),isTargetObject=!(null==baseValue||"object"!=typeof baseValue||Array.isArray(baseValue)||baseValue instanceof Date||baseValue instanceof RegExp);result[key]=isSourceObject&&isTargetObject?mergeObjects(baseValue,overridesValue):overridesValue}return result}function fixJson(input){const stack=["ROOT"];let lastValidIndex=-1,literalStart=null;function processValueStart(char,i,swapState){switch(char){case'"':lastValidIndex=i,stack.pop(),stack.push(swapState),stack.push("INSIDE_STRING");break;case"f":case"t":case"n":lastValidIndex=i,literalStart=i,stack.pop(),stack.push(swapState),stack.push("INSIDE_LITERAL");break;case"-":stack.pop(),stack.push(swapState),stack.push("INSIDE_NUMBER");break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":lastValidIndex=i,stack.pop(),stack.push(swapState),stack.push("INSIDE_NUMBER");break;case"{":lastValidIndex=i,stack.pop(),stack.push(swapState),stack.push("INSIDE_OBJECT_START");break;case"[":lastValidIndex=i,stack.pop(),stack.push(swapState),stack.push("INSIDE_ARRAY_START")}}function processAfterObjectValue(char,i){switch(char){case",":stack.pop(),stack.push("INSIDE_OBJECT_AFTER_COMMA");break;case"}":lastValidIndex=i,stack.pop()}}function processAfterArrayValue(char,i){switch(char){case",":stack.pop(),stack.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":lastValidIndex=i,stack.pop()}}for(let i=0;i<input.length;i++){const char=input[i];switch(stack[stack.length-1]){case"ROOT":processValueStart(char,i,"FINISH");break;case"INSIDE_OBJECT_START":switch(char){case'"':stack.pop(),stack.push("INSIDE_OBJECT_KEY");break;case"}":lastValidIndex=i,stack.pop()}break;case"INSIDE_OBJECT_AFTER_COMMA":if('"'===char)stack.pop(),stack.push("INSIDE_OBJECT_KEY");break;case"INSIDE_OBJECT_KEY":if('"'===char)stack.pop(),stack.push("INSIDE_OBJECT_AFTER_KEY");break;case"INSIDE_OBJECT_AFTER_KEY":if(":"===char)stack.pop(),stack.push("INSIDE_OBJECT_BEFORE_VALUE");break;case"INSIDE_OBJECT_BEFORE_VALUE":processValueStart(char,i,"INSIDE_OBJECT_AFTER_VALUE");break;case"INSIDE_OBJECT_AFTER_VALUE":processAfterObjectValue(char,i);break;case"INSIDE_STRING":switch(char){case'"':stack.pop(),lastValidIndex=i;break;case"\\":stack.push("INSIDE_STRING_ESCAPE");break;default:lastValidIndex=i}break;case"INSIDE_ARRAY_START":if("]"===char)lastValidIndex=i,stack.pop();else lastValidIndex=i,processValueStart(char,i,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_ARRAY_AFTER_VALUE":switch(char){case",":stack.pop(),stack.push("INSIDE_ARRAY_AFTER_COMMA");break;case"]":lastValidIndex=i,stack.pop();break;default:lastValidIndex=i}break;case"INSIDE_ARRAY_AFTER_COMMA":processValueStart(char,i,"INSIDE_ARRAY_AFTER_VALUE");break;case"INSIDE_STRING_ESCAPE":stack.pop(),lastValidIndex=i;break;case"INSIDE_NUMBER":switch(char){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":lastValidIndex=i;break;case"e":case"E":case"-":case".":break;case",":stack.pop(),"INSIDE_ARRAY_AFTER_VALUE"===stack[stack.length-1]&&processAfterArrayValue(char,i),"INSIDE_OBJECT_AFTER_VALUE"===stack[stack.length-1]&&processAfterObjectValue(char,i);break;case"}":stack.pop(),"INSIDE_OBJECT_AFTER_VALUE"===stack[stack.length-1]&&processAfterObjectValue(char,i);break;case"]":stack.pop(),"INSIDE_ARRAY_AFTER_VALUE"===stack[stack.length-1]&&processAfterArrayValue(char,i);break;default:stack.pop()}break;case"INSIDE_LITERAL":{const partialLiteral=input.substring(literalStart,i+1);"false".startsWith(partialLiteral)||"true".startsWith(partialLiteral)||"null".startsWith(partialLiteral)?lastValidIndex=i:(stack.pop(),"INSIDE_OBJECT_AFTER_VALUE"===stack[stack.length-1]?processAfterObjectValue(char,i):"INSIDE_ARRAY_AFTER_VALUE"===stack[stack.length-1]&&processAfterArrayValue(char,i));break}}}let result=input.slice(0,lastValidIndex+1);for(let i=stack.length-1;i>=0;i--){switch(stack[i]){case"INSIDE_STRING":result+='"';break;case"INSIDE_OBJECT_KEY":case"INSIDE_OBJECT_AFTER_KEY":case"INSIDE_OBJECT_AFTER_COMMA":case"INSIDE_OBJECT_START":case"INSIDE_OBJECT_BEFORE_VALUE":case"INSIDE_OBJECT_AFTER_VALUE":result+="}";break;case"INSIDE_ARRAY_START":case"INSIDE_ARRAY_AFTER_COMMA":case"INSIDE_ARRAY_AFTER_VALUE":result+="]";break;case"INSIDE_LITERAL":{const partialLiteral=input.substring(literalStart,input.length);"true".startsWith(partialLiteral)?result+="true".slice(partialLiteral.length):"false".startsWith(partialLiteral)?result+="false".slice(partialLiteral.length):"null".startsWith(partialLiteral)&&(result+="null".slice(partialLiteral.length))}}}return result}async function parsePartialJson(jsonText){if(void 0===jsonText)return{value:void 0,state:"undefined-input"};let result=await dist_safeParseJSON({text:jsonText});return result.success?{value:result.value,state:"successful-parse"}:(result=await dist_safeParseJSON({text:fixJson(jsonText)}),result.success?{value:result.value,state:"repaired-parse"}:{value:void 0,state:"failed-parse"})}function isToolUIPart(part){return part.type.startsWith("tool-")}function isDynamicToolUIPart(part){return"dynamic-tool"===part.type}function isToolOrDynamicToolUIPart(part){return isToolUIPart(part)||isDynamicToolUIPart(part)}function getToolName(part){return part.type.split("-").slice(1).join("-")}function createStreamingUIMessageState({lastMessage,messageId}){return{message:"assistant"===(null==lastMessage?void 0:lastMessage.role)?lastMessage:{id:messageId,metadata:void 0,role:"assistant",parts:[]},activeTextParts:{},activeReasoningParts:{},partialToolCalls:{}}}function processUIMessageStream({stream,messageMetadataSchema,dataPartSchemas,runUpdateMessageJob,onError,onToolCall,onData}){return stream.pipeThrough(new TransformStream({async transform(chunk,controller){await runUpdateMessageJob(async({state,write})=>{var _a16,_b,_c,_d;function getToolInvocation(toolCallId){const toolInvocation=state.message.parts.filter(isToolUIPart).find(invocation=>invocation.toolCallId===toolCallId);if(null==toolInvocation)throw new Error("tool-output-error must be preceded by a tool-input-available");return toolInvocation}function getDynamicToolInvocation(toolCallId){const toolInvocation=state.message.parts.filter(part=>"dynamic-tool"===part.type).find(invocation=>invocation.toolCallId===toolCallId);if(null==toolInvocation)throw new Error("tool-output-error must be preceded by a tool-input-available");return toolInvocation}function updateToolPart(options){var _a17;const part=state.message.parts.find(part2=>isToolUIPart(part2)&&part2.toolCallId===options.toolCallId),anyOptions=options,anyPart=part;null!=part?(part.state=options.state,anyPart.input=anyOptions.input,anyPart.output=anyOptions.output,anyPart.errorText=anyOptions.errorText,anyPart.rawInput=anyOptions.rawInput,anyPart.preliminary=anyOptions.preliminary,anyPart.providerExecuted=null!=(_a17=anyOptions.providerExecuted)?_a17:part.providerExecuted,null!=anyOptions.providerMetadata&&"input-available"===part.state&&(part.callProviderMetadata=anyOptions.providerMetadata)):state.message.parts.push({type:`tool-${options.toolName}`,toolCallId:options.toolCallId,state:options.state,input:anyOptions.input,output:anyOptions.output,rawInput:anyOptions.rawInput,errorText:anyOptions.errorText,providerExecuted:anyOptions.providerExecuted,preliminary:anyOptions.preliminary,...null!=anyOptions.providerMetadata?{callProviderMetadata:anyOptions.providerMetadata}:{}})}function updateDynamicToolPart(options){var _a17,_b2;const part=state.message.parts.find(part2=>"dynamic-tool"===part2.type&&part2.toolCallId===options.toolCallId),anyOptions=options,anyPart=part;null!=part?(part.state=options.state,anyPart.toolName=options.toolName,anyPart.input=anyOptions.input,anyPart.output=anyOptions.output,anyPart.errorText=anyOptions.errorText,anyPart.rawInput=null!=(_a17=anyOptions.rawInput)?_a17:anyPart.rawInput,anyPart.preliminary=anyOptions.preliminary,anyPart.providerExecuted=null!=(_b2=anyOptions.providerExecuted)?_b2:part.providerExecuted,null!=anyOptions.providerMetadata&&"input-available"===part.state&&(part.callProviderMetadata=anyOptions.providerMetadata)):state.message.parts.push({type:"dynamic-tool",toolName:options.toolName,toolCallId:options.toolCallId,state:options.state,input:anyOptions.input,output:anyOptions.output,errorText:anyOptions.errorText,preliminary:anyOptions.preliminary,providerExecuted:anyOptions.providerExecuted,...null!=anyOptions.providerMetadata?{callProviderMetadata:anyOptions.providerMetadata}:{}})}async function updateMessageMetadata(metadata){if(null!=metadata){const mergedMetadata=null!=state.message.metadata?mergeObjects(state.message.metadata,metadata):metadata;null!=messageMetadataSchema&&await validateTypes({value:mergedMetadata,schema:messageMetadataSchema}),state.message.metadata=mergedMetadata}}switch(chunk.type){case"text-start":{const textPart={type:"text",text:"",providerMetadata:chunk.providerMetadata,state:"streaming"};state.activeTextParts[chunk.id]=textPart,state.message.parts.push(textPart),write();break}case"text-delta":{const textPart=state.activeTextParts[chunk.id];textPart.text+=chunk.delta,textPart.providerMetadata=null!=(_a16=chunk.providerMetadata)?_a16:textPart.providerMetadata,write();break}case"text-end":{const textPart=state.activeTextParts[chunk.id];textPart.state="done",textPart.providerMetadata=null!=(_b=chunk.providerMetadata)?_b:textPart.providerMetadata,delete state.activeTextParts[chunk.id],write();break}case"reasoning-start":{const reasoningPart={type:"reasoning",text:"",providerMetadata:chunk.providerMetadata,state:"streaming"};state.activeReasoningParts[chunk.id]=reasoningPart,state.message.parts.push(reasoningPart),write();break}case"reasoning-delta":{const reasoningPart=state.activeReasoningParts[chunk.id];reasoningPart.text+=chunk.delta,reasoningPart.providerMetadata=null!=(_c=chunk.providerMetadata)?_c:reasoningPart.providerMetadata,write();break}case"reasoning-end":{const reasoningPart=state.activeReasoningParts[chunk.id];reasoningPart.providerMetadata=null!=(_d=chunk.providerMetadata)?_d:reasoningPart.providerMetadata,reasoningPart.state="done",delete state.activeReasoningParts[chunk.id],write();break}case"file":state.message.parts.push({type:"file",mediaType:chunk.mediaType,url:chunk.url}),write();break;case"source-url":state.message.parts.push({type:"source-url",sourceId:chunk.sourceId,url:chunk.url,title:chunk.title,providerMetadata:chunk.providerMetadata}),write();break;case"source-document":state.message.parts.push({type:"source-document",sourceId:chunk.sourceId,mediaType:chunk.mediaType,title:chunk.title,filename:chunk.filename,providerMetadata:chunk.providerMetadata}),write();break;case"tool-input-start":{const toolInvocations=state.message.parts.filter(isToolUIPart);state.partialToolCalls[chunk.toolCallId]={text:"",toolName:chunk.toolName,index:toolInvocations.length,dynamic:chunk.dynamic},chunk.dynamic?updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"input-streaming",input:void 0,providerExecuted:chunk.providerExecuted}):updateToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"input-streaming",input:void 0,providerExecuted:chunk.providerExecuted}),write();break}case"tool-input-delta":{const partialToolCall=state.partialToolCalls[chunk.toolCallId];partialToolCall.text+=chunk.inputTextDelta;const{value:partialArgs}=await parsePartialJson(partialToolCall.text);partialToolCall.dynamic?updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:partialToolCall.toolName,state:"input-streaming",input:partialArgs}):updateToolPart({toolCallId:chunk.toolCallId,toolName:partialToolCall.toolName,state:"input-streaming",input:partialArgs}),write();break}case"tool-input-available":chunk.dynamic?updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"input-available",input:chunk.input,providerExecuted:chunk.providerExecuted,providerMetadata:chunk.providerMetadata}):updateToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"input-available",input:chunk.input,providerExecuted:chunk.providerExecuted,providerMetadata:chunk.providerMetadata}),write(),onToolCall&&!chunk.providerExecuted&&await onToolCall({toolCall:chunk});break;case"tool-input-error":chunk.dynamic?updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"output-error",input:chunk.input,errorText:chunk.errorText,providerExecuted:chunk.providerExecuted,providerMetadata:chunk.providerMetadata}):updateToolPart({toolCallId:chunk.toolCallId,toolName:chunk.toolName,state:"output-error",input:void 0,rawInput:chunk.input,errorText:chunk.errorText,providerExecuted:chunk.providerExecuted,providerMetadata:chunk.providerMetadata}),write();break;case"tool-output-available":if(chunk.dynamic){const toolInvocation=getDynamicToolInvocation(chunk.toolCallId);updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:toolInvocation.toolName,state:"output-available",input:toolInvocation.input,output:chunk.output,preliminary:chunk.preliminary})}else{const toolInvocation=getToolInvocation(chunk.toolCallId);updateToolPart({toolCallId:chunk.toolCallId,toolName:getToolName(toolInvocation),state:"output-available",input:toolInvocation.input,output:chunk.output,providerExecuted:chunk.providerExecuted,preliminary:chunk.preliminary})}write();break;case"tool-output-error":if(chunk.dynamic){const toolInvocation=getDynamicToolInvocation(chunk.toolCallId);updateDynamicToolPart({toolCallId:chunk.toolCallId,toolName:toolInvocation.toolName,state:"output-error",input:toolInvocation.input,errorText:chunk.errorText,providerExecuted:chunk.providerExecuted})}else{const toolInvocation=getToolInvocation(chunk.toolCallId);updateToolPart({toolCallId:chunk.toolCallId,toolName:getToolName(toolInvocation),state:"output-error",input:toolInvocation.input,rawInput:toolInvocation.rawInput,errorText:chunk.errorText,providerExecuted:chunk.providerExecuted})}write();break;case"start-step":state.message.parts.push({type:"step-start"});break;case"finish-step":state.activeTextParts={},state.activeReasoningParts={};break;case"start":null!=chunk.messageId&&(state.message.id=chunk.messageId),await updateMessageMetadata(chunk.messageMetadata),null==chunk.messageId&&null==chunk.messageMetadata||write();break;case"finish":case"message-metadata":await updateMessageMetadata(chunk.messageMetadata),null!=chunk.messageMetadata&&write();break;case"error":null==onError||onError(new Error(chunk.errorText));break;default:if(function isDataUIMessageChunk(chunk){return chunk.type.startsWith("data-")}(chunk)){null!=(null==dataPartSchemas?void 0:dataPartSchemas[chunk.type])&&await validateTypes({value:chunk.data,schema:dataPartSchemas[chunk.type]});const dataChunk=chunk;if(dataChunk.transient){null==onData||onData(dataChunk);break}const existingUIPart=null!=dataChunk.id?state.message.parts.find(chunkArg=>dataChunk.type===chunkArg.type&&dataChunk.id===chunkArg.id):void 0;null!=existingUIPart?existingUIPart.data=dataChunk.data:state.message.parts.push(dataChunk),null==onData||onData(dataChunk),write()}}controller.enqueue(chunk)})}}))}async function consumeStream({stream,onError}){const reader=stream.getReader();try{for(;;){const{done}=await reader.read();if(done)break}}catch(error){null==onError||onError(error)}finally{reader.releaseLock()}}createIdGenerator({prefix:"aitxt",size:24});createIdGenerator({prefix:"aiobj",size:24});var SerialJobExecutor=class{constructor(){this.queue=[],this.isProcessing=!1}async processQueue(){if(!this.isProcessing){for(this.isProcessing=!0;this.queue.length>0;)await this.queue[0](),this.queue.shift();this.isProcessing=!1}}async run(job){return new Promise((resolve2,reject)=>{this.queue.push(async()=>{try{await job(),resolve2()}catch(error){reject(error)}}),this.processQueue()})}};createIdGenerator({prefix:"aiobj",size:24});((target,all)=>{for(var name16 in all)__defProp(target,name16,{get:all[name16],enumerable:!0})})({},{object:()=>object,text:()=>dist_text});var dist_text=()=>({type:"text",responseFormat:{type:"text"},parsePartial:async({text:text2})=>({partial:text2}),parseOutput:async({text:text2})=>text2}),object=({schema:inputSchema})=>{const schema=dist_asSchema(inputSchema);return{type:"object",responseFormat:{type:"json",schema:schema.jsonSchema},async parsePartial({text:text2}){const result=await parsePartialJson(text2);switch(result.state){case"failed-parse":case"undefined-input":return;case"repaired-parse":case"successful-parse":return{partial:result.value};default:{const _exhaustiveCheck=result.state;throw new Error(`Unsupported parse state: ${_exhaustiveCheck}`)}}},async parseOutput({text:text2},context){const parseResult=await dist_safeParseJSON({text:text2});if(!parseResult.success)throw new NoObjectGeneratedError({message:"No object generated: could not parse the response.",cause:parseResult.error,text:text2,response:context.response,usage:context.usage,finishReason:context.finishReason});const validationResult=await dist_safeValidateTypes({value:parseResult.value,schema});if(!validationResult.success)throw new NoObjectGeneratedError({message:"No object generated: response did not match schema.",cause:validationResult.error,text:text2,response:context.response,usage:context.usage,finishReason:context.finishReason});return validationResult.value}}};var name15="AI_NoSuchProviderError",marker15=`vercel.ai.error.${name15}`,symbol15=Symbol.for(marker15);var HttpChatTransport=class{constructor({api="/api/chat",credentials,headers,body,fetch:fetch2,prepareSendMessagesRequest,prepareReconnectToStreamRequest}){this.api=api,this.credentials=credentials,this.headers=headers,this.body=body,this.fetch=fetch2,this.prepareSendMessagesRequest=prepareSendMessagesRequest,this.prepareReconnectToStreamRequest=prepareReconnectToStreamRequest}async sendMessages({abortSignal,...options}){var _a16,_b,_c,_d,_e;const resolvedBody=await resolve(this.body),resolvedHeaders=await resolve(this.headers),resolvedCredentials=await resolve(this.credentials),baseHeaders={...normalizeHeaders(resolvedHeaders),...normalizeHeaders(options.headers)},preparedRequest=await(null==(_a16=this.prepareSendMessagesRequest)?void 0:_a16.call(this,{api:this.api,id:options.chatId,messages:options.messages,body:{...resolvedBody,...options.body},headers:baseHeaders,credentials:resolvedCredentials,requestMetadata:options.metadata,trigger:options.trigger,messageId:options.messageId})),api=null!=(_b=null==preparedRequest?void 0:preparedRequest.api)?_b:this.api,headers=void 0!==(null==preparedRequest?void 0:preparedRequest.headers)?normalizeHeaders(preparedRequest.headers):baseHeaders,body=void 0!==(null==preparedRequest?void 0:preparedRequest.body)?preparedRequest.body:{...resolvedBody,...options.body,id:options.chatId,messages:options.messages,trigger:options.trigger,messageId:options.messageId},credentials=null!=(_c=null==preparedRequest?void 0:preparedRequest.credentials)?_c:resolvedCredentials,fetch2=null!=(_d=this.fetch)?_d:globalThis.fetch,response=await fetch2(api,{method:"POST",headers:dist_withUserAgentSuffix({"Content-Type":"application/json",...headers},"ai-sdk/5.0.89",dist_getRuntimeEnvironmentUserAgent()),body:JSON.stringify(body),credentials,signal:abortSignal});if(!response.ok)throw new Error(null!=(_e=await response.text())?_e:"Failed to fetch the chat response.");if(!response.body)throw new Error("The response body is empty.");return this.processResponseStream(response.body)}async reconnectToStream(options){var _a16,_b,_c,_d,_e;const resolvedBody=await resolve(this.body),resolvedHeaders=await resolve(this.headers),resolvedCredentials=await resolve(this.credentials),baseHeaders={...normalizeHeaders(resolvedHeaders),...normalizeHeaders(options.headers)},preparedRequest=await(null==(_a16=this.prepareReconnectToStreamRequest)?void 0:_a16.call(this,{api:this.api,id:options.chatId,body:{...resolvedBody,...options.body},headers:baseHeaders,credentials:resolvedCredentials,requestMetadata:options.metadata})),api=null!=(_b=null==preparedRequest?void 0:preparedRequest.api)?_b:`${this.api}/${options.chatId}/stream`,headers=void 0!==(null==preparedRequest?void 0:preparedRequest.headers)?normalizeHeaders(preparedRequest.headers):baseHeaders,credentials=null!=(_c=null==preparedRequest?void 0:preparedRequest.credentials)?_c:resolvedCredentials,fetch2=null!=(_d=this.fetch)?_d:globalThis.fetch,response=await fetch2(api,{method:"GET",headers:dist_withUserAgentSuffix(headers,"ai-sdk/5.0.89",dist_getRuntimeEnvironmentUserAgent()),credentials});if(204===response.status)return null;if(!response.ok)throw new Error(null!=(_e=await response.text())?_e:"Failed to fetch the chat response.");if(!response.body)throw new Error("The response body is empty.");return this.processResponseStream(response.body)}},DefaultChatTransport=class extends HttpChatTransport{constructor(options={}){super(options)}processResponseStream(stream){return dist_parseJsonEventStream({stream,schema:uiMessageChunkSchema}).pipeThrough(new TransformStream({async transform(chunk,controller){if(!chunk.success)throw chunk.error;controller.enqueue(chunk.value)}}))}},AbstractChat=class{constructor({generateId:generateId3=dist_generateId,id=generateId3(),transport=new DefaultChatTransport,messageMetadataSchema,dataPartSchemas,state,onError,onToolCall,onFinish,onData,sendAutomaticallyWhen}){this.activeResponse=void 0,this.jobExecutor=new SerialJobExecutor,this.sendMessage=async(message,options)=>{var _a16,_b,_c,_d;if(null==message)return void await this.makeRequest({trigger:"submit-message",messageId:null==(_a16=this.lastMessage)?void 0:_a16.id,...options});let uiMessage;if("text"in message||"files"in message){const fileParts=Array.isArray(message.files)?message.files:await async function convertFileListToFileUIParts(files){if(null==files)return[];if(!(globalThis.FileList&&files instanceof globalThis.FileList))throw new Error("FileList is not supported in the current environment");return Promise.all(Array.from(files).map(async file=>{const{name:name16,type}=file;return{type:"file",mediaType:type,filename:name16,url:await new Promise((resolve2,reject)=>{const reader=new FileReader;reader.onload=readerEvent=>{var _a16;resolve2(null==(_a16=readerEvent.target)?void 0:_a16.result)},reader.onerror=error=>reject(error),reader.readAsDataURL(file)})}}))}(message.files);uiMessage={parts:[...fileParts,..."text"in message&&null!=message.text?[{type:"text",text:message.text}]:[]]}}else uiMessage=message;if(null!=message.messageId){const messageIndex=this.state.messages.findIndex(m=>m.id===message.messageId);if(-1===messageIndex)throw new Error(`message with id ${message.messageId} not found`);if("user"!==this.state.messages[messageIndex].role)throw new Error(`message with id ${message.messageId} is not a user message`);this.state.messages=this.state.messages.slice(0,messageIndex+1),this.state.replaceMessage(messageIndex,{...uiMessage,id:message.messageId,role:null!=(_b=uiMessage.role)?_b:"user",metadata:message.metadata})}else this.state.pushMessage({...uiMessage,id:null!=(_c=uiMessage.id)?_c:this.generateId(),role:null!=(_d=uiMessage.role)?_d:"user",metadata:message.metadata});await this.makeRequest({trigger:"submit-message",messageId:message.messageId,...options})},this.regenerate=async({messageId,...options}={})=>{const messageIndex=null==messageId?this.state.messages.length-1:this.state.messages.findIndex(message=>message.id===messageId);if(-1===messageIndex)throw new Error(`message ${messageId} not found`);this.state.messages=this.state.messages.slice(0,"assistant"===this.messages[messageIndex].role?messageIndex:messageIndex+1),await this.makeRequest({trigger:"regenerate-message",messageId,...options})},this.resumeStream=async(options={})=>{await this.makeRequest({trigger:"resume-stream",...options})},this.clearError=()=>{"error"===this.status&&(this.state.error=void 0,this.setStatus({status:"ready"}))},this.addToolOutput=async({state="output-available",tool:tool2,toolCallId,output,errorText})=>this.jobExecutor.run(async()=>{var _a16,_b;const messages=this.state.messages,lastMessage=messages[messages.length-1];this.state.replaceMessage(messages.length-1,{...lastMessage,parts:lastMessage.parts.map(part=>isToolOrDynamicToolUIPart(part)&&part.toolCallId===toolCallId?{...part,state,output,errorText}:part)}),this.activeResponse&&(this.activeResponse.state.message.parts=this.activeResponse.state.message.parts.map(part=>isToolOrDynamicToolUIPart(part)&&part.toolCallId===toolCallId?{...part,state,output,errorText}:part)),"streaming"!==this.status&&"submitted"!==this.status&&(null==(_a16=this.sendAutomaticallyWhen)?void 0:_a16.call(this,{messages:this.state.messages}))&&this.makeRequest({trigger:"submit-message",messageId:null==(_b=this.lastMessage)?void 0:_b.id})}),this.addToolResult=this.addToolOutput,this.stop=async()=>{var _a16;"streaming"!==this.status&&"submitted"!==this.status||(null==(_a16=this.activeResponse)?void 0:_a16.abortController)&&this.activeResponse.abortController.abort()},this.id=id,this.transport=transport,this.generateId=generateId3,this.messageMetadataSchema=messageMetadataSchema,this.dataPartSchemas=dataPartSchemas,this.state=state,this.onError=onError,this.onToolCall=onToolCall,this.onFinish=onFinish,this.onData=onData,this.sendAutomaticallyWhen=sendAutomaticallyWhen}get status(){return this.state.status}setStatus({status,error}){this.status!==status&&(this.state.status=status,this.state.error=error)}get error(){return this.state.error}get messages(){return this.state.messages}get lastMessage(){return this.state.messages[this.state.messages.length-1]}set messages(messages){this.state.messages=messages}async makeRequest({trigger,metadata,headers,body,messageId}){var _a16,_b,_c;this.setStatus({status:"submitted",error:void 0});const lastMessage=this.lastMessage;let isAbort=!1,isDisconnect=!1,isError=!1;try{const activeResponse={state:createStreamingUIMessageState({lastMessage:this.state.snapshot(lastMessage),messageId:this.generateId()}),abortController:new AbortController};let stream;if(activeResponse.abortController.signal.addEventListener("abort",()=>{isAbort=!0}),this.activeResponse=activeResponse,"resume-stream"===trigger){const reconnect=await this.transport.reconnectToStream({chatId:this.id,metadata,headers,body});if(null==reconnect)return void this.setStatus({status:"ready"});stream=reconnect}else stream=await this.transport.sendMessages({chatId:this.id,messages:this.state.messages,abortSignal:activeResponse.abortController.signal,metadata,headers,body,trigger,messageId});const runUpdateMessageJob=job=>this.jobExecutor.run(()=>job({state:activeResponse.state,write:()=>{var _a17;this.setStatus({status:"streaming"});activeResponse.state.message.id===(null==(_a17=this.lastMessage)?void 0:_a17.id)?this.state.replaceMessage(this.state.messages.length-1,activeResponse.state.message):this.state.pushMessage(activeResponse.state.message)}}));await consumeStream({stream:processUIMessageStream({stream,onToolCall:this.onToolCall,onData:this.onData,messageMetadataSchema:this.messageMetadataSchema,dataPartSchemas:this.dataPartSchemas,runUpdateMessageJob,onError:error=>{throw error}}),onError:error=>{throw error}}),this.setStatus({status:"ready"})}catch(err){if(isAbort||"AbortError"===err.name)return isAbort=!0,this.setStatus({status:"ready"}),null;isError=!0,err instanceof TypeError&&(err.message.toLowerCase().includes("fetch")||err.message.toLowerCase().includes("network"))&&(isDisconnect=!0),this.onError&&err instanceof Error&&this.onError(err),this.setStatus({status:"error",error:err})}finally{try{null==(_a16=this.onFinish)||_a16.call(this,{message:this.activeResponse.state.message,messages:this.state.messages,isAbort,isDisconnect,isError})}catch(err){dist_console.error(err)}this.activeResponse=void 0}(null==(_b=this.sendAutomaticallyWhen)?void 0:_b.call(this,{messages:this.state.messages}))&&!isError&&await this.makeRequest({trigger:"submit-message",messageId:null==(_c=this.lastMessage)?void 0:_c.id,metadata,headers,body})}};lazyValidator(()=>zodSchema(external.array(external.object({id:external.string(),role:external.enum(["system","user","assistant"]),metadata:external.unknown().optional(),parts:external.array(external.union([external.object({type:external.literal("text"),text:external.string(),state:external.enum(["streaming","done"]).optional(),providerMetadata:providerMetadataSchema.optional()}),external.object({type:external.literal("reasoning"),text:external.string(),state:external.enum(["streaming","done"]).optional(),providerMetadata:providerMetadataSchema.optional()}),external.object({type:external.literal("source-url"),sourceId:external.string(),url:external.string(),title:external.string().optional(),providerMetadata:providerMetadataSchema.optional()}),external.object({type:external.literal("source-document"),sourceId:external.string(),mediaType:external.string(),title:external.string(),filename:external.string().optional(),providerMetadata:providerMetadataSchema.optional()}),external.object({type:external.literal("file"),mediaType:external.string(),filename:external.string().optional(),url:external.string(),providerMetadata:providerMetadataSchema.optional()}),external.object({type:external.literal("step-start")}),external.object({type:external.string().startsWith("data-"),id:external.string().optional(),data:external.unknown()}),external.object({type:external.literal("dynamic-tool"),toolName:external.string(),toolCallId:external.string(),state:external.literal("input-streaming"),input:external.unknown().optional(),providerExecuted:external.boolean().optional(),output:external.never().optional(),errorText:external.never().optional()}),external.object({type:external.literal("dynamic-tool"),toolName:external.string(),toolCallId:external.string(),state:external.literal("input-available"),input:external.unknown(),providerExecuted:external.boolean().optional(),output:external.never().optional(),errorText:external.never().optional(),callProviderMetadata:providerMetadataSchema.optional()}),external.object({type:external.literal("dynamic-tool"),toolName:external.string(),toolCallId:external.string(),state:external.literal("output-available"),input:external.unknown(),providerExecuted:external.boolean().optional(),output:external.unknown(),errorText:external.never().optional(),callProviderMetadata:providerMetadataSchema.optional(),preliminary:external.boolean().optional()}),external.object({type:external.literal("dynamic-tool"),toolName:external.string(),toolCallId:external.string(),state:external.literal("output-error"),input:external.unknown(),providerExecuted:external.boolean().optional(),output:external.never().optional(),errorText:external.string(),callProviderMetadata:providerMetadataSchema.optional()}),external.object({type:external.string().startsWith("tool-"),toolCallId:external.string(),state:external.literal("input-streaming"),providerExecuted:external.boolean().optional(),input:external.unknown().optional(),output:external.never().optional(),errorText:external.never().optional(),approval:external.never().optional()}),external.object({type:external.string().startsWith("tool-"),toolCallId:external.string(),state:external.literal("input-available"),providerExecuted:external.boolean().optional(),input:external.unknown(),output:external.never().optional(),errorText:external.never().optional(),callProviderMetadata:providerMetadataSchema.optional(),approval:external.never().optional()}),external.object({type:external.string().startsWith("tool-"),toolCallId:external.string(),state:external.literal("approval-requested"),input:external.unknown(),providerExecuted:external.boolean().optional(),output:external.never().optional(),errorText:external.never().optional(),callProviderMetadata:providerMetadataSchema.optional(),approval:external.object({id:external.string(),approved:external.never().optional(),reason:external.never().optional()})}),external.object({type:external.string().startsWith("tool-"),toolCallId:external.string(),state:external.literal("approval-responded"),input:external.unknown(),providerExecuted:external.boolean().optional(),output:external.never().optional(),errorText:external.never().optional(),callProviderMetadata:providerMetadataSchema.optional(),approval:external.object({id:external.string(),approved:external.boolean(),reason:external.string().optional()})}),external.object({type:external.string().startsWith("tool-"),toolCallId:external.string(),state:external.literal("output-available"),providerExecuted:external.boolean().optional(),input:external.unknown(),output:external.unknown(),errorText:external.never().optional(),callProviderMetadata:providerMetadataSchema.optional(),preliminary:external.boolean().optional(),approval:external.object({id:external.string(),approved:external.literal(!0),reason:external.string().optional()}).optional()}),external.object({type:external.string().startsWith("tool-"),toolCallId:external.string(),state:external.literal("output-error"),providerExecuted:external.boolean().optional(),input:external.unknown(),output:external.never().optional(),errorText:external.string(),callProviderMetadata:providerMetadataSchema.optional(),approval:external.object({id:external.string(),approved:external.literal(!0),reason:external.string().optional()}).optional()}),external.object({type:external.string().startsWith("tool-"),toolCallId:external.string(),state:external.literal("output-denied"),providerExecuted:external.boolean().optional(),input:external.unknown(),output:external.never().optional(),errorText:external.never().optional(),callProviderMetadata:providerMetadataSchema.optional(),approval:external.object({id:external.string(),approved:external.literal(!1),reason:external.string().optional()})})]))}))))},"./node_modules/class-variance-authority/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{F:()=>cva});var clsx__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/clsx/dist/clsx.mjs");const falsyToString=value=>"boolean"==typeof value?`${value}`:0===value?"0":value,cx=clsx__WEBPACK_IMPORTED_MODULE_0__.$,cva=(base,config)=>props=>{var _config_compoundVariants;if(null==(null==config?void 0:config.variants))return cx(base,null==props?void 0:props.class,null==props?void 0:props.className);const{variants,defaultVariants}=config,getVariantClassNames=Object.keys(variants).map(variant=>{const variantProp=null==props?void 0:props[variant],defaultVariantProp=null==defaultVariants?void 0:defaultVariants[variant];if(null===variantProp)return null;const variantKey=falsyToString(variantProp)||falsyToString(defaultVariantProp);return variants[variant][variantKey]}),propsWithoutUndefined=props&&Object.entries(props).reduce((acc,param)=>{let[key,value]=param;return void 0===value||(acc[key]=value),acc},{}),getCompoundVariantClassNames=null==config||null===(_config_compoundVariants=config.compoundVariants)||void 0===_config_compoundVariants?void 0:_config_compoundVariants.reduce((acc,param)=>{let{class:cvClass,className:cvClassName,...compoundVariantOptions}=param;return Object.entries(compoundVariantOptions).every(param=>{let[key,value]=param;return Array.isArray(value)?value.includes({...defaultVariants,...propsWithoutUndefined}[key]):{...defaultVariants,...propsWithoutUndefined}[key]===value})?[...acc,cvClass,cvClassName]:acc},[]);return cx(base,getVariantClassNames,getCompoundVariantClassNames,null==props?void 0:props.class,null==props?void 0:props.className)}},"./node_modules/lucide-react/dist/esm/icons/chevron-down.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>ChevronDown});const ChevronDown=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},"./node_modules/lucide-react/dist/esm/icons/wrench.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>Wrench});const Wrench=(0,__webpack_require__("./node_modules/lucide-react/dist/esm/createLucideIcon.js").A)("wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.106-3.105c.32-.322.863-.22.983.218a6 6 0 0 1-8.259 7.057l-7.91 7.91a1 1 0 0 1-2.999-3l7.91-7.91a6 6 0 0 1 7.057-8.259c.438.12.54.662.219.984z",key:"1ngwbx"}]])},"./node_modules/next-intl/dist/esm/production/navigation/react-client/createNavigation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>createNavigation_c});var navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),react_namespaceObject=__webpack_require__.t(react,2),production_react=__webpack_require__("./node_modules/use-intl/dist/esm/production/react.js");var a=react_namespaceObject["use".trim()],process=__webpack_require__("./node_modules/process/browser.js");function utils_n(n){return function(n){return"object"==typeof n?null==n.host&&null==n.hostname:!/^[a-z]+:/i.test(n)}(n)&&!function(n){const t="object"==typeof n?n.pathname:n;return null!=t&&!t.startsWith("/")}(n)}function t(n,t){return n.replace(new RegExp(`^${t}`),"")||"/"}function utils_r(n,t){return t===n||t.startsWith(`${n}/`)}function u(n,t,e){return"string"==typeof n?n:n[t]||e}function utils_i(n){const t=function(){try{return"true"===process.env._next_intl_trailing_slash}catch{return!1}}(),[e,...r]=n.split("#"),u=r.join("#");let i=e;if("/"!==i){const n=i.endsWith("/");t&&!n?i+="/":!t&&n&&(i=i.slice(0,-1))}return u&&(i+="#"+u),i}function utils_c(n,t){const e=utils_i(n),r=utils_i(t);return function s(n){const t=n.replace(/\[\[(\.\.\.[^\]]+)\]\]/g,"?(.*)").replace(/\[(\.\.\.[^\]]+)\]/g,"(.+)").replace(/\[([^\]]+)\]/g,"([^/]+)");return new RegExp(`^${t}$`)}(e).test(r)}function utils_o(n,t){return"never"!==t.mode&&t.prefixes?.[n]||f(n)}function f(n){return"/"+n}function l(n){return n.includes("[[...")}function p(n){return n.includes("[...")}function utils_a(n){return n.includes("[")}function h(n,t){const e=n.split("/"),r=t.split("/"),u=Math.max(e.length,r.length);for(let n=0;n<u;n++){const t=e[n],u=r[n];if(!t&&u)return-1;if(t&&!u)return 1;if(t||u){if(!utils_a(t)&&utils_a(u))return-1;if(utils_a(t)&&!utils_a(u))return 1;if(!p(t)&&p(u))return-1;if(p(t)&&!p(u))return 1;if(!l(t)&&l(u))return-1;if(l(t)&&!l(u))return 1}}return 0}var next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link);function c(e){return"string"==typeof e?{pathname:e}:e}function utils_s(e){function n(e){return String(e)}const t=new URLSearchParams;for(const[r,o]of Object.entries(e))Array.isArray(o)?o.forEach(e=>{t.append(r,n(e))}):t.set(r,n(o));return"?"+t.toString()}function utils_f({pathname:e,locale:n,params:t,pathnames:r,query:i}){function c(e){const c=r[e];let f;if(c){const r=u(c,n,e);f=r,t&&Object.entries(t).forEach(([e,n])=>{let t,r;Array.isArray(n)?(t=`(\\[)?\\[...${e}\\](\\])?`,r=n.map(e=>String(e)).join("/")):(t=`\\[${e}\\]`,r=String(n)),f=f.replace(new RegExp(t,"g"),r)}),f=f.replace(/\[\[\.\.\..+\]\]/g,""),f=function(e){return new URL(e,"http://l").pathname}(f)}else f=e;return f=utils_i(f),i&&(f+=utils_s(i)),f}if("string"==typeof e)return c(e);{const{pathname:n,...t}=e;return{...t,pathname:c(n)}}}function utils_u(t,r,o){const i=function g(n){return n.sort(h)}(Object.keys(o)),c=decodeURI(r);for(const e of i){const r=o[e];if("string"==typeof r){if(utils_c(r,c))return e}else if(utils_c(u(r,t,e),c))return e}return r}function syncLocaleCookie_e(e,o,n,a){if(!e||a===n||null==a||!o)return;const f=function utils_l(e,n=window.location.pathname){return"/"===e?n:n.replace(e,"")}(o),r=""!==f?f:"/",{name:c,...i}=e;i.path||(i.path=r);let l=`${c}=${a};`;for(const[t,e]of Object.entries(i))l+=`${"maxAge"===t?"max-age":t}`,"boolean"!=typeof e&&(l+="="+e),l+=";";document.cookie=l}var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");var BaseLink_c=(0,react.forwardRef)(function BaseLink_f({href:e,locale:f,localeCookie:c,onClick:m,prefetch:l,...a},p){const s=(0,production_react.Ym)(),u=null!=f&&f!==s,h=(0,navigation.usePathname)();return u&&(l=!1),(0,jsx_runtime.jsx)(link_default(),{ref:p,href:e,hrefLang:u?f:void 0,onClick:function(o){syncLocaleCookie_e(c,h,s,f),m&&m(o)},prefetch:l,...a})});function createSharedNavigationFns_u(u,h){const j=function e(e){return{...e,localePrefix:(a=e.localePrefix,"object"==typeof a?a:{mode:a||"always"}),localeCookie:(o=e.localeCookie,!!(o??1)&&{name:"NEXT_LOCALE",sameSite:"lax",..."object"==typeof o&&o}),localeDetection:e.localeDetection??!0,alternateLinks:e.alternateLinks??!0};var o,a}(h||{}),d=j.pathnames;const x=(0,react.forwardRef)(function g({href:e,locale:t,...o},r){let f,m;"object"==typeof e?(f=e.pathname,m=e.params):f=e;const l=utils_n(e),s=u(),h=function utils_x(n){return"function"==typeof n.then}(s)?a(s):s,g=l?y({locale:t||h,href:null==d?f:{pathname:f,params:m},forcePrefix:null!=t||void 0}):f;return(0,jsx_runtime.jsx)(BaseLink_c,{ref:r,href:"object"==typeof e?{...e,pathname:g}:g,locale:t,localeCookie:j.localeCookie,...o})});function y(e){const{forcePrefix:t,href:o,locale:r}=e;let n;return null==d?"object"==typeof o?(n=o.pathname,o.query&&(n+=utils_s(o.query))):n=o:n=utils_f({locale:r,...c(o),pathnames:j.pathnames}),function utils_p(e,n,o,a){const{mode:c}=o.localePrefix;let s;return void 0!==a?s=a:utils_n(e)&&("always"===c?s=!0:"as-needed"===c&&(s=o.domains?!o.domains.some(e=>e.defaultLocale===n):n!==o.defaultLocale)),s?function utils_e(n,t){let e=n;return/^\/(\?.*)?$/.test(t)&&(t=t.slice(1)),e+=t,e}(utils_o(n,o.localePrefix),e):e}(n,r,j,t)}function k(e){return function(t,...o){return e(y(t),...o)}}const b=k(navigation.redirect),P=k(navigation.permanentRedirect);return{config:j,Link:x,redirect:b,permanentRedirect:P,getPathname:y}}function n(n){const s=(0,navigation.usePathname)(),a=(0,production_react.Ym)();return(0,react.useMemo)(()=>{if(!s)return s;let e=s;const r=utils_o(a,n.localePrefix);if(utils_r(r,s))e=t(s,r);else if("never"!==n.localePrefix.mode&&n.localePrefix.prefixes){const r=f(a);utils_r(r,s)&&(e=t(s,r))}return e},[n.localePrefix,a,s])}function createNavigation_c(c){const{Link:u,config:m,getPathname:f,...h}=createSharedNavigationFns_u(production_react.Ym,c);return{...h,Link:u,usePathname:function(){const e=n(m),t=(0,production_react.Ym)();return(0,react.useMemo)(()=>e&&m.pathnames?utils_u(t,e,m.pathnames):e,[t,e])},useRouter:function(){const n=(0,navigation.useRouter)(),s=(0,production_react.Ym)(),i=(0,navigation.usePathname)();return(0,react.useMemo)(()=>{function e(e){return function(t,r){const{locale:o,...n}=r||{},c=[f({href:t,locale:o||s,forcePrefix:null!=o||void 0})];Object.keys(n).length>0&&c.push(n),syncLocaleCookie_e(m.localeCookie,i,s,o),e(...c)}}return{...n,push:e(n.push),replace:e(n.replace),prefetch:e(n.prefetch)}},[s,i,n])},getPathname:f}}},"./node_modules/next-intl/dist/esm/production/routing/defineRouting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function t(t){return t}__webpack_require__.d(__webpack_exports__,{A:()=>t})},"./node_modules/throttleit/index.js":module=>{module.exports=function throttle(function_,wait){if("function"!=typeof function_)throw new TypeError(`Expected the first argument to be a \`function\`, got \`${typeof function_}\`.`);let timeoutId,lastCallTime=0;return function throttled(...arguments_){clearTimeout(timeoutId);const now=Date.now(),delayForNextCall=wait-(now-lastCallTime);delayForNextCall<=0?(lastCallTime=now,function_.apply(this,arguments_)):timeoutId=setTimeout(()=>{lastCallTime=Date.now(),function_.apply(this,arguments_)},delayForNextCall)}}}}]);