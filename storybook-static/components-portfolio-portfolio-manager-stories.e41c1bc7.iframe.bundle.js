"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[9341],{"./node_modules/next-intl/dist/esm/production/react-client/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c3:()=>e});var use_intl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/use-intl/dist/esm/production/react.js");function o(r,t){return(...r)=>{try{return t(...r)}catch{throw new Error(void 0)}}}const e=o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.c3);o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.kc)},"./src/components/portfolio/portfolio-manager.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>portfolio_manager_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),next_image=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.js"),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),toast=__webpack_require__("./src/lib/toast.ts"),image_upload_dropzone=__webpack_require__("./src/components/portfolio/image-upload-dropzone.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");function PortfolioManager({images:initialImages,featuredWork:initialFeaturedWork="",onUpdate}){const t=(0,react_client.c3)("dashboard.pro.portfolioManager"),[images,setImages]=(0,react.useState)(initialImages),[featuredWork,setFeaturedWork]=(0,react.useState)(initialFeaturedWork),[editingId,setEditingId]=(0,react.useState)(null),[loading,setLoading]=(0,react.useState)(!1),handleUpdateCaption=(id,caption)=>{setImages(images.map(img=>img.id===id?{...img,caption}:img)),setEditingId(null)},sortedImages=[...images].sort((a,b)=>a.order-b.order);return(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("label",{className:"mb-2 block font-semibold text-[#0f172a] text-sm",htmlFor:"featured-work",children:t("fields.description.label")}),(0,jsx_runtime.jsx)("textarea",{className:"w-full rounded-md border border-[#e2e8f0] px-3 py-2 text-sm focus:border-[#64748b] focus:outline-none focus:ring-2 focus:ring-[#64748b]/20",id:"featured-work",onChange:e=>setFeaturedWork(e.target.value),placeholder:t("fields.description.placeholder"),rows:3,value:featuredWork}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-xs",children:t("fields.description.helper")})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"mb-3 font-semibold text-[#0f172a] text-sm",children:t("upload.title")}),(0,jsx_runtime.jsx)(image_upload_dropzone.U,{maxImages:20-images.length,onImagesUploaded:uploadedImages=>{const newImages=uploadedImages.map((img,index)=>({id:crypto.randomUUID(),url:img.url,caption:img.caption,order:images.length+index,created_at:(new Date).toISOString()}));setImages([...images,...newImages])}})]}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"mb-3 font-semibold text-[#0f172a] text-sm",children:t("upload.currentImages",{count:images.length})}),images.length>0&&(0,jsx_runtime.jsx)("div",{className:"space-y-3",children:sortedImages.map((image,index)=>(0,jsx_runtime.jsxs)("div",{className:"flex gap-3 rounded-lg border border-[#e2e8f0] bg-[#f8fafc] p-3",children:[(0,jsx_runtime.jsx)(next_image.A,{alt:image.caption||`Image ${index+1}`,className:"h-20 w-20 flex-shrink-0 rounded-md object-cover",height:80,loading:"lazy",src:image.thumbnail_url||image.url,width:80}),(0,jsx_runtime.jsx)("div",{className:"min-w-0 flex-1",children:editingId===image.id?(0,jsx_runtime.jsx)("div",{className:"space-y-2",children:(0,jsx_runtime.jsx)("input",{autoFocus:!0,className:"w-full rounded-md border border-[#e2e8f0] px-2 py-1 text-sm focus:border-[#64748b] focus:outline-none",defaultValue:image.caption||"",onBlur:e=>handleUpdateCaption(image.id,e.target.value),onKeyDown:e=>{"Enter"===e.key&&handleUpdateCaption(image.id,e.currentTarget.value)},placeholder:t("actions.editCaption"),type:"text"})}):(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold text-[#0f172a] text-sm",children:image.caption||"(No caption)"}),(0,jsx_runtime.jsx)("p",{className:"mt-1 truncate text-[#94a3b8] text-xs",children:image.url}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 flex flex-wrap gap-2",children:[(0,jsx_runtime.jsx)("button",{className:"text-[#64748b] text-xs hover:text-[#64748b]",onClick:()=>setEditingId(image.id),type:"button",children:t("actions.editCaption")}),(0,jsx_runtime.jsx)("span",{className:"text-[#e2e8f0] text-xs",children:"â€¢"}),(0,jsx_runtime.jsx)("button",{className:"text-[#94a3b8] text-xs hover:text-[#64748b] disabled:cursor-not-allowed disabled:opacity-50",disabled:0===index,onClick:()=>(id=>{const index=images.findIndex(img=>img.id===id);if(index<=0)return;const newImages=[...images],current=newImages[index],previous=newImages[index-1];if(current&&previous){[newImages[index],newImages[index-1]]=[previous,current];for(let i=0;i<newImages.length;i++){const img=newImages[i];img&&(img.order=i)}setImages(newImages)}})(image.id),type:"button",children:t("actions.moveUp")}),(0,jsx_runtime.jsx)("button",{className:"text-[#94a3b8] text-xs hover:text-[#64748b] disabled:cursor-not-allowed disabled:opacity-50",disabled:index===sortedImages.length-1,onClick:()=>(id=>{const index=images.findIndex(img=>img.id===id);if(index<0||index>=images.length-1)return;const newImages=[...images],current=newImages[index],next=newImages[index+1];if(current&&next){[newImages[index],newImages[index+1]]=[next,current];for(let i=0;i<newImages.length;i++){const img=newImages[i];img&&(img.order=i)}setImages(newImages)}})(image.id),type:"button",children:t("actions.moveDown")}),(0,jsx_runtime.jsx)("span",{className:"text-[#e2e8f0] text-xs",children:"â€¢"}),(0,jsx_runtime.jsx)("button",{className:"text-[#64748b] text-xs hover:text-[#64748b]",onClick:()=>(async id=>{if(!await(0,toast.l)(t("deleteConfirm"),"Delete Image"))return;const newImages=images.filter(img=>img.id!==id).map((img,index)=>({...img,order:index}));setImages(newImages)})(image.id),type:"button",children:t("actions.delete")})]})]})}),(0,jsx_runtime.jsx)("div",{className:"flex-shrink-0",children:(0,jsx_runtime.jsx)("span",{className:"inline-flex h-6 w-6 items-center justify-center rounded-full bg-[#e2e8f0] font-semibold text-[#94a3b8] text-xs",children:index+1})})]},image.id))}),0===images.length&&(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-[#e2e8f0] bg-[#f8fafc]/90 p-12 text-center",children:[(0,jsx_runtime.jsx)("p",{className:"text-2xl",children:"ðŸ“¸"}),(0,jsx_runtime.jsx)("p",{className:"mt-2 font-semibold text-[#0f172a] text-sm",children:t("emptyState.title")}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:t("emptyState.description")})]})]}),(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-[#e2e8f0] bg-[#f8fafc] p-4",children:[(0,jsx_runtime.jsxs)("h4",{className:"font-semibold text-[#0f172a] text-sm",children:["ðŸ“¸ ",t("tips.title")]}),(0,jsx_runtime.jsxs)("ul",{className:"mt-2 space-y-1 text-[#94a3b8] text-sm",children:[(0,jsx_runtime.jsxs)("li",{children:["â€¢ ",t("tips.tip1")]}),(0,jsx_runtime.jsxs)("li",{children:["â€¢ ",t("tips.tip2")]}),(0,jsx_runtime.jsxs)("li",{children:["â€¢ ",t("tips.tip3")]}),(0,jsx_runtime.jsxs)("li",{children:["â€¢ ",t("tips.tip4")]}),(0,jsx_runtime.jsxs)("li",{children:["â€¢ ",t("tips.tip5")]})]})]}),(0,jsx_runtime.jsx)("div",{className:"flex justify-end gap-3",children:(0,jsx_runtime.jsx)("button",{className:"rounded-md bg-[#64748b] px-6 py-2 font-semibold text-sm text-[#f8fafc] transition hover:bg-[#64748b] disabled:cursor-not-allowed disabled:opacity-50",disabled:loading,onClick:async()=>{setLoading(!0);try{if(!(await fetch("/api/professional/portfolio",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({images,featuredWork})})).ok)throw new Error("Failed to update portfolio");onUpdate?.(images,featuredWork),toast.o.success(t("success"))}catch(error){console.error("Failed to update portfolio:",error),toast.o.error(t("error"))}finally{setLoading(!1)}},type:"button",children:t(loading?"saving":"save")})})]})}try{PortfolioManager.displayName="PortfolioManager",PortfolioManager.__docgenInfo={description:"Professional interface to manage portfolio gallery\nAdd, reorder, edit captions, and delete images",displayName:"PortfolioManager",props:{images:{defaultValue:null,description:"",name:"images",required:!0,type:{name:"PortfolioImage[]"}},featuredWork:{defaultValue:{value:""},description:"",name:"featuredWork",required:!1,type:{name:"string"}},onUpdate:{defaultValue:null,description:"",name:"onUpdate",required:!1,type:{name:"(images: PortfolioImage[], featuredWork?: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/portfolio/portfolio-manager.tsx#PortfolioManager"]={docgenInfo:PortfolioManager.__docgenInfo,name:"PortfolioManager",path:"src/components/portfolio/portfolio-manager.tsx#PortfolioManager"})}catch(__react_docgen_typescript_loader_error){}const portfolio_manager_stories={title:"Portfolio/PortfolioManager",component:PortfolioManager,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]}}]);