"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[6255],{"./src/components/bookings/rebook-modal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{RebookModal:()=>RebookModal});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),_components_shared_form_modal__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/shared/form-modal.tsx"),_hooks_use_api_mutation__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/hooks/use-api-mutation.ts"),_hooks_use_modal_form__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/hooks/use-modal-form.ts"),_i18n_routing__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/i18n/routing.ts");function RebookModal({booking,isOpen,onClose}){const router=(0,_i18n_routing__WEBPACK_IMPORTED_MODULE_6__.rd)(),suggestedDate=new Date;suggestedDate.setDate(suggestedDate.getDate()+7);const defaultDate=suggestedDate.toISOString().slice(0,16),calculateEndTime=(startTime,durationMinutes)=>{const start=new Date(startTime);return start.setMinutes(start.getMinutes()+durationMinutes),start.toISOString().slice(0,16)},form=(0,_hooks_use_modal_form__WEBPACK_IMPORTED_MODULE_5__.F)({initialData:{scheduled_start:defaultDate,scheduled_end:booking.duration_minutes?calculateEndTime(defaultDate,booking.duration_minutes):defaultDate},resetOnClose:!0}),rebookMutation=(0,_hooks_use_api_mutation__WEBPACK_IMPORTED_MODULE_4__.L)({url:"/api/bookings",method:"POST",refreshOnSuccess:!0});return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_components_shared_form_modal__WEBPACK_IMPORTED_MODULE_3__.k,{cancelLabel:"Cancel",closeOnBackdropClick:!rebookMutation.isLoading,closeOnEscape:!rebookMutation.isLoading,description:"Rebook your service with the same professional",isOpen,isSubmitting:rebookMutation.isLoading,onClose,onSubmit:async()=>{try{await rebookMutation.mutate({professional_id:booking.professional?.profile_id,service_name:booking.service_name,duration_minutes:booking.duration_minutes,scheduled_start:form.formData.scheduled_start,scheduled_end:form.formData.scheduled_end}),onClose(),router.push("/dashboard/customer/bookings")}catch(error){form.setError(error instanceof Error?error.message:"An unexpected error occurred")}},size:"lg",submitLabel:rebookMutation.isLoading?"Booking...":"Confirm Booking",title:"Book Again",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mb-6 flex items-center gap-3",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-[#64748b]/10",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-6 w-6 text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.fNY})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-xl border border-[#e2e8f0] bg-[#f8fafc] p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"mb-3 font-semibold text-[#0f172a] text-sm",children:"Service Details"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-[#94a3b8]",children:"Service:"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#0f172a]",children:booking.service_name})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-[#94a3b8]",children:"Professional:"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#0f172a]",children:booking.professional?.full_name})]}),booking.duration_minutes&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-[#94a3b8]",children:"Duration:"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-[#0f172a]",children:[booking.duration_minutes," minutes"]})]}),booking.amount_captured&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-[#94a3b8]",children:"Amount:"})," ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#0f172a]",children:new Intl.NumberFormat("es-CO",{style:"currency",currency:booking.currency||"COP",maximumFractionDigits:0}).format((booking.amount_captured||0)/100)})]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("label",{className:"mb-2 block font-medium text-[#0f172a] text-sm",htmlFor:"rebook-schedule",children:"When would you like to schedule?"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:"w-full rounded-xl border border-[#e2e8f0] px-4 py-3 text-[#0f172a] transition focus:border-[#0f172a] focus:outline-none focus:ring-2 focus:ring-[#0f172a]/20",id:"rebook-schedule",min:(new Date).toISOString().slice(0,16),onChange:e=>{return value=e.target.value,form.updateField("scheduled_start",value),void(booking.duration_minutes&&form.updateField("scheduled_end",calculateEndTime(value,booking.duration_minutes)));var value},required:!0,type:"datetime-local",value:form.formData.scheduled_start})]}),form.error&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-xl border border-[#64748b]/30 bg-[#64748b]/10 p-4 text-[#64748b] text-sm",children:form.error})]})}try{RebookModal.displayName="RebookModal",RebookModal.__docgenInfo={description:"",displayName:"RebookModal",props:{booking:{defaultValue:null,description:"",name:"booking",required:!0,type:{name:"CustomerBooking"}},isOpen:{defaultValue:null,description:"",name:"isOpen",required:!0,type:{name:"boolean"}},onClose:{defaultValue:null,description:"",name:"onClose",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/bookings/rebook-modal.tsx#RebookModal"]={docgenInfo:RebookModal.__docgenInfo,name:"RebookModal",path:"src/components/bookings/rebook-modal.tsx#RebookModal"})}catch(__react_docgen_typescript_loader_error){}}}]);