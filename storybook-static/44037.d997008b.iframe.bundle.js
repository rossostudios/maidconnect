"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[44037],{"./src/components/admin/help/block-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{x:()=>BlockEditor});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const stableHash=input=>{let hash=0;if(0===input.length)return"0";for(let i=0;i<input.length;i++){hash=(hash<<5)-hash+input.charCodeAt(i),hash|=0}return Math.abs(hash).toString(36)};function markdownToBlocks(markdown,options){const lines=markdown.split("\n"),blocks=[];let currentBlock=null,listItems=[],codeBlock=null;const deterministic=options?.deterministic??!1,baseSeed=options?.seed??stableHash(markdown||"content");let counter=0;const nextId=()=>deterministic?`blk-${baseSeed}-${counter++}`:crypto.randomUUID();for(let i=0;i<lines.length;i++){const line=lines[i];if(line?.startsWith("```")){if(codeBlock)blocks.push({id:nextId(),type:"code",content:codeBlock.lines.join("\n"),metadata:{language:codeBlock.language}}),codeBlock=null;else{codeBlock={language:line.slice(3).trim()||"plaintext",lines:[]}}continue}if(codeBlock){codeBlock.lines.push(line??"");continue}if(line?.startsWith("# ")){flushListBlock(),blocks.push({id:nextId(),type:"heading1",content:line.slice(2).trim()});continue}if(line?.startsWith("## ")){flushListBlock(),blocks.push({id:nextId(),type:"heading2",content:line.slice(3).trim()});continue}if(line?.startsWith("### ")){flushListBlock(),blocks.push({id:nextId(),type:"heading3",content:line.slice(4).trim()});continue}if(line?.toLowerCase().includes("article-separator")){flushListBlock(),blocks.push({id:nextId(),type:"divider",content:""});continue}if(line?.match(/^(-{3,}|\*{3,})$/)){flushListBlock(),blocks.push({id:nextId(),type:"divider",content:""});continue}if(line?.startsWith("> ")){flushListBlock();const content=line.slice(2).trim();let calloutType="info";content.startsWith("üí°")||content.toLowerCase().includes("tip:")?calloutType="info":content.startsWith("‚ö†Ô∏è")||content.toLowerCase().includes("warning:")?calloutType="warning":content.startsWith("‚úÖ")||content.toLowerCase().includes("success:")?calloutType="success":(content.startsWith("‚ùå")||content.toLowerCase().includes("error:"))&&(calloutType="error");const cleanContent=content.replace(/^(üí°|‚ö†Ô∏è|‚úÖ|‚ùå)\s*/,"").replace(/^(tip:|warning:|success:|error:)\s*/i,"");blocks.push({id:nextId(),type:"callout",content:cleanContent,metadata:{calloutType}});continue}const imageMatch=line?.match(/^!\[(.*?)]\((.*?)\)$/);if(imageMatch){const[,caption="",url=""]=imageMatch;blocks.push({id:nextId(),type:"image",content:caption,metadata:{imageUrl:url,caption}});continue}if(line?.match(/^[-*]\s\[( |x|X)\]\s+/)){flushListBlock();const checked=/^[-*]\s\[(x|X)\]\s+/.test(line),content=line.replace(/^[-*]\s\[( |x|X)\]\s+/,"").trim();blocks.push({id:nextId(),type:"checkbox",content,metadata:{checked}});continue}if(line?.match(/^[-*]\s/)){const content=line.slice(2).trim();"bulletList"===currentBlock?.type?listItems.push(content):(flushListBlock(),currentBlock={id:nextId(),type:"bulletList",content:"",metadata:{listItems:[content]}},listItems=[content]);continue}if(line?.match(/^\d+\.\s/)){const content=line.replace(/^\d+\.\s/,"").trim();"orderedList"===currentBlock?.type?listItems.push(content):(flushListBlock(),currentBlock={id:nextId(),type:"orderedList",content:"",metadata:{listItems:[content]}},listItems=[content]);continue}line?.trim()?(flushListBlock(),blocks.push({id:nextId(),type:"paragraph",content:line})):flushListBlock()}function flushListBlock(){!currentBlock||"bulletList"!==currentBlock.type&&"orderedList"!==currentBlock.type||(blocks.push({...currentBlock,metadata:{listItems}}),currentBlock=null,listItems=[])}return flushListBlock(),blocks.length>0?blocks:[{id:nextId(),type:"paragraph",content:""}]}var utils=__webpack_require__("./src/lib/utils.ts");const BLOCK_TYPES={paragraph:{label:"Text",icon:index_min.N$i,shortcut:"Ctrl+Alt+0"},heading1:{label:"Heading 1",icon:index_min.n8E,shortcut:"Ctrl+Alt+1"},heading2:{label:"Heading 2",icon:index_min.QSe,shortcut:"Ctrl+Alt+2"},heading3:{label:"Heading 3",icon:index_min.XTd,shortcut:"Ctrl+Alt+3"},bulletList:{label:"Bullet List",icon:index_min.EX2,shortcut:"Ctrl+Shift+8"},orderedList:{label:"Numbered List",icon:index_min.TD1,shortcut:"Ctrl+Shift+7"},checkbox:{label:"Checklist",icon:index_min.uXY,shortcut:"Ctrl+Shift+C"},code:{label:"Code Block",icon:index_min.loI,shortcut:"Ctrl+Alt+C"},callout:{label:"Callout",icon:index_min.jEv,shortcut:"Ctrl+Alt+I"},divider:{label:"Separator",icon:index_min.s4F,shortcut:"Ctrl+Alt+D"},image:{label:"Image",icon:index_min.v_Q,shortcut:"Ctrl+Shift+I"}},CALLOUT_TYPES={info:{label:"Info",iconComponent:index_min.ENT,color:"blue"},warning:{label:"Warning",iconComponent:index_min.Xix,color:"orange"},success:{label:"Success",iconComponent:index_min.XL2,color:"green"},error:{label:"Error",iconComponent:index_min.bJi,color:"red"}},editorTokens={shell:"mx-auto w-full max-w-3xl px-4 sm:px-6 py-6",blockStack:"space-y-1",blockRow:"group relative flex items-start gap-3 rounded-2xl pl-4 pr-16 py-1.5 transition hover:bg-white dark:bg-slate-950",dragOver:"bg-white dark:bg-slate-950 border border-dashed border-slate-200 dark:border-slate-800",handleRail:"absolute top-2 right-2 flex items-center gap-1 rounded-full bg-white dark:bg-slate-950/90 px-1 py-0.5 text-slate-600 dark:text-slate-400/70 opacity-0 shadow-sm ring-1 ring-[#e2e8f0] transition-all group-hover:opacity-100",handleButton:"rounded-full p-1 transition hover:bg-[#e2e8f0]/30 hover:text-slate-600 dark:text-slate-400 active:cursor-grabbing",deleteButton:"rounded-full p-1 text-slate-900 dark:text-slate-100 transition hover:bg-white dark:bg-slate-950 hover:text-slate-900 dark:text-slate-100"},TEXT_BLOCK_TYPES=["paragraph","heading1","heading2","heading3","callout","checkbox"],getDefaultMetadata=type=>"bulletList"===type||"orderedList"===type?{listItems:[""]}:"checkbox"===type?{checked:!1}:"image"===type?{imageUrl:"",caption:""}:void 0,createBlock=(type="paragraph",overrides)=>({id:overrides?.id??crypto.randomUUID(),type,content:overrides?.content??"",metadata:overrides?.metadata??getDefaultMetadata(type)}),getCaretOffsetWithin=element=>{const selection=window.getSelection();if(!selection||0===selection.rangeCount)return element.textContent?.length??0;const range=selection.getRangeAt(0);if(!element.contains(range.startContainer))return element.textContent?.length??0;const preRange=range.cloneRange();return preRange.selectNodeContents(element),preRange.setEnd(range.startContainer,range.startOffset),preRange.toString().length},setCaretPosition=(element,position)=>{const selection=window.getSelection();if(!selection)return;const walker=document.createTreeWalker(element,NodeFilter.SHOW_TEXT);let currentNode=walker.nextNode(),remaining=position;for(;currentNode;){const length=currentNode.textContent?.length??0;if(remaining<=length){const range=document.createRange();return range.setStart(currentNode,remaining),range.collapse(!0),selection.removeAllRanges(),void selection.addRange(range)}remaining-=length,currentNode=walker.nextNode()}const fallbackRange=document.createRange();fallbackRange.selectNodeContents(element),fallbackRange.collapse(!1),selection.removeAllRanges(),selection.addRange(fallbackRange)},isCaretAtStart=element=>0===getCaretOffsetWithin(element);function BlockEditor({initialContent="",onChange,locale}){const[blocks,setBlocks]=(0,react.useState)(()=>markdownToBlocks(initialContent,{deterministic:!0})),[focusedBlockId,setFocusedBlockId]=(0,react.useState)(null),[showBlockMenu,setShowBlockMenu]=(0,react.useState)(null),[slashMenuSearch,setSlashMenuSearch]=(0,react.useState)(""),[recentBlocks]=(0,react.useState)([]),[draggedBlockId,setDraggedBlockId]=(0,react.useState)(null),[dragOverBlockId,setDragOverBlockId]=(0,react.useState)(null),editorContainerRef=(0,react.useRef)(null),[selectionToolbar,setSelectionToolbar]=(0,react.useState)({visible:!1,x:0,y:0}),savedRangeRef=(0,react.useRef)(null),hideSelectionToolbar=(0,react.useCallback)(()=>{setSelectionToolbar(prev=>prev.visible?{...prev,visible:!1}:prev),savedRangeRef.current=null},[]),updateSelectionToolbar=(0,react.useCallback)(()=>{const container=editorContainerRef.current,selection=window.getSelection();if(!container||!selection||0===selection.rangeCount)return void hideSelectionToolbar();if(selection.isCollapsed)return void hideSelectionToolbar();const range=selection.getRangeAt(0),node=range.commonAncestorContainer;if(!container.contains(node))return void hideSelectionToolbar();const rect=range.getBoundingClientRect();if(0===rect.width&&0===rect.height)return void hideSelectionToolbar();const containerRect=container.getBoundingClientRect();savedRangeRef.current=range.cloneRange();const x=rect.left-containerRect.left+rect.width/2,y=rect.top-containerRect.top-48;setSelectionToolbar({visible:!0,x,y:Math.max(y,0)})},[hideSelectionToolbar]);(0,react.useEffect)(()=>{const handleMouseUp=()=>requestAnimationFrame(updateSelectionToolbar),handleKeyUp=()=>requestAnimationFrame(updateSelectionToolbar),handleScroll=event=>{const container=editorContainerRef.current;container&&event.target instanceof Node&&container.contains(event.target)&&hideSelectionToolbar()};return document.addEventListener("mouseup",handleMouseUp),document.addEventListener("keyup",handleKeyUp),document.addEventListener("scroll",handleScroll,!0),()=>{document.removeEventListener("mouseup",handleMouseUp),document.removeEventListener("keyup",handleKeyUp),document.removeEventListener("scroll",handleScroll,!0)}},[hideSelectionToolbar,updateSelectionToolbar]);const restoreSelection=(0,react.useCallback)(()=>{const selection=window.getSelection();selection&&savedRangeRef.current&&(selection.removeAllRanges(),selection.addRange(savedRangeRef.current))},[]),applyFormatting=(0,react.useCallback)((command,value)=>{restoreSelection(),document.execCommand(command,!1,value),updateSelectionToolbar()},[restoreSelection,updateSelectionToolbar]),handleLinkInsert=(0,react.useCallback)(()=>{restoreSelection();const url=window.prompt("es"===locale?"Pega un enlace":"Paste a link","https://");url?document.execCommand("createLink",!1,url):document.execCommand("unlink"),updateSelectionToolbar()},[locale,restoreSelection,updateSelectionToolbar]);(0,react.useEffect)(()=>{const timeout=setTimeout(()=>{const markdown=function blocksToMarkdown(blocks){return blocks.map(block=>{switch(block.type){case"heading1":return`# ${block.content}`;case"heading2":return`## ${block.content}`;case"heading3":return`### ${block.content}`;case"bulletList":return(block.metadata?.listItems??[]).map(item=>`- ${item}`).join("\n");case"orderedList":return(block.metadata?.listItems??[]).map((item,idx)=>`${idx+1}. ${item}`).join("\n");case"code":return`\`\`\`${block.metadata?.language??"plaintext"}\n${block.content}\n\`\`\``;case"checkbox":return`- [${block.metadata?.checked?"x":" "}] ${block.content}`.trimEnd();case"callout":{const calloutType=block.metadata?.calloutType??"info";return`> ${"info"===calloutType?"üí°":"warning"===calloutType?"‚ö†Ô∏è":"success"===calloutType?"‚úÖ":"‚ùå"} ${block.content}`}case"image":{const imageUrl=block.metadata?.imageUrl??"",caption=block.metadata?.caption??block.content??"";return imageUrl?`![${caption}](${imageUrl})`:caption}case"divider":return'<hr class="article-separator" />';default:return block.content}}).join("\n\n")}(blocks);onChange?.(markdown)},500);return()=>clearTimeout(timeout)},[blocks,onChange]),(0,react.useEffect)(()=>{const handleGlobalKeyDown=e=>{(e.metaKey||e.ctrlKey)&&e.shiftKey&&"Backspace"===e.key&&(e.preventDefault(),setBlocks([{id:crypto.randomUUID(),type:"paragraph",content:""}]))};return document.addEventListener("keydown",handleGlobalKeyDown),()=>document.removeEventListener("keydown",handleGlobalKeyDown)},[]);const updateBlock=(0,react.useCallback)((id,updates)=>{setBlocks(prev=>prev.map(block=>block.id===id?{...block,...updates}:block))},[]),deleteBlock=(0,react.useCallback)(id=>{setBlocks(prev=>1===prev.length?[createBlock()]:prev.filter(block=>block.id!==id))},[]),splitBlock=(0,react.useCallback)((blockId,caretIndex,textValue)=>{const newBlockId=crypto.randomUUID();setBlocks(prev=>{const index=prev.findIndex(b=>b.id===blockId);if(-1===index)return prev;const block=prev[index];if(!block||!TEXT_BLOCK_TYPES.includes(block.type))return prev;const before=textValue.slice(0,caretIndex),after=textValue.slice(caretIndex),nextType="checkbox"===block.type?"checkbox":"callout"===block.type?"callout":"paragraph",newBlock=createBlock(nextType,{id:newBlockId,content:after,metadata:"checkbox"===nextType?{checked:!1}:"callout"===nextType?block.metadata:void 0}),updated=[...prev];return updated[index]={...block,content:before},updated.splice(index+1,0,newBlock),updated}),requestAnimationFrame(()=>{const element=document.querySelector(`[data-block-id="${newBlockId}"]`);element&&(element.focus(),setCaretPosition(element,0))})},[]),mergeBlockWithPrevious=(0,react.useCallback)(blockId=>{let focusId=null,caretPosition=0;setBlocks(prev=>{const index=prev.findIndex(b=>b.id===blockId);if(index<=0)return prev;const previous=prev[index-1],current=prev[index];if(!previous||!current)return prev;if(focusId=previous.id,caretPosition=(previous.content??"").length,!TEXT_BLOCK_TYPES.includes(previous.type)||!TEXT_BLOCK_TYPES.includes(current.type))return prev;const mergedContent=`${previous.content??""}${current.content??""}`,updated=[...prev];return updated[index-1]={...previous,content:mergedContent},updated.splice(index,1),updated}),focusId&&requestAnimationFrame(()=>{const element=document.querySelector(`[data-block-id="${focusId}"]`);element&&(element.focus(),setCaretPosition(element,caretPosition))})},[]),moveBlock=(0,react.useCallback)((id,direction)=>{setBlocks(prev=>{const index=prev.findIndex(b=>b.id===id);if(-1===index)return prev;if("up"===direction&&0===index)return prev;if("down"===direction&&index===prev.length-1)return prev;const newBlocks=[...prev],targetIndex="up"===direction?index-1:index+1,temp=newBlocks[index];return temp&&newBlocks[targetIndex]&&(newBlocks[index]=newBlocks[targetIndex],newBlocks[targetIndex]=temp),newBlocks})},[]),handlePaste=(0,react.useCallback)((blockId,e)=>{const pastedText=e.clipboardData.getData("text/plain");if((pastedText.includes("# ")||pastedText.includes("## ")||pastedText.includes("```")||pastedText.includes("- ")||pastedText.includes("* ")||pastedText.includes("1. ")||pastedText.includes("\n\n"))&&pastedText.length>50){e.preventDefault();const newBlocks=markdownToBlocks(pastedText);setBlocks(prev=>{const index=prev.findIndex(b=>b.id===blockId),beforeBlocks=prev.slice(0,index),afterBlocks=prev.slice(index+1);return[...beforeBlocks,...newBlocks,...afterBlocks]})}},[]),handleDragStart=(0,react.useCallback)(blockId=>{setDraggedBlockId(blockId)},[]),handleDragOver=(0,react.useCallback)((e,blockId)=>{draggedBlockId&&(e.preventDefault(),setDragOverBlockId(blockId))},[draggedBlockId]),handleDrop=(0,react.useCallback)((e,targetBlockId)=>{if(e.preventDefault(),!draggedBlockId||draggedBlockId===targetBlockId)return setDraggedBlockId(null),void setDragOverBlockId(null);setBlocks(prev=>{const draggedIndex=prev.findIndex(b=>b.id===draggedBlockId),targetIndex=prev.findIndex(b=>b.id===targetBlockId);if(-1===draggedIndex||-1===targetIndex)return prev;const newBlocks=[...prev],draggedBlock=newBlocks[draggedIndex];if(!draggedBlock)return prev;newBlocks.splice(draggedIndex,1);const adjustedTargetIndex=draggedIndex<targetIndex?targetIndex-1:targetIndex;return newBlocks.splice(adjustedTargetIndex,0,draggedBlock),newBlocks}),setDraggedBlockId(null),setDragOverBlockId(null)},[draggedBlockId]),handleDragEnd=(0,react.useCallback)(()=>{setDraggedBlockId(null),setDragOverBlockId(null)},[]),toolbarButtons=[{icon:index_min.LVC,label:"es"===locale?"Negrita":"Bold",onClick:()=>applyFormatting("bold")},{icon:index_min.pLY,label:"es"===locale?"Cursiva":"Italic",onClick:()=>applyFormatting("italic")},{icon:index_min.zM2,label:"es"===locale?"Subrayado":"Underline",onClick:()=>applyFormatting("underline")},{icon:index_min.Wa6,label:"es"===locale?"Tachado":"Strikethrough",onClick:()=>applyFormatting("strikeThrough")},{icon:index_min.FCW,label:"es"===locale?"Resaltar":"Highlight",onClick:()=>applyFormatting("hiliteColor","#f8fafc")},{icon:index_min.loI,label:"es"===locale?"C√≥digo en l√≠nea":"Inline code",onClick:()=>{restoreSelection();const selection=window.getSelection();if(!selection||0===selection.rangeCount)return;const text=selection.toString(),html=`<code>${text?text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):"&nbsp;"}</code>`;document.execCommand("insertHTML",!1,html),updateSelectionToolbar()}},{icon:index_min.Z9U,label:"es"===locale?"Enlace":"Link",onClick:handleLinkInsert},{icon:index_min.FYK,label:"es"===locale?"Quitar enlace":"Remove link",onClick:()=>applyFormatting("unlink")},{icon:index_min.VNq,label:"es"===locale?"Alinear izquierda":"Align left",onClick:()=>applyFormatting("justifyLeft")},{icon:index_min.cmm,label:"es"===locale?"Centrar":"Align center",onClick:()=>applyFormatting("justifyCenter")},{icon:index_min.E3o,label:"es"===locale?"Alinear derecha":"Align right",onClick:()=>applyFormatting("justifyRight")}];return(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("relative",editorTokens.shell),ref:editorContainerRef,children:[selectionToolbar.visible&&(0,jsx_runtime.jsx)("div",{className:"pointer-events-auto absolute z-40 flex items-center gap-1 rounded-full border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950/95 px-2 py-1 text-slate-600 dark:text-slate-400 shadow-xl",style:{left:selectionToolbar.x,top:selectionToolbar.y,transform:"translate(-50%, -100%)"},children:toolbarButtons.map(button=>(0,jsx_runtime.jsx)("button",{className:"rounded-full p-1 transition hover:bg-[#e2e8f0]/30",onClick:e=>{e.preventDefault(),button.onClick()},onMouseDown:e=>e.preventDefault(),title:button.label,type:"button",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:button.icon})},button.label))}),0===blocks.length&&(0,jsx_runtime.jsx)("div",{className:"flex min-h-[320px] items-center justify-center rounded-3xl border border-slate-200 dark:border-slate-800 border-dashed bg-white dark:bg-slate-950/70 text-center",children:(0,jsx_runtime.jsxs)("button",{className:"flex items-center gap-2 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-4 py-3 text-slate-600 dark:text-slate-400 shadow-sm transition hover:border-slate-900 dark:border-slate-100/30 hover:text-slate-900 dark:text-slate-100",onClick:()=>{const newBlock={id:crypto.randomUUID(),type:"paragraph",content:""};setBlocks([newBlock]),setTimeout(()=>{const element=document.querySelector(`[data-block-id="${newBlock.id}"]`);element?.focus()},50)},type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5",icon:index_min._L6}),(0,jsx_runtime.jsx)("span",{className:"font-medium text-base",children:"es"===locale?"Comienza a escribir o presiona '/'":"Start typing or tap '/' for commands"})]})}),blocks.length>0&&(0,jsx_runtime.jsx)("div",{className:editorTokens.blockStack,children:blocks.map(block=>(0,jsx_runtime.jsx)(BlockComponent,{block,deleteBlock,draggedBlockId,dragOverBlockId,isFocused:focusedBlockId===block.id,locale,mergeBlockWithPrevious,moveBlock,onDragEnd:handleDragEnd,onDragOver:handleDragOver,onDragStart:handleDragStart,onDrop:handleDrop,onFocus:()=>setFocusedBlockId(block.id),onPaste:handlePaste,recentBlocks,showBlockMenu:showBlockMenu===block.id,slashMenuSearch,splitBlock,toggleBlockMenu:()=>{setShowBlockMenu(showBlockMenu===block.id?null:block.id),setSlashMenuSearch("")},updateBlock,updateSlashSearch:setSlashMenuSearch},block.id))})]})}function BlockComponent({block,updateBlock,deleteBlock,splitBlock,mergeBlockWithPrevious,moveBlock,onFocus,isFocused,locale,showBlockMenu,toggleBlockMenu,slashMenuSearch,updateSlashSearch,recentBlocks,onDragStart,onDragOver,onDrop,onDragEnd,draggedBlockId,dragOverBlockId,onPaste}){const ref=(0,react.useRef)(null),menuRef=(0,react.useRef)(null),selectedButtonRef=(0,react.useRef)(null),[selectedIndex,setSelectedIndex]=(0,react.useState)(0),allBlockTypes=Object.keys(BLOCK_TYPES).filter(type=>"divider"!==type),filteredBlockTypes=slashMenuSearch?allBlockTypes.filter(type=>BLOCK_TYPES[type].label.toLowerCase().includes(slashMenuSearch.toLowerCase())):allBlockTypes,showRecent=!slashMenuSearch&&recentBlocks.length>0,recentBlocksFiltered=recentBlocks.filter(type=>"divider"!==type),allOptions=showRecent?[...recentBlocksFiltered,...filteredBlockTypes.filter(t=>!recentBlocksFiltered.includes(t))]:filteredBlockTypes;(0,react.useEffect)(()=>{showBlockMenu&&setSelectedIndex(0)},[showBlockMenu,slashMenuSearch]),(0,react.useEffect)(()=>{if(!showBlockMenu)return;const handleClickOutside=e=>{menuRef.current&&!menuRef.current.contains(e.target)&&toggleBlockMenu()};return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[showBlockMenu,toggleBlockMenu]),(0,react.useEffect)(()=>{showBlockMenu&&selectedButtonRef.current&&selectedButtonRef.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[selectedIndex,showBlockMenu]);const isDragging=draggedBlockId===block.id,isDragOver=dragOverBlockId===block.id;return(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)(editorTokens.blockRow,isDragOver&&editorTokens.dragOver,isDragging&&"opacity-60"),onDragOver:e=>onDragOver(e,block.id),onDrop:e=>onDrop(e,block.id),children:[(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)(editorTokens.handleRail,(isFocused||showBlockMenu||draggedBlockId===block.id)&&"opacity-100"),children:[(0,jsx_runtime.jsx)("button",{className:editorTokens.handleButton,draggable:!0,onDragEnd,onDragStart:e=>{e.dataTransfer.setData("text/plain",block.id),onDragStart(block.id)},title:"es"===locale?"Arrastrar":"Drag",type:"button",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3.5 w-3.5",icon:index_min.x1u})}),(0,jsx_runtime.jsx)("button",{className:editorTokens.handleButton,onClick:toggleBlockMenu,title:"es"===locale?"Agregar bloque":"Add block",type:"button",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3.5 w-3.5",icon:index_min._L6})}),(0,jsx_runtime.jsx)("button",{className:editorTokens.deleteButton,onClick:()=>deleteBlock(block.id),title:"es"===locale?"Eliminar bloque":"Delete block",type:"button",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3.5 w-3.5",icon:index_min.rvS})})]}),showBlockMenu&&(0,jsx_runtime.jsxs)("div",{className:"absolute top-full left-0 z-50 mt-1 w-72 overflow-hidden rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 shadow-lg",ref:menuRef,children:[(0,jsx_runtime.jsx)("div",{className:"border-slate-200 dark:border-slate-800/40 border-b bg-white dark:bg-slate-950 px-3 py-2",children:(0,jsx_runtime.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-xs",children:slashMenuSearch?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:["es"===locale?"Buscando":"Searching",': "',slashMenuSearch,'"']}):(0,jsx_runtime.jsx)(jsx_runtime.Fragment,{children:"es"===locale?"Escribe para buscar bloques":"Type to search blocks"})})}),(0,jsx_runtime.jsxs)("div",{className:"max-h-80 overflow-y-auto p-1",children:[showRecent&&(0,jsx_runtime.jsxs)("div",{className:"mb-2",children:[(0,jsx_runtime.jsx)("p",{className:"px-2 py-1.5 font-medium text-slate-600 dark:text-slate-400/70 text-xs uppercase tracking-wide",children:"es"===locale?"Recientes":"Recent"}),recentBlocksFiltered.map((type,idx)=>{const isSelected=selectedIndex===idx;return(0,jsx_runtime.jsxs)("button",{className:(0,utils.cn)("flex w-full items-center gap-3 rounded px-2 py-2 text-left text-sm",isSelected?"bg-[#e2e8f0]/30 text-slate-900 dark:text-slate-100":"text-slate-600 dark:text-slate-400"),onClick:()=>{updateBlock(block.id,{type}),toggleBlockMenu()},ref:isSelected?selectedButtonRef:null,type:"button",children:[(0,jsx_runtime.jsx)("span",{className:"flex h-8 w-8 items-center justify-center rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 text-base",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:BLOCK_TYPES[type].icon})}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)("div",{className:"font-medium",children:BLOCK_TYPES[type].label}),isSelected&&(0,jsx_runtime.jsx)("div",{className:"text-slate-600 dark:text-slate-400 text-xs",children:"es"===locale?"Presiona Enter":"Press Enter"})]})]},type)})]}),filteredBlockTypes.length>0&&(0,jsx_runtime.jsxs)("div",{children:[showRecent&&(0,jsx_runtime.jsx)("p",{className:"px-2 py-1.5 font-medium text-slate-600 dark:text-slate-400/70 text-xs uppercase tracking-wide",children:"es"===locale?"Todos los bloques":"All Blocks"}),filteredBlockTypes.filter(t=>!recentBlocksFiltered.includes(t)).map(type=>{const optionIndex=allOptions.indexOf(type),isSelected=selectedIndex===optionIndex;return(0,jsx_runtime.jsxs)("button",{className:(0,utils.cn)("flex w-full items-center gap-3 rounded px-2 py-2 text-left text-sm",isSelected?"bg-[#e2e8f0]/30 text-slate-900 dark:text-slate-100":"text-slate-600 dark:text-slate-400"),onClick:()=>{updateBlock(block.id,{type}),toggleBlockMenu()},ref:isSelected?selectedButtonRef:null,type:"button",children:[(0,jsx_runtime.jsx)("span",{className:"flex h-8 w-8 items-center justify-center rounded border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 text-base",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:BLOCK_TYPES[type].icon})}),(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsx)("div",{className:"font-medium",children:BLOCK_TYPES[type].label}),isSelected&&(0,jsx_runtime.jsx)("div",{className:"text-slate-600 dark:text-slate-400 text-xs",children:"es"===locale?"Presiona Enter":"Press Enter"})]})]},type)})]}),0===filteredBlockTypes.length&&(0,jsx_runtime.jsxs)("div",{className:"px-3 py-8 text-center",children:[(0,jsx_runtime.jsx)("p",{className:"text-slate-600 dark:text-slate-400/70 text-sm",children:"es"===locale?"No se encontraron bloques":"No blocks found"}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-slate-600 dark:text-slate-400/70 text-xs",children:"es"===locale?"Intenta con otra b√∫squeda":"Try a different search"})]}),(0,jsx_runtime.jsxs)("div",{className:"mt-2 border-slate-200 dark:border-slate-800/40 border-t pt-1",children:[(0,jsx_runtime.jsx)("p",{className:"px-2 py-1.5 font-medium text-slate-600 dark:text-slate-400/70 text-xs uppercase tracking-wide",children:"es"===locale?"Acciones":"Actions"}),(0,jsx_runtime.jsxs)("button",{className:"flex w-full items-center gap-2 rounded px-2 py-2 text-left text-slate-600 dark:text-slate-400 text-sm",onClick:()=>{moveBlock(block.id,"up"),toggleBlockMenu()},type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.p_k}),(0,jsx_runtime.jsx)("span",{children:"es"===locale?"Mover arriba":"Move up"})]}),(0,jsx_runtime.jsxs)("button",{className:"flex w-full items-center gap-2 rounded px-2 py-2 text-left text-slate-600 dark:text-slate-400 text-sm",onClick:()=>{moveBlock(block.id,"down"),toggleBlockMenu()},type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.eWi}),(0,jsx_runtime.jsx)("span",{children:"es"===locale?"Mover abajo":"Move down"})]}),(0,jsx_runtime.jsxs)("button",{className:"flex w-full items-center gap-2 rounded px-2 py-2 text-left text-slate-900 dark:text-slate-100 text-sm",onClick:()=>{deleteBlock(block.id),toggleBlockMenu()},type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.rvS}),(0,jsx_runtime.jsx)("span",{children:"es"===locale?"Eliminar":"Delete"})]})]})]})]}),(0,jsx_runtime.jsx)("div",{className:"flex-1",children:(0,jsx_runtime.jsx)(BlockContent,{block,handleInput:e=>{const content=e.currentTarget.textContent??"";if("/"===content)return e.preventDefault(),toggleBlockMenu(),void updateBlock(block.id,{content:""});if(showBlockMenu&&content.startsWith("/")){const search=content.substring(1);return updateSlashSearch(search),void updateBlock(block.id,{content:""})}updateBlock(block.id,{content})},handleKeyDown:e=>{const target=e.currentTarget;if(showBlockMenu){if("ArrowDown"===e.key)return e.preventDefault(),void setSelectedIndex(prev=>(prev+1)%allOptions.length);if("ArrowUp"===e.key)return e.preventDefault(),void setSelectedIndex(prev=>(prev-1+allOptions.length)%allOptions.length);if("Enter"===e.key){e.preventDefault();const selectedType=allOptions[selectedIndex];return void(selectedType&&(updateBlock(block.id,{type:selectedType}),toggleBlockMenu()))}if("Escape"===e.key)return e.preventDefault(),void toggleBlockMenu()}if("Enter"===e.key&&!e.shiftKey&&!showBlockMenu&&TEXT_BLOCK_TYPES.includes(block.type)){e.preventDefault();const caretIndex=getCaretOffsetWithin(target);splitBlock(block.id,caretIndex,target.textContent??"")}if("Backspace"===e.key&&TEXT_BLOCK_TYPES.includes(block.type)){if(!(target.textContent??""))return e.preventDefault(),void deleteBlock(block.id);isCaretAtStart(target)&&(e.preventDefault(),mergeBlockWithPrevious(block.id))}(e.metaKey||e.ctrlKey)&&"/"===e.key&&(e.preventDefault(),toggleBlockMenu())},locale,onFocus,onPaste:e=>onPaste(block.id,e),ref,updateBlock})})]})}const BlockContent=react.forwardRef(({block,handleInput,handleKeyDown,onFocus,locale,updateBlock,onPaste},ref)=>{const placeholder=function getBlockPlaceholder(type,locale){return{en:{paragraph:"Type / for commands",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",bulletList:"List item",orderedList:"List item",checkbox:"Checklist item",code:"Enter code...",callout:"Write a callout...",divider:"",image:"Add a caption"},es:{paragraph:"Escribe / para comandos",heading1:"Encabezado 1",heading2:"Encabezado 2",heading3:"Encabezado 3",bulletList:"Elemento de lista",orderedList:"Elemento de lista",checkbox:"Elemento de checklist",code:"Ingresa c√≥digo...",callout:"Escribe una nota...",divider:"",image:"Agrega una leyenda"}}[locale][type]??""}(block.type,locale),sharedRef=(0,react.useRef)(null),assignSharedRef=(0,react.useCallback)(node=>{sharedRef.current=node},[]),fileInputRef=(0,react.useRef)(null);if((0,react.useImperativeHandle)(ref,()=>sharedRef.current),(0,react.useEffect)(()=>{if(!sharedRef.current)return;if(!TEXT_BLOCK_TYPES.includes(block.type)&&"code"!==block.type)return;const nextValue=block.content??"";(sharedRef.current.textContent??"")!==nextValue&&(sharedRef.current.textContent=nextValue)},[block.content,block.type]),"checkbox"===block.type){const checked=Boolean(block.metadata?.checked);return(0,jsx_runtime.jsxs)("div",{className:"flex items-start gap-3 px-1 py-1",children:[(0,jsx_runtime.jsx)("input",{"aria-label":"es"===locale?"Completar elemento":"Toggle checklist item",checked,className:"mt-1 h-4 w-4 flex-shrink-0 rounded border-[#94a3b8]/40 text-slate-900 dark:text-slate-100 focus:ring-[#64748b]",onChange:e=>updateBlock(block.id,{metadata:{...block.metadata,checked:e.target.checked}}),type:"checkbox"}),(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)("min-h-[1.5rem] flex-1 px-1 py-0.5 text-slate-600 dark:text-slate-400 outline-none","empty:before:text-slate-600 dark:text-slate-400/50 empty:before:content-[attr(data-placeholder)]",checked&&"text-slate-600 dark:text-slate-400 line-through"),contentEditable:!0,"data-block-id":block.id,"data-placeholder":placeholder,onBlur:e=>updateBlock(block.id,{content:e.currentTarget.textContent??""}),onFocus,onInput:handleInput,onKeyDown:handleKeyDown,onPaste,ref:assignSharedRef,suppressContentEditableWarning:!0})]})}if("image"===block.type){const imageUrl=block.metadata?.imageUrl??"",caption=block.metadata?.caption??block.content??"",handleFileChange=e=>{const file=e.target.files?.[0];file&&readFile(file)},readFile=file=>{const reader=new FileReader;reader.onload=()=>{updateBlock(block.id,{metadata:{...block.metadata,imageUrl:reader.result}})},reader.readAsDataURL(file)},handleDropUpload=e=>{e.preventDefault();const file=e.dataTransfer.files?.[0];file&&file.type.startsWith("image/")&&readFile(file)};return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-3 rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-4",onDragOver:e=>e.preventDefault(),onDrop:handleDropUpload,children:[imageUrl?(0,jsx_runtime.jsx)("img",{alt:caption||("es"===locale?"Imagen del art√≠culo":"Article image"),className:"max-h-96 w-full rounded-xl object-cover",src:imageUrl}):(0,jsx_runtime.jsx)("div",{className:"flex h-48 flex-col items-center justify-center rounded-xl border border-[#94a3b8]/40 border-dashed bg-white dark:bg-slate-950 text-slate-600 dark:text-slate-400/70 text-sm",children:"es"===locale?"Agrega una imagen":"Add an image"}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,jsx_runtime.jsxs)("button",{className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-3 py-2 text-slate-600 dark:text-slate-400 text-xs transition hover:border-[#94a3b8]/40",onClick:()=>fileInputRef.current?.click(),type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.v_Q}),"es"===locale?"Subir imagen/GIF":"Upload image/GIF"]}),imageUrl&&(0,jsx_runtime.jsxs)("button",{className:"inline-flex items-center gap-2 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-3 py-2 text-slate-600 dark:text-slate-400 text-xs transition hover:border-slate-900 dark:border-slate-100/30 hover:text-slate-900 dark:text-slate-100",onClick:()=>updateBlock(block.id,{content:"",metadata:{...block.metadata,imageUrl:"",caption:""}}),type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.rvS}),"es"===locale?"Eliminar":"Remove"]}),(0,jsx_runtime.jsx)("input",{accept:"image/*",className:"hidden",onChange:handleFileChange,ref:fileInputRef,type:"file"}),(0,jsx_runtime.jsx)("input",{className:"flex-1 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-3 py-2 text-slate-600 dark:text-slate-400 text-xs outline-none",onChange:e=>updateBlock(block.id,{metadata:{...block.metadata,imageUrl:e.target.value}}),placeholder:"https://",value:imageUrl})]}),(0,jsx_runtime.jsx)("input",{className:"w-full rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-3 py-2 text-slate-600 dark:text-slate-400 text-sm outline-none",onChange:e=>updateBlock(block.id,{content:e.target.value,metadata:{...block.metadata,caption:e.target.value}}),placeholder:"es"===locale?"Agrega una leyenda":"Add a caption",value:caption})]})}if("heading1"===block.type)return(0,jsx_runtime.jsx)("h1",{className:"min-h-[2.5rem] px-1 py-1 font-semibold text-3xl text-slate-900 dark:text-slate-100 tracking-tight outline-none empty:before:text-slate-600 dark:text-slate-400/50 empty:before:content-[attr(data-placeholder)]",contentEditable:!0,"data-block-id":block.id,"data-placeholder":placeholder,onBlur:e=>updateBlock(block.id,{content:e.currentTarget.textContent??""}),onFocus,onInput:handleInput,onKeyDown:handleKeyDown,onPaste,ref:assignSharedRef,suppressContentEditableWarning:!0});if("heading2"===block.type)return(0,jsx_runtime.jsx)("h2",{className:"min-h-[2rem] px-1 py-1 font-semibold text-2xl text-slate-900 dark:text-slate-100 outline-none empty:before:text-slate-600 dark:text-slate-400/50 empty:before:content-[attr(data-placeholder)]",contentEditable:!0,"data-block-id":block.id,"data-placeholder":placeholder,onBlur:e=>updateBlock(block.id,{content:e.currentTarget.textContent??""}),onFocus,onInput:handleInput,onKeyDown:handleKeyDown,onPaste,ref:assignSharedRef,suppressContentEditableWarning:!0});if("heading3"===block.type)return(0,jsx_runtime.jsx)("h3",{className:"min-h-[1.75rem] px-1 py-1 font-semibold text-slate-900 dark:text-slate-100 text-xl outline-none empty:before:text-slate-600 dark:text-slate-400/50 empty:before:content-[attr(data-placeholder)]",contentEditable:!0,"data-block-id":block.id,"data-placeholder":placeholder,onBlur:e=>updateBlock(block.id,{content:e.currentTarget.textContent??""}),onFocus,onInput:handleInput,onKeyDown:handleKeyDown,onPaste,ref:assignSharedRef,suppressContentEditableWarning:!0});if("bulletList"===block.type||"orderedList"===block.type){const ListTag="bulletList"===block.type?"ul":"ol",items=block.metadata?.listItems??[""];return(0,jsx_runtime.jsx)(ListTag,{className:(0,utils.cn)("space-y-1","bulletList"===block.type?"list-disc":"list-decimal","pl-6 marker:text-slate-600 dark:text-slate-400/50"),children:items.map((item,idx)=>(0,jsx_runtime.jsx)("li",{className:"text-base text-slate-600 dark:text-slate-400 leading-7",children:(0,jsx_runtime.jsx)("div",{className:"min-h-[1.5rem] px-1 py-0.5 outline-none empty:before:text-slate-600 dark:text-slate-400/50 empty:before:content-[attr(data-placeholder)]",contentEditable:!0,"data-block-id":`${block.id}-${idx}`,"data-placeholder":placeholder,onBlur:e=>{const newItems=[...items];newItems[idx]=e.currentTarget.textContent??"",updateBlock(block.id,{metadata:{...block.metadata,listItems:newItems}})},onFocus,onKeyDown:e=>{if("Enter"===e.key){e.preventDefault();const newItems=[...items];newItems.splice(idx+1,0,""),updateBlock(block.id,{metadata:{...block.metadata,listItems:newItems}})}if("Backspace"===e.key&&!item&&items.length>1){e.preventDefault();const newItems=items.filter((_,i)=>i!==idx);updateBlock(block.id,{metadata:{...block.metadata,listItems:newItems}})}},suppressContentEditableWarning:!0,children:item})},idx))})}if("code"===block.type)return(0,jsx_runtime.jsxs)("div",{className:"overflow-hidden rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950",children:[(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-between border-slate-200 dark:border-slate-800 border-b bg-white dark:bg-slate-950 px-3 py-2",children:(0,jsx_runtime.jsxs)("select",{className:"rounded border-none bg-transparent px-2 py-1 text-slate-600 dark:text-slate-400 text-xs outline-none",onChange:e=>updateBlock(block.id,{metadata:{language:e.target.value}}),value:block.metadata?.language??"plaintext",children:[(0,jsx_runtime.jsx)("option",{value:"plaintext",children:"Plain Text"}),(0,jsx_runtime.jsx)("option",{value:"typescript",children:"TypeScript"}),(0,jsx_runtime.jsx)("option",{value:"javascript",children:"JavaScript"}),(0,jsx_runtime.jsx)("option",{value:"jsx",children:"JSX"}),(0,jsx_runtime.jsx)("option",{value:"tsx",children:"TSX"}),(0,jsx_runtime.jsx)("option",{value:"css",children:"CSS"}),(0,jsx_runtime.jsx)("option",{value:"html",children:"HTML"}),(0,jsx_runtime.jsx)("option",{value:"json",children:"JSON"}),(0,jsx_runtime.jsx)("option",{value:"sql",children:"SQL"}),(0,jsx_runtime.jsx)("option",{value:"bash",children:"Bash"})]})}),(0,jsx_runtime.jsx)("pre",{className:"overflow-x-auto p-3",children:(0,jsx_runtime.jsx)("code",{className:"block font-mono text-slate-900 dark:text-slate-100 text-sm outline-none empty:before:text-slate-600 dark:text-slate-400/50 empty:before:content-[attr(data-placeholder)]",contentEditable:!0,"data-block-id":block.id,"data-placeholder":placeholder,onBlur:e=>updateBlock(block.id,{content:e.currentTarget.textContent??""}),onFocus,onInput:handleInput,onKeyDown:e=>{if("Tab"===e.key){e.preventDefault();const selection=window.getSelection();if(selection&&selection.rangeCount>0){const range=selection.getRangeAt(0);range.deleteContents(),range.insertNode(document.createTextNode("  ")),range.collapse(!1)}}},onPaste,ref:assignSharedRef,suppressContentEditableWarning:!0})})]});if("callout"===block.type){const calloutType=block.metadata?.calloutType??"info",calloutConfig=CALLOUT_TYPES[calloutType],calloutStyles={blue:"bg-white dark:bg-slate-950 border-slate-200 dark:border-slate-800",orange:"bg-slate-900 dark:bg-slate-100/5 border-slate-900 dark:border-slate-100/20",green:"bg-slate-900 dark:bg-slate-100/10 border-slate-900 dark:border-slate-100/30",red:"bg-white dark:bg-slate-950 border-slate-900 dark:border-slate-100/20"};return(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("rounded-2xl border p-4",calloutStyles[calloutConfig.color]),children:[(0,jsx_runtime.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:calloutConfig.iconComponent}),(0,jsx_runtime.jsx)("select",{className:"rounded border-none bg-transparent px-2 py-0.5 text-slate-600 dark:text-slate-400 text-xs outline-none",onChange:e=>updateBlock(block.id,{metadata:{calloutType:e.target.value}}),value:calloutType,children:Object.keys(CALLOUT_TYPES).map(type=>(0,jsx_runtime.jsx)("option",{value:type,children:CALLOUT_TYPES[type].label},type))})]}),(0,jsx_runtime.jsx)("div",{className:"min-h-[1.5rem] px-1 py-0.5 text-slate-900 dark:text-slate-100 outline-none empty:before:text-slate-600 dark:text-slate-400/50 empty:before:content-[attr(data-placeholder)]",contentEditable:!0,"data-block-id":block.id,"data-placeholder":placeholder,onBlur:e=>updateBlock(block.id,{content:e.currentTarget.textContent??""}),onFocus,onInput:handleInput,onKeyDown:handleKeyDown,onPaste,ref:assignSharedRef,suppressContentEditableWarning:!0})]})}return"divider"===block.type?(0,jsx_runtime.jsx)("hr",{className:"article-separator my-6 border-slate-200 dark:border-slate-800","data-editor-separator":!0}):(0,jsx_runtime.jsx)("div",{className:"min-h-[1.75rem] w-full px-1 py-1 text-base text-slate-900 dark:text-slate-100 leading-7 outline-none empty:before:text-slate-600 dark:text-slate-400/50 empty:before:content-[attr(data-placeholder)]",contentEditable:!0,"data-block-id":block.id,"data-placeholder":placeholder,onBlur:e=>updateBlock(block.id,{content:e.currentTarget.textContent??""}),onFocus,onInput:handleInput,onKeyDown:handleKeyDown,onPaste,ref:assignSharedRef,suppressContentEditableWarning:!0})});BlockContent.displayName="BlockContent";try{BlockEditor.displayName="BlockEditor",BlockEditor.__docgenInfo={description:"",displayName:"BlockEditor",props:{initialContent:{defaultValue:{value:""},description:"",name:"initialContent",required:!1,type:{name:"string"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(markdown: string) => void"}},placeholder:{defaultValue:null,description:"",name:"placeholder",required:!1,type:{name:"string"}},locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"en"'},{value:'"es"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/admin/help/block-editor.tsx#BlockEditor"]={docgenInfo:BlockEditor.__docgenInfo,name:"BlockEditor",path:"src/components/admin/help/block-editor.tsx#BlockEditor"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function cn(...classes){return classes.filter(Boolean).join(" ")}__webpack_require__.d(__webpack_exports__,{cn:()=>cn})}}]);