"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[56416],{"./src/components/portfolio/image-upload-dropzone.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>ImageUploadDropzone});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),browser_image_compression__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/browser-image-compression/dist/browser-image-compression.mjs"),next_image__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.js"),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),_lib_toast__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/lib/toast.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ImageUploadDropzone({onImagesUploaded,maxImages=20,maxSizeMB=5}){const[images,setImages]=(0,react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),[dragging,setDragging]=(0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(!1),[uploading,setUploading]=(0,react__WEBPACK_IMPORTED_MODULE_5__.useState)(!1),fileInputRef=(0,react__WEBPACK_IMPORTED_MODULE_5__.useRef)(null),handleFiles=(0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(async files=>{if(!files||0===files.length)return;const fileArray=Array.from(files),remainingSlots=maxImages-images.length;if(fileArray.length>remainingSlots)return void _lib_toast__WEBPACK_IMPORTED_MODULE_6__.o.warning(`You can only upload ${remainingSlots} more image(s)`);const validFiles=[];for(const file of fileArray)file.type.startsWith("image/")?file.size>1024*maxSizeMB*1024?_lib_toast__WEBPACK_IMPORTED_MODULE_6__.o.warning(`${file.name} is larger than ${maxSizeMB}MB`):validFiles.push(file):_lib_toast__WEBPACK_IMPORTED_MODULE_6__.o.error(`${file.name} is not an image file`);if(0===validFiles.length)return;const newImages=await Promise.all(validFiles.map(async file=>{const compressedFile=await(0,browser_image_compression__WEBPACK_IMPORTED_MODULE_3__.A)(file,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0}),preview=URL.createObjectURL(compressedFile);return{id:crypto.randomUUID(),file:compressedFile,preview,uploading:!1}}));setImages(prev=>[...prev,...newImages])},[images.length,maxImages,maxSizeMB]),handleDrop=(0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(e=>{e.preventDefault(),setDragging(!1),handleFiles(e.dataTransfer.files)},[handleFiles]),handleDragOver=(0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(e=>{e.preventDefault(),setDragging(!0)},[]),handleDragLeave=(0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(()=>{setDragging(!1)},[]),removeImage=(0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)(id=>{setImages(prev=>{const image=prev.find(img=>img.id===id);return image&&URL.revokeObjectURL(image.preview),prev.filter(img=>img.id!==id)})},[]),updateCaption=(0,react__WEBPACK_IMPORTED_MODULE_5__.useCallback)((id,caption)=>{setImages(prev=>prev.map(img=>img.id===id?{...img,caption}:img))},[]);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"cursor-pointer rounded-xl border-2 border-dashed p-8 text-center transition "+(dragging?"border-[#64748b] bg-[#64748b]/5":"border-[#e2e8f0] hover:border-[#64748b] hover:bg-[#f8fafc]"),onClick:()=>fileInputRef.current?.click(),onDragLeave:handleDragLeave,onDragOver:handleDragOver,onDrop:handleDrop,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),fileInputRef.current?.click())},role:"button",tabIndex:0,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{accept:"image/*",className:"hidden",multiple:!0,onChange:e=>handleFiles(e.target.files),ref:fileInputRef,type:"file"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-full bg-[#64748b]/10 p-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-8 w-8 text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.ap1})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-semibold text-base text-[#0f172a]",children:"Drop images here or click to browse"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:["JPEG, PNG, WebP • Max ",maxSizeMB,"MB per image • Up to ",maxImages," images"]})]})]})]}),images.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"font-semibold text-[#0f172a] text-sm",children:[images.length," image",1!==images.length?"s":""," ready to upload"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"text-[#94a3b8] text-sm hover:text-[#64748b]",onClick:()=>{for(const img of images)URL.revokeObjectURL(img.preview);setImages([])},type:"button",children:"Clear all"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"grid grid-cols-2 gap-3 md:grid-cols-3",children:images.map(image=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"group relative overflow-hidden rounded-xl border border-[#e2e8f0] bg-[#f8fafc]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"aspect-square overflow-hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_4__.A,{alt:"Preview",className:"h-full w-full object-cover",height:200,loading:"lazy",src:image.preview,width:200})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"p-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:"w-full rounded-lg border border-[#e2e8f0] px-2 py-1 text-xs focus:border-[#64748b] focus:outline-none focus:ring-1 focus:ring-[#64748b]",onChange:e=>updateCaption(image.id,e.target.value),placeholder:"Add caption (optional)",type:"text",value:image.caption||""})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"absolute top-2 right-2 rounded-full bg-[#f8fafc]/90 p-1.5 opacity-0 shadow-lg transition hover:bg-[#64748b]/100 hover:text-[#f8fafc] group-hover:opacity-100",onClick:()=>removeImage(image.id),type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-4 w-4",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.bJi})})]},image.id))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"w-full rounded-xl bg-[#64748b] px-6 py-3 font-semibold text-base text-[#f8fafc] shadow-[0_6px_18px_rgba(244,74,34,0.22)] transition hover:bg-[#64748b] disabled:cursor-not-allowed disabled:opacity-50",disabled:uploading||0===images.length,onClick:async()=>{if(0!==images.length){setUploading(!0);try{const uploadedImages=[];for(const image of images){const formData=new FormData;formData.append("file",image.file);const response=await fetch("/api/professional/portfolio/upload",{method:"POST",body:formData});if(!response.ok)throw new Error("Failed to upload image");const data=await response.json();uploadedImages.push({url:data.url,caption:image.caption})}onImagesUploaded(uploadedImages);for(const img of images)URL.revokeObjectURL(img.preview);setImages([])}catch(error){console.error("Failed to upload images:",error),_lib_toast__WEBPACK_IMPORTED_MODULE_6__.o.error("Failed to upload images. Please try again.")}finally{setUploading(!1)}}},type:"button",children:uploading?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"flex items-center justify-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("title",{children:"Loading spinner"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",fill:"none",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("path",{className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]}),"Uploading..."]}):`Upload ${images.length} Image${1!==images.length?"s":""}`})]}),0===images.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-xl bg-[#f8fafc] p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("h4",{className:"flex items-center gap-2 font-semibold text-[#0f172a] text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-4 w-4",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.ExN}),"Image Tips"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("ul",{className:"mt-2 space-y-1 text-[#94a3b8] text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{children:"• Use clear, well-lit photos"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{children:"• Before/after shots work great"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{children:"• Images will be automatically compressed"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("li",{children:"• Show variety in your work"})]})]})]})}try{ImageUploadDropzone.displayName="ImageUploadDropzone",ImageUploadDropzone.__docgenInfo={description:"",displayName:"ImageUploadDropzone",props:{onImagesUploaded:{defaultValue:null,description:"",name:"onImagesUploaded",required:!0,type:{name:"(images: { url: string; caption?: string; }[]) => void"}},maxImages:{defaultValue:{value:"20"},description:"",name:"maxImages",required:!1,type:{name:"number"}},maxSizeMB:{defaultValue:{value:"5"},description:"",name:"maxSizeMB",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/portfolio/image-upload-dropzone.tsx#ImageUploadDropzone"]={docgenInfo:ImageUploadDropzone.__docgenInfo,name:"ImageUploadDropzone",path:"src/components/portfolio/image-upload-dropzone.tsx#ImageUploadDropzone"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/toast.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{l:()=>confirm,o:()=>toast});let toastContainer=null;function showToast(message,options={}){const{duration=3e3,type="info"}=options,container=function getToastContainer(){return toastContainer&&document.body.contains(toastContainer)||(toastContainer=document.createElement("div"),toastContainer.id="toast-container",toastContainer.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    z-index: 9999;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    pointer-events: none;\n  ",document.body.appendChild(toastContainer)),toastContainer}(),toast=document.createElement("div");if(toast.textContent=message,toast.style.cssText=function getToastStyles(type){return"\n    padding: 12px 20px;\n    border-radius: 8px;\n    font-family: system-ui, -apple-system, sans-serif;\n    font-size: 14px;\n    font-weight: 500;\n    box-shadow: 0 4px 12px rgba(22, 22, 22, 0.15);\n    pointer-events: auto;\n    min-width: 300px;\n    max-width: 500px;\n    word-wrap: break-word;\n    animation: slideIn 0.3s ease-out;\n  "+{success:"background-color: #FF4444A22; color: white;",error:"background-color: #FF4444A22; color: white;",info:"background-color: #FF4444A22; color: white;",warning:"background-color: #FF4444A22; color: white;"}[type]}(type),!document.getElementById("toast-animations")){const style=document.createElement("style");style.id="toast-animations",style.textContent="\n      @keyframes slideIn {\n        from {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n      @keyframes slideOut {\n        from {\n          transform: translateX(0);\n          opacity: 1;\n        }\n        to {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(style)}container.appendChild(toast),setTimeout(()=>{toast.style.animation="slideOut 0.3s ease-in",setTimeout(()=>{toast.parentNode&&toast.parentNode.removeChild(toast),0===container.children.length&&container.parentNode&&(container.parentNode.removeChild(container),toastContainer=null)},300)},duration)}const toast={success:(message,duration)=>showToast(message,{type:"success",duration}),error:(message,duration)=>showToast(message,{type:"error",duration}),info:(message,duration)=>showToast(message,{type:"info",duration}),warning:(message,duration)=>showToast(message,{type:"warning",duration})};function confirm(message,title="Confirm"){return new Promise(resolve=>{const overlay=document.createElement("div");overlay.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: rgba(22, 22, 22, 0.5);\n      z-index: 10000;\n      display: flex;\n      align-items: center;\n      justify-center;\n      animation: fadeIn 0.2s ease-out;\n    ";const modal=document.createElement("div");modal.style.cssText="\n      background-color: white;\n      border-radius: 12px;\n      padding: 24px;\n      max-width: 400px;\n      width: 90%;\n      box-shadow: 0 20px 25px -5px rgba(22, 22, 22, 0.1);\n      animation: scaleIn 0.2s ease-out;\n    ";const titleElement=document.createElement("h3");titleElement.textContent=title,titleElement.style.cssText="\n      font-size: 18px;\n      font-weight: 600;\n      color: #116611616;\n      margin-bottom: 12px;\n    ";const messageElement=document.createElement("p");messageElement.textContent=message,messageElement.style.cssText="\n      font-size: 14px;\n      color: #116611616;\n      margin-bottom: 20px;\n      line-height: 1.5;\n    ";const buttonContainer=document.createElement("div");buttonContainer.style.cssText="\n      display: flex;\n      gap: 12px;\n      justify-content: flex-end;\n    ";const cancelButton=document.createElement("button");cancelButton.textContent="Cancel",cancelButton.style.cssText="\n      padding: 8px 16px;\n      border-radius: 8px;\n      border: 2px solid #EE44EE2E3;\n      background-color: white;\n      color: #116611616;\n      font-weight: 600;\n      font-size: 14px;\n      cursor: pointer;\n      transition: all 0.2s;\n    ",cancelButton.onmouseover=()=>{cancelButton.style.borderColor="#AA88AAAAC",cancelButton.style.color="#AA88AAAAC"},cancelButton.onmouseout=()=>{cancelButton.style.borderColor="#EE44EE2E3",cancelButton.style.color="#116611616"};const confirmButton=document.createElement("button");confirmButton.textContent="Confirm",confirmButton.style.cssText="\n      padding: 8px 16px;\n      border-radius: 8px;\n      border: none;\n      background-color: #AA88AAAAC;\n      color: white;\n      font-weight: 600;\n      font-size: 14px;\n      cursor: pointer;\n      transition: all 0.2s;\n    ",confirmButton.onmouseover=()=>{confirmButton.style.backgroundColor="#AA88AAAAC"},confirmButton.onmouseout=()=>{confirmButton.style.backgroundColor="#AA88AAAAC"};const cleanup=()=>{overlay.style.animation="fadeOut 0.2s ease-in",setTimeout(()=>{overlay.parentNode&&overlay.parentNode.removeChild(overlay)},200)};if(cancelButton.onclick=()=>{cleanup(),resolve(!1)},confirmButton.onclick=()=>{cleanup(),resolve(!0)},!document.getElementById("modal-animations")){const style=document.createElement("style");style.id="modal-animations",style.textContent="\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes fadeOut {\n          from { opacity: 1; }\n          to { opacity: 0; }\n        }\n        @keyframes scaleIn {\n          from {\n            transform: scale(0.9);\n            opacity: 0;\n          }\n          to {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n      ",document.head.appendChild(style)}buttonContainer.appendChild(cancelButton),buttonContainer.appendChild(confirmButton),modal.appendChild(titleElement),modal.appendChild(messageElement),modal.appendChild(buttonContainer),overlay.appendChild(modal),document.body.appendChild(overlay),confirmButton.focus()})}}}]);