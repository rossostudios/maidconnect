"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[3333],{"./src/components/professionals/map-view.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{MapView:()=>MapView});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),leaflet__WEBPACK_IMPORTED_MODULE_4__=(__webpack_require__("./node_modules/leaflet/dist/leaflet.css"),__webpack_require__("./node_modules/leaflet/dist/leaflet-src.js")),next_image__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.js"),react__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),react_leaflet__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/react-leaflet/lib/MapContainer.js"),react_leaflet__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./node_modules/react-leaflet/lib/Marker.js"),react_leaflet__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./node_modules/react-leaflet/lib/Popup.js"),react_leaflet__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./node_modules/react-leaflet/lib/TileLayer.js"),_i18n_routing__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./src/i18n/routing.ts"),_lib_format__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__("./src/lib/format.ts"),_verification_badge__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__("./src/components/professionals/verification-badge.tsx");const DEFAULT_CENTER=[4.711,-74.0721];function createCustomIcon(price,verified){const priceText=price?`$${Math.round(price/100)}k`:"N/A";return new leaflet__WEBPACK_IMPORTED_MODULE_4__.Icon({iconUrl:`data:image/svg+xml,${encodeURIComponent(`\n      <svg width="40" height="50" xmlns="http://www.w3.org/2000/svg">\n        <path d="M20 0C8.954 0 0 8.954 0 20c0 15 20 30 20 30s20-15 20-30c0-11.046-8.954-20-20-20z"\n              fill="#64748b" stroke="white" stroke-width="2"/>\n        <circle cx="20" cy="20" r="12" fill="white"/>\n        <text x="20" y="25" text-anchor="middle" font-size="10" font-weight="bold" fill="#64748b">\n          ${priceText}\n        </text>\n      </svg>\n    `)}`,iconSize:[40,50],iconAnchor:[20,50],popupAnchor:[0,-50]})}const MapView=(0,react__WEBPACK_IMPORTED_MODULE_6__.memo)(function MapViewInner({professionals,center=DEFAULT_CENTER,zoom=6,className=""}){const[isMounted,setIsMounted]=(0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(!1);(0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(()=>{setIsMounted(!0)},[]);const professionalsWithCoords=(0,react__WEBPACK_IMPORTED_MODULE_6__.useMemo)(()=>professionals.filter(pro=>{if(!pro.location?.includes(","))return!1;const parts=pro.location.split(",");return parts.length>=2&&!Number.isNaN(Number.parseFloat(parts[0]||""))&&!Number.isNaN(Number.parseFloat(parts[1]||""))}),[professionals]),mapCenter=(0,react__WEBPACK_IMPORTED_MODULE_6__.useMemo)(()=>{if(professionalsWithCoords.length>0&&center===DEFAULT_CENTER){return[professionalsWithCoords.reduce((sum,pro)=>sum+(pro.location.split(",").map(Number)[0]||0),0)/professionalsWithCoords.length,professionalsWithCoords.reduce((sum,pro)=>sum+(pro.location.split(",").map(Number)[1]||0),0)/professionalsWithCoords.length]}return center},[professionalsWithCoords,center]);return isMounted?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_leaflet__WEBPACK_IMPORTED_MODULE_7__.W,{center:mapCenter,className:"h-full w-full",scrollWheelZoom:!0,style:{minHeight:"400px"},zoom,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_leaflet__WEBPACK_IMPORTED_MODULE_10__.e,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),professionalsWithCoords.map(professional=>{const parts=professional.location.split(",").map(Number),position=[parts[0]||0,parts[1]||0];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_leaflet__WEBPACK_IMPORTED_MODULE_8__.p,{icon:createCustomIcon(professional.hourlyRateCop,!professional.verificationLevel||"enhanced"!==professional.verificationLevel&&professional.verificationLevel),position,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(react_leaflet__WEBPACK_IMPORTED_MODULE_9__.z,{maxWidth:300,minWidth:250,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_i18n_routing__WEBPACK_IMPORTED_MODULE_11__.N_,{className:"block hover:opacity-80",href:`/professionals/${professional.id}`,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative h-20 w-20 flex-shrink-0 overflow-hidden rounded-lg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(next_image__WEBPACK_IMPORTED_MODULE_5__.A,{alt:professional.name,className:"object-cover",fill:!0,src:professional.photoUrl||"/placeholder-avatar.jpg"}),professional.availableToday&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute top-1 right-1 h-3 w-3 rounded-full border-2 border-[#f8fafc] bg-[#64748b]/100"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-1 flex items-start justify-between gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-semibold text-[#0f172a] text-sm leading-tight",children:professional.name}),professional.verificationLevel&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_verification_badge__WEBPACK_IMPORTED_MODULE_13__.$h,{level:professional.verificationLevel,size:"sm"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-1 line-clamp-1 text-[#94a3b8] text-xs",children:professional.service}),professional.rating&&professional.reviewCount?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-1 flex items-center gap-1 text-xs",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-3 w-3 fill-[#64748b] text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Gg5}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-semibold text-[#0f172a]",children:professional.rating.toFixed(1)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-[#94a3b8]",children:["(",professional.reviewCount,")"]})]}):null,professional.hourlyRateCop?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"font-semibold text-[#64748b] text-sm",children:[(0,_lib_format__WEBPACK_IMPORTED_MODULE_12__.Kq)(professional.hourlyRateCop),"/hr"]}):null,(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-1 text-[#94a3b8] text-xs",children:[professional.city,", ",professional.country]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-2 border-[#e2e8f0] border-t pt-2 text-center text-[#64748b] text-xs",children:"View Profile →"})]})})},professional.id)})]}),0===professionalsWithCoords.length&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-[#f8fafc]/80",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"mx-auto mb-2 h-12 w-12 text-[#94a3b8]/70",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.akv}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-medium text-[#0f172a]",children:"No professionals found on map"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-[#94a3b8] text-sm",children:"Try adjusting your filters or search criteria"})]})})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:`flex h-full items-center justify-center bg-[#e2e8f0]/30 ${className}`,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col items-center gap-2 text-[#94a3b8]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-8 w-8 animate-pulse",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.akv}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-sm",children:"Loading map..."})]})})},(prevProps,nextProps)=>prevProps.professionals===nextProps.professionals&&prevProps.professionals.length===nextProps.professionals.length&&prevProps.center===nextProps.center&&prevProps.zoom===nextProps.zoom&&prevProps.className===nextProps.className);try{MapView.displayName="MapView",MapView.__docgenInfo={description:"",displayName:"MapView",props:{professionals:{defaultValue:null,description:"",name:"professionals",required:!0,type:{name:"DirectoryProfessional[]"}},center:{defaultValue:null,description:"",name:"center",required:!1,type:{name:"LatLngExpression"}},zoom:{defaultValue:null,description:"",name:"zoom",required:!1,type:{name:"number"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/professionals/map-view.tsx#MapView"]={docgenInfo:MapView.__docgenInfo,name:"MapView",path:"src/components/professionals/map-view.tsx#MapView"})}catch(__react_docgen_typescript_loader_error){}}}]);