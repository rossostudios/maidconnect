"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[24081,64432],{"./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HugeiconsIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none"},HugeiconsIcon=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({color="currentColor",size=24,strokeWidth,absoluteStrokeWidth=!1,className="",altIcon,showAlt=!1,icon,primaryColor,secondaryColor,disableSecondaryOpacity=!1,...rest},ref)=>{const calculatedStrokeWidth=void 0!==strokeWidth?absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth:void 0,strokeProps=void 0!==calculatedStrokeWidth?{strokeWidth:calculatedStrokeWidth,stroke:"currentColor"}:{},elementProps={ref,...defaultAttributes,width:size,height:size,color:primaryColor||color,className,...strokeProps,...rest},svgChildren=[...showAlt&&altIcon?altIcon:icon].sort(([,a],[,b])=>{const hasOpacityA=void 0!==a.opacity;return void 0!==b.opacity?1:hasOpacityA?-1:0}).map(([tag,attrs])=>{const isSecondaryPath=void 0!==attrs.opacity,pathOpacity=isSecondaryPath&&!disableSecondaryOpacity?attrs.opacity:void 0,fillProps=secondaryColor?{...void 0!==attrs.stroke?{stroke:isSecondaryPath?secondaryColor:primaryColor||color}:{fill:isSecondaryPath?secondaryColor:primaryColor||color}}:{};return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(tag,{...attrs,...strokeProps,...fillProps,opacity:pathOpacity,key:attrs.key})});return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("svg",elementProps,svgChildren)});HugeiconsIcon.displayName="HugeiconsIcon"},"./node_modules/next-intl/dist/esm/production/react-client/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c3:()=>e});var use_intl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/use-intl/dist/esm/production/react.js");function o(r,t){return(...r)=>{try{return t(...r)}catch{throw new Error(void 0)}}}const e=o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.c3);o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.kc)},"./src/components/analytics/analytics-dashboard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>analytics_dashboard_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function parseFloatSafe(value){return null==value?0:Number.parseFloat(String(value))}function getNumberSafe(value){return value??0}function transformBookingMetrics(data){return{totalBookings:getNumberSafe(data.total_bookings),completedBookings:getNumberSafe(data.completed_bookings),cancelledBookings:getNumberSafe(data.cancelled_bookings),completionRate:parseFloatSafe(data.completion_rate),cancellationRate:parseFloatSafe(data.cancellation_rate)}}function transformRevenueMetrics(data){return{totalRevenueCop:getNumberSafe(data.total_revenue_cop),revenueLast30DaysCop:getNumberSafe(data.revenue_last_30_days_cop),revenueLast7DaysCop:getNumberSafe(data.revenue_last_7_days_cop),averageBookingValueCop:getNumberSafe(data.average_booking_value_cop)}}function transformRatingMetrics(data){return{averageRating:parseFloatSafe(data.average_rating),totalReviews:getNumberSafe(data.total_reviews),fiveStarCount:getNumberSafe(data.five_star_count),fourStarCount:getNumberSafe(data.four_star_count),threeStarCount:getNumberSafe(data.three_star_count),twoStarCount:getNumberSafe(data.two_star_count),oneStarCount:getNumberSafe(data.one_star_count)}}function transformPerformanceMetrics(data){return{averageResponseTimeMinutes:getNumberSafe(data.average_response_time_minutes),onTimeArrivalRate:parseFloatSafe(data.on_time_arrival_rate),repeatCustomerRate:parseFloatSafe(data.repeat_customer_rate),bookingsLast30Days:getNumberSafe(data.bookings_last_30_days),bookingsLast7Days:getNumberSafe(data.bookings_last_7_days)}}var server_client=__webpack_require__("./src/lib/supabase/server-client.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");async function getPerformanceMetrics(profileId){try{const supabase=await(0,server_client.d)(),{data,error}=await supabase.from("professional_performance_metrics").select("*").eq("profile_id",profileId).single();if(error)return"PGRST116"===error.code?await async function initializePerformanceMetrics(profileId){try{const supabase=await(0,server_client.d)(),{data,error}=await supabase.rpc("initialize_performance_metrics",{professional_profile_id:profileId});if(error)return console.error("Error initializing performance metrics:",error),{success:!1,error:error.message};const metrics=function transformPerformanceMetricsData(data){return{id:data.id,profileId:data.profile_id,...transformBookingMetrics(data),...transformRevenueMetrics(data),...transformRatingMetrics(data),...transformPerformanceMetrics(data),lastCalculatedAt:data.last_calculated_at,createdAt:data.created_at,updatedAt:data.updated_at}}(data);return{success:!0,metrics}}catch(error){return console.error("Unexpected error:",error),{success:!1,error:error instanceof Error?error.message:"Unknown error"}}}(profileId):(console.error("Error fetching performance metrics:",error),{success:!1,error:error.message});return{success:!0,metrics:{id:data.id,profileId:data.profile_id,totalBookings:data.total_bookings,completedBookings:data.completed_bookings,cancelledBookings:data.cancelled_bookings,completionRate:Number.parseFloat(data.completion_rate),cancellationRate:Number.parseFloat(data.cancellation_rate),totalRevenueCop:data.total_revenue_cop,revenueLast30DaysCop:data.revenue_last_30_days_cop,revenueLast7DaysCop:data.revenue_last_7_days_cop,averageBookingValueCop:data.average_booking_value_cop,averageRating:Number.parseFloat(data.average_rating),totalReviews:data.total_reviews,fiveStarCount:data.five_star_count,fourStarCount:data.four_star_count,threeStarCount:data.three_star_count,twoStarCount:data.two_star_count,oneStarCount:data.one_star_count,averageResponseTimeMinutes:data.average_response_time_minutes,onTimeArrivalRate:Number.parseFloat(data.on_time_arrival_rate),repeatCustomerRate:Number.parseFloat(data.repeat_customer_rate),bookingsLast30Days:data.bookings_last_30_days,bookingsLast7Days:data.bookings_last_7_days,lastCalculatedAt:data.last_calculated_at,createdAt:data.created_at,updatedAt:data.updated_at}}}catch(error){return console.error("Unexpected error:",error),{success:!1,error:error instanceof Error?error.message:"Unknown error"}}}var performance_metrics_card=__webpack_require__("./src/components/analytics/performance-metrics-card.tsx"),rating_distribution=__webpack_require__("./src/components/analytics/rating-distribution.tsx"),revenue_trend_chart=__webpack_require__("./src/components/analytics/revenue-trend-chart.tsx");function AnalyticsDashboard({profileId}){const t=(0,react_client.c3)("components.analyticsDashboard"),[loading,setLoading]=(0,react.useState)(!0),[refreshing,setRefreshing]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null),[metrics,setMetrics]=(0,react.useState)(null),[revenueTrend,setRevenueTrend]=(0,react.useState)([]),loadData=async(isRefresh=!1)=>{isRefresh?setRefreshing(!0):setLoading(!0),setError(null);try{const metricsResponse=await getPerformanceMetrics(profileId);if(!metricsResponse.success)return void setError(metricsResponse.error);setMetrics(metricsResponse.metrics);const trendResponse=await async function getRevenueTrend(profileId,days=30){try{const supabase=await(0,server_client.d)(),{data,error}=await supabase.rpc("get_revenue_trend",{professional_profile_id:profileId,days});return error?(console.error("Error fetching revenue trend:",error),{success:!1,error:error.message}):{success:!0,trend:(data||[]).map(point=>({date:point.date,revenueCop:point.revenue_cop,bookingsCount:point.bookings_count}))}}catch(error){return console.error("Unexpected error:",error),{success:!1,error:error instanceof Error?error.message:"Unknown error"}}}(profileId,30);if(!trendResponse.success)return void setError(trendResponse.error);setRevenueTrend(trendResponse.trend)}catch(err){setError(err instanceof Error?err.message:"Unknown error")}finally{setLoading(!1),setRefreshing(!1)}};(0,react.useEffect)(()=>{loadData()},[loadData]);return loading?(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[(0,jsx_runtime.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-[#64748b] border-t-2 border-b-2"}),(0,jsx_runtime.jsx)("p",{className:"text-[#94a3b8]",children:t("loading")})]})}):error?(0,jsx_runtime.jsxs)("div",{className:"rounded-[24px] border-2 border-[#64748b]/30 bg-[#64748b]/10 p-6",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold text-[#64748b]",children:t("error")}),(0,jsx_runtime.jsx)("p",{className:"mt-2 text-[#64748b] text-sm",children:error}),(0,jsx_runtime.jsx)("button",{className:"mt-4 rounded-xl bg-[#64748b] px-4 py-2 font-medium text-sm text-[#f8fafc] transition hover:bg-[#64748b]",onClick:()=>loadData(),type:"button",children:t("retry")})]}):metrics?(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-6 w-6 text-[#64748b]",icon:index_min.KxP}),(0,jsx_runtime.jsx)("h2",{className:"font-bold text-2xl text-[#0f172a]",children:t("title")})]}),(0,jsx_runtime.jsxs)("button",{className:"flex items-center gap-2 rounded-xl border-2 border-[#e2e8f0] bg-[#f8fafc] px-4 py-2 font-medium text-[#0f172a] text-sm transition hover:bg-[#f8fafc] disabled:opacity-50",disabled:refreshing,onClick:()=>{loadData(!0)},type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4 "+(refreshing?"animate-spin":""),icon:index_min.fNY}),t(refreshing?"refreshing":"refresh")]})]}),(0,jsx_runtime.jsxs)("div",{className:"grid gap-6 lg:grid-cols-2",children:[(0,jsx_runtime.jsx)("div",{className:"lg:col-span-2",children:(0,jsx_runtime.jsx)(performance_metrics_card.U,{metrics})}),(0,jsx_runtime.jsx)("div",{className:"lg:col-span-2",children:(0,jsx_runtime.jsx)(revenue_trend_chart.g,{periodDays:30,trend:revenueTrend})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(rating_distribution.w,{metrics})}),(0,jsx_runtime.jsxs)("div",{className:"rounded-[24px] border-2 border-[#e2e8f0] bg-[#f8fafc] p-6 shadow-sm",children:[(0,jsx_runtime.jsx)("h3",{className:"mb-4 font-semibold text-[#0f172a] text-lg",children:t("recentActivity")}),(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between rounded-xl bg-[#f8fafc] p-4",children:[(0,jsx_runtime.jsx)("span",{className:"text-[#94a3b8] text-sm",children:t("bookingsLast7Days")}),(0,jsx_runtime.jsx)("span",{className:"font-bold text-[#0f172a] text-xl",children:metrics.bookingsLast7Days})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between rounded-xl bg-[#f8fafc] p-4",children:[(0,jsx_runtime.jsx)("span",{className:"text-[#94a3b8] text-sm",children:t("bookingsLast30Days")}),(0,jsx_runtime.jsx)("span",{className:"font-bold text-[#0f172a] text-xl",children:metrics.bookingsLast30Days})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between rounded-xl bg-[#f8fafc] p-4",children:[(0,jsx_runtime.jsx)("span",{className:"text-[#94a3b8] text-sm",children:t("revenueLast7Days")}),(0,jsx_runtime.jsxs)("span",{className:"font-bold text-[#64748b] text-xl",children:["$",(metrics.revenueLast7DaysCop/1e3).toFixed(0),"k"]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between rounded-xl bg-[#f8fafc] p-4",children:[(0,jsx_runtime.jsx)("span",{className:"text-[#94a3b8] text-sm",children:t("revenueLast30Days")}),(0,jsx_runtime.jsxs)("span",{className:"font-bold text-[#64748b] text-xl",children:["$",(metrics.revenueLast30DaysCop/1e3).toFixed(0),"k"]})]})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:"rounded-xl bg-[#f8fafc] p-4 text-[#64748b] text-sm",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold",children:t("noteTitle")}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#64748b]",children:t("noteDescription")})]})]}):(0,jsx_runtime.jsx)("div",{className:"rounded-[24px] border-2 border-[#e2e8f0] bg-[#f8fafc] p-6",children:(0,jsx_runtime.jsx)("p",{className:"text-center text-[#94a3b8]",children:t("noData")})})}try{AnalyticsDashboard.displayName="AnalyticsDashboard",AnalyticsDashboard.__docgenInfo={description:"Analytics Dashboard Component\n\nMain dashboard for displaying professional performance metrics.\nFetches and displays:\n- Performance metrics (completion rate, revenue, ratings)\n- Revenue trend chart\n- Rating distribution",displayName:"AnalyticsDashboard",props:{profileId:{defaultValue:null,description:"",name:"profileId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/analytics/analytics-dashboard.tsx#AnalyticsDashboard"]={docgenInfo:AnalyticsDashboard.__docgenInfo,name:"AnalyticsDashboard",path:"src/components/analytics/analytics-dashboard.tsx#AnalyticsDashboard"})}catch(__react_docgen_typescript_loader_error){}const analytics_dashboard_stories={title:"Analytics/AnalyticsDashboard",component:AnalyticsDashboard,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]},"./src/components/analytics/performance-metrics-card.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>PerformanceMetricsCard});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),next_intl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js");function PerformanceMetricsCard({metrics}){const t=(0,next_intl__WEBPACK_IMPORTED_MODULE_3__.c3)("components.performanceMetricsCard"),formatCurrency=amount=>`$${(amount/1e3).toFixed(0)}k COP`;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-lg border bg-white p-6 ring-1 ring-black/5 shadow-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-semibold text-slate-900 text-lg",children:t("title")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-slate-500 text-sm",children:t("lastUpdated",{date:new Date(metrics.lastCalculatedAt).toLocaleDateString()})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"grid gap-4 md:grid-cols-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-lg bg-slate-50 p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 text-slate-500",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.XL2}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-slate-600 text-sm",children:t("completionRate")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"font-bold text-3xl "+(metrics.completionRate,"text-slate-500"),children:[metrics.completionRate.toFixed(1),"%"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-1 text-slate-500 text-xs",children:[metrics.completedBookings," ",t("of")," ",metrics.totalBookings," ",t("bookings")]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-lg bg-slate-50 p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 text-slate-500",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Gg5}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-slate-600 text-sm",children:t("averageRating")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-baseline gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-bold text-3xl "+(metrics.averageRating,"text-slate-500"),children:metrics.averageRating.toFixed(2)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-slate-500 text-sm",children:"/ 5.0"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-1 text-slate-500 text-xs",children:[metrics.totalReviews," ",t("reviews")]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-lg bg-slate-50 p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 text-slate-500",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.SYA}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-slate-600 text-sm",children:t("totalRevenue")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-bold text-3xl text-slate-500",children:formatCurrency(metrics.totalRevenueCop)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-1 text-slate-500 text-xs",children:[t("last30Days"),": ",formatCurrency(metrics.revenueLast30DaysCop)]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-lg bg-slate-50 p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-2 flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 text-slate-500",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.ksN}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-slate-600 text-sm",children:t("cancellationRate")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"font-bold text-3xl text-slate-500",children:[metrics.cancellationRate.toFixed(1),"%"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-1 text-slate-500 text-xs",children:[metrics.cancelledBookings," ",t("cancelled")]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-6 grid gap-3 border-slate-200 border-t pt-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-slate-500 text-sm",children:t("averageBookingValue")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-semibold text-slate-900",children:formatCurrency(metrics.averageBookingValueCop)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-slate-500 text-sm",children:t("repeatCustomerRate")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"font-semibold text-slate-900",children:[metrics.repeatCustomerRate.toFixed(1),"%"]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-slate-500 text-sm",children:t("onTimeArrivalRate")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"font-semibold text-slate-900",children:[metrics.onTimeArrivalRate.toFixed(1),"%"]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-slate-500 text-sm",children:t("averageResponseTime")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"font-semibold text-slate-900",children:[metrics.averageResponseTimeMinutes," ",t("minutes")]})]})]})]})}try{PerformanceMetricsCard.displayName="PerformanceMetricsCard",PerformanceMetricsCard.__docgenInfo={description:"Performance Metrics Card Component\n\nDisplays key performance indicators for a professional:\n- Completion rate\n- Average rating\n- Total revenue\n- Total bookings",displayName:"PerformanceMetricsCard",props:{metrics:{defaultValue:null,description:"",name:"metrics",required:!0,type:{name:"PerformanceMetrics"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/analytics/performance-metrics-card.tsx#PerformanceMetricsCard"]={docgenInfo:PerformanceMetricsCard.__docgenInfo,name:"PerformanceMetricsCard",path:"src/components/analytics/performance-metrics-card.tsx#PerformanceMetricsCard"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/analytics/rating-distribution.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{w:()=>RatingDistribution});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),next_intl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js");function RatingDistribution({metrics}){const t=(0,next_intl__WEBPACK_IMPORTED_MODULE_3__.c3)("components.ratingDistribution"),ratingData=[{stars:5,count:metrics.fiveStarCount,color:"bg-[#64748b]/100"},{stars:4,count:metrics.fourStarCount,color:"bg-[#64748b]"},{stars:3,count:metrics.threeStarCount,color:"bg-[#64748b]/50"},{stars:2,count:metrics.twoStarCount,color:"bg-[#64748b]/100"},{stars:1,count:metrics.oneStarCount,color:"bg-[#64748b]/100"}],totalRatings=ratingData.reduce((sum,item)=>sum+item.count,0),satisfactionRate=totalRatings>0?(metrics.fiveStarCount+metrics.fourStarCount)/totalRatings*100:0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-[24px] border-2 border-[#e2e8f0] bg-[#f8fafc] p-6 shadow-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-semibold text-[#0f172a] text-lg",children:t("title")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-[#94a3b8] text-sm",children:[totalRatings," ",t("totalRatings")]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"text-right",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 fill-[#64748b] text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Gg5}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-bold text-2xl text-[#0f172a]",children:metrics.averageRating.toFixed(2)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-[#94a3b8] text-xs",children:t("averageRating")})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-3",children:ratingData.map(item=>{const percentage=totalRatings>0?item.count/totalRatings*100:0;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex w-12 items-center gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-[#0f172a] text-sm",children:item.stars}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-4 w-4 fill-[#64748b] text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Gg5})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"relative h-6 flex-1 overflow-hidden rounded-full bg-[#f8fafc]",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:`h-full transition-all duration-500 ${item.color}`,style:{width:`${percentage}%`}})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex w-24 items-center justify-end gap-2 text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-semibold text-[#0f172a]",children:item.count}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-[#94a3b8]",children:["(",percentage.toFixed(1),"%)"]})]})]},item.stars)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mt-6 rounded-xl border-[#e2e8f0] border-t bg-gradient-to-r from-[#64748b]/10 to-[#64748b]/10 p-4 pt-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-medium text-[#0f172a] text-sm",children:t("satisfactionRate")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-[#94a3b8] text-xs",children:t("satisfactionRateDescription")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"text-right",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"font-bold text-2xl text-[#64748b]",children:[satisfactionRate.toFixed(1),"%"]})})]})})]})}try{RatingDistribution.displayName="RatingDistribution",RatingDistribution.__docgenInfo={description:"Rating Distribution Component\n\nDisplays a bar chart showing the distribution of ratings (1-5 stars).\nShows percentage breakdown and total count for each rating level.",displayName:"RatingDistribution",props:{metrics:{defaultValue:null,description:"",name:"metrics",required:!0,type:{name:"PerformanceMetrics"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/analytics/rating-distribution.tsx#RatingDistribution"]={docgenInfo:RatingDistribution.__docgenInfo,name:"RatingDistribution",path:"src/components/analytics/rating-distribution.tsx#RatingDistribution"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/analytics/revenue-trend-chart.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>RevenueTrendChart});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),next_intl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js");function RevenueTrendChart({trend,periodDays=30}){const t=(0,next_intl__WEBPACK_IMPORTED_MODULE_3__.c3)("components.revenueTrendChart"),formatCurrency=amount=>amount>=1e6?`$${(amount/1e6).toFixed(1)}M`:`$${(amount/1e3).toFixed(0)}k`,totalRevenue=trend.reduce((sum,point)=>sum+point.revenueCop,0),totalBookings=trend.reduce((sum,point)=>sum+point.bookingsCount,0),growth=(()=>{if(trend.length<2)return 0;const midpoint=Math.floor(trend.length/2),firstHalfTotal=trend.slice(0,midpoint).reduce((sum,point)=>sum+point.revenueCop,0),secondHalfTotal=trend.slice(midpoint).reduce((sum,point)=>sum+point.revenueCop,0);return 0===firstHalfTotal?secondHalfTotal>0?100:0:(secondHalfTotal-firstHalfTotal)/firstHalfTotal*100})(),isPositiveGrowth=growth>=0,maxRevenue=Math.max(...trend.map(p=>p.revenueCop),1);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-[24px] border-2 border-[#e2e8f0] bg-[#f8fafc] p-6 shadow-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-6 flex items-center justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-semibold text-[#0f172a] text-lg",children:t("title")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-[#94a3b8] text-sm",children:t("period",{days:periodDays})})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[isPositiveGrowth?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.p_k}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-5 w-5 text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.eWi}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"font-semibold text-sm text-[#64748b]",children:[isPositiveGrowth?"+":"",growth.toFixed(1),"%"]})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-6 grid gap-4 md:grid-cols-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-xl bg-[#f8fafc] p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-1 text-[#94a3b8] text-xs",children:t("totalRevenue")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-bold text-2xl text-[#64748b]",children:formatCurrency(totalRevenue)})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-xl bg-[#f8fafc] p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-1 text-[#94a3b8] text-xs",children:t("totalBookings")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-bold text-2xl text-[#0f172a]",children:totalBookings})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"rounded-xl bg-[#f8fafc] p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-1 text-[#94a3b8] text-xs",children:t("averagePerBooking")}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-bold text-2xl text-[#0f172a]",children:totalBookings>0?formatCurrency(totalRevenue/totalBookings):"$0"})]})]}),trend.length>0?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex items-end justify-between gap-1",style:{height:200},children:trend.map((point,index)=>{const barHeight=point.revenueCop/maxRevenue*200,date=new Date(point.date);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"group relative flex flex-1 flex-col items-center",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-full rounded-t-md bg-gradient-to-t from-[#64748b] to-[#64748b] transition-all hover:opacity-80",style:{height:`${barHeight}px`}}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"-top-16 -translate-x-1/2 pointer-events-none absolute left-1/2 z-10 hidden rounded-lg bg-[#0f172a] px-3 py-2 text-[#f8fafc] text-xs shadow-lg group-hover:block",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"font-semibold",children:formatCurrency(point.revenueCop)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-[#e2e8f0]",children:[point.bookingsCount," ",t("bookings")]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-[#e2e8f0]",children:date.toLocaleDateString()}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"-bottom-1 -translate-x-1/2 absolute left-1/2 h-2 w-2 rotate-45 bg-[#0f172a]"})]}),(index%5==0||index===trend.length-1)&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mt-2 text-[#94a3b8] text-[10px]",children:[date.getDate(),"/",date.getMonth()+1]})]},index)})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"absolute right-0 bottom-0 left-0 h-px bg-[#e2e8f0]"})]}):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"text-[#94a3b8] text-sm",children:t("noData")})})]})}try{RevenueTrendChart.displayName="RevenueTrendChart",RevenueTrendChart.__docgenInfo={description:"Revenue Trend Chart Component\n\nDisplays a simple line chart showing revenue trends over time.\nIncludes growth percentage and visual indicators.",displayName:"RevenueTrendChart",props:{trend:{defaultValue:null,description:"",name:"trend",required:!0,type:{name:"RevenueTrendDataPoint[]"}},periodDays:{defaultValue:{value:"30"},description:"",name:"periodDays",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/analytics/revenue-trend-chart.tsx#RevenueTrendChart"]={docgenInfo:RevenueTrendChart.__docgenInfo,name:"RevenueTrendChart",path:"src/components/analytics/revenue-trend-chart.tsx#RevenueTrendChart"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/supabase/server-client.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>createSupabaseServerClient});var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@supabase/ssr/dist/module/index.js"),next_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/cache/index.js"),next_headers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js");async function createSupabaseServerClient(){(0,next_cache__WEBPACK_IMPORTED_MODULE_1__.Mo)();const supabaseUrl="https://hvnetxfsrtplextvtwfx.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2bmV0eGZzcnRwbGV4dHZ0d2Z4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1ODc0NTEsImV4cCI6MjA3NzE2MzQ1MX0.7-N06om_ntUuGP1NZ0Zcqz01s975xJfiKno34aIW__o";const cookieStore=await(0,next_headers__WEBPACK_IMPORTED_MODULE_2__.UL)();return(0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl,supabaseKey,{cookies:{getAll:()=>cookieStore.getAll(),setAll(cookiesToSet){try{cookiesToSet.forEach(({name,value,options})=>cookieStore.set(name,value,options))}catch{}}}})}}}]);