"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[95462],{"./src/components/shared/availability-calendar.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>AvailabilityCalendar});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function useAvailabilityData({professionalId,startDate,endDate,enabled=!0,onSuccess,onError}){const[data,setData]=(0,react.useState)(null),[loading,setLoading]=(0,react.useState)(!0),[error,setError]=(0,react.useState)(null),fetchAvailability=(0,react.useCallback)(async()=>{if(enabled&&professionalId)try{setLoading(!0),setError(null);const url=`/api/professionals/${professionalId}/availability?startDate=${startDate}&endDate=${endDate}`,response=await fetch(url);if(!response.ok)throw new Error(`Failed to load availability: ${response.statusText}`);const responseData=await response.json();setData(responseData),onSuccess?.(responseData)}catch(err){const errorObj=err instanceof Error?err:new Error("Failed to load availability");setError(errorObj),onError?.(errorObj)}finally{setLoading(!1)}else setLoading(!1)},[professionalId,startDate,endDate,enabled,onSuccess,onError]);(0,react.useEffect)(()=>{fetchAvailability()},[fetchAvailability]);const getDateAvailability=(0,react.useCallback)(date=>{if(!data)return null;const dateStr=function formatDate(date){const year=date.getFullYear(),month=String(date.getMonth()+1).padStart(2,"0"),day=String(date.getDate()).padStart(2,"0");return`${year}-${month}-${day}`}(date);return data.availability.find(a=>a.date===dateStr)||null},[data]);return{data,loading,error,refetch:fetchAvailability,getDateAvailability}}var use_calendar_grid=__webpack_require__("./src/hooks/use-calendar-grid.ts"),use_calendar_month=__webpack_require__("./src/hooks/use-calendar-month.ts"),utils=__webpack_require__("./src/lib/utils.ts");function AvailabilityCalendar({dataSource,size="medium",theme="default",selectedDate,onDateSelect,selectedTime,onTimeSelect,showTimeSlots=!0,showLegend=!0,showTodayButton=!0,useUTC=!1,locale="en-US",className,initialMonth,renderDayContent,renderTimeSlot}){const{currentMonth,goToNextMonth,goToPreviousMonth,goToToday,getMonthLabel,getMonthBounds}=(0,use_calendar_month.a)(initialMonth),calendarDays=(0,use_calendar_grid.g)({currentMonth,useUTC}),{startOfMonth,endOfMonth}=getMonthBounds(),apiData=useAvailabilityData({professionalId:"api"===dataSource.type?dataSource.professionalId:void 0,startDate:availability_calendar_formatDate(startOfMonth),endDate:availability_calendar_formatDate(endOfMonth),enabled:"api"===dataSource.type,onSuccess:"api"===dataSource.type?dataSource.onDataLoad:void 0}),getDateAvailability=(0,react.useMemo)(()=>"api"===dataSource.type?apiData.getDateAvailability:dataSource.getDateAvailability,[dataSource,apiData]),isLoading="api"===dataSource.type&&apiData.loading,error="api"===dataSource.type?apiData.error:null,selectedDateAvailability=selectedDate?getDateAvailability(selectedDate):null,themeConfig=function getThemeConfig(theme){return{default:{gridBorder:"border-[#e2e8f0]",selected:"ring-2 ring-[#64748b] ring-inset",today:"font-bold",selectable:"cursor-pointer hover:ring-2 hover:ring-[#64748b]/20"},professional:{gridBorder:"border-[#e2e8f0]",selected:"border-[#64748b] ring-2 ring-[#64748b]/20",today:"font-bold text-[#64748b]",selectable:"cursor-pointer hover:border-[#64748b]"},customer:{gridBorder:"border-[#e2e8f0]",selected:"scale-105 ring-4 ring-[#64748b] ring-offset-2",today:"border-[#64748b]",selectable:"hover:-translate-y-1 cursor-pointer hover:scale-105 hover:shadow-lg"}}[theme]}(theme),sizeConfig=getSizeConfig(size);return(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("space-y-4",className),children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsx)("h3",{className:(0,utils.cn)("font-semibold text-[#0f172a]",sizeConfig.headerText),children:getMonthLabel(locale)}),(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("flex gap-2",sizeConfig.buttonGap),children:[showTodayButton&&(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("rounded-md border border-[#e2e8f0] font-medium text-[#94a3b8] transition hover:border-[#64748b] hover:text-[#64748b]",sizeConfig.button),onClick:goToToday,type:"button",children:"Today"}),(0,jsx_runtime.jsx)("button",{"aria-label":"Previous month",className:(0,utils.cn)("rounded-md border border-[#e2e8f0] text-[#94a3b8] transition hover:border-[#64748b] hover:text-[#64748b]",sizeConfig.navButton),onClick:goToPreviousMonth,type:"button",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:sizeConfig.icon,icon:index_min.pQE})}),(0,jsx_runtime.jsx)("button",{"aria-label":"Next month",className:(0,utils.cn)("rounded-md border border-[#e2e8f0] text-[#94a3b8] transition hover:border-[#64748b] hover:text-[#64748b]",sizeConfig.navButton),onClick:goToNextMonth,type:"button",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:sizeConfig.icon,icon:index_min.eXO})})]})]}),isLoading&&(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)("rounded-lg border border-[#e2e8f0] bg-[#f8fafc]/90 text-center",sizeConfig.loadingPadding),children:(0,jsx_runtime.jsx)("p",{className:(0,utils.cn)("text-[#94a3b8]",sizeConfig.text),children:"Loading availability..."})}),error&&(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-[#64748b]/30 bg-[#64748b]/10 p-4 text-center",children:[(0,jsx_runtime.jsx)("p",{className:(0,utils.cn)("text-[#64748b]",sizeConfig.text),children:error.message}),"api"===dataSource.type&&(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("mt-2 font-semibold text-[#64748b] hover:text-[#64748b]",sizeConfig.smallText),onClick:apiData.refetch,type:"button",children:"Retry"})]}),!(isLoading||error)&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("grid grid-cols-7 gap-px overflow-hidden rounded-lg border border-[#e2e8f0] bg-[#e2e8f0]",themeConfig.gridBorder),children:[getDayHeaders(size).map(day=>(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)("bg-[#e2e8f0] text-center font-semibold text-[#94a3b8] uppercase",sizeConfig.headerPadding,sizeConfig.smallText),children:day},day)),calendarDays.map(calendarDay=>{const availability=getDateAvailability(calendarDay.date),isSelected=selectedDate&&calendarDay.key===availability_calendar_formatDate(selectedDate),canSelect=!calendarDay.isPast&&availability&&"blocked"!==availability.status&&availability.availableSlots.length>0,statusColors=function getStatusColors(status){const colors={available:{bg:"bg-[#64748b]/10 border-[#64748b]/40",text:"text-[#64748b]"},limited:{bg:"bg-[#64748b]/5 border-[#64748b]/30",text:"text-[#64748b]"},booked:{bg:"bg-[#64748b]/10 border-[#64748b]/30",text:"text-[#64748b]"},blocked:{bg:"bg-[#e2e8f0]/30 border-[#e2e8f0]",text:"text-[#94a3b8]"}};return status?colors[status]:{bg:"bg-[#f8fafc]",text:"text-[#0f172a]"}}(availability?.status),bgColor=calendarDay.isPast?"bg-[#f8fafc]":calendarDay.inCurrentMonth&&availability?statusColors.bg:"bg-[#f8fafc]";return(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("relative text-left transition",sizeConfig.dayCell,bgColor,isSelected&&themeConfig.selected,calendarDay.isToday&&themeConfig.today,canSelect?themeConfig.selectable:"cursor-not-allowed opacity-60",calendarDay.isPast&&"text-[#94a3b8]/70",!calendarDay.isPast&&"text-[#0f172a]",!calendarDay.inCurrentMonth&&"opacity-40"),disabled:!canSelect,onClick:()=>{canSelect&&(onDateSelect?.(calendarDay.date),onTimeSelect?.(null))},type:"button",children:renderDayContent?renderDayContent(calendarDay.date,availability):(0,jsx_runtime.jsx)(DefaultDayContent,{availability,day:calendarDay,size})},calendarDay.key)})]}),showLegend&&(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)("flex flex-wrap gap-3 text-[#94a3b8]",sizeConfig.smallText),children:[(0,jsx_runtime.jsx)(LegendItem,{icon:"ðŸŸ¢",label:"Available"}),(0,jsx_runtime.jsx)(LegendItem,{icon:"ðŸŸ¡",label:"Limited"}),(0,jsx_runtime.jsx)(LegendItem,{icon:"ðŸ”´",label:"Booked"}),(0,jsx_runtime.jsx)(LegendItem,{icon:"âš«",label:"Unavailable"})]})]}),showTimeSlots&&selectedDate&&selectedDateAvailability&&selectedDateAvailability.availableSlots.length>0&&(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-[#e2e8f0] bg-[#f8fafc]/90 p-4",children:[(0,jsx_runtime.jsxs)("h4",{className:(0,utils.cn)("mb-3 font-semibold text-[#0f172a]",sizeConfig.text),children:["Available times on"," ",selectedDate.toLocaleDateString(locale,{month:"long",day:"numeric"})]}),(0,jsx_runtime.jsx)("div",{className:(0,utils.cn)("grid gap-2","large"===size?"grid-cols-3 sm:grid-cols-4 md:grid-cols-6":"grid-cols-3 sm:grid-cols-4"),children:selectedDateAvailability.availableSlots.map(time=>{const isTimeSelected=selectedTime===time;return renderTimeSlot?(0,jsx_runtime.jsx)("div",{onClick:()=>onTimeSelect?.(time),onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),onTimeSelect?.(time))},role:"button",tabIndex:0,children:renderTimeSlot(time,isTimeSelected)},time):(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("rounded-md border font-medium transition",sizeConfig.timeSlotButton,isTimeSelected?"border-[#64748b] bg-[#64748b] text-[#f8fafc]":"border-[#e2e8f0] bg-[#f8fafc] text-[#0f172a] hover:border-[#64748b] hover:text-[#64748b]"),onClick:()=>onTimeSelect?.(time),type:"button",children:formatTime(time)},time)})}),selectedDateAvailability.bookingCount>0&&(0,jsx_runtime.jsxs)("p",{className:(0,utils.cn)("mt-3 text-[#94a3b8]",sizeConfig.smallText),children:[selectedDateAvailability.bookingCount," of ",selectedDateAvailability.maxBookings," ","slots booked today"]})]}),showTimeSlots&&selectedDate&&selectedDateAvailability&&0===selectedDateAvailability.availableSlots.length&&(0,jsx_runtime.jsx)("div",{className:"rounded-lg border border-[#e2e8f0] bg-[#f8fafc]/90 p-4 text-center",children:(0,jsx_runtime.jsx)("p",{className:(0,utils.cn)("text-[#94a3b8]",sizeConfig.text),children:"No available time slots on this date. Please choose another day."})})]})}function DefaultDayContent({day,availability,size}){const sizeConfig=getSizeConfig(size);return(0,jsx_runtime.jsxs)("div",{className:"flex h-full flex-col",children:[(0,jsx_runtime.jsx)("span",{className:sizeConfig.dayNumber,children:day.label}),availability&&!day.isPast&&day.inCurrentMonth&&(0,jsx_runtime.jsx)("span",{className:"mt-auto text-xs",children:{available:"ðŸŸ¢",limited:"ðŸŸ¡",booked:"ðŸ”´",blocked:"âš«"}[availability.status]})]})}function LegendItem({icon,label}){return(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-1",children:[(0,jsx_runtime.jsx)("span",{children:icon}),(0,jsx_runtime.jsx)("span",{children:label})]})}function getSizeConfig(size){return{compact:{headerText:"text-base",text:"text-sm",smallText:"text-xs",button:"px-3 py-1 text-xs",navButton:"px-2 py-1 text-sm",icon:"h-4 w-4",buttonGap:"gap-2",headerPadding:"px-2 py-2",loadingPadding:"p-6",dayCell:"min-h-[50px] p-2",dayNumber:"text-sm",timeSlotButton:"px-2 py-1.5 text-sm"},medium:{headerText:"text-lg",text:"text-sm",smallText:"text-xs",button:"px-3 py-1 text-xs",navButton:"px-2 py-1 text-sm",icon:"h-4 w-4",buttonGap:"gap-2",headerPadding:"px-2 py-2",loadingPadding:"p-8",dayCell:"min-h-[60px] p-2",dayNumber:"text-sm",timeSlotButton:"px-3 py-2 text-sm"},large:{headerText:"text-4xl",text:"text-base",smallText:"text-sm",button:"px-5 py-2.5 text-base",navButton:"p-2.5 text-base",icon:"h-6 w-6",buttonGap:"gap-3",headerPadding:"pb-4",loadingPadding:"p-16",dayCell:"min-h-[120px] p-4",dayNumber:"text-2xl",timeSlotButton:"px-4 py-2.5 text-base"}}[size]}function getDayHeaders(size){return"large"===size?["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]}function availability_calendar_formatDate(date){return`${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,"0")}-${String(date.getDate()).padStart(2,"0")}`}function formatTime(time){const[hours=0,minutes=0]=time.split(":").map(Number),period=hours>=12?"PM":"AM";return`${hours%12||12}:${minutes.toString().padStart(2,"0")} ${period}`}try{AvailabilityCalendar.displayName="AvailabilityCalendar",AvailabilityCalendar.__docgenInfo={description:"Unified Availability Calendar Component\n\nA flexible, configurable calendar component that supports multiple views,\ndata sources, and use cases. Consolidates all calendar implementations\ninto a single, maintainable component.",displayName:"AvailabilityCalendar",props:{dataSource:{defaultValue:null,description:"Data source configuration (API or props-based)",name:"dataSource",required:!0,type:{name:"CalendarDataSource"}},size:{defaultValue:{value:"medium"},description:"Calendar size variant",name:"size",required:!1,type:{name:"enum",value:[{value:'"compact"'},{value:'"medium"'},{value:'"large"'}]}},theme:{defaultValue:{value:"default"},description:"Visual theme variant",name:"theme",required:!1,type:{name:"enum",value:[{value:'"default"'},{value:'"customer"'},{value:'"professional"'}]}},selectedDate:{defaultValue:null,description:"Selected date (controlled)",name:"selectedDate",required:!1,type:{name:"Date"}},onDateSelect:{defaultValue:null,description:"Callback when date is selected",name:"onDateSelect",required:!1,type:{name:"(date: Date) => void"}},selectedTime:{defaultValue:null,description:"Selected time slot (controlled)",name:"selectedTime",required:!1,type:{name:"string"}},onTimeSelect:{defaultValue:null,description:"Callback when time slot is selected",name:"onTimeSelect",required:!1,type:{name:"(time: string) => void"}},showTimeSlots:{defaultValue:{value:"true"},description:"Show time slot selector",name:"showTimeSlots",required:!1,type:{name:"boolean"}},showLegend:{defaultValue:{value:"true"},description:"Show availability legend",name:"showLegend",required:!1,type:{name:"boolean"}},showTodayButton:{defaultValue:{value:"true"},description:'Show "Today" button',name:"showTodayButton",required:!1,type:{name:"boolean"}},useUTC:{defaultValue:{value:"false"},description:"Use UTC dates (for server-rendered calendars)",name:"useUTC",required:!1,type:{name:"boolean"}},locale:{defaultValue:{value:"en-US"},description:"Locale for date formatting",name:"locale",required:!1,type:{name:"string"}},className:{defaultValue:null,description:"Custom CSS class",name:"className",required:!1,type:{name:"string"}},initialMonth:{defaultValue:null,description:"Initial month to display",name:"initialMonth",required:!1,type:{name:"Date"}},renderDayContent:{defaultValue:null,description:"Render custom day cell content",name:"renderDayContent",required:!1,type:{name:"(day: Date, availability: any) => ReactNode"}},renderTimeSlot:{defaultValue:null,description:"Render custom time slot button",name:"renderTimeSlot",required:!1,type:{name:"(time: string, isSelected: boolean) => ReactNode"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/shared/availability-calendar.tsx#AvailabilityCalendar"]={docgenInfo:AvailabilityCalendar.__docgenInfo,name:"AvailabilityCalendar",path:"src/components/shared/availability-calendar.tsx#AvailabilityCalendar"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/use-calendar-grid.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>useCalendarGrid});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function useCalendarGrid({currentMonth,useUTC=!1,weeks=6}){return(0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{const today=useUTC?getUTCToday():getLocalToday();return useUTC?function buildUTCCalendarGrid(currentMonth,today,weeks){const year=currentMonth.getUTCFullYear(),month=currentMonth.getUTCMonth(),startWeekDay=new Date(Date.UTC(year,month,1)).getUTCDay(),days=[],totalCells=7*weeks;for(let index=0;index<totalCells;index+=1){const dayOffset=index-startWeekDay,current=new Date(Date.UTC(year,month,1));current.setUTCDate(current.getUTCDate()+dayOffset),days.push({date:current,label:current.getUTCDate(),key:formatUTCDateKey(current),inCurrentMonth:current.getUTCMonth()===month,isToday:isSameDayUTC(current,today),isPast:current<today})}return days}(currentMonth,today,weeks):function buildLocalCalendarGrid(currentMonth,today,weeks){const year=currentMonth.getFullYear(),month=currentMonth.getMonth(),firstDay=new Date(year,month,1),lastDay=new Date(year,month+1,0),startingDayOfWeek=firstDay.getDay(),daysInMonth=lastDay.getDate(),days=[];for(let i=0;i<startingDayOfWeek;i++){const prevMonthDay=new Date(year,month,-(startingDayOfWeek-i-1));days.push({date:prevMonthDay,label:prevMonthDay.getDate(),key:formatDateKey(prevMonthDay),inCurrentMonth:!1,isToday:isSameDay(prevMonthDay,today),isPast:prevMonthDay<today})}for(let day=1;day<=daysInMonth;day++){const date=new Date(year,month,day);days.push({date,label:day,key:formatDateKey(date),inCurrentMonth:!0,isToday:isSameDay(date,today),isPast:date<today})}const totalCells=7*weeks,remainingCells=totalCells-days.length;for(let i=1;i<=remainingCells;i++){const nextMonthDay=new Date(year,month+1,i);days.push({date:nextMonthDay,label:nextMonthDay.getDate(),key:formatDateKey(nextMonthDay),inCurrentMonth:!1,isToday:isSameDay(nextMonthDay,today),isPast:nextMonthDay<today})}return days}(currentMonth,today,weeks)},[currentMonth,useUTC,weeks])}function formatDateKey(date){return`${date.getFullYear()}-${String(date.getMonth()+1).padStart(2,"0")}-${String(date.getDate()).padStart(2,"0")}`}function formatUTCDateKey(date){return`${date.getUTCFullYear()}-${String(date.getUTCMonth()+1).padStart(2,"0")}-${String(date.getUTCDate()).padStart(2,"0")}`}function getLocalToday(){const today=new Date;return today.setHours(0,0,0,0),today}function getUTCToday(){const now=new Date;return new Date(Date.UTC(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate()))}function isSameDay(date1,date2){return date1.getFullYear()===date2.getFullYear()&&date1.getMonth()===date2.getMonth()&&date1.getDate()===date2.getDate()}function isSameDayUTC(date1,date2){return date1.getUTCFullYear()===date2.getUTCFullYear()&&date1.getUTCMonth()===date2.getUTCMonth()&&date1.getUTCDate()===date2.getUTCDate()}},"./src/hooks/use-calendar-month.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>useCalendarMonth});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function useCalendarMonth(initialDate){const[currentMonth,setCurrentMonth]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(()=>{const date=initialDate||new Date;return new Date(date.getFullYear(),date.getMonth(),1)}),goToNextMonth=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setCurrentMonth(prev=>new Date(prev.getFullYear(),prev.getMonth()+1,1))},[]),goToPreviousMonth=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{setCurrentMonth(prev=>new Date(prev.getFullYear(),prev.getMonth()-1,1))},[]),goToToday=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{const today=new Date;setCurrentMonth(new Date(today.getFullYear(),today.getMonth(),1))},[]),goToMonth=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(date=>{setCurrentMonth(new Date(date.getFullYear(),date.getMonth(),1))},[]),changeMonth=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(offset=>{setCurrentMonth(prev=>new Date(prev.getFullYear(),prev.getMonth()+offset,1))},[]),getMonthLabel=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((locale="en-US",options)=>currentMonth.toLocaleDateString(locale,{month:"long",year:"numeric",...options}),[currentMonth]),getMonthBounds=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>({startOfMonth:new Date(currentMonth.getFullYear(),currentMonth.getMonth(),1),endOfMonth:new Date(currentMonth.getFullYear(),currentMonth.getMonth()+1,0)}),[currentMonth]);return{currentMonth,goToNextMonth,goToPreviousMonth,goToToday,goToMonth,changeMonth,monthLabel:getMonthLabel(),getMonthLabel,getMonthBounds}}},"./src/lib/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function cn(...classes){return classes.filter(Boolean).join(" ")}__webpack_require__.d(__webpack_exports__,{cn:()=>cn})}}]);