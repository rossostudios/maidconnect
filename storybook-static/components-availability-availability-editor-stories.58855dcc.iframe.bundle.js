"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[94003],{"./node_modules/next-intl/dist/esm/production/react-client/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c3:()=>e});var use_intl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/use-intl/dist/esm/production/react.js");function o(r,t){return(...r)=>{try{return t(...r)}catch{throw new Error(void 0)}}}const e=o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.c3);o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.kc)},"./src/components/availability/availability-editor.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>availability_editor_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),blocked_dates_calendar=__webpack_require__("./src/components/availability/blocked-dates-calendar.tsx"),weekly_hours_editor=__webpack_require__("./src/components/availability/weekly-hours-editor.tsx");function AvailabilityEditor({initialWeeklyHours,initialBlockedDates}){const t=(0,react_client.c3)("dashboard.pro.availabilityEditor"),[activeTab,setActiveTab]=(0,react.useState)("hours"),[weeklyHours,setWeeklyHours]=(0,react.useState)(initialWeeklyHours||[]),[blockedDates,setBlockedDates]=(0,react.useState)(initialBlockedDates||[]),[loading,setLoading]=(0,react.useState)(!1),[success,setSuccess]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null);return(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[success&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3 rounded-xl bg-[#64748b]/10 p-4 text-[#64748b]",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5",icon:index_min.yim}),(0,jsx_runtime.jsx)("p",{className:"font-semibold text-sm",children:t("success")})]}),error&&(0,jsx_runtime.jsx)("div",{className:"rounded-xl bg-[#64748b]/10 p-4 text-[#64748b]",children:(0,jsx_runtime.jsx)("p",{className:"font-semibold text-sm",children:error})}),(0,jsx_runtime.jsx)("div",{className:"overflow-x-auto border-[#e2e8f0] border-b",children:(0,jsx_runtime.jsxs)("div",{className:"flex w-max gap-1 md:w-full",children:[(0,jsx_runtime.jsxs)("button",{className:"flex flex-shrink-0 items-center gap-2 whitespace-nowrap border-b-2 px-4 py-3 font-semibold text-sm transition "+("hours"===activeTab?"border-[#64748b] text-[#64748b]":"border-transparent text-[#94a3b8] hover:text-[#0f172a]"),onClick:()=>setActiveTab("hours"),type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.p19}),t("tabs.workingHours")]}),(0,jsx_runtime.jsxs)("button",{className:"flex flex-shrink-0 items-center gap-2 whitespace-nowrap border-b-2 px-4 py-3 font-semibold text-sm transition "+("blocked"===activeTab?"border-[#64748b] text-[#64748b]":"border-transparent text-[#94a3b8] hover:text-[#0f172a]"),onClick:()=>setActiveTab("blocked"),type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.vxL}),t("tabs.blockedDates"),blockedDates.length>0&&(0,jsx_runtime.jsx)("span",{className:"rounded-full bg-[#64748b]/100 px-2 py-0.5 font-bold text-[#f8fafc] text-xs",children:blockedDates.length})]})]})}),(0,jsx_runtime.jsxs)("div",{className:"min-h-[500px]",children:["hours"===activeTab&&(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"font-semibold text-[#0f172a] text-lg",children:t("workingHours.title")}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:t("workingHours.description")})]}),(0,jsx_runtime.jsx)(weekly_hours_editor.q,{initialSchedule:weeklyHours,onChange:setWeeklyHours})]}),"blocked"===activeTab&&(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h3",{className:"font-semibold text-[#0f172a] text-lg",children:t("blockedDates.title")}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:t("blockedDates.description")})]}),(0,jsx_runtime.jsx)(blocked_dates_calendar.q,{initialBlockedDates:blockedDates,onChange:setBlockedDates})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-end gap-3 border-[#e2e8f0] border-t pt-6",children:[(0,jsx_runtime.jsx)("div",{className:"flex-1 text-[#94a3b8] text-sm",children:t("infoText")}),(0,jsx_runtime.jsx)("button",{className:"rounded-full bg-[#64748b] px-8 py-3 font-semibold text-base text-[#f8fafc] shadow-[0_6px_18px_rgba(244,74,34,0.22)] transition hover:bg-[#64748b] disabled:cursor-not-allowed disabled:opacity-50",disabled:loading,onClick:async()=>{setLoading(!0),setSuccess(!1),setError(null);try{const response=await fetch("/api/professional/availability",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({weeklyHours,blockedDates})});if(!response.ok){const data=await response.json();throw new Error(data.error||"Failed to update availability")}setSuccess(!0),setTimeout(()=>setSuccess(!1),3e3)}catch(err){setError(err instanceof Error?err.message:"Failed to update availability")}finally{setLoading(!1)}},type:"button",children:loading?(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsxs)("svg",{className:"h-5 w-5 animate-spin",viewBox:"0 0 24 24",children:[(0,jsx_runtime.jsx)("title",{children:"Loading"}),(0,jsx_runtime.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",fill:"none",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,jsx_runtime.jsx)("path",{className:"opacity-75",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]}),t("saving")]}):t("save")})]})]})}try{AvailabilityEditor.displayName="AvailabilityEditor",AvailabilityEditor.__docgenInfo={description:"",displayName:"AvailabilityEditor",props:{initialWeeklyHours:{defaultValue:null,description:"",name:"initialWeeklyHours",required:!1,type:{name:"DaySchedule[]"}},initialBlockedDates:{defaultValue:null,description:"",name:"initialBlockedDates",required:!1,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/availability/availability-editor.tsx#AvailabilityEditor"]={docgenInfo:AvailabilityEditor.__docgenInfo,name:"AvailabilityEditor",path:"src/components/availability/availability-editor.tsx#AvailabilityEditor"})}catch(__react_docgen_typescript_loader_error){}const availability_editor_stories={title:"Availability/AvailabilityEditor",component:AvailabilityEditor,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]},"./src/components/availability/weekly-hours-editor.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>WeeklyHoursEditor});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const DEFAULT_SCHEDULE=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"].map(day=>({day,enabled:["Monday","Tuesday","Wednesday","Thursday","Friday"].includes(day),start:"09:00",end:"17:00"}));function WeeklyHoursEditor({initialSchedule,onChange}){const[schedule,setSchedule]=(0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(initialSchedule&&initialSchedule.length>0?initialSchedule:DEFAULT_SCHEDULE);(0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{onChange&&onChange(schedule)},[onChange,schedule]);const handleChange=newSchedule=>{setSchedule(newSchedule),onChange?.(newSchedule)},handleTimeChange=(index,field,value)=>{const newSchedule=[...schedule],day=newSchedule[index];day&&(day[field]=value,handleChange(newSchedule))},handlePreset=preset=>{let newSchedule;newSchedule="weekdays"===preset?schedule.map(day=>({...day,enabled:["Monday","Tuesday","Wednesday","Thursday","Friday"].includes(day.day)})):"weekends"===preset?schedule.map(day=>({...day,enabled:["Saturday","Sunday"].includes(day.day)})):schedule.map(day=>({...day,enabled:!0})),handleChange(newSchedule)};return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"space-y-6",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h4",{className:"mb-3 font-semibold text-[#0f172a] text-sm",children:"Quick Presets"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"rounded-full border-2 border-[#e2e8f0] bg-[#f8fafc] px-4 py-2 font-semibold text-[#0f172a] text-sm transition hover:border-[#64748b] hover:text-[#64748b]",onClick:()=>handlePreset("weekdays"),type:"button",children:"Weekdays (Mon-Fri)"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"rounded-full border-2 border-[#e2e8f0] bg-[#f8fafc] px-4 py-2 font-semibold text-[#0f172a] text-sm transition hover:border-[#64748b] hover:text-[#64748b]",onClick:()=>handlePreset("weekends"),type:"button",children:"Weekends Only"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"rounded-full border-2 border-[#e2e8f0] bg-[#f8fafc] px-4 py-2 font-semibold text-[#0f172a] text-sm transition hover:border-[#64748b] hover:text-[#64748b]",onClick:()=>handlePreset("everyday"),type:"button",children:"Every Day"})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"space-y-3",children:schedule.map((day,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-xl border-2 p-4 transition "+(day.enabled?"border-[#64748b]/20 bg-[#f8fafc]":"border-[#e2e8f0] bg-[#f8fafc]"),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("label",{className:"flex w-32 items-center gap-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{checked:day.enabled,className:"h-5 w-5 rounded border-[#e2e8f0] text-[#64748b] focus:ring-2 focus:ring-[#64748b]/20",onChange:()=>(index=>{const newSchedule=[...schedule],day=newSchedule[index];day&&(day.enabled=!day.enabled,handleChange(newSchedule))})(index),type:"checkbox"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-semibold text-sm "+(day.enabled?"text-[#0f172a]":"text-[#94a3b8]"),children:day.day})]}),day.enabled&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-4 w-4 text-[#94a3b8]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.p19}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:"rounded-lg border border-[#e2e8f0] px-3 py-2 text-sm accent-[#64748b] [color-scheme:light] focus:border-[#64748b] focus:outline-none focus:ring-2 focus:ring-[#64748b]/20",onChange:e=>handleTimeChange(index,"start",e.target.value),type:"time",value:day.start}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#94a3b8] text-sm",children:"to"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{className:"rounded-lg border border-[#e2e8f0] px-3 py-2 text-sm accent-[#64748b] [color-scheme:light] focus:border-[#64748b] focus:outline-none focus:ring-2 focus:ring-[#64748b]/20",onChange:e=>handleTimeChange(index,"end",e.target.value),type:"time",value:day.end})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{className:"ml-auto flex items-center gap-1 rounded-lg px-3 py-2 font-semibold text-[#94a3b8] text-xs transition hover:bg-[#e2e8f0] hover:text-[#0f172a]",onClick:()=>(index=>{const sourceDay=schedule[index];if(!sourceDay)return;const newSchedule=schedule.map(day=>({...day,start:sourceDay.start,end:sourceDay.end}));handleChange(newSchedule)})(index),title:"Copy these hours to all days",type:"button",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-3 w-3",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.ef}),"Copy to all"]})]})]})},day.day))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"rounded-xl bg-[#f8fafc] p-4",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"text-[#94a3b8] text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("strong",{className:"text-[#0f172a]",children:[schedule.filter(d=>d.enabled).length," days"]})," ","available for bookings"]})})]})}try{WeeklyHoursEditor.displayName="WeeklyHoursEditor",WeeklyHoursEditor.__docgenInfo={description:"",displayName:"WeeklyHoursEditor",props:{initialSchedule:{defaultValue:null,description:"",name:"initialSchedule",required:!1,type:{name:"DaySchedule[]"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"(schedule: DaySchedule[]) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/availability/weekly-hours-editor.tsx#WeeklyHoursEditor"]={docgenInfo:WeeklyHoursEditor.__docgenInfo,name:"WeeklyHoursEditor",path:"src/components/availability/weekly-hours-editor.tsx#WeeklyHoursEditor"})}catch(__react_docgen_typescript_loader_error){}}}]);