"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[46696],{"./src/components/admin/feature-flags-settings.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>feature_flags_settings_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function FeatureFlagsSettings({initialFlags}){const router=(0,navigation.useRouter)(),[flags,setFlags]=(0,react.useState)(initialFlags),[isSaving,setIsSaving]=(0,react.useState)(!1),[error,setError]=(0,react.useState)(null),[successMessage,setSuccessMessage]=(0,react.useState)(null);return(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[error&&(0,jsx_runtime.jsx)("div",{className:"rounded-lg border border-slate-900 dark:border-slate-100/30 bg-slate-900 dark:bg-slate-100/10 p-4",children:(0,jsx_runtime.jsx)("p",{className:"text-slate-900 dark:text-slate-100 text-sm",children:error})}),successMessage&&(0,jsx_runtime.jsx)("div",{className:"rounded-lg border border-slate-900 dark:border-slate-100/40 bg-slate-900 dark:bg-slate-100/10 p-4",children:(0,jsx_runtime.jsx)("p",{className:"text-slate-900 dark:text-slate-100 text-sm",children:successMessage})}),(0,jsx_runtime.jsx)("div",{className:"space-y-4",children:[{key:"recurring_bookings",name:"Recurring Bookings",description:"Allow customers to schedule recurring cleaning services"},{key:"amara_ai",name:"Amara AI Assistant",description:"Enable AI-powered booking assistant for customers"},{key:"auto_translate",name:"Auto-Translate Chat",description:"Automatically translate messages between English and Spanish"},{key:"gps_verification",name:"GPS Verification",description:"Require GPS check-in for professionals at job locations"},{key:"one_tap_rebook",name:"One-Tap Rebook",description:"Quick rebooking feature for repeat customers"},{key:"professional_bidding",name:"Professional Bidding",description:"Allow professionals to bid on customer job requests",beta:!0},{key:"customer_reviews",name:"Customer Reviews",description:"Enable customer ratings and reviews for professionals"},{key:"tips",name:"Tip Functionality",description:"Allow customers to tip professionals after service"}].map(feature=>(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-4 transition-colors hover:bg-white dark:bg-slate-950",children:[(0,jsx_runtime.jsxs)("div",{className:"flex-1",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 text-sm",children:feature.name}),feature.beta&&(0,jsx_runtime.jsx)("span",{className:"rounded-full bg-slate-900 dark:bg-slate-100/10 px-2 py-0.5 font-semibold text-slate-900 dark:text-slate-100 text-xs",children:"BETA"})]}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-slate-600 dark:text-slate-400 text-xs",children:feature.description})]}),(0,jsx_runtime.jsx)("button",{"aria-label":`Toggle ${feature.name}`,className:`relative h-6 w-11 flex-shrink-0 rounded-full transition-colors ${flags[feature.key]?"bg-slate-900 dark:bg-slate-100":"bg-[#e2e8f0]"} ${isSaving?"cursor-not-allowed opacity-50":"cursor-pointer"}`,disabled:isSaving,onClick:()=>(async(featureKey,currentValue)=>{try{setIsSaving(!0),setError(null),setSuccessMessage(null);const newValue=!currentValue,response=await fetch("/api/admin/settings/features",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({feature:featureKey,enabled:newValue})});if(!response.ok){const errorData=await response.json();throw new Error(errorData.error||"Failed to update feature")}setFlags(prev=>({...prev,[featureKey]:newValue})),setSuccessMessage(`Feature ${newValue?"enabled":"disabled"} successfully`),setTimeout(()=>setSuccessMessage(null),3e3),router.refresh()}catch(err){console.error("Feature toggle error:",err),setError(err instanceof Error?err.message:"Failed to update feature")}finally{setIsSaving(!1)}})(feature.key,flags[feature.key]),type:"button",children:(0,jsx_runtime.jsx)("span",{className:"absolute top-0.5 left-0.5 h-5 w-5 rounded-full bg-white dark:bg-slate-950 transition-transform "+(flags[feature.key]?"translate-x-5":"translate-x-0")})})]},feature.key))}),(0,jsx_runtime.jsx)("div",{className:"rounded-lg border border-slate-900 dark:border-slate-100 bg-white dark:bg-slate-950 p-4",children:(0,jsx_runtime.jsxs)("p",{className:"text-slate-900 dark:text-slate-100 text-sm",children:[(0,jsx_runtime.jsx)("strong",{children:"Note:"})," Changes to feature flags take effect immediately across the entire platform. Use with caution in production."]})})]})}try{FeatureFlagsSettings.displayName="FeatureFlagsSettings",FeatureFlagsSettings.__docgenInfo={description:"",displayName:"FeatureFlagsSettings",props:{initialFlags:{defaultValue:null,description:"",name:"initialFlags",required:!0,type:{name:"FeatureFlags"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/admin/feature-flags-settings.tsx#FeatureFlagsSettings"]={docgenInfo:FeatureFlagsSettings.__docgenInfo,name:"FeatureFlagsSettings",path:"src/components/admin/feature-flags-settings.tsx#FeatureFlagsSettings"})}catch(__react_docgen_typescript_loader_error){}const feature_flags_settings_stories={title:"Admin/Feature Flags Settings",component:FeatureFlagsSettings,parameters:{layout:"centered"},tags:["autodocs"]},Default={args:{}},__namedExportsOrder=["Default"]}}]);