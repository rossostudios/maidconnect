(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[86830],{"./node_modules/@sanity/client/dist/_chunks-es/stegaClean.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function isRecord(value){return"object"==typeof value&&null!==value&&!Array.isArray(value)}__webpack_require__.d(__webpack_exports__,{C:()=>C,Q:()=>stegaClean,u4:()=>isRecord});var s={0:8203,1:8204,2:8205,3:8290,4:8291,5:8288,6:65279,7:8289,8:119155,9:119156,a:119157,b:119158,c:119159,d:119160,e:119161,f:119162},c={0:8203,1:8204,2:8205,3:65279},u=new Array(4).fill(String.fromCodePoint(c[0])).join("");function C(t,e,r="auto"){return!0===r||"auto"===r&&(function I(t){return!(!Number.isNaN(Number(t))||/[a-z]/i.test(t)&&!/\d+(?:[-:\/]\d+){2}(?:T\d+(?:[-:\/]\d+){1,2}(\.\d+)?Z?)?/.test(t)||!Date.parse(t))}(t)||function T(t){try{new URL(t,t.startsWith("/")?"https://acme.com":void 0)}catch{return!1}return!0}(t))?t:`${t}${function E(t){let e=JSON.stringify(t);return`${u}${Array.from(e).map(r=>{let n=r.charCodeAt(0);if(n>255)throw new Error(`Only ASCII edit info can be encoded. Error attempting to encode ${e} on character ${r} (${n})`);return Array.from(n.toString(4).padStart(4,"0")).map(o=>String.fromCodePoint(c[o])).join("")}).join("")}`}(e)}`}Object.fromEntries(Object.entries(c).map(t=>t.reverse())),Object.fromEntries(Object.entries(s).map(t=>t.reverse()));var S=`${Object.values(s).map(t=>`\\u{${t.toString(16)}}`).join("")}`,f=new RegExp(`[${S}]{4,}`,"gu");function O(t){return t&&JSON.parse(function _(t){var e;return{cleaned:t.replace(f,""),encoded:(null==(e=t.match(f))?void 0:e[0])||""}}(JSON.stringify(t)).cleaned)}function stegaClean(result){return O(result)}},"./node_modules/@sanity/client/dist/index.browser.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{UU:()=>createClient});const e=!(typeof navigator>"u")&&"ReactNative"===navigator.product,t={timeout:e?6e4:12e4},_commonjsHelpers_r=function(r){const a={...t,..."string"==typeof r?{url:r}:r};if(a.timeout=n(a.timeout),a.query){const{url:t,searchParams:r}=function(t){const r=t.indexOf("?");if(-1===r)return{url:t,searchParams:new URLSearchParams};const n=t.slice(0,r),a=t.slice(r+1);if(!e)return{url:n,searchParams:new URLSearchParams(a)};if("function"!=typeof decodeURIComponent)throw new Error("Broken `URLSearchParams` implementation, and `decodeURIComponent` is not defined");const s=new URLSearchParams;for(const e of a.split("&")){const[t,r]=e.split("=");t&&s.append(o(t),o(r||""))}return{url:n,searchParams:s}}(a.url);for(const[e,o]of Object.entries(a.query)){if(void 0!==o)if(Array.isArray(o))for(const t of o)r.append(e,t);else r.append(e,o);const n=r.toString();n&&(a.url=`${t}?${n}`)}}return a.method=a.body&&!a.method?"POST":(a.method||"GET").toUpperCase(),a};function o(e){return decodeURIComponent(e.replace(/\+/g," "))}function n(e){if(!1===e||0===e)return!1;if(e.connect||e.socket)return e;const r=Number(e);return isNaN(r)?n(t.timeout):{connect:r,socket:r}}const a=/^https?:\/\//i,s=function(e){if(!a.test(e.url))throw new Error(`"${e.url}" is not a valid URL`)};function c(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}const index_browser_o=["request","response","progress","error","abort"],index_browser_n=["processOptions","validateOptions","interceptRequest","finalizeOptions","onRequest","onResponse","onError","onReturn","onHeaders"];function index_browser_s(r,a){const i=[],u=index_browser_n.reduce((e,t)=>(e[t]=e[t]||[],e),{processOptions:[_commonjsHelpers_r],validateOptions:[s]});function l(e){const t=index_browser_o.reduce((e,t)=>(e[t]=function(){const e=Object.create(null);let t=0;return{publish:function(t){for(const r in e)e[r](t)},subscribe:function(r){const o=t++;return e[o]=r,function(){delete e[o]}}}}(),e),{}),r=(e=>function(t,r,...o){const n="onError"===t;let s=r;for(let r=0;r<e[t].length&&(s=(0,e[t][r])(s,...o),!n||s);r++);return s})(u),n=r("processOptions",e);r("validateOptions",n);const s={options:n,channels:t,applyMiddleware:r};let i;const l=t.request.subscribe(e=>{i=a(e,(o,n)=>((e,o,n)=>{let s=e,a=o;if(!s)try{a=r("onResponse",o,n)}catch(e){a=null,s=e}s=s&&r("onError",s,n),s?t.error.publish(s):a&&t.response.publish(a)})(o,n,e))});t.abort.subscribe(()=>{l(),i&&i.abort()});const c=r("onReturn",t,s);return c===t&&t.request.publish(s),c}return l.use=function(e){if(!e)throw new Error("Tried to add middleware that resolved to falsey value");if("function"==typeof e)throw new Error("Tried to add middleware that was a function. It probably expects you to pass options to it.");if(e.onReturn&&u.onReturn.length>0)throw new Error("Tried to add new middleware with `onReturn` handler, but another handler has already been registered for this event");return index_browser_n.forEach(t=>{e[t]&&u[t].push(e[t])}),i.push(e),l},l.clone=()=>index_browser_s(i,a),r.forEach(l.use),l}var index_browser_a,i,u=c(function(){if(i)return index_browser_a;i=1;var e=function(e){return e.replace(/^\s+|\s+$/g,"")},t=function(e){return"[object Array]"===Object.prototype.toString.call(e)};return index_browser_a=function(r){if(!r)return{};for(var o=Object.create(null),n=e(r).split("\n"),s=0;s<n.length;s++){var a=n[s],i=a.indexOf(":"),u=e(a.slice(0,i)).toLowerCase(),l=e(a.slice(i+1));typeof o[u]>"u"?o[u]=l:t(o[u])?o[u].push(l):o[u]=[o[u],l]}return o}}());class l{onabort;onerror;onreadystatechange;ontimeout;readyState=0;response;responseText="";responseType="";status;statusText;withCredentials;#e;#t;#r;#o={};#n;#s={};#a;open(e,t,r){this.#e=e,this.#t=t,this.#r="",this.readyState=1,this.onreadystatechange?.(),this.#n=void 0}abort(){this.#n&&this.#n.abort()}getAllResponseHeaders(){return this.#r}setRequestHeader(e,t){this.#o[e]=t}setInit(e,t=!0){this.#s=e,this.#a=t}send(e){const t="arraybuffer"!==this.responseType,r={...this.#s,method:this.#e,headers:this.#o,body:e};"function"==typeof AbortController&&this.#a&&(this.#n=new AbortController,typeof EventTarget<"u"&&this.#n.signal instanceof EventTarget&&(r.signal=this.#n.signal)),typeof document<"u"&&(r.credentials=this.withCredentials?"include":"omit"),fetch(this.#t,r).then(e=>(e.headers.forEach((e,t)=>{this.#r+=`${t}: ${e}\r\n`}),this.status=e.status,this.statusText=e.statusText,this.readyState=3,this.onreadystatechange?.(),t?e.text():e.arrayBuffer())).then(e=>{"string"==typeof e?this.responseText=e:this.response=e,this.readyState=4,this.onreadystatechange?.()}).catch(e=>{"AbortError"!==e.name?this.onerror?.(e):this.onabort?.()})}}const index_browser_c="function"==typeof XMLHttpRequest?"xhr":"fetch",h="xhr"===index_browser_c?XMLHttpRequest:l,d=(e,t)=>{const r=e.options,o=e.applyMiddleware("finalizeOptions",r),n={},s=e.applyMiddleware("interceptRequest",void 0,{adapter:index_browser_c,context:e});if(s){const e=setTimeout(t,0,null,s);return{abort:()=>clearTimeout(e)}}let a=new h;a instanceof l&&"object"==typeof o.fetch&&a.setInit(o.fetch,o.useAbortSignal??!0);const i=o.headers,d=o.timeout;let p=!1,f=!1,b=!1;if(a.onerror=e=>{m(a instanceof l?e instanceof Error?e:new Error(`Request error while attempting to reach is ${o.url}`,{cause:e}):new Error(`Request error while attempting to reach is ${o.url}${e.lengthComputable?`(${e.loaded} of ${e.total} bytes transferred)`:""}`))},a.ontimeout=e=>{m(new Error(`Request timeout while attempting to reach ${o.url}${e.lengthComputable?`(${e.loaded} of ${e.total} bytes transferred)`:""}`))},a.onabort=()=>{w(!0),p=!0},a.onreadystatechange=function(){d&&(w(),n.socket=setTimeout(()=>y("ESOCKETTIMEDOUT"),d.socket)),!p&&a&&4===a.readyState&&0!==a.status&&function(){if(!(p||f||b)){if(0===a.status)return void m(new Error("Unknown XHR error"));w(),f=!0,t(null,{body:a.response||(""===a.responseType||"text"===a.responseType?a.responseText:""),url:o.url,method:o.method,headers:u(a.getAllResponseHeaders()),statusCode:a.status,statusMessage:a.statusText})}}()},a.open(o.method,o.url,!0),a.withCredentials=!!o.withCredentials,i&&a.setRequestHeader)for(const e in i)i.hasOwnProperty(e)&&a.setRequestHeader(e,i[e]);return o.rawBody&&(a.responseType="arraybuffer"),e.applyMiddleware("onRequest",{options:o,adapter:index_browser_c,request:a,context:e}),a.send(o.body||null),d&&(n.connect=setTimeout(()=>y("ETIMEDOUT"),d.connect)),{abort:function(){p=!0,a&&a.abort()}};function y(t){b=!0,a.abort();const r=new Error("ESOCKETTIMEDOUT"===t?`Socket timed out on request to ${o.url}`:`Connection timed out on request to ${o.url}`);r.code=t,e.channels.error.publish(r)}function w(e){(e||p||a&&a.readyState>=2&&n.connect)&&clearTimeout(n.connect),n.socket&&clearTimeout(n.socket)}function m(e){if(f)return;w(!0),f=!0,a=null;const r=e||new Error(`Network error while attempting to reach ${o.url}`);r.isNetworkError=!0,r.request=o,t(r)}},p=(e=[],t=d)=>index_browser_s(e,t);var process=__webpack_require__("./node_modules/process/browser.js"),console=__webpack_require__("./node_modules/console-browserify/index.js"),Buffer=__webpack_require__("./node_modules/buffer/index.js").Buffer;var middleware_browser_a,middleware_browser_c,middleware_browser_u,middleware_browser_l,middleware_browser_p,middleware_browser_d={exports:{}};middleware_browser_p||(middleware_browser_p=1,function(e,t){t.formatArgs=function(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;t.splice(1,0,s,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(n++,"%c"===e&&(r=n))}),t.splice(r,0,s)},t.save=function(e){try{e?t.storage.setItem("debug",e):t.storage.removeItem("debug")}catch{}},t.load=function(){let e;try{e=t.storage.getItem("debug")||t.storage.getItem("DEBUG")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e},t.useColors=function(){if(typeof window<"u"&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage=function(){try{return localStorage}catch{}}(),t.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],t.log=console.debug||console.log||(()=>{}),e.exports=(middleware_browser_l?middleware_browser_u:(middleware_browser_l=1,middleware_browser_u=function(e){function t(e){let n,r,o,i=null;function a(...e){if(!a.enabled)return;const s=a,r=Number(new Date),o=r-(n||r);s.diff=o,s.prev=n,s.curr=r,n=r,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let i=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(n,r)=>{if("%%"===n)return"%";i++;const o=t.formatters[r];if("function"==typeof o){const t=e[i];n=o.call(s,t),e.splice(i,1),i--}return n}),t.formatArgs.call(s,e),(s.log||t.log).apply(s,e)}return a.namespace=e,a.useColors=t.useColors(),a.color=t.selectColor(e),a.extend=s,a.destroy=t.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(r!==t.namespaces&&(r=t.namespaces,o=t.enabled(e)),o),set:e=>{i=e}}),"function"==typeof t.init&&t.init(a),a}function s(e,s){const n=t(this.namespace+(typeof s>"u"?":":s)+e);return n.log=this.log,n}function n(e,t){let s=0,n=0,r=-1,o=0;for(;s<e.length;)if(n<t.length&&(t[n]===e[s]||"*"===t[n]))"*"===t[n]?(r=n,o=s,n++):(s++,n++);else{if(-1===r)return!1;n=r+1,o++,s=o}for(;n<t.length&&"*"===t[n];)n++;return n===t.length}return t.debug=t,t.default=t,t.coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){const e=[...t.names,...t.skips.map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){t.save(e),t.namespaces=e,t.names=[],t.skips=[];const s=("string"==typeof e?e:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const e of s)"-"===e[0]?t.skips.push(e.slice(1)):t.names.push(e)},t.enabled=function(e){for(const s of t.skips)if(n(e,s))return!1;for(const s of t.names)if(n(e,s))return!0;return!1},t.humanize=function(){if(middleware_browser_c)return middleware_browser_a;middleware_browser_c=1;var e=1e3,t=60*e,s=60*t,n=24*s,r=7*n;function o(e,t,s,n){var r=t>=1.5*s;return Math.round(e/s)+" "+n+(r?"s":"")}return middleware_browser_a=function(i,a){a=a||{};var c,u,l=typeof i;if("string"===l&&i.length>0)return function(o){if(!((o=String(o)).length>100)){var i=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(o);if(i){var a=parseFloat(i[1]);switch((i[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*r;case"days":case"day":case"d":return a*n;case"hours":case"hour":case"hrs":case"hr":case"h":return a*s;case"minutes":case"minute":case"mins":case"min":case"m":return a*t;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(i);if("number"===l&&isFinite(i))return a.long?(c=i,(u=Math.abs(c))>=n?o(c,u,n,"day"):u>=s?o(c,u,s,"hour"):u>=t?o(c,u,t,"minute"):u>=e?o(c,u,e,"second"):c+" ms"):function(r){var o=Math.abs(r);return o>=n?Math.round(r/n)+"d":o>=s?Math.round(r/s)+"h":o>=t?Math.round(r/t)+"m":o>=e?Math.round(r/e)+"s":r+"ms"}(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))}}(),t.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(e).forEach(s=>{t[s]=e[s]}),t.names=[],t.skips=[],t.formatters={},t.selectColor=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t),s|=0;return t.colors[Math.abs(s)%t.colors.length]},t.enable(t.load()),t}))(t);const{formatters:s}=e.exports;s.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}}(middleware_browser_d,middleware_browser_d.exports));Object.prototype.hasOwnProperty;Error;const F=typeof Buffer>"u"?()=>!1:e=>Buffer.isBuffer(e);function O(e){return"[object Object]"===Object.prototype.toString.call(e)}function j(e){if(!1===O(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!(!1===O(s)||!1===s.hasOwnProperty("isPrototypeOf"))}const v=["boolean","string","number"];function E(e){return{onResponse:s=>{const n=s.headers["content-type"]||"",r=e&&e.force||-1!==n.indexOf("application/json");return s.body&&n&&r?Object.assign({},s,{body:t(s.body)}):s},processOptions:e=>Object.assign({},e,{headers:Object.assign({Accept:"application/json"},e.headers)})};function t(e){try{return JSON.parse(e)}catch(e){throw e.message=`Failed to parsed response body as JSON: ${e.message}`,e}}}let R={};typeof globalThis<"u"?R=globalThis:typeof window<"u"?R=window:typeof __webpack_require__.g<"u"?R=__webpack_require__.g:typeof self<"u"&&(R=self);var q=R;function A(e={}){const t=e.implementation||q.Observable;if(!t)throw new Error("`Observable` is not available in global scope, and no implementation was passed");return{onReturn:(e,s)=>new t(t=>(e.error.subscribe(e=>t.error(e)),e.progress.subscribe(e=>t.next(Object.assign({type:"progress"},e))),e.response.subscribe(e=>{t.next(Object.assign({type:"response"},e)),t.complete()}),e.request.publish(s),()=>e.abort.publish()))}}const N=(e={})=>{const t=e.implementation||Promise;if(!t)throw new Error("`Promise` is not available in global scope, and no implementation was passed");return{onReturn:(s,n)=>new t((t,r)=>{const o=n.options.cancelToken;o&&o.promise.then(e=>{s.abort.publish(e),r(e)}),s.error.subscribe(r),s.response.subscribe(s=>{t(e.onlyBody?s.body:s)}),setTimeout(()=>{try{s.request.publish(n)}catch(e){r(e)}},0)})}};class I{__CANCEL__=!0;message;constructor(e){this.message=e}toString(){return"Cancel"+(this.message?`: ${this.message}`:"")}}class T{promise;reason;constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t=null;this.promise=new Promise(e=>{t=e}),e(e=>{this.reason||(this.reason=new I(e),t(this.reason))})}static source=()=>{let e;return{token:new T(t=>{e=t}),cancel:e}}}N.Cancel=I,N.CancelToken=T,N.isCancel=e=>!(!e||!e?.__CANCEL__);var $=(e,t,s)=>("GET"===s.method||"HEAD"===s.method)&&(e.isNetworkError||!1);function _(e){return 100*Math.pow(2,e)+100*Math.random()}const P=(e={})=>(e=>{const t=e.maxRetries||5,s=e.retryDelay||_,n=e.shouldRetry;return{onError:(e,r)=>{const o=r.options,i=o.maxRetries||t,a=o.retryDelay||s,c=o.shouldRetry||n,u=o.attemptNumber||0;if(null!==(l=o.body)&&"object"==typeof l&&"function"==typeof l.pipe||!c(e,u,o)||u>=i)return e;var l;const p=Object.assign({},r,{options:Object.assign({},o,{attemptNumber:u+1})});return setTimeout(()=>r.channels.request.publish(p),a(u)),null}}})({shouldRetry:$,...e});P.shouldRetry=$;class z extends Error{request;code;constructor(e,t){super(e.message),this.request=t,this.code=e.code}}D=function middleware_browser_n(e){return{}};var D,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");function isFunction(value){return"function"==typeof value}function createErrorClass(createImpl){var ctorFunc=createImpl(function(instance){Error.call(instance),instance.stack=(new Error).stack});return ctorFunc.prototype=Object.create(Error.prototype),ctorFunc.prototype.constructor=ctorFunc,ctorFunc}var UnsubscriptionError=createErrorClass(function(_super){return function UnsubscriptionErrorImpl(errors){_super(this),this.message=errors?errors.length+" errors occurred during unsubscription:\n"+errors.map(function(err,i){return i+1+") "+err.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=errors}});function arrRemove(arr,item){if(arr){var index=arr.indexOf(item);0<=index&&arr.splice(index,1)}}var Subscription=function(){function Subscription(initialTeardown){this.initialTeardown=initialTeardown,this.closed=!1,this._parentage=null,this._finalizers=null}return Subscription.prototype.unsubscribe=function(){var e_1,_a,e_2,_b,errors;if(!this.closed){this.closed=!0;var _parentage=this._parentage;if(_parentage)if(this._parentage=null,Array.isArray(_parentage))try{for(var _parentage_1=(0,tslib_es6.__values)(_parentage),_parentage_1_1=_parentage_1.next();!_parentage_1_1.done;_parentage_1_1=_parentage_1.next()){_parentage_1_1.value.remove(this)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_parentage_1_1&&!_parentage_1_1.done&&(_a=_parentage_1.return)&&_a.call(_parentage_1)}finally{if(e_1)throw e_1.error}}else _parentage.remove(this);var initialFinalizer=this.initialTeardown;if(isFunction(initialFinalizer))try{initialFinalizer()}catch(e){errors=e instanceof UnsubscriptionError?e.errors:[e]}var _finalizers=this._finalizers;if(_finalizers){this._finalizers=null;try{for(var _finalizers_1=(0,tslib_es6.__values)(_finalizers),_finalizers_1_1=_finalizers_1.next();!_finalizers_1_1.done;_finalizers_1_1=_finalizers_1.next()){var finalizer=_finalizers_1_1.value;try{execFinalizer(finalizer)}catch(err){errors=null!=errors?errors:[],err instanceof UnsubscriptionError?errors=(0,tslib_es6.__spreadArray)((0,tslib_es6.__spreadArray)([],(0,tslib_es6.__read)(errors)),(0,tslib_es6.__read)(err.errors)):errors.push(err)}}}catch(e_2_1){e_2={error:e_2_1}}finally{try{_finalizers_1_1&&!_finalizers_1_1.done&&(_b=_finalizers_1.return)&&_b.call(_finalizers_1)}finally{if(e_2)throw e_2.error}}}if(errors)throw new UnsubscriptionError(errors)}},Subscription.prototype.add=function(teardown){var _a;if(teardown&&teardown!==this)if(this.closed)execFinalizer(teardown);else{if(teardown instanceof Subscription){if(teardown.closed||teardown._hasParent(this))return;teardown._addParent(this)}(this._finalizers=null!==(_a=this._finalizers)&&void 0!==_a?_a:[]).push(teardown)}},Subscription.prototype._hasParent=function(parent){var _parentage=this._parentage;return _parentage===parent||Array.isArray(_parentage)&&_parentage.includes(parent)},Subscription.prototype._addParent=function(parent){var _parentage=this._parentage;this._parentage=Array.isArray(_parentage)?(_parentage.push(parent),_parentage):_parentage?[_parentage,parent]:parent},Subscription.prototype._removeParent=function(parent){var _parentage=this._parentage;_parentage===parent?this._parentage=null:Array.isArray(_parentage)&&arrRemove(_parentage,parent)},Subscription.prototype.remove=function(teardown){var _finalizers=this._finalizers;_finalizers&&arrRemove(_finalizers,teardown),teardown instanceof Subscription&&teardown._removeParent(this)},Subscription.EMPTY=function(){var empty=new Subscription;return empty.closed=!0,empty}(),Subscription}(),EMPTY_SUBSCRIPTION=Subscription.EMPTY;function isSubscription(value){return value instanceof Subscription||value&&"closed"in value&&isFunction(value.remove)&&isFunction(value.add)&&isFunction(value.unsubscribe)}function execFinalizer(finalizer){isFunction(finalizer)?finalizer():finalizer.unsubscribe()}var config={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},timeoutProvider={setTimeout:function(handler,timeout){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var delegate=timeoutProvider.delegate;return(null==delegate?void 0:delegate.setTimeout)?delegate.setTimeout.apply(delegate,(0,tslib_es6.__spreadArray)([handler,timeout],(0,tslib_es6.__read)(args))):setTimeout.apply(void 0,(0,tslib_es6.__spreadArray)([handler,timeout],(0,tslib_es6.__read)(args)))},clearTimeout:function(handle){var delegate=timeoutProvider.delegate;return((null==delegate?void 0:delegate.clearTimeout)||clearTimeout)(handle)},delegate:void 0};function reportUnhandledError(err){timeoutProvider.setTimeout(function(){var onUnhandledError=config.onUnhandledError;if(!onUnhandledError)throw err;onUnhandledError(err)})}function noop(){}var COMPLETE_NOTIFICATION=createNotification("C",void 0,void 0);function createNotification(kind,value,error){return{kind,value,error}}var context=null;function errorContext(cb){if(config.useDeprecatedSynchronousErrorHandling){var isRoot=!context;if(isRoot&&(context={errorThrown:!1,error:null}),cb(),isRoot){var _a=context,errorThrown=_a.errorThrown,error=_a.error;if(context=null,errorThrown)throw error}}else cb()}var Subscriber=function(_super){function Subscriber(destination){var _this=_super.call(this)||this;return _this.isStopped=!1,destination?(_this.destination=destination,isSubscription(destination)&&destination.add(_this)):_this.destination=EMPTY_OBSERVER,_this}return(0,tslib_es6.__extends)(Subscriber,_super),Subscriber.create=function(next,error,complete){return new SafeSubscriber(next,error,complete)},Subscriber.prototype.next=function(value){this.isStopped?handleStoppedNotification(function nextNotification(value){return createNotification("N",value,void 0)}(value),this):this._next(value)},Subscriber.prototype.error=function(err){this.isStopped?handleStoppedNotification(function errorNotification(error){return createNotification("E",void 0,error)}(err),this):(this.isStopped=!0,this._error(err))},Subscriber.prototype.complete=function(){this.isStopped?handleStoppedNotification(COMPLETE_NOTIFICATION,this):(this.isStopped=!0,this._complete())},Subscriber.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,_super.prototype.unsubscribe.call(this),this.destination=null)},Subscriber.prototype._next=function(value){this.destination.next(value)},Subscriber.prototype._error=function(err){try{this.destination.error(err)}finally{this.unsubscribe()}},Subscriber.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},Subscriber}(Subscription),_bind=Function.prototype.bind;function bind(fn,thisArg){return _bind.call(fn,thisArg)}var ConsumerObserver=function(){function ConsumerObserver(partialObserver){this.partialObserver=partialObserver}return ConsumerObserver.prototype.next=function(value){var partialObserver=this.partialObserver;if(partialObserver.next)try{partialObserver.next(value)}catch(error){handleUnhandledError(error)}},ConsumerObserver.prototype.error=function(err){var partialObserver=this.partialObserver;if(partialObserver.error)try{partialObserver.error(err)}catch(error){handleUnhandledError(error)}else handleUnhandledError(err)},ConsumerObserver.prototype.complete=function(){var partialObserver=this.partialObserver;if(partialObserver.complete)try{partialObserver.complete()}catch(error){handleUnhandledError(error)}},ConsumerObserver}(),SafeSubscriber=function(_super){function SafeSubscriber(observerOrNext,error,complete){var partialObserver,context_1,_this=_super.call(this)||this;isFunction(observerOrNext)||!observerOrNext?partialObserver={next:null!=observerOrNext?observerOrNext:void 0,error:null!=error?error:void 0,complete:null!=complete?complete:void 0}:_this&&config.useDeprecatedNextContext?((context_1=Object.create(observerOrNext)).unsubscribe=function(){return _this.unsubscribe()},partialObserver={next:observerOrNext.next&&bind(observerOrNext.next,context_1),error:observerOrNext.error&&bind(observerOrNext.error,context_1),complete:observerOrNext.complete&&bind(observerOrNext.complete,context_1)}):partialObserver=observerOrNext;return _this.destination=new ConsumerObserver(partialObserver),_this}return(0,tslib_es6.__extends)(SafeSubscriber,_super),SafeSubscriber}(Subscriber);function handleUnhandledError(error){config.useDeprecatedSynchronousErrorHandling?function captureError(err){config.useDeprecatedSynchronousErrorHandling&&context&&(context.errorThrown=!0,context.error=err)}(error):reportUnhandledError(error)}function handleStoppedNotification(notification,subscriber){var onStoppedNotification=config.onStoppedNotification;onStoppedNotification&&timeoutProvider.setTimeout(function(){return onStoppedNotification(notification,subscriber)})}var EMPTY_OBSERVER={closed:!0,next:noop,error:function defaultErrorHandler(err){throw err},complete:noop},observable="function"==typeof Symbol&&Symbol.observable||"@@observable";function identity_identity(x){return x}function pipeFromArray(fns){return 0===fns.length?identity_identity:1===fns.length?fns[0]:function piped(input){return fns.reduce(function(prev,fn){return fn(prev)},input)}}var Observable_Observable=function(){function Observable(subscribe){subscribe&&(this._subscribe=subscribe)}return Observable.prototype.lift=function(operator){var observable=new Observable;return observable.source=this,observable.operator=operator,observable},Observable.prototype.subscribe=function(observerOrNext,error,complete){var _this=this,subscriber=function isSubscriber(value){return value&&value instanceof Subscriber||function isObserver(value){return value&&isFunction(value.next)&&isFunction(value.error)&&isFunction(value.complete)}(value)&&isSubscription(value)}(observerOrNext)?observerOrNext:new SafeSubscriber(observerOrNext,error,complete);return errorContext(function(){var _a=_this,operator=_a.operator,source=_a.source;subscriber.add(operator?operator.call(subscriber,source):source?_this._subscribe(subscriber):_this._trySubscribe(subscriber))}),subscriber},Observable.prototype._trySubscribe=function(sink){try{return this._subscribe(sink)}catch(err){sink.error(err)}},Observable.prototype.forEach=function(next,promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))(function(resolve,reject){var subscriber=new SafeSubscriber({next:function(value){try{next(value)}catch(err){reject(err),subscriber.unsubscribe()}},error:reject,complete:resolve});_this.subscribe(subscriber)})},Observable.prototype._subscribe=function(subscriber){var _a;return null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber)},Observable.prototype[observable]=function(){return this},Observable.prototype.pipe=function(){for(var operations=[],_i=0;_i<arguments.length;_i++)operations[_i]=arguments[_i];return pipeFromArray(operations)(this)},Observable.prototype.toPromise=function(promiseCtor){var _this=this;return new(promiseCtor=getPromiseCtor(promiseCtor))(function(resolve,reject){var value;_this.subscribe(function(x){return value=x},function(err){return reject(err)},function(){return resolve(value)})})},Observable.create=function(subscribe){return new Observable(subscribe)},Observable}();function getPromiseCtor(promiseCtor){var _a;return null!==(_a=null!=promiseCtor?promiseCtor:config.Promise)&&void 0!==_a?_a:Promise}var isArrayLike=function(x){return x&&"number"==typeof x.length&&"function"!=typeof x};function isPromise(value){return isFunction(null==value?void 0:value.then)}function isInteropObservable(input){return isFunction(input[observable])}function isAsyncIterable(obj){return Symbol.asyncIterator&&isFunction(null==obj?void 0:obj[Symbol.asyncIterator])}function createInvalidObservableTypeError(input){return new TypeError("You provided "+(null!==input&&"object"==typeof input?"an invalid object":"'"+input+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}var iterator_iterator=function getSymbolIterator(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function isIterable(input){return isFunction(null==input?void 0:input[iterator_iterator])}function readableStreamLikeToAsyncGenerator(readableStream){return(0,tslib_es6.__asyncGenerator)(this,arguments,function readableStreamLikeToAsyncGenerator_1(){var reader,_a,value;return(0,tslib_es6.__generator)(this,function(_b){switch(_b.label){case 0:reader=readableStream.getReader(),_b.label=1;case 1:_b.trys.push([1,,9,10]),_b.label=2;case 2:return[4,(0,tslib_es6.__await)(reader.read())];case 3:return _a=_b.sent(),value=_a.value,_a.done?[4,(0,tslib_es6.__await)(void 0)]:[3,5];case 4:return[2,_b.sent()];case 5:return[4,(0,tslib_es6.__await)(value)];case 6:return[4,_b.sent()];case 7:return _b.sent(),[3,2];case 8:return[3,10];case 9:return reader.releaseLock(),[7];case 10:return[2]}})})}function isReadableStreamLike(obj){return isFunction(null==obj?void 0:obj.getReader)}function innerFrom(input){if(input instanceof Observable_Observable)return input;if(null!=input){if(isInteropObservable(input))return function fromInteropObservable(obj){return new Observable_Observable(function(subscriber){var obs=obj[observable]();if(isFunction(obs.subscribe))return obs.subscribe(subscriber);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(input);if(isArrayLike(input))return function fromArrayLike(array){return new Observable_Observable(function(subscriber){for(var i=0;i<array.length&&!subscriber.closed;i++)subscriber.next(array[i]);subscriber.complete()})}(input);if(isPromise(input))return function fromPromise(promise){return new Observable_Observable(function(subscriber){promise.then(function(value){subscriber.closed||(subscriber.next(value),subscriber.complete())},function(err){return subscriber.error(err)}).then(null,reportUnhandledError)})}(input);if(isAsyncIterable(input))return fromAsyncIterable(input);if(isIterable(input))return function fromIterable(iterable){return new Observable_Observable(function(subscriber){var e_1,_a;try{for(var iterable_1=(0,tslib_es6.__values)(iterable),iterable_1_1=iterable_1.next();!iterable_1_1.done;iterable_1_1=iterable_1.next()){var value=iterable_1_1.value;if(subscriber.next(value),subscriber.closed)return}}catch(e_1_1){e_1={error:e_1_1}}finally{try{iterable_1_1&&!iterable_1_1.done&&(_a=iterable_1.return)&&_a.call(iterable_1)}finally{if(e_1)throw e_1.error}}subscriber.complete()})}(input);if(isReadableStreamLike(input))return function fromReadableStreamLike(readableStream){return fromAsyncIterable(readableStreamLikeToAsyncGenerator(readableStream))}(input)}throw createInvalidObservableTypeError(input)}function fromAsyncIterable(asyncIterable){return new Observable_Observable(function(subscriber){(function innerFrom_process(asyncIterable,subscriber){var asyncIterable_1,asyncIterable_1_1,e_2,_a;return(0,tslib_es6.__awaiter)(this,void 0,void 0,function(){var value,e_2_1;return(0,tslib_es6.__generator)(this,function(_b){switch(_b.label){case 0:_b.trys.push([0,5,6,11]),asyncIterable_1=(0,tslib_es6.__asyncValues)(asyncIterable),_b.label=1;case 1:return[4,asyncIterable_1.next()];case 2:if((asyncIterable_1_1=_b.sent()).done)return[3,4];if(value=asyncIterable_1_1.value,subscriber.next(value),subscriber.closed)return[2];_b.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return e_2_1=_b.sent(),e_2={error:e_2_1},[3,11];case 6:return _b.trys.push([6,,9,10]),asyncIterable_1_1&&!asyncIterable_1_1.done&&(_a=asyncIterable_1.return)?[4,_a.call(asyncIterable_1)]:[3,8];case 7:_b.sent(),_b.label=8;case 8:return[3,10];case 9:if(e_2)throw e_2.error;return[7];case 10:return[7];case 11:return subscriber.complete(),[2]}})})})(asyncIterable,subscriber).catch(function(err){return subscriber.error(err)})})}function defer(observableFactory){return new Observable_Observable(function(subscriber){innerFrom(observableFactory()).subscribe(subscriber)})}function isScheduler(value){return value&&isFunction(value.schedule)}function last(arr){return arr[arr.length-1]}function args_popScheduler(args){return isScheduler(last(args))?args.pop():void 0}function executeSchedule(parentSubscription,scheduler,work,delay,repeat){void 0===delay&&(delay=0),void 0===repeat&&(repeat=!1);var scheduleSubscription=scheduler.schedule(function(){work(),repeat?parentSubscription.add(this.schedule(null,delay)):this.unsubscribe()},delay);if(parentSubscription.add(scheduleSubscription),!repeat)return scheduleSubscription}function operate(init){return function(source){if(function hasLift(source){return isFunction(null==source?void 0:source.lift)}(source))return source.lift(function(liftedSource){try{return init(liftedSource,this)}catch(err){this.error(err)}});throw new TypeError("Unable to lift unknown Observable type")}}function createOperatorSubscriber(destination,onNext,onComplete,onError,onFinalize){return new OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize)}var OperatorSubscriber=function(_super){function OperatorSubscriber(destination,onNext,onComplete,onError,onFinalize,shouldUnsubscribe){var _this=_super.call(this,destination)||this;return _this.onFinalize=onFinalize,_this.shouldUnsubscribe=shouldUnsubscribe,_this._next=onNext?function(value){try{onNext(value)}catch(err){destination.error(err)}}:_super.prototype._next,_this._error=onError?function(err){try{onError(err)}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._error,_this._complete=onComplete?function(){try{onComplete()}catch(err){destination.error(err)}finally{this.unsubscribe()}}:_super.prototype._complete,_this}return(0,tslib_es6.__extends)(OperatorSubscriber,_super),OperatorSubscriber.prototype.unsubscribe=function(){var _a;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var closed_1=this.closed;_super.prototype.unsubscribe.call(this),!closed_1&&(null===(_a=this.onFinalize)||void 0===_a||_a.call(this))}},OperatorSubscriber}(Subscriber);function observeOn(scheduler,delay){return void 0===delay&&(delay=0),operate(function(source,subscriber){source.subscribe(createOperatorSubscriber(subscriber,function(value){return executeSchedule(subscriber,scheduler,function(){return subscriber.next(value)},delay)},function(){return executeSchedule(subscriber,scheduler,function(){return subscriber.complete()},delay)},function(err){return executeSchedule(subscriber,scheduler,function(){return subscriber.error(err)},delay)}))})}function subscribeOn(scheduler,delay){return void 0===delay&&(delay=0),operate(function(source,subscriber){subscriber.add(scheduler.schedule(function(){return source.subscribe(subscriber)},delay))})}function scheduleAsyncIterable(input,scheduler){if(!input)throw new Error("Iterable cannot be null");return new Observable_Observable(function(subscriber){executeSchedule(subscriber,scheduler,function(){var iterator=input[Symbol.asyncIterator]();executeSchedule(subscriber,scheduler,function(){iterator.next().then(function(result){result.done?subscriber.complete():subscriber.next(result.value)})},0,!0)})})}function scheduled(input,scheduler){if(null!=input){if(isInteropObservable(input))return function scheduleObservable(input,scheduler){return innerFrom(input).pipe(subscribeOn(scheduler),observeOn(scheduler))}(input,scheduler);if(isArrayLike(input))return function scheduleArray(input,scheduler){return new Observable_Observable(function(subscriber){var i=0;return scheduler.schedule(function(){i===input.length?subscriber.complete():(subscriber.next(input[i++]),subscriber.closed||this.schedule())})})}(input,scheduler);if(isPromise(input))return function schedulePromise(input,scheduler){return innerFrom(input).pipe(subscribeOn(scheduler),observeOn(scheduler))}(input,scheduler);if(isAsyncIterable(input))return scheduleAsyncIterable(input,scheduler);if(isIterable(input))return function scheduleIterable(input,scheduler){return new Observable_Observable(function(subscriber){var iterator;return executeSchedule(subscriber,scheduler,function(){iterator=input[iterator_iterator](),executeSchedule(subscriber,scheduler,function(){var _a,value,done;try{value=(_a=iterator.next()).value,done=_a.done}catch(err){return void subscriber.error(err)}done?subscriber.complete():subscriber.next(value)},0,!0)}),function(){return isFunction(null==iterator?void 0:iterator.return)&&iterator.return()}})}(input,scheduler);if(isReadableStreamLike(input))return function scheduleReadableStreamLike(input,scheduler){return scheduleAsyncIterable(readableStreamLikeToAsyncGenerator(input),scheduler)}(input,scheduler)}throw createInvalidObservableTypeError(input)}function from_from(input,scheduler){return scheduler?scheduled(input,scheduler):innerFrom(input)}function of(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return from_from(args,args_popScheduler(args))}function map(project,thisArg){return operate(function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){subscriber.next(project.call(thisArg,value,index++))}))})}function mergeMap(project,resultSelector,concurrent){return void 0===concurrent&&(concurrent=1/0),isFunction(resultSelector)?mergeMap(function(a,i){return map(function(b,ii){return resultSelector(a,b,i,ii)})(innerFrom(project(a,i)))},concurrent):("number"==typeof resultSelector&&(concurrent=resultSelector),operate(function(source,subscriber){return function mergeInternals(source,subscriber,project,concurrent,onBeforeNext,expand,innerSubScheduler,additionalFinalizer){var buffer=[],active=0,index=0,isComplete=!1,checkComplete=function(){!isComplete||buffer.length||active||subscriber.complete()},outerNext=function(value){return active<concurrent?doInnerSub(value):buffer.push(value)},doInnerSub=function(value){expand&&subscriber.next(value),active++;var innerComplete=!1;innerFrom(project(value,index++)).subscribe(createOperatorSubscriber(subscriber,function(innerValue){null==onBeforeNext||onBeforeNext(innerValue),expand?outerNext(innerValue):subscriber.next(innerValue)},function(){innerComplete=!0},void 0,function(){if(innerComplete)try{active--;for(var _loop_1=function(){var bufferedValue=buffer.shift();innerSubScheduler?executeSchedule(subscriber,innerSubScheduler,function(){return doInnerSub(bufferedValue)}):doInnerSub(bufferedValue)};buffer.length&&active<concurrent;)_loop_1();checkComplete()}catch(err){subscriber.error(err)}}))};return source.subscribe(createOperatorSubscriber(subscriber,outerNext,function(){isComplete=!0,checkComplete()})),function(){null==additionalFinalizer||additionalFinalizer()}}(source,subscriber,project,concurrent)}))}var EmptyError=createErrorClass(function(_super){return function EmptyErrorImpl(){_super(this),this.name="EmptyError",this.message="no elements in sequence"}});function lastValueFrom(source,config){var hasConfig="object"==typeof config;return new Promise(function(resolve,reject){var _value,_hasValue=!1;source.subscribe({next:function(value){_value=value,_hasValue=!0},error:reject,complete:function(){_hasValue?resolve(_value):hasConfig?resolve(config.defaultValue):reject(new EmptyError)}})})}var ObjectUnsubscribedError=createErrorClass(function(_super){return function ObjectUnsubscribedErrorImpl(){_super(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Subject=function(_super){function Subject(){var _this=_super.call(this)||this;return _this.closed=!1,_this.currentObservers=null,_this.observers=[],_this.isStopped=!1,_this.hasError=!1,_this.thrownError=null,_this}return(0,tslib_es6.__extends)(Subject,_super),Subject.prototype.lift=function(operator){var subject=new AnonymousSubject(this,this);return subject.operator=operator,subject},Subject.prototype._throwIfClosed=function(){if(this.closed)throw new ObjectUnsubscribedError},Subject.prototype.next=function(value){var _this=this;errorContext(function(){var e_1,_a;if(_this._throwIfClosed(),!_this.isStopped){_this.currentObservers||(_this.currentObservers=Array.from(_this.observers));try{for(var _b=(0,tslib_es6.__values)(_this.currentObservers),_c=_b.next();!_c.done;_c=_b.next()){_c.value.next(value)}}catch(e_1_1){e_1={error:e_1_1}}finally{try{_c&&!_c.done&&(_a=_b.return)&&_a.call(_b)}finally{if(e_1)throw e_1.error}}}})},Subject.prototype.error=function(err){var _this=this;errorContext(function(){if(_this._throwIfClosed(),!_this.isStopped){_this.hasError=_this.isStopped=!0,_this.thrownError=err;for(var observers=_this.observers;observers.length;)observers.shift().error(err)}})},Subject.prototype.complete=function(){var _this=this;errorContext(function(){if(_this._throwIfClosed(),!_this.isStopped){_this.isStopped=!0;for(var observers=_this.observers;observers.length;)observers.shift().complete()}})},Subject.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(Subject.prototype,"observed",{get:function(){var _a;return(null===(_a=this.observers)||void 0===_a?void 0:_a.length)>0},enumerable:!1,configurable:!0}),Subject.prototype._trySubscribe=function(subscriber){return this._throwIfClosed(),_super.prototype._trySubscribe.call(this,subscriber)},Subject.prototype._subscribe=function(subscriber){return this._throwIfClosed(),this._checkFinalizedStatuses(subscriber),this._innerSubscribe(subscriber)},Subject.prototype._innerSubscribe=function(subscriber){var _this=this,hasError=this.hasError,isStopped=this.isStopped,observers=this.observers;return hasError||isStopped?EMPTY_SUBSCRIPTION:(this.currentObservers=null,observers.push(subscriber),new Subscription(function(){_this.currentObservers=null,arrRemove(observers,subscriber)}))},Subject.prototype._checkFinalizedStatuses=function(subscriber){var hasError=this.hasError,thrownError=this.thrownError,isStopped=this.isStopped;hasError?subscriber.error(thrownError):isStopped&&subscriber.complete()},Subject.prototype.asObservable=function(){var observable=new Observable_Observable;return observable.source=this,observable},Subject.create=function(destination,source){return new AnonymousSubject(destination,source)},Subject}(Observable_Observable),AnonymousSubject=function(_super){function AnonymousSubject(destination,source){var _this=_super.call(this)||this;return _this.destination=destination,_this.source=source,_this}return(0,tslib_es6.__extends)(AnonymousSubject,_super),AnonymousSubject.prototype.next=function(value){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.next)||void 0===_b||_b.call(_a,value)},AnonymousSubject.prototype.error=function(err){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.error)||void 0===_b||_b.call(_a,err)},AnonymousSubject.prototype.complete=function(){var _a,_b;null===(_b=null===(_a=this.destination)||void 0===_a?void 0:_a.complete)||void 0===_b||_b.call(_a)},AnonymousSubject.prototype._subscribe=function(subscriber){var _a,_b;return null!==(_b=null===(_a=this.source)||void 0===_a?void 0:_a.subscribe(subscriber))&&void 0!==_b?_b:EMPTY_SUBSCRIPTION},AnonymousSubject}(Subject),dateTimestampProvider={now:function(){return(dateTimestampProvider.delegate||Date).now()},delegate:void 0},ReplaySubject=function(_super){function ReplaySubject(_bufferSize,_windowTime,_timestampProvider){void 0===_bufferSize&&(_bufferSize=1/0),void 0===_windowTime&&(_windowTime=1/0),void 0===_timestampProvider&&(_timestampProvider=dateTimestampProvider);var _this=_super.call(this)||this;return _this._bufferSize=_bufferSize,_this._windowTime=_windowTime,_this._timestampProvider=_timestampProvider,_this._buffer=[],_this._infiniteTimeWindow=!0,_this._infiniteTimeWindow=_windowTime===1/0,_this._bufferSize=Math.max(1,_bufferSize),_this._windowTime=Math.max(1,_windowTime),_this}return(0,tslib_es6.__extends)(ReplaySubject,_super),ReplaySubject.prototype.next=function(value){var _a=this,isStopped=_a.isStopped,_buffer=_a._buffer,_infiniteTimeWindow=_a._infiniteTimeWindow,_timestampProvider=_a._timestampProvider,_windowTime=_a._windowTime;isStopped||(_buffer.push(value),!_infiniteTimeWindow&&_buffer.push(_timestampProvider.now()+_windowTime)),this._trimBuffer(),_super.prototype.next.call(this,value)},ReplaySubject.prototype._subscribe=function(subscriber){this._throwIfClosed(),this._trimBuffer();for(var subscription=this._innerSubscribe(subscriber),_infiniteTimeWindow=this._infiniteTimeWindow,copy=this._buffer.slice(),i=0;i<copy.length&&!subscriber.closed;i+=_infiniteTimeWindow?1:2)subscriber.next(copy[i]);return this._checkFinalizedStatuses(subscriber),subscription},ReplaySubject.prototype._trimBuffer=function(){var _bufferSize=this._bufferSize,_timestampProvider=this._timestampProvider,_buffer=this._buffer,_infiniteTimeWindow=this._infiniteTimeWindow,adjustedBufferSize=(_infiniteTimeWindow?1:2)*_bufferSize;if(_bufferSize<1/0&&adjustedBufferSize<_buffer.length&&_buffer.splice(0,_buffer.length-adjustedBufferSize),!_infiniteTimeWindow){for(var now=_timestampProvider.now(),last=0,i=1;i<_buffer.length&&_buffer[i]<=now;i+=2)last=i;last&&_buffer.splice(0,last+1)}},ReplaySubject}(Subject);function share(options){void 0===options&&(options={});var _a=options.connector,connector=void 0===_a?function(){return new Subject}:_a,_b=options.resetOnError,resetOnError=void 0===_b||_b,_c=options.resetOnComplete,resetOnComplete=void 0===_c||_c,_d=options.resetOnRefCountZero,resetOnRefCountZero=void 0===_d||_d;return function(wrapperSource){var connection,resetConnection,subject,refCount=0,hasCompleted=!1,hasErrored=!1,cancelReset=function(){null==resetConnection||resetConnection.unsubscribe(),resetConnection=void 0},reset=function(){cancelReset(),connection=subject=void 0,hasCompleted=hasErrored=!1},resetAndUnsubscribe=function(){var conn=connection;reset(),null==conn||conn.unsubscribe()};return operate(function(source,subscriber){refCount++,hasErrored||hasCompleted||cancelReset();var dest=subject=null!=subject?subject:connector();subscriber.add(function(){0!==--refCount||hasErrored||hasCompleted||(resetConnection=handleReset(resetAndUnsubscribe,resetOnRefCountZero))}),dest.subscribe(subscriber),!connection&&refCount>0&&(connection=new SafeSubscriber({next:function(value){return dest.next(value)},error:function(err){hasErrored=!0,cancelReset(),resetConnection=handleReset(reset,resetOnError,err),dest.error(err)},complete:function(){hasCompleted=!0,cancelReset(),resetConnection=handleReset(reset,resetOnComplete),dest.complete()}}),innerFrom(source).subscribe(connection))})(wrapperSource)}}function handleReset(reset,on){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];if(!0!==on){if(!1!==on){var onSubscriber=new SafeSubscriber({next:function(){onSubscriber.unsubscribe(),reset()}});return innerFrom(on.apply(void 0,(0,tslib_es6.__spreadArray)([],(0,tslib_es6.__read)(args)))).subscribe(onSubscriber)}}else reset()}function catchError(selector){return operate(function(source,subscriber){var handledResult,innerSub=null,syncUnsub=!1;innerSub=source.subscribe(createOperatorSubscriber(subscriber,void 0,void 0,function(err){handledResult=innerFrom(selector(err,catchError(selector)(source))),innerSub?(innerSub.unsubscribe(),innerSub=null,handledResult.subscribe(subscriber)):syncUnsub=!0})),syncUnsub&&(innerSub.unsubscribe(),innerSub=null,handledResult.subscribe(subscriber))})}function mergeAll(concurrent){return void 0===concurrent&&(concurrent=1/0),mergeMap(identity_identity,concurrent)}function concat(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return function concatAll(){return mergeAll(1)}()(from_from(args,args_popScheduler(args)))}var Action=function(_super){function Action(scheduler,work){return _super.call(this)||this}return(0,tslib_es6.__extends)(Action,_super),Action.prototype.schedule=function(state,delay){return void 0===delay&&(delay=0),this},Action}(Subscription),intervalProvider={setInterval:function(handler,timeout){for(var args=[],_i=2;_i<arguments.length;_i++)args[_i-2]=arguments[_i];var delegate=intervalProvider.delegate;return(null==delegate?void 0:delegate.setInterval)?delegate.setInterval.apply(delegate,(0,tslib_es6.__spreadArray)([handler,timeout],(0,tslib_es6.__read)(args))):setInterval.apply(void 0,(0,tslib_es6.__spreadArray)([handler,timeout],(0,tslib_es6.__read)(args)))},clearInterval:function(handle){var delegate=intervalProvider.delegate;return((null==delegate?void 0:delegate.clearInterval)||clearInterval)(handle)},delegate:void 0},AsyncAction=function(_super){function AsyncAction(scheduler,work){var _this=_super.call(this,scheduler,work)||this;return _this.scheduler=scheduler,_this.work=work,_this.pending=!1,_this}return(0,tslib_es6.__extends)(AsyncAction,_super),AsyncAction.prototype.schedule=function(state,delay){var _a;if(void 0===delay&&(delay=0),this.closed)return this;this.state=state;var id=this.id,scheduler=this.scheduler;return null!=id&&(this.id=this.recycleAsyncId(scheduler,id,delay)),this.pending=!0,this.delay=delay,this.id=null!==(_a=this.id)&&void 0!==_a?_a:this.requestAsyncId(scheduler,this.id,delay),this},AsyncAction.prototype.requestAsyncId=function(scheduler,_id,delay){return void 0===delay&&(delay=0),intervalProvider.setInterval(scheduler.flush.bind(scheduler,this),delay)},AsyncAction.prototype.recycleAsyncId=function(_scheduler,id,delay){if(void 0===delay&&(delay=0),null!=delay&&this.delay===delay&&!1===this.pending)return id;null!=id&&intervalProvider.clearInterval(id)},AsyncAction.prototype.execute=function(state,delay){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var error=this._execute(state,delay);if(error)return error;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},AsyncAction.prototype._execute=function(state,_delay){var errorValue,errored=!1;try{this.work(state)}catch(e){errored=!0,errorValue=e||new Error("Scheduled action threw falsy error")}if(errored)return this.unsubscribe(),errorValue},AsyncAction.prototype.unsubscribe=function(){if(!this.closed){var id=this.id,scheduler=this.scheduler,actions=scheduler.actions;this.work=this.state=this.scheduler=null,this.pending=!1,arrRemove(actions,this),null!=id&&(this.id=this.recycleAsyncId(scheduler,id,null)),this.delay=null,_super.prototype.unsubscribe.call(this)}},AsyncAction}(Action),Scheduler=function(){function Scheduler(schedulerActionCtor,now){void 0===now&&(now=Scheduler.now),this.schedulerActionCtor=schedulerActionCtor,this.now=now}return Scheduler.prototype.schedule=function(work,delay,state){return void 0===delay&&(delay=0),new this.schedulerActionCtor(this,work).schedule(state,delay)},Scheduler.now=dateTimestampProvider.now,Scheduler}(),async_async=new(function(_super){function AsyncScheduler(SchedulerAction,now){void 0===now&&(now=Scheduler.now);var _this=_super.call(this,SchedulerAction,now)||this;return _this.actions=[],_this._active=!1,_this}return(0,tslib_es6.__extends)(AsyncScheduler,_super),AsyncScheduler.prototype.flush=function(action){var actions=this.actions;if(this._active)actions.push(action);else{var error;this._active=!0;do{if(error=action.execute(action.state,action.delay))break}while(action=actions.shift());if(this._active=!1,error){for(;action=actions.shift();)action.unsubscribe();throw error}}},AsyncScheduler}(Scheduler))(AsyncAction);function timer(dueTime,intervalOrScheduler,scheduler){void 0===dueTime&&(dueTime=0),void 0===scheduler&&(scheduler=async_async);var intervalDuration=-1;return null!=intervalOrScheduler&&(isScheduler(intervalOrScheduler)?scheduler=intervalOrScheduler:intervalDuration=intervalOrScheduler),new Observable_Observable(function(subscriber){var due=function isValidDate(value){return value instanceof Date&&!isNaN(value)}(dueTime)?+dueTime-scheduler.now():dueTime;due<0&&(due=0);var n=0;return scheduler.schedule(function(){subscriber.closed||(subscriber.next(n++),0<=intervalDuration?this.schedule(void 0,intervalDuration):subscriber.complete())},due)})}function throwError(errorOrErrorFactory,scheduler){var errorFactory=isFunction(errorOrErrorFactory)?errorOrErrorFactory:function(){return errorOrErrorFactory},init=function(subscriber){return subscriber.error(errorFactory())};return new Observable_Observable(scheduler?function(subscriber){return scheduler.schedule(init,0,subscriber)}:init)}function finalize(callback){return operate(function(source,subscriber){try{source.subscribe(subscriber)}finally{subscriber.add(callback)}})}var EMPTY=new Observable_Observable(function(subscriber){return subscriber.complete()});function merge(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=args_popScheduler(args),concurrent=function popNumber(args,defaultValue){return"number"==typeof last(args)?args.pop():defaultValue}(args,1/0),sources=args;return sources.length?1===sources.length?innerFrom(sources[0]):mergeAll(concurrent)(from_from(sources,scheduler)):EMPTY}function firstValueFrom(source,config){var hasConfig="object"==typeof config;return new Promise(function(resolve,reject){var subscriber=new SafeSubscriber({next:function(value){resolve(value),subscriber.unsubscribe()},error:reject,complete:function(){hasConfig?resolve(config.defaultValue):reject(new EmptyError)}});source.subscribe(subscriber)})}var stegaClean=__webpack_require__("./node_modules/@sanity/client/dist/_chunks-es/stegaClean.js");function combineLatestInit(observables,scheduler,valueTransform){return void 0===valueTransform&&(valueTransform=identity_identity),function(subscriber){maybeSchedule(scheduler,function(){for(var length=observables.length,values=new Array(length),active=length,remainingFirstValues=length,_loop_1=function(i){maybeSchedule(scheduler,function(){var source=from_from(observables[i],scheduler),hasFirstValue=!1;source.subscribe(createOperatorSubscriber(subscriber,function(value){values[i]=value,hasFirstValue||(hasFirstValue=!0,remainingFirstValues--),remainingFirstValues||subscriber.next(valueTransform(values.slice()))},function(){--active||subscriber.complete()}))},subscriber)},i=0;i<length;i++)_loop_1(i)},subscriber)}}function maybeSchedule(scheduler,execute,subscription){scheduler?executeSchedule(subscription,scheduler,execute):execute()}var isArray=Array.isArray;var mapOneOrManyArgs_isArray=Array.isArray;function mapOneOrManyArgs_mapOneOrManyArgs(fn){return map(function(args){return function callOrApply(fn,args){return mapOneOrManyArgs_isArray(args)?fn.apply(void 0,(0,tslib_es6.__spreadArray)([],(0,tslib_es6.__read)(args))):fn(args)}(fn,args)})}function combineLatest_combineLatest(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var resultSelector=function args_popResultSelector(args){return isFunction(last(args))?args.pop():void 0}(args);return resultSelector?function pipe(){for(var fns=[],_i=0;_i<arguments.length;_i++)fns[_i]=arguments[_i];return pipeFromArray(fns)}(combineLatest_combineLatest.apply(void 0,(0,tslib_es6.__spreadArray)([],(0,tslib_es6.__read)(args))),mapOneOrManyArgs_mapOneOrManyArgs(resultSelector)):operate(function(source,subscriber){combineLatestInit((0,tslib_es6.__spreadArray)([source],(0,tslib_es6.__read)(function argsOrArgArray(args){return 1===args.length&&isArray(args[0])?args[0]:args}(args))))(subscriber)})}function filter(predicate,thisArg){return operate(function(source,subscriber){var index=0;source.subscribe(createOperatorSubscriber(subscriber,function(value){return predicate.call(thisArg,value,index++)&&subscriber.next(value)}))})}function isDraftId(id){return id.startsWith("drafts.")}function isVersionId(id){return id.startsWith("versions.")}function getDraftId(id){if(isVersionId(id)){return"drafts."+getPublishedId(id)}return isDraftId(id)?id:"drafts."+id}function getVersionId(id,version){if("drafts"===version||"published"===version)throw new Error('Version can not be "published" or "drafts"');return`versions.${version}.${getPublishedId(id)}`}function getVersionFromId(id){if(!isVersionId(id))return;const[_versionPrefix,versionId,..._publishedId]=id.split(".");return versionId}function getPublishedId(id){return isVersionId(id)?id.split(".").slice(2).join("."):isDraftId(id)?id.slice(7):id}let random=bytes=>crypto.getRandomValues(new Uint8Array(bytes));var index_browser_console=__webpack_require__("./node_modules/console-browserify/index.js");const NEWLINE=/\r\n|[\n\r\u2028\u2029]/;function codeFrame(query,location2,message){const lines=query.split(NEWLINE),loc={start:columnToLine(location2.start,lines),end:location2.end?columnToLine(location2.end,lines):void 0},{start,end,markerLines}=function getMarkerLines(loc,source){const startLoc={...loc.start},endLoc={...startLoc,...loc.end},linesAbove=2,linesBelow=3,startLine=startLoc.line??-1,startColumn=startLoc.column??0,endLine=endLoc.line,endColumn=endLoc.column;let start=Math.max(startLine-(linesAbove+1),0),end=Math.min(source.length,endLine+linesBelow);-1===startLine&&(start=0),-1===endLine&&(end=source.length);const lineDiff=endLine-startLine,markerLines={};if(lineDiff)for(let i=0;i<=lineDiff;i++){const lineNumber=i+startLine;if(startColumn)if(0===i){const sourceLength=source[lineNumber-1].length;markerLines[lineNumber]=[startColumn,sourceLength-startColumn+1]}else if(i===lineDiff)markerLines[lineNumber]=[0,endColumn];else{const sourceLength=source[lineNumber-i].length;markerLines[lineNumber]=[0,sourceLength]}else markerLines[lineNumber]=!0}else markerLines[startLine]=startColumn===endColumn?!startColumn||[startColumn,0]:[startColumn,endColumn-startColumn];return{start,end,markerLines}}(loc,lines),numberMaxWidth=`${end}`.length;return query.split(NEWLINE,end).slice(start,end).map((line,index)=>{const number=start+1+index,gutter=` ${` ${number}`.slice(-numberMaxWidth)} |`,hasMarker=markerLines[number],lastMarkerLine=!markerLines[number+1];if(!hasMarker)return` ${gutter}${line.length>0?` ${line}`:""}`;let markerLine="";if(Array.isArray(hasMarker)){const markerSpacing=line.slice(0,Math.max(hasMarker[0]-1,0)).replace(/[^\t]/g," "),numberOfMarkers=hasMarker[1]||1;markerLine=["\n ",gutter.replace(/\d/g," ")," ",markerSpacing,"^".repeat(numberOfMarkers)].join(""),lastMarkerLine&&message&&(markerLine+=" "+message)}return[">",gutter,line.length>0?` ${line}`:"",markerLine].join("")}).join("\n")}function columnToLine(column,lines){let offset=0;for(let i=0;i<lines.length;i++){const lineLength=lines[i].length+1;if(offset+lineLength>column)return{line:i+1,column:column-offset};offset+=lineLength}return{line:lines.length,column:lines[lines.length-1]?.length??0}}class ClientError extends Error{response;statusCode=400;responseBody;details;constructor(res,context){const props=extractErrorProps(res,context);super(props.message),Object.assign(this,props)}}class ServerError extends Error{response;statusCode=500;responseBody;details;constructor(res){const props=extractErrorProps(res);super(props.message),Object.assign(this,props)}}function extractErrorProps(res,context){const body=res.body,props={response:res,statusCode:res.statusCode,responseBody:stringifyBody(body,res),message:"",details:void 0};if(!(0,stegaClean.u4)(body))return props.message=httpErrorMessage(res,body),props;const error=body.error;if("string"==typeof error&&"string"==typeof body.message)return props.message=`${error} - ${body.message}`,props;if("object"!=typeof error||null===error)return"string"==typeof error?props.message=error:"string"==typeof body.message?props.message=body.message:props.message=httpErrorMessage(res,body),props;if(function isMutationError(error){return"type"in error&&"mutationError"===error.type&&"description"in error&&"string"==typeof error.description}(error)||function isActionError(error){return"type"in error&&"actionError"===error.type&&"description"in error&&"string"==typeof error.description}(error)){const allItems=error.items||[],items=allItems.slice(0,5).map(item=>item.error?.description).filter(Boolean);let itemsStr=items.length?`:\n- ${items.join("\n- ")}`:"";return allItems.length>5&&(itemsStr+=`\n...and ${allItems.length-5} more`),props.message=`${error.description}${itemsStr}`,props.details=body.error,props}if(isQueryParseError(error)){const tag=context?.options?.query?.tag;return props.message=formatQueryParseError(error,tag),props.details=body.error,props}return"description"in error&&"string"==typeof error.description?(props.message=error.description,props.details=error,props):(props.message=httpErrorMessage(res,body),props)}function isQueryParseError(error){return(0,stegaClean.u4)(error)&&"queryParseError"===error.type&&"string"==typeof error.query&&"number"==typeof error.start&&"number"==typeof error.end}function formatQueryParseError(error,tag){const{query,start,end,description}=error;if(!query||typeof start>"u")return`GROQ query parse error: ${description}`;const withTag=tag?`\n\nTag: ${tag}`:"";return`GROQ query parse error:\n${codeFrame(query,{start,end},description)}${withTag}`}function httpErrorMessage(res,body){const details="string"==typeof body?` (${function sliceWithEllipsis(str,max){return str.length>max?`${str.slice(0,max)}`:str}(body,100)})`:"",statusMessage=res.statusMessage?` ${res.statusMessage}`:"";return`${res.method}-request to ${res.url} resulted in HTTP ${res.statusCode}${statusMessage}${details}`}function stringifyBody(body,res){return-1!==(res.headers["content-type"]||"").toLowerCase().indexOf("application/json")?JSON.stringify(body,null,2):body}class CorsOriginError extends Error{projectId;addOriginUrl;constructor({projectId:projectId2}){super("CorsOriginError"),this.name="CorsOriginError",this.projectId=projectId2;const url=new URL(`https://sanity.io/manage/project/${projectId2}/api`);if(typeof location<"u"){const{origin}=location;url.searchParams.set("cors","add"),url.searchParams.set("origin",origin),this.addOriginUrl=url,this.message=`The current origin is not allowed to connect to the Live Content API. Add it here: ${url}`}else this.message=`The current origin is not allowed to connect to the Live Content API. Change your configuration here: ${url}`}}const httpError={onResponse:(res,context)=>{if(res.statusCode>=500)throw new ServerError(res);if(res.statusCode>=400)throw new ClientError(res,context);return res}};function printWarnings(config={}){const seen={},shouldIgnoreWarning=message=>void 0!==config.ignoreWarnings&&(Array.isArray(config.ignoreWarnings)?config.ignoreWarnings:[config.ignoreWarnings]).some(pattern=>"string"==typeof pattern?message.includes(pattern):pattern instanceof RegExp&&pattern.test(message));return{onResponse:res=>{const warn=res.headers["x-sanity-warning"],warnings=Array.isArray(warn)?warn:[warn];for(const msg of warnings)!msg||seen[msg]||shouldIgnoreWarning(msg)||(seen[msg]=!0,index_browser_console.warn(msg));return res}}}function defineHttpRequest(envMiddleware2,config={}){return p([P({shouldRetry}),...envMiddleware2,printWarnings(config),{processOptions:e=>{const t=e.body;return!t||"function"==typeof t.pipe||F(t)||-1===v.indexOf(typeof t)&&!Array.isArray(t)&&!j(t)?e:Object.assign({},e,{body:JSON.stringify(e.body),headers:Object.assign({},e.headers,{"Content-Type":"application/json"})})}},E(),{onRequest:e=>{if("xhr"!==e.adapter)return;const t=e.request,s=e.context;function n(e){return t=>{const n=t.lengthComputable?t.loaded/t.total*100:-1;s.channels.progress.publish({stage:e,percent:n,total:t.total,loaded:t.loaded,lengthComputable:t.lengthComputable})}}"upload"in t&&"onprogress"in t.upload&&(t.upload.onprogress=n("upload")),"onprogress"in t&&(t.onprogress=n("download"))}},httpError,A({implementation:Observable_Observable})])}function shouldRetry(err,attempt,options){if(0===options.maxRetries)return!1;const isSafe="GET"===options.method||"HEAD"===options.method,isQuery2=(options.uri||options.url).startsWith("/data/query"),isRetriableResponse=err.response&&(429===err.response.statusCode||502===err.response.statusCode||503===err.response.statusCode);return!(!isSafe&&!isQuery2||!isRetriableResponse)||P.shouldRetry(err,attempt,options)}function generateHelpUrl(slug){return"https://www.sanity.io/help/"+slug}const VALID_ASSET_TYPES=["image","file"],VALID_INSERT_LOCATIONS=["before","after","replace"],dataset=name=>{if(!/^(~[a-z0-9]{1}[-\w]{0,63}|[a-z0-9]{1}[-\w]{0,63})$/.test(name))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes, and start with tilde, and be maximum 64 characters")},validateObject=(op,val)=>{if(null===val||"object"!=typeof val||Array.isArray(val))throw new Error(`${op}() takes an object of properties`)},validateDocumentId=(op,id)=>{if("string"!=typeof id||!/^[a-z0-9_][a-z0-9_.-]{0,127}$/i.test(id)||id.includes(".."))throw new Error(`${op}(): "${id}" is not a valid document ID`)},requireDocumentId=(op,doc)=>{if(!doc._id)throw new Error(`${op}() requires that the document contains an ID ("_id" property)`);validateDocumentId(op,doc._id)},requireDocumentType=(op,doc)=>{if(!doc._type)throw new Error(`\`${op}()\` requires that the document contains a type (\`_type\` property)`);((op,type)=>{if("string"!=typeof type)throw new Error(`\`${op}()\`: \`${type}\` is not a valid document type`)})(op,doc._type)},hasDataset=config=>{if(!config.dataset)throw new Error("`dataset` must be provided to perform queries");return config.dataset||""},requestTag=tag=>{if("string"!=typeof tag||!/^[a-z0-9._-]{1,75}$/i.test(tag))throw new Error("Tag can only contain alphanumeric characters, underscores, dashes and dots, and be between one and 75 characters long.");return tag},resourceConfig=config=>{if(!config["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");const{type,id}=config["~experimental_resource"];switch(type){case"dataset":if(2!==id.split(".").length)throw new Error('Dataset resource ID must be in the format "project.dataset"');return;case"dashboard":case"media-library":case"canvas":return;default:throw new Error(`Unsupported resource type: ${type.toString()}`)}},resourceGuard=(service,config)=>{if(config["~experimental_resource"])throw new Error(`\`${service}\` does not support resource-based operations`)};const createWarningPrinter=message=>function once(fn){let returnValue,didCall=!1;return(...args)=>(didCall||(returnValue=fn(...args),didCall=!0),returnValue)}((...args)=>index_browser_console.warn(message.join(" "),...args)),printCdnAndWithCredentialsWarning=createWarningPrinter(["Because you set `withCredentials` to true, we will override your `useCdn`","setting to be false since (cookie-based) credentials are never set on the CDN"]),printCdnWarning=createWarningPrinter(["Since you haven't set a value for `useCdn`, we will deliver content using our","global, edge-cached API-CDN. If you wish to have content delivered faster, set","`useCdn: false` to use the Live API. Note: You may incur higher costs using the live API."]),printCdnPreviewDraftsWarning=createWarningPrinter(["The Sanity client is configured with the `perspective` set to `drafts` or `previewDrafts`, which doesn't support the API-CDN.","The Live API will be used instead. Set `useCdn: false` in your configuration to hide this warning."]),printPreviewDraftsDeprecationWarning=createWarningPrinter(["The `previewDrafts` perspective has been renamed to  `drafts` and will be removed in a future API version"]),printBrowserTokenWarning=createWarningPrinter(["You have configured Sanity client to use a token in the browser. This may cause unintentional security issues.",`See ${generateHelpUrl("js-client-browser-token")} for more information and how to hide this warning.`]),printCredentialedTokenWarning=createWarningPrinter(["You have configured Sanity client to use a token, but also provided `withCredentials: true`.","This is no longer supported - only token will be used - remove `withCredentials: true`."]),printNoApiVersionSpecifiedWarning=createWarningPrinter(["Using the Sanity client without specifying an API version is deprecated.",`See ${generateHelpUrl("js-client-api-version")}`]),printNoDefaultExport=createWarningPrinter(["The default export of @sanity/client has been deprecated. Use the named export `createClient` instead."]),printCreateVersionWithBaseIdWarning=createWarningPrinter(["You have called `createVersion()` with a defined `document`. The recommended approach is to provide a `baseId` and `releaseId` instead."]),defaultConfig={apiHost:"https://api.sanity.io",apiVersion:"1",useProjectHostname:!0,stega:{enabled:!1}},LOCALHOSTS=["localhost","127.0.0.1","0.0.0.0"];function validateApiPerspective(perspective){if(Array.isArray(perspective)&&perspective.length>1&&perspective.includes("raw"))throw new TypeError('Invalid API perspective value: "raw". The raw-perspective can not be combined with other perspectives')}const initConfig=(config,prevConfig)=>{const specifiedConfig={...prevConfig,...config,stega:{..."boolean"==typeof prevConfig.stega?{enabled:prevConfig.stega}:prevConfig.stega||defaultConfig.stega,..."boolean"==typeof config.stega?{enabled:config.stega}:config.stega||{}}};specifiedConfig.apiVersion||printNoApiVersionSpecifiedWarning();const newConfig={...defaultConfig,...specifiedConfig},projectBased=newConfig.useProjectHostname&&!newConfig["~experimental_resource"];if(typeof Promise>"u"){const helpUrl=generateHelpUrl("js-client-promise-polyfill");throw new Error(`No native Promise-implementation found, polyfill needed - see ${helpUrl}`)}if(projectBased&&!newConfig.projectId)throw new Error("Configuration must contain `projectId`");if(newConfig["~experimental_resource"]&&resourceConfig(newConfig),typeof newConfig.perspective<"u"&&validateApiPerspective(newConfig.perspective),"encodeSourceMap"in newConfig)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMap' is not supported in '@sanity/client'. Did you mean 'stega.enabled'?");if("encodeSourceMapAtPath"in newConfig)throw new Error("It looks like you're using options meant for '@sanity/preview-kit/client'. 'encodeSourceMapAtPath' is not supported in '@sanity/client'. Did you mean 'stega.filter'?");if("boolean"!=typeof newConfig.stega.enabled)throw new Error(`stega.enabled must be a boolean, received ${newConfig.stega.enabled}`);if(newConfig.stega.enabled&&void 0===newConfig.stega.studioUrl)throw new Error("stega.studioUrl must be defined when stega.enabled is true");if(newConfig.stega.enabled&&"string"!=typeof newConfig.stega.studioUrl&&"function"!=typeof newConfig.stega.studioUrl)throw new Error(`stega.studioUrl must be a string or a function, received ${newConfig.stega.studioUrl}`);const isBrowser=typeof window<"u"&&window.location&&window.location.hostname,isLocalhost=isBrowser&&(host=>-1!==LOCALHOSTS.indexOf(host))(window.location.hostname),hasToken=!!newConfig.token;newConfig.withCredentials&&hasToken&&(printCredentialedTokenWarning(),newConfig.withCredentials=!1),isBrowser&&isLocalhost&&hasToken&&!0!==newConfig.ignoreBrowserTokenWarning?printBrowserTokenWarning():typeof newConfig.useCdn>"u"&&printCdnWarning(),projectBased&&(id=>{if(!/^[-a-z0-9]+$/i.test(id))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")})(newConfig.projectId),newConfig.dataset&&dataset(newConfig.dataset),"requestTagPrefix"in newConfig&&(newConfig.requestTagPrefix=newConfig.requestTagPrefix?requestTag(newConfig.requestTagPrefix).replace(/\.+$/,""):void 0),newConfig.apiVersion=`${newConfig.apiVersion}`.replace(/^v/,""),newConfig.isDefaultApi=newConfig.apiHost===defaultConfig.apiHost,!0===newConfig.useCdn&&newConfig.withCredentials&&printCdnAndWithCredentialsWarning(),newConfig.useCdn=!1!==newConfig.useCdn&&!newConfig.withCredentials,function validateApiVersion(apiVersion){if("1"===apiVersion||"X"===apiVersion)return;const apiDate=new Date(apiVersion);if(!(/^\d{4}-\d{2}-\d{2}$/.test(apiVersion)&&apiDate instanceof Date&&apiDate.getTime()>0))throw new Error("Invalid API version string, expected `1` or date in format `YYYY-MM-DD`")}(newConfig.apiVersion);const hostParts=newConfig.apiHost.split("://",2),protocol=hostParts[0],host=hostParts[1],cdnHost=newConfig.isDefaultApi?"apicdn.sanity.io":host;return projectBased?(newConfig.url=`${protocol}://${newConfig.projectId}.${host}/v${newConfig.apiVersion}`,newConfig.cdnUrl=`${protocol}://${newConfig.projectId}.${cdnHost}/v${newConfig.apiVersion}`):(newConfig.url=`${newConfig.apiHost}/v${newConfig.apiVersion}`,newConfig.cdnUrl=newConfig.url),newConfig};class ConnectionFailedError extends Error{name="ConnectionFailedError"}class DisconnectError extends Error{name="DisconnectError";reason;constructor(message,reason,options={}){super(message,options),this.reason=reason}}class ChannelError extends Error{name="ChannelError";data;constructor(message,data){super(message),this.data=data}}class MessageError extends Error{name="MessageError";data;constructor(message,data,options={}){super(message,options),this.data=data}}class MessageParseError extends Error{name="MessageParseError"}const REQUIRED_EVENTS=["channelError","disconnect"];function connectEventSource(initEventSource,events){return defer(()=>{const es=initEventSource();return function isObservable(obj){return!!obj&&(obj instanceof Observable_Observable||isFunction(obj.lift)&&isFunction(obj.subscribe))}(es)?es:of(es)}).pipe(mergeMap(es=>function connectWithESInstance(es,events){return new Observable_Observable(observer=>{const emitOpen=events.includes("open"),emitReconnect=events.includes("reconnect");function onError(evt){if("data"in evt){const[parseError,event]=parseEvent(evt);return void observer.error(parseError?new MessageParseError("Unable to parse EventSource error message",{cause:event}):new MessageError((event?.data).message,event))}es.readyState===es.CLOSED?observer.error(new ConnectionFailedError("EventSource connection failed")):emitReconnect&&observer.next({type:"reconnect"})}function onOpen(){observer.next({type:"open"})}function onMessage(message){const[parseError,event]=parseEvent(message);if(parseError)observer.error(new MessageParseError("Unable to parse EventSource message",{cause:parseError}));else{if("channelError"===message.type){const tag=new URL(es.url).searchParams.get("tag");return void observer.error(new ChannelError(function extractErrorMessage(err,tag){const error=err.error;return error?isQueryParseError(error)?formatQueryParseError(error,tag):error.description?error.description:"string"==typeof error?error:JSON.stringify(error,null,2):err.message||"Unknown listener error"}(event?.data,tag),event.data))}"disconnect"!==message.type?observer.next({type:message.type,id:message.lastEventId,...event.data?{data:event.data}:{}}):observer.error(new DisconnectError(`Server disconnected client: ${event.data?.reason||"unknown error"}`))}}es.addEventListener("error",onError),emitOpen&&es.addEventListener("open",onOpen);const cleanedEvents=[...new Set([...REQUIRED_EVENTS,...events])].filter(type=>"error"!==type&&"open"!==type&&"reconnect"!==type);return cleanedEvents.forEach(type=>es.addEventListener(type,onMessage)),()=>{es.removeEventListener("error",onError),emitOpen&&es.removeEventListener("open",onOpen),cleanedEvents.forEach(type=>es.removeEventListener(type,onMessage)),es.close()}})}(es,events)))}function parseEvent(message){try{const data="string"==typeof message.data&&JSON.parse(message.data);return[null,{type:message.type,id:message.lastEventId,...isEmptyObject(data)?{}:{data}}]}catch(err){return[err,null]}}function isEmptyObject(data){for(const _ in data)return!1;return!0}function getSelection(sel){if("string"==typeof sel)return{id:sel};if(Array.isArray(sel))return{query:"*[_id in $ids]",params:{ids:sel}};if("object"==typeof sel&&null!==sel&&"query"in sel&&"string"==typeof sel.query)return"params"in sel&&"object"==typeof sel.params&&null!==sel.params?{query:sel.query,params:sel.params}:{query:sel.query};const selectionOpts=["* Document ID (<docId>)","* Array of document IDs","* Object containing `query`"].join("\n");throw new Error(`Unknown selection - must be one of:\n\n${selectionOpts}`)}class BasePatch{selection;operations;constructor(selection,operations={}){this.selection=selection,this.operations=operations}set(attrs){return this._assign("set",attrs)}setIfMissing(attrs){return this._assign("setIfMissing",attrs)}diffMatchPatch(attrs){return validateObject("diffMatchPatch",attrs),this._assign("diffMatchPatch",attrs)}unset(attrs){if(!Array.isArray(attrs))throw new Error("unset(attrs) takes an array of attributes to unset, non-array given");return this.operations=Object.assign({},this.operations,{unset:attrs}),this}inc(attrs){return this._assign("inc",attrs)}dec(attrs){return this._assign("dec",attrs)}insert(at,selector,items){return((at,selector,items)=>{const signature="insert(at, selector, items)";if(-1===VALID_INSERT_LOCATIONS.indexOf(at)){const valid=VALID_INSERT_LOCATIONS.map(loc=>`"${loc}"`).join(", ");throw new Error(`${signature} takes an "at"-argument which is one of: ${valid}`)}if("string"!=typeof selector)throw new Error(`${signature} takes a "selector"-argument which must be a string`);if(!Array.isArray(items))throw new Error(`${signature} takes an "items"-argument which must be an array`)})(at,selector,items),this._assign("insert",{[at]:selector,items})}append(selector,items){return this.insert("after",`${selector}[-1]`,items)}prepend(selector,items){return this.insert("before",`${selector}[0]`,items)}splice(selector,start,deleteCount,items){const startIndex=start<0?start-1:start,delCount=typeof deleteCount>"u"||-1===deleteCount?-1:Math.max(0,start+deleteCount),rangeSelector=`${selector}[${startIndex}:${startIndex<0&&delCount>=0?"":delCount}]`;return this.insert("replace",rangeSelector,items||[])}ifRevisionId(rev){return this.operations.ifRevisionID=rev,this}serialize(){return{...getSelection(this.selection),...this.operations}}toJSON(){return this.serialize()}reset(){return this.operations={},this}_assign(op,props,merge2=!0){return validateObject(op,props),this.operations=Object.assign({},this.operations,{[op]:Object.assign({},merge2&&this.operations[op]||{},props)}),this}_set(op,props){return this._assign(op,props,!1)}}class ObservablePatch extends BasePatch{#client;constructor(selection,operations,client){super(selection,operations),this.#client=client}clone(){return new ObservablePatch(this.selection,{...this.operations},this.#client)}commit(options){if(!this.#client)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const returnFirst="string"==typeof this.selection,opts=Object.assign({returnFirst,returnDocuments:!0},options);return this.#client.mutate({patch:this.serialize()},opts)}}class Patch extends BasePatch{#client;constructor(selection,operations,client){super(selection,operations),this.#client=client}clone(){return new Patch(this.selection,{...this.operations},this.#client)}commit(options){if(!this.#client)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");const returnFirst="string"==typeof this.selection,opts=Object.assign({returnFirst,returnDocuments:!0},options);return this.#client.mutate({patch:this.serialize()},opts)}}const defaultMutateOptions={returnDocuments:!1};class BaseTransaction{operations;trxId;constructor(operations=[],transactionId){this.operations=operations,this.trxId=transactionId}create(doc){return validateObject("create",doc),this._add({create:doc})}createIfNotExists(doc){const op="createIfNotExists";return validateObject(op,doc),requireDocumentId(op,doc),this._add({[op]:doc})}createOrReplace(doc){const op="createOrReplace";return validateObject(op,doc),requireDocumentId(op,doc),this._add({[op]:doc})}delete(documentId){return validateDocumentId("delete",documentId),this._add({delete:{id:documentId}})}transactionId(id){return id?(this.trxId=id,this):this.trxId}serialize(){return[...this.operations]}toJSON(){return this.serialize()}reset(){return this.operations=[],this}_add(mut){return this.operations.push(mut),this}}class Transaction extends BaseTransaction{#client;constructor(operations,client,transactionId){super(operations,transactionId),this.#client=client}clone(){return new Transaction([...this.operations],this.#client,this.trxId)}commit(options){if(!this.#client)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#client.mutate(this.serialize(),Object.assign({transactionId:this.trxId},defaultMutateOptions,options||{}))}patch(patchOrDocumentId,patchOps){const isBuilder="function"==typeof patchOps,isMutationSelection="object"==typeof patchOrDocumentId&&("query"in patchOrDocumentId||"id"in patchOrDocumentId);if("string"!=typeof patchOrDocumentId&&patchOrDocumentId instanceof Patch)return this._add({patch:patchOrDocumentId.serialize()});if(isBuilder){const patch=patchOps(new Patch(patchOrDocumentId,{},this.#client));if(!(patch instanceof Patch))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:patch.serialize()})}if(isMutationSelection){const patch=new Patch(patchOrDocumentId,patchOps||{},this.#client);return this._add({patch:patch.serialize()})}return this._add({patch:{id:patchOrDocumentId,...patchOps}})}}class ObservableTransaction extends BaseTransaction{#client;constructor(operations,client,transactionId){super(operations,transactionId),this.#client=client}clone(){return new ObservableTransaction([...this.operations],this.#client,this.trxId)}commit(options){if(!this.#client)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.#client.mutate(this.serialize(),Object.assign({transactionId:this.trxId},defaultMutateOptions,options||{}))}patch(patchOrDocumentId,patchOps){const isBuilder="function"==typeof patchOps;if("string"!=typeof patchOrDocumentId&&patchOrDocumentId instanceof ObservablePatch)return this._add({patch:patchOrDocumentId.serialize()});if(isBuilder){const patch=patchOps(new ObservablePatch(patchOrDocumentId,{},this.#client));if(!(patch instanceof ObservablePatch))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:patch.serialize()})}return this._add({patch:{id:patchOrDocumentId,...patchOps}})}}const encodeQueryString=({query,params={},options={}})=>{const searchParams=new URLSearchParams,{tag,includeMutations,returnQuery,...opts}=options;tag&&searchParams.append("tag",tag),searchParams.append("query",query);for(const[key,value]of Object.entries(params))void 0!==value&&searchParams.append(`$${key}`,JSON.stringify(value));for(const[key,value]of Object.entries(opts))value&&searchParams.append(key,`${value}`);return!1===returnQuery&&searchParams.append("returnQuery","false"),!1===includeMutations&&searchParams.append("includeMutations","false"),`?${searchParams}`},getMutationQuery=(options={})=>{return{dryRun:options.dryRun,returnIds:!0,returnDocuments:(param=options.returnDocuments,defValue=!0,!1===param?void 0:typeof param>"u"?defValue:param),visibility:options.visibility||"sync",autoGenerateArrayKeys:options.autoGenerateArrayKeys,skipCrossDatasetReferenceValidation:options.skipCrossDatasetReferenceValidation};var param,defValue},isResponse=event=>"response"===event.type,getBody=event=>event.body;function _fetch(client,httpRequest,_stega,query,_params={},options={}){const stega="stega"in options?{..._stega||{},..."boolean"==typeof options.stega?{enabled:options.stega}:options.stega||{}}:_stega,params=stega.enabled?(0,stegaClean.Q)(_params):_params,mapResponse=!1===options.filterResponse?res=>res:res=>res.result,{cache,next,...opts}={useAbortSignal:typeof options.signal<"u",resultSourceMap:stega.enabled?"withKeyArraySelector":options.resultSourceMap,...options,returnQuery:!1===options.filterResponse&&!1!==options.returnQuery},$request=_dataRequest(client,httpRequest,"query",{query,params},typeof cache<"u"||typeof next<"u"?{...opts,fetch:{cache,next}}:opts);return stega.enabled?$request.pipe(function combineLatestWith(){for(var otherSources=[],_i=0;_i<arguments.length;_i++)otherSources[_i]=arguments[_i];return combineLatest_combineLatest.apply(void 0,(0,tslib_es6.__spreadArray)([],(0,tslib_es6.__read)(otherSources)))}(from_from(__webpack_require__.e(43184).then(__webpack_require__.bind(__webpack_require__,"./node_modules/@sanity/client/dist/_chunks-es/stegaEncodeSourceMap.js")).then(function(n){return n.stegaEncodeSourceMap$1}).then(({stegaEncodeSourceMap})=>stegaEncodeSourceMap))),map(([res,stegaEncodeSourceMap])=>{const result=stegaEncodeSourceMap(res.result,res.resultSourceMap,stega);return mapResponse({...res,result})})):$request.pipe(map(mapResponse))}function _getDocument(client,httpRequest,id,opts={}){return _requestObservable(client,httpRequest,{uri:_getDataUrl(client,"doc",(()=>{if(!opts.releaseId)return id;const versionId=getVersionFromId(id);if(!versionId){if(isDraftId(id))throw new Error(`The document ID (\`${id}\`) is a draft, but \`options.releaseId\` is set as \`${opts.releaseId}\``);return getVersionId(id,opts.releaseId)}if(versionId!==opts.releaseId)throw new Error(`The document ID (\`${id}\`) is already a version of \`${versionId}\` release, but this does not match the provided \`options.releaseId\` (\`${opts.releaseId}\`)`);return id})()),json:!0,tag:opts.tag,signal:opts.signal,query:void 0!==opts.includeAllVersions?{includeAllVersions:opts.includeAllVersions}:void 0}).pipe(filter(isResponse),map(event=>{const documents=event.body.documents;return documents?opts.includeAllVersions?documents:documents[0]:opts.includeAllVersions?[]:void 0}))}function _getDocuments(client,httpRequest,ids,opts={}){return _requestObservable(client,httpRequest,{uri:_getDataUrl(client,"doc",ids.join(",")),json:!0,tag:opts.tag,signal:opts.signal}).pipe(filter(isResponse),map(event=>{const indexed=(docs=event.body.documents||[],attr=doc=>doc._id,docs.reduce((indexed,doc)=>(indexed[attr(doc)]=doc,indexed),Object.create(null)));var docs,attr;return ids.map(id=>indexed[id]||null)}))}function _getReleaseDocuments(client,httpRequest,releaseId,opts={}){return _dataRequest(client,httpRequest,"query",{query:"*[sanity::partOfRelease($releaseId)]",params:{releaseId}},opts)}function _createIfNotExists(client,httpRequest,doc,options){return requireDocumentId("createIfNotExists",doc),_create(client,httpRequest,doc,"createIfNotExists",options)}function _createOrReplace(client,httpRequest,doc,options){return requireDocumentId("createOrReplace",doc),_create(client,httpRequest,doc,"createOrReplace",options)}function _createVersion(client,httpRequest,doc,publishedId,options){return requireDocumentId("createVersion",doc),requireDocumentType("createVersion",doc),printCreateVersionWithBaseIdWarning(),_action(client,httpRequest,{actionType:"sanity.action.document.version.create",publishedId,document:doc},options)}function _createVersionFromBase(client,httpRequest,publishedId,baseId,releaseId,ifBaseRevisionId,options){if(!baseId)throw new Error("`createVersion()` requires `baseId` when no `document` is provided");if(!publishedId)throw new Error("`createVersion()` requires `publishedId` when `baseId` is provided");validateDocumentId("createVersion",baseId),validateDocumentId("createVersion",publishedId);return _action(client,httpRequest,{actionType:"sanity.action.document.version.create",publishedId,baseId,versionId:releaseId?getVersionId(publishedId,releaseId):getDraftId(publishedId),ifBaseRevisionId},options)}function _delete(client,httpRequest,selection,options){return _dataRequest(client,httpRequest,"mutate",{mutations:[{delete:getSelection(selection)}]},options)}function _discardVersion(client,httpRequest,versionId,purge=!1,options){return _action(client,httpRequest,{actionType:"sanity.action.document.version.discard",versionId,purge},options)}function _replaceVersion(client,httpRequest,doc,options){return requireDocumentId("replaceVersion",doc),requireDocumentType("replaceVersion",doc),_action(client,httpRequest,{actionType:"sanity.action.document.version.replace",document:doc},options)}function _unpublishVersion(client,httpRequest,versionId,publishedId,options){return _action(client,httpRequest,{actionType:"sanity.action.document.version.unpublish",versionId,publishedId},options)}function _mutate(client,httpRequest,mutations,options){let mut;mut=mutations instanceof Patch||mutations instanceof ObservablePatch?{patch:mutations.serialize()}:mutations instanceof Transaction||mutations instanceof ObservableTransaction?mutations.serialize():mutations;return _dataRequest(client,httpRequest,"mutate",{mutations:Array.isArray(mut)?mut:[mut],transactionId:options&&options.transactionId||void 0},options)}function _action(client,httpRequest,actions,options){return _dataRequest(client,httpRequest,"actions",{actions:Array.isArray(actions)?actions:[actions],transactionId:options&&options.transactionId||void 0,skipCrossDatasetReferenceValidation:options&&options.skipCrossDatasetReferenceValidation||void 0,dryRun:options&&options.dryRun||void 0},options)}function _dataRequest(client,httpRequest,endpoint,body,options={}){const isMutation="mutate"===endpoint,isAction="actions"===endpoint,isQuery2="query"===endpoint,strQuery=isMutation||isAction?"":encodeQueryString(body),useGet=!isMutation&&!isAction&&strQuery.length<11264,stringQuery=useGet?strQuery:"",returnFirst=options.returnFirst,{timeout,token,tag,headers,returnQuery,lastLiveEventId,cacheMode}=options;return _requestObservable(client,httpRequest,{method:useGet?"GET":"POST",uri:_getDataUrl(client,endpoint,stringQuery),json:!0,body:useGet?void 0:body,query:isMutation&&getMutationQuery(options),timeout,headers,token,tag,returnQuery,perspective:options.perspective,resultSourceMap:options.resultSourceMap,lastLiveEventId:Array.isArray(lastLiveEventId)?lastLiveEventId[0]:lastLiveEventId,cacheMode,canUseCdn:isQuery2,signal:options.signal,fetch:options.fetch,useAbortSignal:options.useAbortSignal,useCdn:options.useCdn}).pipe(filter(isResponse),map(getBody),map(res=>{if(!isMutation)return res;const results=res.results||[];if(options.returnDocuments)return returnFirst?results[0]&&results[0].document:results.map(mut=>mut.document);const key=returnFirst?"documentId":"documentIds",ids=returnFirst?results[0]&&results[0].id:results.map(mut=>mut.id);return{transactionId:res.transactionId,results,[key]:ids}}))}function _create(client,httpRequest,doc,op,options={}){return _dataRequest(client,httpRequest,"mutate",{mutations:[{[op]:doc}]},Object.assign({returnFirst:!0,returnDocuments:!0},options))}const hasDataConfig=client=>void 0!==client.config().dataset&&void 0!==client.config().projectId||void 0!==client.config()["~experimental_resource"],isQuery=(client,uri)=>hasDataConfig(client)&&uri.startsWith(_getDataUrl(client,"query")),isData=(client,uri)=>uri.startsWith("/data/")||isQuery(client,uri)||((client,uri)=>hasDataConfig(client)&&uri.startsWith(_getDataUrl(client,"mutate")))(client,uri)||((client,uri)=>hasDataConfig(client)&&uri.startsWith(_getDataUrl(client,"doc","")))(client,uri)||((client,uri)=>hasDataConfig(client)&&uri.startsWith(_getDataUrl(client,"listen")))(client,uri)||((client,uri)=>hasDataConfig(client)&&uri.startsWith(_getDataUrl(client,"history","")))(client,uri);function _requestObservable(client,httpRequest,options){const uri=options.url||options.uri,config=client.config(),canUseCdn=typeof options.canUseCdn>"u"?["GET","HEAD"].indexOf(options.method||"GET")>=0&&isData(client,uri):options.canUseCdn;let useCdn=(options.useCdn??config.useCdn)&&canUseCdn;const tag=options.tag&&config.requestTagPrefix?[config.requestTagPrefix,options.tag].join("."):options.tag||config.requestTagPrefix;if(tag&&null!==options.tag&&(options.query={tag:requestTag(tag),...options.query}),["GET","HEAD","POST"].indexOf(options.method||"GET")>=0&&isQuery(client,uri)){const resultSourceMap=options.resultSourceMap??config.resultSourceMap;void 0!==resultSourceMap&&!1!==resultSourceMap&&(options.query={resultSourceMap,...options.query});const perspectiveOption=options.perspective||config.perspective;typeof perspectiveOption<"u"&&("previewDrafts"===perspectiveOption&&printPreviewDraftsDeprecationWarning(),validateApiPerspective(perspectiveOption),options.query={perspective:Array.isArray(perspectiveOption)?perspectiveOption.join(","):perspectiveOption,...options.query},(Array.isArray(perspectiveOption)&&perspectiveOption.length>0||"previewDrafts"===perspectiveOption||"drafts"===perspectiveOption)&&useCdn&&(useCdn=!1,printCdnPreviewDraftsWarning())),options.lastLiveEventId&&(options.query={...options.query,lastLiveEventId:options.lastLiveEventId}),!1===options.returnQuery&&(options.query={returnQuery:"false",...options.query}),useCdn&&"noStale"==options.cacheMode&&(options.query={cacheMode:"noStale",...options.query})}const reqOptions=function requestOptions(config,overrides={}){const headers={};config.headers&&Object.assign(headers,config.headers);const token=overrides.token||config.token;token&&(headers.Authorization=`Bearer ${token}`),!overrides.useGlobalApi&&!config.useProjectHostname&&config.projectId&&(headers["X-Sanity-Project-ID"]=config.projectId);const withCredentials=!!(typeof overrides.withCredentials>"u"?config.withCredentials:overrides.withCredentials),timeout=typeof overrides.timeout>"u"?config.timeout:overrides.timeout;return Object.assign({},overrides,{headers:Object.assign({},headers,overrides.headers||{}),timeout:typeof timeout>"u"?3e5:timeout,proxy:overrides.proxy||config.proxy,json:!0,withCredentials,fetch:"object"==typeof overrides.fetch&&"object"==typeof config.fetch?{...config.fetch,...overrides.fetch}:overrides.fetch||config.fetch})}(config,Object.assign({},options,{url:_getUrl(client,uri,useCdn)})),request=new Observable_Observable(subscriber=>httpRequest(reqOptions,config.requester).subscribe(subscriber));return options.signal?request.pipe(function _withAbortSignal(signal){return input=>new Observable_Observable(observer=>{const abort=()=>observer.error(function _createAbortError(signal){if(isDomExceptionSupported)return new DOMException(signal?.reason??"The operation was aborted.","AbortError");const error=new Error(signal?.reason??"The operation was aborted.");return error.name="AbortError",error}(signal));if(signal&&signal.aborted)return void abort();const subscription=input.subscribe(observer);return signal.addEventListener("abort",abort),()=>{signal.removeEventListener("abort",abort),subscription.unsubscribe()}})}(options.signal)):request}function _request(client,httpRequest,options){return _requestObservable(client,httpRequest,options).pipe(filter(event=>"response"===event.type),map(event=>event.body))}function _getDataUrl(client,operation,path){const config=client.config();if(config["~experimental_resource"]){resourceConfig(config);return`${resourceDataBase(config)}/${void 0!==path?`${operation}/${path}`:operation}`.replace(/\/($|\?)/,"$1")}const baseUri=`/${operation}/${hasDataset(config)}`;return`/data${void 0!==path?`${baseUri}/${path}`:baseUri}`.replace(/\/($|\?)/,"$1")}function _getUrl(client,uri,canUseCdn=!1){const{url,cdnUrl}=client.config();return`${canUseCdn?cdnUrl:url}/${uri.replace(/^\//,"")}`}const isDomExceptionSupported=!!globalThis.DOMException;const resourceDataBase=config=>{if(!config["~experimental_resource"])throw new Error("`resource` must be provided to perform resource queries");const{type,id}=config["~experimental_resource"];switch(type){case"dataset":{const segments=id.split(".");if(2!==segments.length)throw new Error('Dataset ID must be in the format "project.dataset"');return`/projects/${segments[0]}/datasets/${segments[1]}`}case"canvas":return`/canvases/${id}`;case"media-library":return`/media-libraries/${id}`;case"dashboard":return`/dashboards/${id}`;default:throw new Error(`Unsupported resource type: ${type.toString()}`)}};function _generate(client,httpRequest,request){const dataset2=hasDataset(client.config());return _request(client,httpRequest,{method:"POST",uri:`/agent/action/generate/${dataset2}`,body:request})}function _transform(client,httpRequest,request){const dataset2=hasDataset(client.config());return _request(client,httpRequest,{method:"POST",uri:`/agent/action/transform/${dataset2}`,body:request})}function _translate(client,httpRequest,request){const dataset2=hasDataset(client.config());return _request(client,httpRequest,{method:"POST",uri:`/agent/action/translate/${dataset2}`,body:request})}class ObservableAgentsActionClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}generate(request){return _generate(this.#client,this.#httpRequest,request)}transform(request){return _transform(this.#client,this.#httpRequest,request)}translate(request){return _translate(this.#client,this.#httpRequest,request)}}class AgentActionsClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}generate(request){return lastValueFrom(_generate(this.#client,this.#httpRequest,request))}transform(request){return lastValueFrom(_transform(this.#client,this.#httpRequest,request))}translate(request){return lastValueFrom(_translate(this.#client,this.#httpRequest,request))}prompt(request){return lastValueFrom(function _prompt(client,httpRequest,request){const dataset2=hasDataset(client.config());return _request(client,httpRequest,{method:"POST",uri:`/agent/action/prompt/${dataset2}`,body:request})}(this.#client,this.#httpRequest,request))}patch(request){return lastValueFrom(function _patch(client,httpRequest,request){const dataset2=hasDataset(client.config());return _request(client,httpRequest,{method:"POST",uri:`/agent/action/patch/${dataset2}`,body:request})}(this.#client,this.#httpRequest,request))}}class ObservableAssetsClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}upload(assetType,body,options){return _upload(this.#client,this.#httpRequest,assetType,body,options)}}class AssetsClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}upload(assetType,body,options){return lastValueFrom(_upload(this.#client,this.#httpRequest,assetType,body,options).pipe(filter(event=>"response"===event.type),map(event=>event.body.document)))}}function _upload(client,httpRequest,assetType,body,opts={}){(type=>{if(-1===VALID_ASSET_TYPES.indexOf(type))throw new Error(`Invalid asset type: ${type}. Must be one of ${VALID_ASSET_TYPES.join(", ")}`)})(assetType);let meta=opts.extract||void 0;meta&&!meta.length&&(meta=["none"]);const config=client.config(),options=function optionsFromFile(opts,file){return typeof File>"u"||!(file instanceof File)?opts:Object.assign({filename:!1===opts.preserveFilename?void 0:file.name,contentType:file.type},opts)}(opts,body),{tag,label,title,description,creditLine,filename,source}=options,query={label,title,description,filename,meta,creditLine};return source&&(query.sourceId=source.id,query.sourceName=source.name,query.sourceUrl=source.url),_requestObservable(client,httpRequest,{tag,method:"POST",timeout:options.timeout||0,uri:buildAssetUploadUrl(config,assetType),headers:options.contentType?{"Content-Type":options.contentType}:{},query,body})}function buildAssetUploadUrl(config,assetType){const assetTypeEndpoint="image"===assetType?"images":"files";if(config["~experimental_resource"]){const{type,id}=config["~experimental_resource"];switch(type){case"dataset":throw new Error("Assets are not supported for dataset resources, yet. Configure the client with `{projectId: <projectId>, dataset: <datasetId>}` instead.");case"canvas":return`/canvases/${id}/assets/${assetTypeEndpoint}`;case"media-library":return`/media-libraries/${id}/upload`;case"dashboard":return`/dashboards/${id}/assets/${assetTypeEndpoint}`;default:throw new Error(`Unsupported resource type: ${type.toString()}`)}}return`assets/${assetTypeEndpoint}/${hasDataset(config)}`}const eventSourcePolyfill=defer(()=>__webpack_require__.e(96583).then(__webpack_require__.t.bind(__webpack_require__,"./node_modules/@sanity/eventsource/browser.js",23))).pipe(map(({default:EventSource2})=>EventSource2),function shareReplay(configOrBufferSize,windowTime,scheduler){var _a,_b,_c,bufferSize,refCount=!1;return configOrBufferSize&&"object"==typeof configOrBufferSize?(_a=configOrBufferSize.bufferSize,bufferSize=void 0===_a?1/0:_a,_b=configOrBufferSize.windowTime,windowTime=void 0===_b?1/0:_b,refCount=void 0!==(_c=configOrBufferSize.refCount)&&_c,scheduler=configOrBufferSize.scheduler):bufferSize=null!=configOrBufferSize?configOrBufferSize:1/0,share({connector:function(){return new ReplaySubject(bufferSize,windowTime,scheduler)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:refCount})}(1));function reconnectOnConnectionFailure(){return function(source){return source.pipe(catchError((err,caught)=>err instanceof ConnectionFailedError?concat(of({type:"reconnect"}),timer(1e3).pipe(mergeMap(()=>caught))):throwError(()=>err)))}}const possibleOptions=["includePreviousRevision","includeResult","includeMutations","includeAllVersions","visibility","effectFormat","tag"],defaultOptions={includeResult:!0};function _listen(query,params,opts={}){const{url,token,withCredentials,requestTagPrefix,headers:configHeaders}=this.config(),tag=opts.tag&&requestTagPrefix?[requestTagPrefix,opts.tag].join("."):opts.tag,options={...(obj=opts,defaults2=defaultOptions,Object.keys(defaults2).concat(Object.keys(obj)).reduce((target,prop)=>(target[prop]=typeof obj[prop]>"u"?defaults2[prop]:obj[prop],target),{})),tag},listenOpts=((obj,props)=>props.reduce((selection,prop)=>(typeof obj[prop]>"u"||(selection[prop]=obj[prop]),selection),{}))(options,possibleOptions),uri=`${url}${_getDataUrl(this,"listen",encodeQueryString({query,params,options:{tag,...listenOpts}}))}`;var obj,defaults2;if(uri.length>14800)return throwError(()=>new Error("Query too large for listener"));const listenFor=options.events?options.events:["mutation"],esOptions={};return withCredentials&&(esOptions.withCredentials=!0),(token||configHeaders)&&(esOptions.headers={},token&&(esOptions.headers.Authorization=`Bearer ${token}`),configHeaders&&Object.assign(esOptions.headers,configHeaders)),connectEventSource(()=>(typeof EventSource>"u"||esOptions.headers?eventSourcePolyfill:of(EventSource)).pipe(map(EventSource2=>new EventSource2(uri,esOptions))),listenFor).pipe(reconnectOnConnectionFailure(),filter(event=>listenFor.includes(event.type)),map(event=>({type:event.type,..."data"in event?event.data:{}})))}function shareReplayLatest(configOrPredicate,config){return function _shareReplayLatest(config){return source=>{let latest,emitted=!1;const{predicate,...shareConfig}=config,wrapped=source.pipe(function tap(observerOrNext,error,complete){var tapObserver=isFunction(observerOrNext)||error||complete?{next:observerOrNext,error,complete}:observerOrNext;return tapObserver?operate(function(source,subscriber){var _a;null===(_a=tapObserver.subscribe)||void 0===_a||_a.call(tapObserver);var isUnsub=!0;source.subscribe(createOperatorSubscriber(subscriber,function(value){var _a;null===(_a=tapObserver.next)||void 0===_a||_a.call(tapObserver,value),subscriber.next(value)},function(){var _a;isUnsub=!1,null===(_a=tapObserver.complete)||void 0===_a||_a.call(tapObserver),subscriber.complete()},function(err){var _a;isUnsub=!1,null===(_a=tapObserver.error)||void 0===_a||_a.call(tapObserver,err),subscriber.error(err)},function(){var _a,_b;isUnsub&&(null===(_a=tapObserver.unsubscribe)||void 0===_a||_a.call(tapObserver)),null===(_b=tapObserver.finalize)||void 0===_b||_b.call(tapObserver)}))}):identity_identity}(value=>{config.predicate(value)&&(emitted=!0,latest=value)}),finalize(()=>{emitted=!1,latest=void 0}),share(shareConfig));return merge(wrapped,new Observable_Observable(subscriber=>{emitted&&subscriber.next(latest),subscriber.complete()}))}}("function"==typeof configOrPredicate?{predicate:configOrPredicate,...config}:configOrPredicate)}class LiveClient{#client;constructor(client){this.#client=client}events({includeDrafts=!1,tag:_tag}={}){resourceGuard("live",this.#client.config());const{projectId:projectId2,apiVersion:_apiVersion,token,withCredentials,requestTagPrefix,headers:configHeaders}=this.#client.config(),apiVersion=_apiVersion.replace(/^v/,"");if("X"!==apiVersion&&apiVersion<"2021-03-25")throw new Error(`The live events API requires API version 2021-03-25 or later. The current API version is ${apiVersion}. Please update your API version to use this feature.`);if(includeDrafts&&!token&&!withCredentials)throw new Error("The live events API requires a token or withCredentials when 'includeDrafts: true'. Please update your client configuration. The token should have the lowest possible access role.");const path=_getDataUrl(this.#client,"live/events"),url=new URL(this.#client.getUrl(path,!1)),tag=_tag&&requestTagPrefix?[requestTagPrefix,_tag].join("."):_tag;tag&&url.searchParams.set("tag",tag),includeDrafts&&url.searchParams.set("includeDrafts","true");const esOptions={};includeDrafts&&withCredentials&&(esOptions.withCredentials=!0),(includeDrafts&&token||configHeaders)&&(esOptions.headers={},includeDrafts&&token&&(esOptions.headers.Authorization=`Bearer ${token}`),configHeaders&&Object.assign(esOptions.headers,configHeaders));const key=`${url.href}::${JSON.stringify(esOptions)}`,existing=eventsCache.get(key);if(existing)return existing;const events=connectEventSource(()=>(typeof EventSource>"u"||esOptions.headers?eventSourcePolyfill:of(EventSource)).pipe(map(EventSource2=>new EventSource2(url.href,esOptions))),["message","restart","welcome","reconnect","goaway"]),checkCors=function fetchObservable(url,init){return new Observable_Observable(observer=>{const controller=new AbortController,signal=controller.signal;return fetch(url,{...init,signal:controller.signal}).then(response=>{observer.next(response),observer.complete()},err=>{signal.aborted||observer.error(err)}),()=>controller.abort()})}(url,{method:"OPTIONS",mode:"cors",credentials:esOptions.withCredentials?"include":"omit",headers:esOptions.headers}).pipe(catchError(()=>{throw new CorsOriginError({projectId:projectId2})})),observable2=events.pipe(reconnectOnConnectionFailure(),mergeMap(event=>"reconnect"===event.type?checkCors.pipe(mergeMap(()=>of(event))):of(event)),catchError(err=>checkCors.pipe(mergeMap(()=>{throw err}))),map(event=>{if("message"===event.type){const{data,...rest}=event;return{...rest,tags:data.tags}}return event})).pipe(finalize(()=>eventsCache.delete(key)),shareReplayLatest({predicate:event=>"welcome"===event.type}));return eventsCache.set(key,observable2),observable2}}const eventsCache=new Map;class ObservableDatasetsClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}create(name,options){return _modify(this.#client,this.#httpRequest,"PUT",name,options)}edit(name,options){return _modify(this.#client,this.#httpRequest,"PATCH",name,options)}delete(name){return _modify(this.#client,this.#httpRequest,"DELETE",name)}list(){resourceGuard("dataset",this.#client.config());const config=this.#client.config(),projectId2=config.projectId;let uri="/datasets";return!1===config.useProjectHostname&&(uri=`/projects/${projectId2}/datasets`),_request(this.#client,this.#httpRequest,{uri,tag:null})}}class DatasetsClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}create(name,options){return resourceGuard("dataset",this.#client.config()),lastValueFrom(_modify(this.#client,this.#httpRequest,"PUT",name,options))}edit(name,options){return resourceGuard("dataset",this.#client.config()),lastValueFrom(_modify(this.#client,this.#httpRequest,"PATCH",name,options))}delete(name){return resourceGuard("dataset",this.#client.config()),lastValueFrom(_modify(this.#client,this.#httpRequest,"DELETE",name))}list(){resourceGuard("dataset",this.#client.config());const config=this.#client.config(),projectId2=config.projectId;let uri="/datasets";return!1===config.useProjectHostname&&(uri=`/projects/${projectId2}/datasets`),lastValueFrom(_request(this.#client,this.#httpRequest,{uri,tag:null}))}}function _modify(client,httpRequest,method,name,options){return resourceGuard("dataset",client.config()),dataset(name),_request(client,httpRequest,{method,uri:`/datasets/${name}`,body:options,tag:null})}class ObservableMediaLibraryVideoClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}getPlaybackInfo(assetIdentifier,options={}){const configMediaLibraryId=this.#client.config()["~experimental_resource"]?.id,{instanceId,libraryId}=function parseAssetInstanceId(assetIdentifier){const ref=function isSanityReference(assetIdentifier){return"object"==typeof assetIdentifier&&"_ref"in assetIdentifier}(assetIdentifier)?assetIdentifier._ref:assetIdentifier,match=ML_GDR_PATTERN.exec(ref);if(match){const[,libraryId,instanceId]=match;return{libraryId,instanceId}}if("string"==typeof assetIdentifier&&assetIdentifier.startsWith("video-"))return{instanceId:assetIdentifier};throw new Error(`Invalid video asset instance identifier "${ref}": must be a valid video instance id or a Global Dataset Reference (GDR) to the video asset in the Media Library`)}(assetIdentifier),effectiveLibraryId=libraryId||configMediaLibraryId;if(!effectiveLibraryId)throw new Error("Could not determine Media Library ID - you need to provide a valid Media Library ID in the client config or a Media Library GDR");const uri=function buildVideoPlaybackInfoUrl(instanceId,libraryId){return`/media-libraries/${libraryId}/video/${instanceId}/playback-info`}(instanceId,effectiveLibraryId),queryParams=function buildQueryParams(options){const params={};if(options.transformations){const{thumbnail,animated,storyboard}=options.transformations;thumbnail&&(thumbnail.width&&(params.thumbnailWidth=thumbnail.width),thumbnail.height&&(params.thumbnailHeight=thumbnail.height),void 0!==thumbnail.time&&(params.thumbnailTime=thumbnail.time),thumbnail.fit&&(params.thumbnailFit=thumbnail.fit),thumbnail.format&&(params.thumbnailFormat=thumbnail.format)),animated&&(animated.width&&(params.animatedWidth=animated.width),animated.height&&(params.animatedHeight=animated.height),void 0!==animated.start&&(params.animatedStart=animated.start),void 0!==animated.end&&(params.animatedEnd=animated.end),animated.fps&&(params.animatedFps=animated.fps),animated.format&&(params.animatedFormat=animated.format)),storyboard&&storyboard.format&&(params.storyboardFormat=storyboard.format)}return options.expiration&&(params.expiration=options.expiration),params}(options);return _request(this.#client,this.#httpRequest,{method:"GET",uri,query:queryParams})}}class MediaLibraryVideoClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}getPlaybackInfo(assetIdentifier,options={}){return lastValueFrom(new ObservableMediaLibraryVideoClient(this.#client.observable,this.#httpRequest).getPlaybackInfo(assetIdentifier,options))}}const ML_GDR_PATTERN=/^media-library:(ml[^:]+):([^:]+)$/;class ObservableProjectsClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}list(options){const query={};return!1===options?.includeMembers&&(query.includeMembers="false"),options?.organizationId&&(query.organizationId=options.organizationId),_request(this.#client,this.#httpRequest,{uri:"/projects",query})}getById(projectId2){return _request(this.#client,this.#httpRequest,{uri:`/projects/${projectId2}`})}}class ProjectsClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}list(options){const query={};return!1===options?.includeMembers&&(query.includeMembers="false"),options?.organizationId&&(query.organizationId=options.organizationId),lastValueFrom(_request(this.#client,this.#httpRequest,{uri:"/projects",query}))}getById(projectId2){return lastValueFrom(_request(this.#client,this.#httpRequest,{uri:`/projects/${projectId2}`}))}}const generateReleaseId=((alphabet,size=21)=>((alphabet,defaultSize,getRandom)=>{let mask=(2<<Math.log(alphabet.length-1)/Math.LN2)-1,step=-~(1.6*mask*defaultSize/alphabet.length);return(size=defaultSize)=>{let id="";for(;;){let bytes=getRandom(step),j=0|step;for(;j--;)if(id+=alphabet[bytes[j]&mask]||"",id.length===size)return id}}})(alphabet,size,random))("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",8),getDocumentVersionId=(publishedId,releaseId)=>releaseId?getVersionId(publishedId,releaseId):getDraftId(publishedId);function deriveDocumentVersionId(op,{releaseId,publishedId,document}){if(publishedId&&document._id){const versionId=getDocumentVersionId(publishedId,releaseId);return((builtVersionId,document)=>{if(document._id&&document._id!==builtVersionId)throw new Error(`The provided document ID (\`${document._id}\`) does not match the generated version ID (\`${builtVersionId}\`)`)})(versionId,document),versionId}if(document._id){const isDraft=isDraftId(document._id),isVersion=isVersionId(document._id);if(!isDraft&&!isVersion)throw new Error(`\`${op}()\` requires a document with an \`_id\` that is a version or draft ID`);if(releaseId){if(isDraft)throw new Error(`\`${op}()\` was called with a document ID (\`${document._id}\`) that is a draft ID, but a release ID (\`${releaseId}\`) was also provided.`);const builtVersionId=getVersionFromId(document._id);if(builtVersionId!==releaseId)throw new Error(`\`${op}()\` was called with a document ID (\`${document._id}\`) that is a version ID, but the release ID (\`${releaseId}\`) does not match the document's version ID (\`${builtVersionId}\`).`)}return document._id}if(publishedId)return getDocumentVersionId(publishedId,releaseId);throw new Error(`\`${op}()\` requires either a publishedId or a document with an \`_id\``)}const createRelease=(releaseOrOptions,maybeOptions)=>{const[releaseId,metadata,options]=((releaseOrOptions,maybeOptions)=>{if("object"==typeof releaseOrOptions&&null!==releaseOrOptions&&("releaseId"in releaseOrOptions||"metadata"in releaseOrOptions)){const{releaseId=generateReleaseId(),metadata={}}=releaseOrOptions;return[releaseId,metadata,maybeOptions]}return[generateReleaseId(),{},releaseOrOptions]})(releaseOrOptions,maybeOptions);return{action:{actionType:"sanity.action.release.create",releaseId,metadata:{...metadata,releaseType:metadata.releaseType||"undecided"}},options}};class ObservableReleasesClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}get({releaseId},options){return _getDocument(this.#client,this.#httpRequest,`_.releases.${releaseId}`,options)}create(releaseOrOptions,maybeOptions){const{action,options}=createRelease(releaseOrOptions,maybeOptions),{releaseId,metadata}=action;return _action(this.#client,this.#httpRequest,action,options).pipe(map(actionResult=>({...actionResult,releaseId,metadata})))}edit({releaseId,patch},options){const editAction={actionType:"sanity.action.release.edit",releaseId,patch};return _action(this.#client,this.#httpRequest,editAction,options)}publish({releaseId},options){const publishAction={actionType:"sanity.action.release.publish",releaseId};return _action(this.#client,this.#httpRequest,publishAction,options)}archive({releaseId},options){const archiveAction={actionType:"sanity.action.release.archive",releaseId};return _action(this.#client,this.#httpRequest,archiveAction,options)}unarchive({releaseId},options){const unarchiveAction={actionType:"sanity.action.release.unarchive",releaseId};return _action(this.#client,this.#httpRequest,unarchiveAction,options)}schedule({releaseId,publishAt},options){const scheduleAction={actionType:"sanity.action.release.schedule",releaseId,publishAt};return _action(this.#client,this.#httpRequest,scheduleAction,options)}unschedule({releaseId},options){const unscheduleAction={actionType:"sanity.action.release.unschedule",releaseId};return _action(this.#client,this.#httpRequest,unscheduleAction,options)}delete({releaseId},options){const deleteAction={actionType:"sanity.action.release.delete",releaseId};return _action(this.#client,this.#httpRequest,deleteAction,options)}fetchDocuments({releaseId},options){return _getReleaseDocuments(this.#client,this.#httpRequest,releaseId,options)}}class ReleasesClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}get({releaseId},options){return lastValueFrom(_getDocument(this.#client,this.#httpRequest,`_.releases.${releaseId}`,options))}async create(releaseOrOptions,maybeOptions){const{action,options}=createRelease(releaseOrOptions,maybeOptions),{releaseId,metadata}=action;return{...await lastValueFrom(_action(this.#client,this.#httpRequest,action,options)),releaseId,metadata}}edit({releaseId,patch},options){const editAction={actionType:"sanity.action.release.edit",releaseId,patch};return lastValueFrom(_action(this.#client,this.#httpRequest,editAction,options))}publish({releaseId},options){const publishAction={actionType:"sanity.action.release.publish",releaseId};return lastValueFrom(_action(this.#client,this.#httpRequest,publishAction,options))}archive({releaseId},options){const archiveAction={actionType:"sanity.action.release.archive",releaseId};return lastValueFrom(_action(this.#client,this.#httpRequest,archiveAction,options))}unarchive({releaseId},options){const unarchiveAction={actionType:"sanity.action.release.unarchive",releaseId};return lastValueFrom(_action(this.#client,this.#httpRequest,unarchiveAction,options))}schedule({releaseId,publishAt},options){const scheduleAction={actionType:"sanity.action.release.schedule",releaseId,publishAt};return lastValueFrom(_action(this.#client,this.#httpRequest,scheduleAction,options))}unschedule({releaseId},options){const unscheduleAction={actionType:"sanity.action.release.unschedule",releaseId};return lastValueFrom(_action(this.#client,this.#httpRequest,unscheduleAction,options))}delete({releaseId},options){const deleteAction={actionType:"sanity.action.release.delete",releaseId};return lastValueFrom(_action(this.#client,this.#httpRequest,deleteAction,options))}fetchDocuments({releaseId},options){return lastValueFrom(_getReleaseDocuments(this.#client,this.#httpRequest,releaseId,options))}}class ObservableUsersClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}getById(id){return _request(this.#client,this.#httpRequest,{uri:`/users/${id}`})}}class UsersClient{#client;#httpRequest;constructor(client,httpRequest){this.#client=client,this.#httpRequest=httpRequest}getById(id){return lastValueFrom(_request(this.#client,this.#httpRequest,{uri:`/users/${id}`}))}}class ObservableSanityClient{assets;datasets;live;mediaLibrary;projects;users;agent;releases;#clientConfig;#httpRequest;listen=_listen;constructor(httpRequest,config=defaultConfig){this.config(config),this.#httpRequest=httpRequest,this.assets=new ObservableAssetsClient(this,this.#httpRequest),this.datasets=new ObservableDatasetsClient(this,this.#httpRequest),this.live=new LiveClient(this),this.mediaLibrary={video:new ObservableMediaLibraryVideoClient(this,this.#httpRequest)},this.projects=new ObservableProjectsClient(this,this.#httpRequest),this.users=new ObservableUsersClient(this,this.#httpRequest),this.agent={action:new ObservableAgentsActionClient(this,this.#httpRequest)},this.releases=new ObservableReleasesClient(this,this.#httpRequest)}clone(){return new ObservableSanityClient(this.#httpRequest,this.config())}config(newConfig){if(void 0===newConfig)return{...this.#clientConfig};if(this.#clientConfig&&!1===this.#clientConfig.allowReconfigure)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.#clientConfig=initConfig(newConfig,this.#clientConfig||{}),this}withConfig(newConfig){const thisConfig=this.config();return new ObservableSanityClient(this.#httpRequest,{...thisConfig,...newConfig,stega:{...thisConfig.stega||{},..."boolean"==typeof newConfig?.stega?{enabled:newConfig.stega}:newConfig?.stega||{}}})}fetch(query,params,options){return _fetch(this,this.#httpRequest,this.#clientConfig.stega,query,params,options)}getDocument(id,options){if(!0===options?.includeAllVersions)return _getDocument(this,this.#httpRequest,id,{...options,includeAllVersions:!0});const opts={signal:options?.signal,tag:options?.tag,releaseId:options?.releaseId,...options&&"includeAllVersions"in options?{includeAllVersions:!1}:{}};return _getDocument(this,this.#httpRequest,id,opts)}getDocuments(ids,options){return _getDocuments(this,this.#httpRequest,ids,options)}create(document,options){return _create(this,this.#httpRequest,document,"create",options)}createIfNotExists(document,options){return _createIfNotExists(this,this.#httpRequest,document,options)}createOrReplace(document,options){return _createOrReplace(this,this.#httpRequest,document,options)}createVersion({document,publishedId,releaseId,baseId,ifBaseRevisionId},options){if(!document)return _createVersionFromBase(this,this.#httpRequest,publishedId,baseId,releaseId,ifBaseRevisionId,options);const documentVersionId=deriveDocumentVersionId("createVersion",{document,publishedId,releaseId}),documentVersion={...document,_id:documentVersionId},versionPublishedId=publishedId||getPublishedId(document._id);return _createVersion(this,this.#httpRequest,documentVersion,versionPublishedId,options)}delete(selection,options){return _delete(this,this.#httpRequest,selection,options)}discardVersion({releaseId,publishedId},purge,options){const documentVersionId=getDocumentVersionId(publishedId,releaseId);return _discardVersion(this,this.#httpRequest,documentVersionId,purge,options)}replaceVersion({document,publishedId,releaseId},options){const documentVersionId=deriveDocumentVersionId("replaceVersion",{document,publishedId,releaseId}),documentVersion={...document,_id:documentVersionId};return _replaceVersion(this,this.#httpRequest,documentVersion,options)}unpublishVersion({releaseId,publishedId},options){const versionId=getVersionId(publishedId,releaseId);return _unpublishVersion(this,this.#httpRequest,versionId,publishedId,options)}mutate(operations,options){return _mutate(this,this.#httpRequest,operations,options)}patch(selection,operations){return new ObservablePatch(selection,operations,this)}transaction(operations){return new ObservableTransaction(operations,this)}action(operations,options){return _action(this,this.#httpRequest,operations,options)}request(options){return _request(this,this.#httpRequest,options)}getUrl(uri,canUseCdn){return _getUrl(this,uri,canUseCdn)}getDataUrl(operation,path){return _getDataUrl(this,operation,path)}}class SanityClient{assets;datasets;live;mediaLibrary;projects;users;agent;releases;observable;#clientConfig;#httpRequest;listen=_listen;constructor(httpRequest,config=defaultConfig){this.config(config),this.#httpRequest=httpRequest,this.assets=new AssetsClient(this,this.#httpRequest),this.datasets=new DatasetsClient(this,this.#httpRequest),this.live=new LiveClient(this),this.mediaLibrary={video:new MediaLibraryVideoClient(this,this.#httpRequest)},this.projects=new ProjectsClient(this,this.#httpRequest),this.users=new UsersClient(this,this.#httpRequest),this.agent={action:new AgentActionsClient(this,this.#httpRequest)},this.releases=new ReleasesClient(this,this.#httpRequest),this.observable=new ObservableSanityClient(httpRequest,config)}clone(){return new SanityClient(this.#httpRequest,this.config())}config(newConfig){if(void 0===newConfig)return{...this.#clientConfig};if(this.#clientConfig&&!1===this.#clientConfig.allowReconfigure)throw new Error("Existing client instance cannot be reconfigured - use `withConfig(newConfig)` to return a new client");return this.observable&&this.observable.config(newConfig),this.#clientConfig=initConfig(newConfig,this.#clientConfig||{}),this}withConfig(newConfig){const thisConfig=this.config();return new SanityClient(this.#httpRequest,{...thisConfig,...newConfig,stega:{...thisConfig.stega||{},..."boolean"==typeof newConfig?.stega?{enabled:newConfig.stega}:newConfig?.stega||{}}})}fetch(query,params,options){return lastValueFrom(_fetch(this,this.#httpRequest,this.#clientConfig.stega,query,params,options))}getDocument(id,options){if(!0===options?.includeAllVersions)return lastValueFrom(_getDocument(this,this.#httpRequest,id,{...options,includeAllVersions:!0}));const opts={signal:options?.signal,tag:options?.tag,releaseId:options?.releaseId,...options&&"includeAllVersions"in options?{includeAllVersions:!1}:{}};return lastValueFrom(_getDocument(this,this.#httpRequest,id,opts))}getDocuments(ids,options){return lastValueFrom(_getDocuments(this,this.#httpRequest,ids,options))}create(document,options){return lastValueFrom(_create(this,this.#httpRequest,document,"create",options))}createIfNotExists(document,options){return lastValueFrom(_createIfNotExists(this,this.#httpRequest,document,options))}createOrReplace(document,options){return lastValueFrom(_createOrReplace(this,this.#httpRequest,document,options))}createVersion({document,publishedId,releaseId,baseId,ifBaseRevisionId},options){if(!document)return firstValueFrom(_createVersionFromBase(this,this.#httpRequest,publishedId,baseId,releaseId,ifBaseRevisionId,options));const documentVersionId=deriveDocumentVersionId("createVersion",{document,publishedId,releaseId}),documentVersion={...document,_id:documentVersionId},versionPublishedId=publishedId||getPublishedId(document._id);return firstValueFrom(_createVersion(this,this.#httpRequest,documentVersion,versionPublishedId,options))}delete(selection,options){return lastValueFrom(_delete(this,this.#httpRequest,selection,options))}discardVersion({releaseId,publishedId},purge,options){const documentVersionId=getDocumentVersionId(publishedId,releaseId);return lastValueFrom(_discardVersion(this,this.#httpRequest,documentVersionId,purge,options))}replaceVersion({document,publishedId,releaseId},options){const documentVersionId=deriveDocumentVersionId("replaceVersion",{document,publishedId,releaseId}),documentVersion={...document,_id:documentVersionId};return firstValueFrom(_replaceVersion(this,this.#httpRequest,documentVersion,options))}unpublishVersion({releaseId,publishedId},options){const versionId=getVersionId(publishedId,releaseId);return lastValueFrom(_unpublishVersion(this,this.#httpRequest,versionId,publishedId,options))}mutate(operations,options){return lastValueFrom(_mutate(this,this.#httpRequest,operations,options))}patch(documentId,operations){return new Patch(documentId,operations,this)}transaction(operations){return new Transaction(operations,this)}action(operations,options){return lastValueFrom(_action(this,this.#httpRequest,operations,options))}request(options){return lastValueFrom(_request(this,this.#httpRequest,options))}dataRequest(endpoint,body,options){return lastValueFrom(_dataRequest(this,this.#httpRequest,endpoint,body,options))}getUrl(uri,canUseCdn){return _getUrl(this,uri,canUseCdn)}getDataUrl(operation,path){return _getDataUrl(this,operation,path)}}const exp=function defineCreateClientExports(envMiddleware2,ClassConstructor){return{requester:defineHttpRequest(envMiddleware2),createClient:config=>{const clientRequester=defineHttpRequest(envMiddleware2,{ignoreWarnings:config.ignoreWarnings});return new ClassConstructor((options,requester2)=>(requester2||clientRequester)({maxRedirects:0,maxRetries:config.maxRetries,retryDelay:config.retryDelay,lineage:config.lineage,...options}),config)}}}([],SanityClient),createClient=(exp.requester,exp.createClient);(function defineDeprecatedCreateClient(createClient2){return function(config){return printNoDefaultExport(),createClient2(config)}})(createClient)},"./node_modules/@sanity/image-url/lib/browser/image-url.umd.js":function(module){module.exports=function(){function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}function _createForOfIteratorHelperLoose(r,e){var t="undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(t)return(t=t.call(r)).next.bind(t);if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var o=0;return function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},_extends.apply(null,arguments)}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}var example="image-Tb9Ew8CXIwaY6R1kjMvI0uRR-2000x3000-jpg";function parseAssetId(ref){var _ref$split=ref.split("-"),id=_ref$split[1],dimensionString=_ref$split[2],format=_ref$split[3];if(!id||!dimensionString||!format)throw new Error("Malformed asset _ref '"+ref+"'. Expected an id like \""+example+'".');var _dimensionString$spli=dimensionString.split("x"),width=+_dimensionString$spli[0],height=+_dimensionString$spli[1];if(!isFinite(width)||!isFinite(height))throw new Error("Malformed asset _ref '"+ref+"'. Expected an id like \""+example+'".');return{id,width,height,format}}var isRef=function isRef(src){return!!src&&"string"==typeof src._ref},isAsset=function isAsset(src){return!!src&&"string"==typeof src._id},isAssetStub=function isAssetStub(src){var source=src;return!(!source||!source.asset)&&"string"==typeof source.asset.url},isInProgressUpload=function isInProgressUpload(src){if("object"==typeof src&&null!==src){var obj=src;return obj._upload&&(!obj.asset||!obj.asset._ref)}return!1};function parseSource(source){if(!source)return null;var image;if("string"==typeof source&&isUrl(source))image={asset:{_ref:urlToId(source)}};else if("string"==typeof source)image={asset:{_ref:source}};else if(isRef(source))image={asset:source};else if(isAsset(source))image={asset:{_ref:source._id||""}};else if(isAssetStub(source))image={asset:{_ref:urlToId(source.asset.url)}};else{if("object"!=typeof source.asset)return null;image=_extends({},source)}var img=source;return img.crop&&(image.crop=img.crop),img.hotspot&&(image.hotspot=img.hotspot),applyDefaults(image)}function isUrl(url){return/^https?:\/\//.test(""+url)}function urlToId(url){return("image-"+url.split("/").slice(-1)[0]).replace(/\.([a-z]+)$/,"-$1")}function applyDefaults(image){if(image.crop&&image.hotspot)return image;var result=_extends({},image);return result.crop||(result.crop={left:0,top:0,bottom:0,right:0}),result.hotspot||(result.hotspot={x:.5,y:.5,height:1,width:1}),result}var SPEC_NAME_TO_URL_NAME_MAPPINGS=[["width","w"],["height","h"],["format","fm"],["download","dl"],["blur","blur"],["sharpen","sharp"],["invert","invert"],["orientation","or"],["minHeight","min-h"],["maxHeight","max-h"],["minWidth","min-w"],["maxWidth","max-w"],["quality","q"],["fit","fit"],["crop","crop"],["saturation","sat"],["auto","auto"],["dpr","dpr"],["pad","pad"],["frame","frame"]];function urlForImage(options){var spec=_extends({},options||{}),source=spec.source;delete spec.source;var image=parseSource(source);if(!image){if(source&&isInProgressUpload(source))return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8HwQACfsD/QNViZkAAAAASUVORK5CYII=";throw new Error("Unable to resolve image URL from source ("+JSON.stringify(source)+")")}var asset=parseAssetId(image.asset._ref||image.asset._id||""),cropLeft=Math.round(image.crop.left*asset.width),cropTop=Math.round(image.crop.top*asset.height),crop={left:cropLeft,top:cropTop,width:Math.round(asset.width-image.crop.right*asset.width-cropLeft),height:Math.round(asset.height-image.crop.bottom*asset.height-cropTop)},hotSpotVerticalRadius=image.hotspot.height*asset.height/2,hotSpotHorizontalRadius=image.hotspot.width*asset.width/2,hotSpotCenterX=image.hotspot.x*asset.width,hotSpotCenterY=image.hotspot.y*asset.height,hotspot={left:hotSpotCenterX-hotSpotHorizontalRadius,top:hotSpotCenterY-hotSpotVerticalRadius,right:hotSpotCenterX+hotSpotHorizontalRadius,bottom:hotSpotCenterY+hotSpotVerticalRadius};return spec.rect||spec.focalPoint||spec.ignoreImageParams||spec.crop||(spec=_extends({},spec,fit({crop,hotspot},spec))),specToImageUrl(_extends({},spec,{asset}))}function specToImageUrl(spec){var cdnUrl=(spec.baseUrl||"https://cdn.sanity.io").replace(/\/+$/,""),vanityStub=spec.vanityName?"/"+spec.vanityName:"",filename=spec.asset.id+"-"+spec.asset.width+"x"+spec.asset.height+"."+spec.asset.format+vanityStub,baseUrl=cdnUrl+"/images/"+spec.projectId+"/"+spec.dataset+"/"+filename,params=[];if(spec.rect){var _spec$rect=spec.rect,left=_spec$rect.left,top=_spec$rect.top,width=_spec$rect.width,height=_spec$rect.height;(0!==left||0!==top||height!==spec.asset.height||width!==spec.asset.width)&&params.push("rect="+left+","+top+","+width+","+height)}spec.bg&&params.push("bg="+spec.bg),spec.focalPoint&&(params.push("fp-x="+spec.focalPoint.x),params.push("fp-y="+spec.focalPoint.y));var flip=[spec.flipHorizontal&&"h",spec.flipVertical&&"v"].filter(Boolean).join("");return flip&&params.push("flip="+flip),SPEC_NAME_TO_URL_NAME_MAPPINGS.forEach(function(mapping){var specName=mapping[0],param=mapping[1];void 0!==spec[specName]?params.push(param+"="+encodeURIComponent(spec[specName])):void 0!==spec[param]&&params.push(param+"="+encodeURIComponent(spec[param]))}),0===params.length?baseUrl:baseUrl+"?"+params.join("&")}function fit(source,spec){var cropRect,imgWidth=spec.width,imgHeight=spec.height;if(!imgWidth||!imgHeight)return{width:imgWidth,height:imgHeight,rect:source.crop};var crop=source.crop,hotspot=source.hotspot,desiredAspectRatio=imgWidth/imgHeight;if(crop.width/crop.height>desiredAspectRatio){var height=Math.round(crop.height),width=Math.round(height*desiredAspectRatio),top=Math.max(0,Math.round(crop.top)),hotspotXCenter=Math.round((hotspot.right-hotspot.left)/2+hotspot.left),left=Math.max(0,Math.round(hotspotXCenter-width/2));left<crop.left?left=crop.left:left+width>crop.left+crop.width&&(left=crop.left+crop.width-width),cropRect={left,top,width,height}}else{var _width=crop.width,_height=Math.round(_width/desiredAspectRatio),_left=Math.max(0,Math.round(crop.left)),hotspotYCenter=Math.round((hotspot.bottom-hotspot.top)/2+hotspot.top),_top=Math.max(0,Math.round(hotspotYCenter-_height/2));_top<crop.top?_top=crop.top:_top+_height>crop.top+crop.height&&(_top=crop.top+crop.height-_height),cropRect={left:_left,top:_top,width:_width,height:_height}}return{width:imgWidth,height:imgHeight,rect:cropRect}}var validFits=["clip","crop","fill","fillmax","max","scale","min"],validCrops=["top","bottom","left","right","center","focalpoint","entropy"],validAutoModes=["format"];function isSanityModernClientLike(client){return!(!client||!("config"in client))&&"function"==typeof client.config}function isSanityClientLike(client){return!(!client||!("clientConfig"in client))&&"object"==typeof client.clientConfig}function rewriteSpecName(key){for(var _step,_iterator=_createForOfIteratorHelperLoose(SPEC_NAME_TO_URL_NAME_MAPPINGS);!(_step=_iterator()).done;){var entry=_step.value,specName=entry[0],param=entry[1];if(key===specName||key===param)return specName}return key}function urlBuilder(options){if(isSanityModernClientLike(options)){var _options$config=options.config(),apiUrl=_options$config.apiHost,projectId=_options$config.projectId,dataset=_options$config.dataset;return new ImageUrlBuilder(null,{baseUrl:(apiUrl||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId,dataset})}if(isSanityClientLike(options)){var _options$clientConfig=options.clientConfig,_apiUrl=_options$clientConfig.apiHost,_projectId=_options$clientConfig.projectId,_dataset=_options$clientConfig.dataset;return new ImageUrlBuilder(null,{baseUrl:(_apiUrl||"https://api.sanity.io").replace(/^https:\/\/api\./,"https://cdn."),projectId:_projectId,dataset:_dataset})}return new ImageUrlBuilder(null,options||{})}var ImageUrlBuilder=function(){function ImageUrlBuilder(parent,options){this.options=void 0,this.options=parent?_extends({},parent.options||{},options||{}):_extends({},options||{})}var _proto=ImageUrlBuilder.prototype;return _proto.withOptions=function withOptions(options){var baseUrl=options.baseUrl||this.options.baseUrl,newOptions={baseUrl};for(var key in options)options.hasOwnProperty(key)&&(newOptions[rewriteSpecName(key)]=options[key]);return new ImageUrlBuilder(this,_extends({baseUrl},newOptions))},_proto.image=function image(source){return this.withOptions({source})},_proto.dataset=function dataset(_dataset2){return this.withOptions({dataset:_dataset2})},_proto.projectId=function projectId(_projectId2){return this.withOptions({projectId:_projectId2})},_proto.bg=function bg(_bg){return this.withOptions({bg:_bg})},_proto.dpr=function dpr(_dpr){return this.withOptions(_dpr&&1!==_dpr?{dpr:_dpr}:{})},_proto.width=function width(_width){return this.withOptions({width:_width})},_proto.height=function height(_height){return this.withOptions({height:_height})},_proto.focalPoint=function focalPoint(x,y){return this.withOptions({focalPoint:{x,y}})},_proto.maxWidth=function maxWidth(_maxWidth){return this.withOptions({maxWidth:_maxWidth})},_proto.minWidth=function minWidth(_minWidth){return this.withOptions({minWidth:_minWidth})},_proto.maxHeight=function maxHeight(_maxHeight){return this.withOptions({maxHeight:_maxHeight})},_proto.minHeight=function minHeight(_minHeight){return this.withOptions({minHeight:_minHeight})},_proto.size=function size(width,height){return this.withOptions({width,height})},_proto.blur=function blur(_blur){return this.withOptions({blur:_blur})},_proto.sharpen=function sharpen(_sharpen){return this.withOptions({sharpen:_sharpen})},_proto.rect=function rect(left,top,width,height){return this.withOptions({rect:{left,top,width,height}})},_proto.format=function format(_format){return this.withOptions({format:_format})},_proto.invert=function invert(_invert){return this.withOptions({invert:_invert})},_proto.orientation=function orientation(_orientation){return this.withOptions({orientation:_orientation})},_proto.quality=function quality(_quality){return this.withOptions({quality:_quality})},_proto.forceDownload=function forceDownload(download){return this.withOptions({download})},_proto.flipHorizontal=function flipHorizontal(){return this.withOptions({flipHorizontal:!0})},_proto.flipVertical=function flipVertical(){return this.withOptions({flipVertical:!0})},_proto.ignoreImageParams=function ignoreImageParams(){return this.withOptions({ignoreImageParams:!0})},_proto.fit=function fit(value){if(-1===validFits.indexOf(value))throw new Error('Invalid fit mode "'+value+'"');return this.withOptions({fit:value})},_proto.crop=function crop(value){if(-1===validCrops.indexOf(value))throw new Error('Invalid crop mode "'+value+'"');return this.withOptions({crop:value})},_proto.saturation=function saturation(_saturation){return this.withOptions({saturation:_saturation})},_proto.auto=function auto(value){if(-1===validAutoModes.indexOf(value))throw new Error('Invalid auto mode "'+value+'"');return this.withOptions({auto:value})},_proto.pad=function pad(_pad){return this.withOptions({pad:_pad})},_proto.vanityName=function vanityName(value){return this.withOptions({vanityName:value})},_proto.frame=function frame(_frame){if(1!==_frame)throw new Error('Invalid frame value "'+_frame+'"');return this.withOptions({frame:_frame})},_proto.url=function url(){return urlForImage(this.options)},_proto.toString=function toString(){return this.url()},ImageUrlBuilder}();return urlBuilder}()}}]);