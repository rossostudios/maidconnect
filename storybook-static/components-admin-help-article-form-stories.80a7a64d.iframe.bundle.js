"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[75073],{"./src/app/actions/help-articles-actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Md:()=>createHelpArticle,ZB:()=>updateHelpArticle,pg:()=>deleteHelpArticle,vp:()=>toggleArticlePublished});var next_cache__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/cache/index.js"),zod__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zod/v4/classic/external.js"),_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/supabase/server-client.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");const HelpArticleSchema=zod__WEBPACK_IMPORTED_MODULE_1__.object({category_id:zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid(),slug:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(100).regex(/^[a-z0-9-]+$/,"Slug must be lowercase letters, numbers, and hyphens only"),title_en:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(200),title_es:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(200),excerpt_en:zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500).optional().nullable(),excerpt_es:zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500).optional().nullable(),content_en:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1),content_es:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1),is_published:zod__WEBPACK_IMPORTED_MODULE_1__.boolean().default(!1),display_order:zod__WEBPACK_IMPORTED_MODULE_1__.number().int().min(0).default(0),tags:zod__WEBPACK_IMPORTED_MODULE_1__.array(zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid()).optional()});async function createHelpArticle(input){try{const supabase=await(0,_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_2__.d)(),{data:{user}}=await supabase.auth.getUser();if(!user)return{success:!1,error:"Unauthorized"};const{data:profile}=await supabase.from("profiles").select("role").eq("id",user.id).single();if("admin"!==profile?.role)return{success:!1,error:"Forbidden: Admin access required"};const validated=HelpArticleSchema.parse(input),{data:existingArticle}=await supabase.from("help_articles").select("id").eq("slug",validated.slug).eq("category_id",validated.category_id).single();if(existingArticle)return{success:!1,error:"An article with this slug already exists in this category"};const{data:article,error:insertError}=await supabase.from("help_articles").insert({category_id:validated.category_id,slug:validated.slug,title_en:validated.title_en,title_es:validated.title_es,excerpt_en:validated.excerpt_en??null,excerpt_es:validated.excerpt_es??null,content_en:validated.content_en,content_es:validated.content_es,is_published:validated.is_published,display_order:validated.display_order}).select("id").single();if(insertError)return console.error("[Create Article Error]",insertError),{success:!1,error:"Failed to create article"};if(validated.tags&&validated.tags.length>0&&article){const tagRelations=validated.tags.map(tagId=>({article_id:article.id,tag_id:tagId}));await supabase.from("help_article_tags_relation").insert(tagRelations)}return(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/[locale]/help"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/[locale]/admin/help"),{success:!0,articleId:article?.id}}catch(error){return console.error("[Create Article Error]",error),error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError?{success:!1,error:error.issues[0]?.message??"Validation error"}:{success:!1,error:"An unexpected error occurred"}}}async function updateHelpArticle(articleId,input){try{const supabase=await(0,_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_2__.d)(),{data:{user}}=await supabase.auth.getUser();if(!user)return{success:!1,error:"Unauthorized"};const{data:profile}=await supabase.from("profiles").select("role").eq("id",user.id).single();if("admin"!==profile?.role)return{success:!1,error:"Forbidden: Admin access required"};const validated=HelpArticleSchema.parse(input),{data:existingArticle}=await supabase.from("help_articles").select("id").eq("slug",validated.slug).eq("category_id",validated.category_id).neq("id",articleId).single();if(existingArticle)return{success:!1,error:"Another article with this slug already exists in this category"};const{error:updateError}=await supabase.from("help_articles").update({category_id:validated.category_id,slug:validated.slug,title_en:validated.title_en,title_es:validated.title_es,excerpt_en:validated.excerpt_en??null,excerpt_es:validated.excerpt_es??null,content_en:validated.content_en,content_es:validated.content_es,is_published:validated.is_published,display_order:validated.display_order}).eq("id",articleId);if(updateError)return console.error("[Update Article Error]",updateError),{success:!1,error:"Failed to update article"};if(void 0!==validated.tags&&(await supabase.from("help_article_tags_relation").delete().eq("article_id",articleId),validated.tags.length>0)){const tagRelations=validated.tags.map(tagId=>({article_id:articleId,tag_id:tagId}));await supabase.from("help_article_tags_relation").insert(tagRelations)}return(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/[locale]/help"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/[locale]/admin/help"),{success:!0}}catch(error){return console.error("[Update Article Error]",error),error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError?{success:!1,error:error.issues[0]?.message??"Validation error"}:{success:!1,error:"An unexpected error occurred"}}}async function deleteHelpArticle(articleId){try{const supabase=await(0,_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_2__.d)(),{data:{user}}=await supabase.auth.getUser();if(!user)return{success:!1,error:"Unauthorized"};const{data:profile}=await supabase.from("profiles").select("role").eq("id",user.id).single();if("admin"!==profile?.role)return{success:!1,error:"Forbidden: Admin access required"};const{error:deleteError}=await supabase.from("help_articles").delete().eq("id",articleId);return deleteError?(console.error("[Delete Article Error]",deleteError),{success:!1,error:"Failed to delete article"}):((0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/[locale]/help"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/[locale]/admin/help"),{success:!0})}catch(error){return console.error("[Delete Article Error]",error),{success:!1,error:"An unexpected error occurred"}}}async function toggleArticlePublished(articleId,isPublished){try{const supabase=await(0,_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_2__.d)(),{data:{user}}=await supabase.auth.getUser();if(!user)return{success:!1,error:"Unauthorized"};const{data:profile}=await supabase.from("profiles").select("role").eq("id",user.id).single();if("admin"!==profile?.role)return{success:!1,error:"Forbidden: Admin access required"};const{error:updateError}=await supabase.from("help_articles").update({is_published:isPublished}).eq("id",articleId);return updateError?(console.error("[Toggle Published Error]",updateError),{success:!1,error:"Failed to update article status"}):((0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/[locale]/help"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/[locale]/admin/help"),{success:!0})}catch(error){return console.error("[Toggle Published Error]",error),{success:!1,error:"An unexpected error occurred"}}}},"./src/components/admin/help/article-form.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>article_form_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),help_articles_actions=__webpack_require__("./src/app/actions/help-articles-actions.ts"),block_editor=__webpack_require__("./src/components/admin/help/block-editor.tsx"),article_viewer=__webpack_require__("./src/components/help/article-viewer.tsx"),tabs=__webpack_require__("./src/components/ui/tabs.tsx"),toast=__webpack_require__("./src/lib/toast.ts"),utils=__webpack_require__("./src/lib/utils.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");const propertyCardClass="rounded-3xl border border-slate-200 dark:border-slate-800/80 bg-white dark:bg-slate-950/60 p-5 shadow-[0_1px_2px_rgba(22,22,22,0.05)] backdrop-blur",propertyHeadingClass="text-[11px] font-semibold uppercase tracking-[0.2em] text-slate-600 dark:text-slate-400",propertyRowClass="grid grid-cols-[110px_1fr] items-center gap-4 rounded-2xl px-2 py-1.5",propertyValueClass="w-full rounded-2xl border border-slate-200 dark:border-slate-800/70 bg-white dark:bg-slate-950 px-3 py-2 text-sm text-slate-900 dark:text-slate-100 outline-none transition focus:border-slate-900 dark:border-slate-100/40 focus:ring-0";function TranslationHealthBadge({fieldValue,otherLangValue,locale}){const isEmpty=!fieldValue||0===fieldValue.trim().length,otherIsEmpty=!otherLangValue||0===otherLangValue.trim().length;return isEmpty&&otherIsEmpty?null:isEmpty&&!otherIsEmpty?(0,jsx_runtime.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1 rounded-full bg-slate-900 dark:bg-slate-100/10 px-2 py-0.5 font-medium text-slate-900 dark:text-slate-100 text-xs",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3 w-3",icon:index_min.afW}),"es"===locale?"Falta traducción":"Missing translation"]}):isEmpty||otherIsEmpty?null:(0,jsx_runtime.jsxs)("span",{className:"ml-2 inline-flex items-center gap-1 rounded-full bg-slate-900 dark:bg-slate-100/10 px-2 py-0.5 font-medium text-slate-900 dark:text-slate-100 text-xs",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3 w-3",icon:index_min.yim}),"es"===locale?"Completo":"Complete"]})}function ArticleForm({locale,categories,tags,initialData}){const router=(0,navigation.useRouter)(),[isPreview,setIsPreview]=(0,react.useState)(!1),[saving,setSaving]=(0,react.useState)(!1),[previewMode,setPreviewMode]=(0,react.useState)("both"),[categoryId,setCategoryId]=(0,react.useState)(initialData?.category_id??categories[0]?.id??""),[slug,setSlug]=(0,react.useState)(initialData?.slug??""),[titleEn,setTitleEn]=(0,react.useState)(initialData?.title_en??""),[titleEs,setTitleEs]=(0,react.useState)(initialData?.title_es??""),[excerptEn,setExcerptEn]=(0,react.useState)(initialData?.excerpt_en??""),[excerptEs,setExcerptEs]=(0,react.useState)(initialData?.excerpt_es??""),[contentEn,setContentEn]=(0,react.useState)(initialData?.content_en??""),[contentEs,setContentEs]=(0,react.useState)(initialData?.content_es??""),[isPublished,setIsPublished]=(0,react.useState)(initialData?.is_published??!1),[displayOrder,setDisplayOrder]=(0,react.useState)(initialData?.display_order??0),[selectedTags,setSelectedTags]=(0,react.useState)(()=>{const tagIds=initialData?.tags?.map(t=>t.id)??[];return console.log("[ArticleForm] Initializing selectedTags:",{initialDataTags:initialData?.tags,tagIds,hasInitialData:!!initialData}),tagIds}),handleSave=async(publish=!1)=>{if(categoryId)if(slug)if(titleEn&&titleEs)if(contentEn&&contentEs){setSaving(!0);try{const articleData={category_id:categoryId,slug,title_en:titleEn,title_es:titleEs,excerpt_en:excerptEn||null,excerpt_es:excerptEs||null,content_en:contentEn,content_es:contentEs,is_published:publish||isPublished,display_order:displayOrder,tags:selectedTags};let result;result=initialData?await(0,help_articles_actions.ZB)(initialData.id,articleData):await(0,help_articles_actions.Md)(articleData),result.success?(toast.o.success("es"===locale?publish?"Artículo publicado":"Artículo guardado":publish?"Article published":"Article saved"),router.push(`/${locale}/admin/help/articles`)):toast.o.error(result.error??("es"===locale?"Error al guardar":"Failed to save"))}catch(error){console.error("[Save Article Error]",error),toast.o.error("es"===locale?"Error al guardar artículo":"Failed to save article")}finally{setSaving(!1)}}else toast.o.error("es"===locale?"Ingresa contenido en inglés y español":"Enter content in English and Spanish");else toast.o.error("es"===locale?"Ingresa títulos en inglés y español":"Enter titles in English and Spanish");else toast.o.error("es"===locale?"Ingresa un slug":"Enter a slug");else toast.o.error("es"===locale?"Selecciona una categoría":"Select a category")},selectedCategory=categories.find(c=>c.id===categoryId),categoryName=selectedCategory?"es"===locale?selectedCategory.name_es:selectedCategory.name_en:"",previewArticleEn={_id:initialData?.id??"preview",id:initialData?.id??"preview",title:titleEn,content:contentEn,view_count:0,helpful_count:0,not_helpful_count:0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),tags:selectedTags.map(tagId=>tags.find(t=>t.id===tagId)).filter(t=>!!t)},previewArticleEs={_id:initialData?.id??"preview",id:initialData?.id??"preview",title:titleEs,content:contentEs,view_count:0,helpful_count:0,not_helpful_count:0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString(),tags:selectedTags.map(tagId=>tags.find(t=>t.id===tagId)).filter(t=>!!t)},handleScroll=(e,sourcePane)=>{if("both"!==previewMode)return;const source=e.currentTarget,scrollPercentage=source.scrollTop/(source.scrollHeight-source.clientHeight),otherPane=document.querySelector("en"===sourcePane?"[data-preview-pane='es']":"[data-preview-pane='en']");if(otherPane){const targetScroll=scrollPercentage*(otherPane.scrollHeight-otherPane.clientHeight);otherPane.scrollTop=targetScroll}};return(0,jsx_runtime.jsxs)("div",{className:"min-h-screen bg-white dark:bg-slate-950",children:[(0,jsx_runtime.jsx)("div",{className:"border-slate-200 dark:border-slate-800 border-b bg-white dark:bg-slate-950 px-6 py-4",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jsx_runtime.jsx)("button",{className:"text-slate-600 dark:text-slate-400 transition-colors hover:text-slate-900 dark:text-slate-100",onClick:()=>router.back(),type:"button",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5",icon:index_min.clt})}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h1",{className:"font-semibold text-slate-900 dark:text-slate-100 text-xl",children:initialData?"es"===locale?"Editar Artículo":"Edit Article":"es"===locale?"Nuevo Artículo":"New Article"}),(0,jsx_runtime.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-sm",children:"es"===locale?"Actualiza el contenido del artículo":"Update the article content"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jsx_runtime.jsxs)("button",{className:"flex items-center gap-2 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-3 py-2 text-slate-600 dark:text-slate-400 text-sm transition-colors hover:bg-white dark:bg-slate-950",onClick:()=>setIsPreview(!isPreview),type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.tCQ}),isPreview?"es"===locale?"Editar":"Edit":"es"===locale?"Vista Previa":"Preview"]}),(0,jsx_runtime.jsx)("button",{className:"rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-4 py-2 text-slate-600 dark:text-slate-400 text-sm transition-colors hover:bg-white dark:bg-slate-950 disabled:cursor-not-allowed disabled:opacity-50",disabled:saving,onClick:()=>{handleSave(!1)},type:"button",children:"es"===locale?"Guardar Borrador":"Save Draft"}),(0,jsx_runtime.jsx)("button",{className:"rounded-lg bg-slate-900 dark:bg-slate-100 px-4 py-2 font-medium text-sm text-white dark:text-slate-950 transition-colors hover:bg-slate-900 dark:bg-slate-100 disabled:cursor-not-allowed disabled:opacity-50",disabled:saving,onClick:()=>{handleSave(!0)},type:"button",children:"es"===locale?"Publicar":"Publish"})]})]})}),isPreview?(0,jsx_runtime.jsxs)("div",{className:"rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950",children:[(0,jsx_runtime.jsx)("div",{className:"border-slate-200 dark:border-slate-800 border-b bg-white dark:bg-slate-950 px-6 py-3",children:(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-3",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5 text-slate-600 dark:text-slate-400",icon:index_min.tCQ}),(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("p",{className:"font-medium text-slate-900 dark:text-slate-100 text-sm",children:"es"===locale?"Vista Previa":"Preview Mode"}),(0,jsx_runtime.jsx)("p",{className:"text-slate-600 dark:text-slate-400 text-xs",children:"es"===locale?"Comparar idiomas lado a lado":"Compare languages side-by-side"})]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-1 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-1",children:[(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("rounded px-3 py-1.5 font-medium text-xs","en"===previewMode?"bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-950 shadow-sm":"text-slate-600 dark:text-slate-400"),onClick:()=>setPreviewMode("en"),type:"button",children:"EN"}),(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("rounded px-3 py-1.5 font-medium text-xs","es"===previewMode?"bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-950 shadow-sm":"text-slate-600 dark:text-slate-400"),onClick:()=>setPreviewMode("es"),type:"button",children:"ES"}),(0,jsx_runtime.jsx)("button",{className:(0,utils.cn)("rounded px-3 py-1.5 font-medium text-xs","both"===previewMode?"bg-slate-900 dark:bg-slate-100 text-white dark:text-slate-950 shadow-sm":"text-slate-600 dark:text-slate-400"),onClick:()=>setPreviewMode("both"),type:"button",children:"es"===locale?"Ambos":"Both"})]})]})}),"both"===previewMode?(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 divide-x divide-[#f8fafc]",children:[(0,jsx_runtime.jsxs)("div",{className:"max-h-[800px] overflow-y-auto p-8","data-preview-pane":"en",onScroll:e=>handleScroll(e,"en"),children:[(0,jsx_runtime.jsxs)("div",{className:"mb-4 flex items-center gap-2 border-slate-200 dark:border-slate-800 border-b pb-2",children:[(0,jsx_runtime.jsx)("span",{className:"rounded-full bg-[#e2e8f0]/30 px-2 py-0.5 font-medium text-slate-600 dark:text-slate-400 text-xs",children:"English"}),!titleEn&&(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1 text-slate-900 dark:text-slate-100 text-xs",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3 w-3",icon:index_min.afW}),"Missing title"]}),!contentEn&&(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1 text-slate-900 dark:text-slate-100 text-xs",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3 w-3",icon:index_min.afW}),"Missing content"]})]}),(0,jsx_runtime.jsx)(article_viewer.Z,{article:previewArticleEn,categoryName:"en"===locale?categoryName:selectedCategory?.name_en??"",categorySlug:selectedCategory?.slug??"",relatedArticles:[],showRelatedArticles:!1})]}),(0,jsx_runtime.jsxs)("div",{className:"max-h-[800px] overflow-y-auto p-8","data-preview-pane":"es",onScroll:e=>handleScroll(e,"es"),children:[(0,jsx_runtime.jsxs)("div",{className:"mb-4 flex items-center gap-2 border-slate-200 dark:border-slate-800 border-b pb-2",children:[(0,jsx_runtime.jsx)("span",{className:"rounded-full bg-[#e2e8f0]/30 px-2 py-0.5 font-medium text-slate-600 dark:text-slate-400 text-xs",children:"Español"}),!titleEs&&(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1 text-slate-900 dark:text-slate-100 text-xs",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3 w-3",icon:index_min.afW}),"Falta título"]}),!contentEs&&(0,jsx_runtime.jsxs)("span",{className:"flex items-center gap-1 text-slate-900 dark:text-slate-100 text-xs",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-3 w-3",icon:index_min.afW}),"Falta contenido"]})]}),(0,jsx_runtime.jsx)(article_viewer.Z,{article:previewArticleEs,categoryName:"es"===locale?categoryName:selectedCategory?.name_es??"",categorySlug:selectedCategory?.slug??"",relatedArticles:[],showRelatedArticles:!1})]})]}):(0,jsx_runtime.jsxs)("div",{className:"p-8",children:[(0,jsx_runtime.jsx)("div",{className:"mb-4 flex items-center gap-2 border-slate-200 dark:border-slate-800 border-b pb-2",children:(0,jsx_runtime.jsx)("span",{className:"rounded-full bg-[#e2e8f0]/30 px-2 py-0.5 font-medium text-slate-600 dark:text-slate-400 text-xs",children:"en"===previewMode?"English":"Español"})}),(0,jsx_runtime.jsx)(article_viewer.Z,{article:"en"===previewMode?previewArticleEn:previewArticleEs,categoryName:"en"===previewMode?"en"===locale?categoryName:selectedCategory?.name_en??"":"es"===locale?categoryName:selectedCategory?.name_es??"",categorySlug:selectedCategory?.slug??"",relatedArticles:[],showRelatedArticles:!1})]})]}):(0,jsx_runtime.jsx)("div",{className:"mx-auto max-w-7xl px-6 py-6",children:(0,jsx_runtime.jsxs)("div",{className:"grid gap-6 lg:grid-cols-[1fr_340px]",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsxs)(tabs.tU,{defaultValue:"en",children:[(0,jsx_runtime.jsx)("div",{className:"mb-6",children:(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-4",children:(0,jsx_runtime.jsxs)(tabs.j7,{className:"bg-[#e2e8f0]/30",children:[(0,jsx_runtime.jsxs)(tabs.Xi,{value:"en",children:["English",(0,jsx_runtime.jsx)(TranslationHealthBadge,{fieldValue:titleEn||contentEn,locale:"en",otherLangValue:titleEs||contentEs})]}),(0,jsx_runtime.jsxs)(tabs.Xi,{value:"es",children:["Español",(0,jsx_runtime.jsx)(TranslationHealthBadge,{fieldValue:titleEs||contentEs,locale:"es",otherLangValue:titleEn||contentEn})]})]})})}),(0,jsx_runtime.jsx)(tabs.av,{value:"en",children:(0,jsx_runtime.jsxs)("div",{className:"space-y-8",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("input",{className:"w-full border-none px-0 py-2 font-bold text-4xl text-slate-900 dark:text-slate-100 placeholder-[#e2e8f0] outline-none",id:"title-en",onChange:e=>setTitleEn(e.target.value),placeholder:"Untitled",type:"text",value:titleEn})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("textarea",{className:"w-full resize-none border-none px-0 py-2 text-slate-600 dark:text-slate-400 placeholder-[#e2e8f0] outline-none",id:"excerpt-en",onChange:e=>setExcerptEn(e.target.value),placeholder:"Add a brief description... (optional)",rows:2,value:excerptEn})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(block_editor.x,{initialContent:contentEn,locale:"en",onChange:setContentEn})})]})}),(0,jsx_runtime.jsx)(tabs.av,{value:"es",children:(0,jsx_runtime.jsxs)("div",{className:"space-y-8",children:[(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("input",{className:"w-full border-none px-0 py-2 font-bold text-4xl text-slate-900 dark:text-slate-100 placeholder-[#e2e8f0] outline-none",id:"title-es",onChange:e=>setTitleEs(e.target.value),placeholder:"Sin título",type:"text",value:titleEs})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)("textarea",{className:"w-full resize-none border-none px-0 py-2 text-slate-600 dark:text-slate-400 placeholder-[#e2e8f0] outline-none",id:"excerpt-es",onChange:e=>setExcerptEs(e.target.value),placeholder:"Agrega una breve descripción... (opcional)",rows:2,value:excerptEs})}),(0,jsx_runtime.jsx)("div",{children:(0,jsx_runtime.jsx)(block_editor.x,{initialContent:contentEs,locale:"es",onChange:setContentEs})})]})})]})}),(0,jsx_runtime.jsxs)("div",{className:"space-y-5",children:[(0,jsx_runtime.jsxs)("div",{className:propertyCardClass,children:[(0,jsx_runtime.jsx)("p",{className:propertyHeadingClass,children:"es"===locale?"Información":"Information"}),(0,jsx_runtime.jsxs)("div",{className:"mt-4 space-y-3 text-sm",children:[(0,jsx_runtime.jsxs)("div",{className:propertyRowClass,children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-[12px] text-slate-600 dark:text-slate-400",children:"es"===locale?"Categoría":"Category"}),(0,jsx_runtime.jsx)("select",{className:propertyValueClass,id:"category",onChange:e=>setCategoryId(e.target.value),value:categoryId,children:categories.map(cat=>(0,jsx_runtime.jsx)("option",{value:cat.id,children:"es"===locale?cat.name_es:cat.name_en},cat.id))})]}),(0,jsx_runtime.jsxs)("div",{className:propertyRowClass,children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-[12px] text-slate-600 dark:text-slate-400",children:"Slug"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("input",{className:(0,utils.cn)(propertyValueClass,"font-mono text-xs"),id:"slug",onChange:e=>setSlug(e.target.value),placeholder:"article-slug",type:"text",value:slug}),(0,jsx_runtime.jsx)("button",{className:"rounded-2xl border border-slate-200 dark:border-slate-800/70 px-3 py-1.5 font-medium text-[11px] text-slate-600 dark:text-slate-400 transition hover:text-slate-900 dark:text-slate-100",onClick:()=>{const auto=titleEn.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim();setSlug(auto)},type:"button",children:"Auto"})]})]}),(0,jsx_runtime.jsxs)("div",{className:propertyRowClass,children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-[12px] text-slate-600 dark:text-slate-400",children:"es"===locale?"Orden":"Order"}),(0,jsx_runtime.jsx)("input",{className:propertyValueClass,id:"display-order",min:"0",onChange:e=>setDisplayOrder(Number.parseInt(e.target.value)||0),type:"number",value:displayOrder})]})]})]}),(0,jsx_runtime.jsxs)("div",{className:propertyCardClass,children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsx)("p",{className:propertyHeadingClass,children:"es"===locale?"Etiquetas":"Tags"}),selectedTags.length>0&&(0,jsx_runtime.jsx)("span",{className:"rounded-full bg-white dark:bg-slate-950 px-2 py-0.5 font-medium text-slate-900 dark:text-slate-100 text-xs",children:selectedTags.length})]}),selectedTags.length>0&&(0,jsx_runtime.jsx)("div",{className:"mt-3 flex flex-wrap gap-2",children:selectedTags.map(tagId=>{const tag=tags.find(t=>t.id===tagId);return tag?(0,jsx_runtime.jsxs)("span",{className:"inline-flex items-center gap-1 rounded-full bg-[#e2e8f0]/30 px-2 py-1 text-slate-600 dark:text-slate-400 text-xs",children:[(0,jsx_runtime.jsx)("span",{children:"es"===locale?tag.name_es:tag.name_en}),(0,jsx_runtime.jsx)("button",{className:"text-slate-600 dark:text-slate-400/70",onClick:()=>{setSelectedTags(selectedTags.filter(id=>id!==tagId))},title:"es"===locale?"Remover":"Remove",type:"button",children:"×"})]},tagId):null})}),(0,jsx_runtime.jsx)("div",{className:"mt-3 max-h-48 space-y-1 overflow-y-auto",children:0===tags.length?(0,jsx_runtime.jsx)("p",{className:"text-slate-600 dark:text-slate-400/70 text-xs",children:"es"===locale?"No hay etiquetas":"No tags"}):tags.map(tag=>(0,jsx_runtime.jsxs)("label",{className:"flex cursor-pointer items-center gap-2 rounded-lg px-2 py-1 text-slate-600 dark:text-slate-400 text-xs hover:bg-white dark:bg-slate-950",children:[(0,jsx_runtime.jsx)("input",{checked:selectedTags.includes(tag.id),className:"h-3.5 w-3.5 rounded border-[#94a3b8]/40 text-slate-900 dark:text-slate-100 focus:ring-0",onChange:e=>{e.target.checked?setSelectedTags([...selectedTags,tag.id]):setSelectedTags(selectedTags.filter(id=>id!==tag.id))},type:"checkbox"}),(0,jsx_runtime.jsx)("span",{className:"flex-1",children:"es"===locale?tag.name_es:tag.name_en})]},tag.id))})]}),(0,jsx_runtime.jsxs)("div",{className:propertyCardClass,children:[(0,jsx_runtime.jsx)("p",{className:propertyHeadingClass,children:"es"===locale?"Estado":"Status"}),(0,jsx_runtime.jsxs)("div",{className:(0,utils.cn)(propertyRowClass,"mt-4 bg-white dark:bg-slate-950/60"),children:[(0,jsx_runtime.jsx)("span",{className:"font-medium text-[12px] text-slate-600 dark:text-slate-400",children:"es"===locale?"Estado":"Status"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,jsx_runtime.jsx)("span",{className:"rounded-full bg-white dark:bg-slate-950 px-3 py-1 font-medium text-slate-600 dark:text-slate-400 text-sm",children:isPublished?"es"===locale?"Publicado":"Published":"es"===locale?"Borrador":"Draft"}),(0,jsx_runtime.jsx)("label",{className:"inline-flex cursor-pointer items-center gap-2",children:(0,jsx_runtime.jsx)("input",{checked:isPublished,className:"h-5 w-10 cursor-pointer rounded-full border-[#94a3b8]/40 text-slate-900 dark:text-slate-100 focus:ring-[#64748b]",onChange:e=>setIsPublished(e.target.checked),type:"checkbox"})})]})]})]})]})]})})]})}try{ArticleForm.displayName="ArticleForm",ArticleForm.__docgenInfo={description:"",displayName:"ArticleForm",props:{locale:{defaultValue:null,description:"",name:"locale",required:!0,type:{name:"enum",value:[{value:'"en"'},{value:'"es"'}]}},categories:{defaultValue:null,description:"",name:"categories",required:!0,type:{name:"Category[]"}},tags:{defaultValue:null,description:"",name:"tags",required:!0,type:{name:"Tag[]"}},initialData:{defaultValue:null,description:"",name:"initialData",required:!1,type:{name:"{ id: string; category_id: string; slug: string; title_en: string; title_es: string; excerpt_en: string; excerpt_es: string; content_en: string; content_es: string; is_published: boolean; display_order: number; tags?: ArticleTag[]; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/admin/help/article-form.tsx#ArticleForm"]={docgenInfo:ArticleForm.__docgenInfo,name:"ArticleForm",path:"src/components/admin/help/article-form.tsx#ArticleForm"})}catch(__react_docgen_typescript_loader_error){}const article_form_stories={title:"Admin/Help/ArticleForm",component:ArticleForm,parameters:{layout:"centered"},tags:["autodocs"]},Default={args:{}},__namedExportsOrder=["Default"]},"./src/components/ui/tabs.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Xi:()=>TabsTrigger,av:()=>TabsContent,j7:()=>TabsList,tU:()=>Tabs});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_radix_ui_react_tabs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@radix-ui/react-tabs/dist/index.mjs"),_lib_utils__WEBPACK_IMPORTED_MODULE_3__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./src/lib/utils.ts"));const Tabs=_radix_ui_react_tabs__WEBPACK_IMPORTED_MODULE_1__.bL,TabsList=({className,ref,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_tabs__WEBPACK_IMPORTED_MODULE_1__.B8,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("inline-flex h-12 items-center justify-center rounded-lg bg-[#f8fafc] p-1 text-[#94a3b8]",className),ref,...props});TabsList.displayName=_radix_ui_react_tabs__WEBPACK_IMPORTED_MODULE_1__.B8.displayName;const TabsTrigger=({className,ref,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_tabs__WEBPACK_IMPORTED_MODULE_1__.l9,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-6 py-2 font-medium text-sm transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#64748b] focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-[#f8fafc] data-[state=active]:text-[#0f172a] data-[state=active]:shadow-sm","data-[state=inactive]:text-[#94a3b8] data-[state=inactive]:hover:text-[#0f172a]",className),ref,...props});TabsTrigger.displayName=_radix_ui_react_tabs__WEBPACK_IMPORTED_MODULE_1__.l9.displayName;const TabsContent=({className,ref,...props})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_radix_ui_react_tabs__WEBPACK_IMPORTED_MODULE_1__.UC,{className:(0,_lib_utils__WEBPACK_IMPORTED_MODULE_3__.cn)("mt-6 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[#64748b] focus-visible:ring-offset-2",className),ref,...props});TabsContent.displayName=_radix_ui_react_tabs__WEBPACK_IMPORTED_MODULE_1__.UC.displayName;try{Tabs.displayName="Tabs",Tabs.__docgenInfo={description:"",displayName:"Tabs",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/tabs.tsx#Tabs"]={docgenInfo:Tabs.__docgenInfo,name:"Tabs",path:"src/components/ui/tabs.tsx#Tabs"})}catch(__react_docgen_typescript_loader_error){}try{TabsList.displayName="TabsList",TabsList.__docgenInfo={description:"",displayName:"TabsList",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"RefObject<HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/tabs.tsx#TabsList"]={docgenInfo:TabsList.__docgenInfo,name:"TabsList",path:"src/components/ui/tabs.tsx#TabsList"})}catch(__react_docgen_typescript_loader_error){}try{TabsTrigger.displayName="TabsTrigger",TabsTrigger.__docgenInfo={description:"",displayName:"TabsTrigger",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"RefObject<HTMLButtonElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/tabs.tsx#TabsTrigger"]={docgenInfo:TabsTrigger.__docgenInfo,name:"TabsTrigger",path:"src/components/ui/tabs.tsx#TabsTrigger"})}catch(__react_docgen_typescript_loader_error){}try{TabsContent.displayName="TabsContent",TabsContent.__docgenInfo={description:"",displayName:"TabsContent",props:{asChild:{defaultValue:null,description:"",name:"asChild",required:!1,type:{name:"boolean"}},ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"RefObject<HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/ui/tabs.tsx#TabsContent"]={docgenInfo:TabsContent.__docgenInfo,name:"TabsContent",path:"src/components/ui/tabs.tsx#TabsContent"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/supabase/server-client.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>createSupabaseServerClient});var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@supabase/ssr/dist/module/index.js"),next_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/cache/index.js"),next_headers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js");async function createSupabaseServerClient(){(0,next_cache__WEBPACK_IMPORTED_MODULE_1__.Mo)();const supabaseUrl="https://hvnetxfsrtplextvtwfx.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2bmV0eGZzcnRwbGV4dHZ0d2Z4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1ODc0NTEsImV4cCI6MjA3NzE2MzQ1MX0.7-N06om_ntUuGP1NZ0Zcqz01s975xJfiKno34aIW__o";const cookieStore=await(0,next_headers__WEBPACK_IMPORTED_MODULE_2__.UL)();return(0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl,supabaseKey,{cookies:{getAll:()=>cookieStore.getAll(),setAll(cookiesToSet){try{cookiesToSet.forEach(({name,value,options})=>cookieStore.set(name,value,options))}catch{}}}})}}}]);