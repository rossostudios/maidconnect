"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[24081,85760],{"./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HugeiconsIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none"},HugeiconsIcon=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({color="currentColor",size=24,strokeWidth,absoluteStrokeWidth=!1,className="",altIcon,showAlt=!1,icon,primaryColor,secondaryColor,disableSecondaryOpacity=!1,...rest},ref)=>{const calculatedStrokeWidth=void 0!==strokeWidth?absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth:void 0,strokeProps=void 0!==calculatedStrokeWidth?{strokeWidth:calculatedStrokeWidth,stroke:"currentColor"}:{},elementProps={ref,...defaultAttributes,width:size,height:size,color:primaryColor||color,className,...strokeProps,...rest},svgChildren=[...showAlt&&altIcon?altIcon:icon].sort(([,a],[,b])=>{const hasOpacityA=void 0!==a.opacity;return void 0!==b.opacity?1:hasOpacityA?-1:0}).map(([tag,attrs])=>{const isSecondaryPath=void 0!==attrs.opacity,pathOpacity=isSecondaryPath&&!disableSecondaryOpacity?attrs.opacity:void 0,fillProps=secondaryColor?{...void 0!==attrs.stroke?{stroke:isSecondaryPath?secondaryColor:primaryColor||color}:{fill:isSecondaryPath?secondaryColor:primaryColor||color}}:{};return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(tag,{...attrs,...strokeProps,...fillProps,opacity:pathOpacity,key:attrs.key})});return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("svg",elementProps,svgChildren)});HugeiconsIcon.displayName="HugeiconsIcon"},"./src/components/navigation/dashboard-mobile-nav.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{ActiveBookings:()=>ActiveBookings,CustomerView:()=>CustomerView,ProfessionalView:()=>ProfessionalView,WithBadges:()=>WithBadges,__namedExportsOrder:()=>__namedExportsOrder,default:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_dashboard_mobile_nav__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/navigation/dashboard-mobile-nav.tsx"),console=__webpack_require__("./node_modules/console-browserify/index.js");const __WEBPACK_DEFAULT_EXPORT__={title:"Navigation/DashboardMobileNav",component:_dashboard_mobile_nav__WEBPACK_IMPORTED_MODULE_1__.q,parameters:{layout:"fullscreen",viewport:{defaultViewport:"mobile1"}},tags:["autodocs"],argTypes:{userRole:{control:"select",options:["customer","professional"],description:"The user's role (affects labels)"}}},CustomerView={args:{userRole:"customer",dashboardHref:"/dashboard/customer",bookingsHref:"/dashboard/customer/bookings",messagesHref:"/dashboard/customer/messages",profileHref:"/dashboard/customer",onNotificationsClick:()=>console.log("Notifications clicked")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-20",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Customer Dashboard"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-2 text-slate-600",children:"Mobile navigation at bottom"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})]})]},ProfessionalView={args:{userRole:"professional",dashboardHref:"/dashboard/pro",bookingsHref:"/dashboard/pro/bookings",messagesHref:"/dashboard/pro/messages",profileHref:"/dashboard/pro",onNotificationsClick:()=>console.log("Notifications clicked")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-20",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Professional Dashboard"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-2 text-slate-600",children:'Notice "Jobs" instead of "Bookings"'})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})]})]},WithBadges={args:{userRole:"customer",dashboardHref:"/dashboard/customer",bookingsHref:"/dashboard/customer/bookings",messagesHref:"/dashboard/customer/messages",profileHref:"/dashboard/customer",onNotificationsClick:()=>console.log("Notifications clicked")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-20",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Dashboard"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-2 text-slate-600",children:"With unread badges on Messages and Alerts"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})]})],parameters:{mockData:{unreadCount:5,notificationUnreadCount:3}}},ActiveBookings={args:{userRole:"customer",dashboardHref:"/dashboard/customer",bookingsHref:"/dashboard/customer/bookings",messagesHref:"/dashboard/customer/messages",profileHref:"/dashboard/customer",onNotificationsClick:()=>console.log("Notifications clicked")},decorators:[Story=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"min-h-screen bg-slate-50 pb-20",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"p-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"My Bookings"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-2 text-slate-600",children:"Bookings tab is active"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Story,{})]})],parameters:{nextjs:{navigation:{pathname:"/dashboard/customer/bookings"}}}},__namedExportsOrder=["CustomerView","ProfessionalView","WithBadges","ActiveBookings"]},"./src/components/navigation/dashboard-mobile-nav.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{q:()=>DashboardMobileNav});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),_hooks_use_notification_unread_count__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/hooks/use-notification-unread-count.ts"),_hooks_use_unread_count__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/hooks/use-unread-count.ts"),_i18n_routing__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/i18n/routing.ts");function DashboardMobileNav({userRole,dashboardHref,bookingsHref,messagesHref,profileHref,onNotificationsClick}){const pathname=(0,_i18n_routing__WEBPACK_IMPORTED_MODULE_5__.a8)(),{unreadCount}=(0,_hooks_use_unread_count__WEBPACK_IMPORTED_MODULE_4__.U)(),{unreadCount:notificationUnreadCount}=(0,_hooks_use_notification_unread_count__WEBPACK_IMPORTED_MODULE_3__.b)(),isActive=href=>{if(href.includes("#")){const basePath=href.split("#")[0];return pathname===basePath}return href.includes("bookings")?pathname.includes("bookings"):href.includes("messages")?pathname.includes("messages"):pathname===href},navItems=[{href:dashboardHref,label:"Home",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.wfd,active:pathname===dashboardHref},{href:bookingsHref,label:"customer"===userRole?"Bookings":"Jobs",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.vxL,active:isActive(bookingsHref)},{href:messagesHref,label:"Messages",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.s7I,active:isActive(messagesHref),badge:unreadCount},{href:null,label:"Alerts",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Hl8,active:!1,badge:notificationUnreadCount,onClick:onNotificationsClick},{href:profileHref,label:"Profile",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.nys,active:isActive(profileHref)}];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-40 border-t border-slate-200 bg-white shadow-[0_-4px_12px_rgba(0,0,0,0.05)] md:hidden",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"mx-auto flex max-w-screen-xl",children:navItems.map(item=>{const IconComponent=item.icon,isItemActive=item.active;return item.onClick?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("button",{className:"relative flex flex-1 flex-col items-center justify-center gap-1 py-3 transition-colors active:scale-95",onClick:item.onClick,type:"button",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-6 w-6 "+(isItemActive?"text-slate-900":"text-slate-600"),icon:IconComponent}),void 0!==item.badge&&item.badge>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"absolute -right-1 -top-1 flex h-5 min-w-[18px] items-center justify-center rounded-full bg-slate-900 px-1.5 text-[10px] font-bold text-white",children:item.badge>9?"9+":item.badge})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-xs "+(isItemActive?"font-semibold text-slate-900":"text-slate-600"),children:item.label})]},item.label):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(_i18n_routing__WEBPACK_IMPORTED_MODULE_5__.N_,{className:"relative flex flex-1 flex-col items-center justify-center gap-1 py-3 transition-colors active:scale-95",href:item.href,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"relative",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-6 w-6 "+(isItemActive?"text-slate-900":"text-slate-600"),icon:IconComponent}),void 0!==item.badge&&item.badge>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"absolute -right-1 -top-1 flex h-5 min-w-[18px] items-center justify-center rounded-full bg-slate-900 px-1.5 text-[10px] font-bold text-white",children:item.badge>9?"9+":item.badge})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-xs "+(isItemActive?"font-semibold text-slate-900":"text-slate-600"),children:item.label})]},item.label)})})})}try{DashboardMobileNav.displayName="DashboardMobileNav",DashboardMobileNav.__docgenInfo={description:"",displayName:"DashboardMobileNav",props:{userRole:{defaultValue:null,description:"",name:"userRole",required:!0,type:{name:"enum",value:[{value:'"customer"'},{value:'"professional"'}]}},dashboardHref:{defaultValue:null,description:"",name:"dashboardHref",required:!0,type:{name:"string"}},bookingsHref:{defaultValue:null,description:"",name:"bookingsHref",required:!0,type:{name:"string"}},messagesHref:{defaultValue:null,description:"",name:"messagesHref",required:!0,type:{name:"string"}},profileHref:{defaultValue:null,description:"",name:"profileHref",required:!0,type:{name:"string"}},onNotificationsClick:{defaultValue:null,description:"",name:"onNotificationsClick",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/navigation/dashboard-mobile-nav.tsx#DashboardMobileNav"]={docgenInfo:DashboardMobileNav.__docgenInfo,name:"DashboardMobileNav",path:"src/components/navigation/dashboard-mobile-nav.tsx#DashboardMobileNav"})}catch(__react_docgen_typescript_loader_error){}},"./src/hooks/use-notification-unread-count.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>useNotificationUnreadCount});var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@tanstack/react-query/build/modern/useQuery.js"),_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function useNotificationUnreadCount(){const queryClient=(0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__.jE)(),{data,isLoading,error,refetch}=(0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__.I)({queryKey:["notifications","unread-count"],queryFn:async()=>{const response=await fetch("/api/notifications/unread-count");if(!response.ok)throw new Error("Failed to fetch unread count");return(await response.json()).unreadCount||0},staleTime:3e4,refetchInterval:6e4,refetchOnWindowFocus:!1});return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{Promise.all([__webpack_require__.e(60921),__webpack_require__.e(52136)]).then(__webpack_require__.bind(__webpack_require__,"./src/lib/supabase/browser-client.ts")).then(({createSupabaseBrowserClient})=>{const supabase=createSupabaseBrowserClient(),channel=supabase.channel("notification-unread-count-updates").on("postgres_changes",{event:"*",schema:"public",table:"notifications"},()=>{queryClient.invalidateQueries({queryKey:["notifications","unread-count"]})}).subscribe(status=>{"CHANNEL_ERROR"===status&&console.warn("Notification channel error")});return()=>{supabase.removeChannel(channel)}})},[queryClient]),{unreadCount:data??0,isLoading,error:error?error instanceof Error?error.message:"Unknown error":null,refresh:()=>refetch()}}},"./src/hooks/use-unread-count.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>useUnreadCount});var _tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@tanstack/react-query/build/modern/useQuery.js"),_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@tanstack/react-query/build/modern/QueryClientProvider.js"),react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),console=__webpack_require__("./node_modules/console-browserify/index.js");function useUnreadCount(){const queryClient=(0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_1__.jE)(),{data,isLoading,error,refetch}=(0,_tanstack_react_query__WEBPACK_IMPORTED_MODULE_0__.I)({queryKey:["messages","unread-count"],queryFn:async()=>{const response=await fetch("/api/messages/unread-count");if(!response.ok)throw new Error("Failed to fetch unread count");return(await response.json()).unreadCount||0},staleTime:3e4,refetchInterval:6e4,refetchOnWindowFocus:!1});return(0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)(()=>{Promise.all([__webpack_require__.e(60921),__webpack_require__.e(52136)]).then(__webpack_require__.bind(__webpack_require__,"./src/lib/supabase/browser-client.ts")).then(({createSupabaseBrowserClient})=>{const supabase=createSupabaseBrowserClient(),channel=supabase.channel("unread-count-updates").on("postgres_changes",{event:"*",schema:"public",table:"conversations"},()=>{queryClient.invalidateQueries({queryKey:["messages","unread-count"]})}).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},()=>{queryClient.invalidateQueries({queryKey:["messages","unread-count"]})}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"messages"},()=>{queryClient.invalidateQueries({queryKey:["messages","unread-count"]})}).subscribe(status=>{"CHANNEL_ERROR"===status&&console.warn("Messages unread count channel error")});return()=>{supabase.removeChannel(channel)}})},[queryClient]),{unreadCount:data??0,isLoading,error:error?error instanceof Error?error.message:"Unknown error":null,refresh:()=>refetch()}}},"./src/i18n/routing.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{DT:()=>routing,N_:()=>Link,a8:()=>usePathname,rd:()=>useRouter});var next_intl_navigation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next-intl/dist/esm/production/navigation/react-client/createNavigation.js");const routing=(0,__webpack_require__("./node_modules/next-intl/dist/esm/production/routing/defineRouting.js").A)({locales:["en","es"],defaultLocale:"en",localeCookie:{name:"NEXT_LOCALE",maxAge:31536e3}}),{Link,redirect,usePathname,useRouter}=(0,next_intl_navigation__WEBPACK_IMPORTED_MODULE_0__.A)(routing)}}]);