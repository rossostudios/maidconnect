"use strict";(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[11096,24081],{"./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>HugeiconsIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none"},HugeiconsIcon=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({color="currentColor",size=24,strokeWidth,absoluteStrokeWidth=!1,className="",altIcon,showAlt=!1,icon,primaryColor,secondaryColor,disableSecondaryOpacity=!1,...rest},ref)=>{const calculatedStrokeWidth=void 0!==strokeWidth?absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth:void 0,strokeProps=void 0!==calculatedStrokeWidth?{strokeWidth:calculatedStrokeWidth,stroke:"currentColor"}:{},elementProps={ref,...defaultAttributes,width:size,height:size,color:primaryColor||color,className,...strokeProps,...rest},svgChildren=[...showAlt&&altIcon?altIcon:icon].sort(([,a],[,b])=>{const hasOpacityA=void 0!==a.opacity;return void 0!==b.opacity?1:hasOpacityA?-1:0}).map(([tag,attrs])=>{const isSecondaryPath=void 0!==attrs.opacity,pathOpacity=isSecondaryPath&&!disableSecondaryOpacity?attrs.opacity:void 0,fillProps=secondaryColor?{...void 0!==attrs.stroke?{stroke:isSecondaryPath?secondaryColor:primaryColor||color}:{fill:isSecondaryPath?secondaryColor:primaryColor||color}}:{};return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(tag,{...attrs,...strokeProps,...fillProps,opacity:pathOpacity,key:attrs.key})});return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("svg",elementProps,svgChildren)});HugeiconsIcon.displayName="HugeiconsIcon"},"./node_modules/next-intl/dist/esm/production/react-client/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c3:()=>e});var use_intl__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/use-intl/dist/esm/production/react.js");function o(r,t){return(...r)=>{try{return t(...r)}catch{throw new Error(void 0)}}}const e=o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.c3);o(0,use_intl__WEBPACK_IMPORTED_MODULE_0__.kc)},"./src/components/services/service-card.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>ServiceCard});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),next_intl__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js");function ServiceCard({service,onEdit,onDelete,showActions=!0}){const t=(0,next_intl__WEBPACK_IMPORTED_MODULE_3__.c3)("components.serviceCard");return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"group rounded-[24px] border-2 p-6 shadow-sm transition "+(service.isActive?"border-[#e2e8f0] bg-[#f8fafc]":"border-[bg-[#f8fafc]] bg-[#f8fafc] opacity-60"),children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-4 flex items-start justify-between",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("h3",{className:"font-semibold text-[#0f172a] text-lg",children:service.name}),service.isFeatured&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"rounded-full bg-[#64748b] px-2 py-1 font-medium text-[#f8fafc] text-xs",children:t("featured")}),!service.isActive&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"rounded-full bg-[#94a3b8] px-2 py-1 font-medium text-[#f8fafc] text-xs",children:t("inactive")})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mt-1 text-[#94a3b8] text-sm",children:t(`serviceType.${service.serviceType}`)})]}),showActions&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex gap-2",children:[onEdit&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"rounded-lg border-2 border-[#e2e8f0] bg-[#f8fafc] p-2 transition hover:bg-[#f8fafc]",onClick:()=>onEdit(service),type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-4 w-4 text-[#0f172a]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.WHm})}),onDelete&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{className:"rounded-lg border-2 border-[#64748b]/30 bg-[#f8fafc] p-2 transition hover:bg-[#64748b]/10",onClick:()=>onDelete(service.id),type:"button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-4 w-4 text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.rvS})})]})]}),service.description&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("p",{className:"mb-4 line-clamp-2 text-[#94a3b8] text-sm",children:service.description}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mb-4 flex items-center gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-bold text-2xl text-[#64748b]",children:(price=service.basePriceCop,`$${(price/1e3).toFixed(0)}k`)}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-[#94a3b8] text-sm",children:["/ ",t(`pricingUnit.${service.pricingUnit}`)]})]}),service.estimatedDurationMinutes&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-1 text-[#94a3b8] text-sm",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-4 w-4",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.p19}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{children:(minutes=>{if(!minutes)return null;const hours=Math.floor(minutes/60),mins=minutes%60;return hours>0&&mins>0?`${hours}h ${mins}m`:hours>0?`${hours}h`:`${mins}m`})(service.estimatedDurationMinutes)})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-4 border-[#e2e8f0] border-t pt-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-1",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_hugeicons_react__WEBPACK_IMPORTED_MODULE_2__.n,{className:"h-4 w-4 text-[#64748b]",icon:_hugeicons_core_free_icons__WEBPACK_IMPORTED_MODULE_1__.Gg5}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"font-medium text-[#0f172a] text-sm",children:service.averageRating>0?service.averageRating.toFixed(1):"N/A"})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#94a3b8] text-xs",children:"•"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("span",{className:"text-[#94a3b8] text-sm",children:[service.bookingCount," ",t("bookings")]}),service.requiresApproval&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#94a3b8] text-xs",children:"•"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("span",{className:"text-[#94a3b8] text-sm",children:t("requiresApproval")})]})]}),service.includedItems.length>0&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"mt-4 rounded-xl bg-[#f8fafc] p-3",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("p",{className:"mb-2 font-medium text-[#0f172a] text-xs",children:[t("included"),":"]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("ul",{className:"space-y-1",children:[service.includedItems.slice(0,3).map((item,index)=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("li",{className:"text-[#94a3b8] text-xs",children:["• ",item]},index)),service.includedItems.length>3&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("li",{className:"text-[#94a3b8] text-xs",children:["+ ",service.includedItems.length-3," ",t("more")]})]})]})]});var price}try{ServiceCard.displayName="ServiceCard",ServiceCard.__docgenInfo={description:"Service Card Component\n\nDisplays a single service with details, pricing, and actions.",displayName:"ServiceCard",props:{service:{defaultValue:null,description:"",name:"service",required:!0,type:{name:"ProfessionalService"}},onEdit:{defaultValue:null,description:"",name:"onEdit",required:!1,type:{name:"(service: ProfessionalService) => void"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!1,type:{name:"(serviceId: string) => void"}},showActions:{defaultValue:{value:"true"},description:"",name:"showActions",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/services/service-card.tsx#ServiceCard"]={docgenInfo:ServiceCard.__docgenInfo,name:"ServiceCard",path:"src/components/services/service-card.tsx#ServiceCard"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/services/service-manager.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>service_manager_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/react-client/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");var server_client=__webpack_require__("./src/lib/supabase/server-client.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");function mapDatabaseService(data){return{id:data.id,profileId:data.profile_id,categoryId:data.category_id,name:data.name,description:data.description,serviceType:data.service_type,basePriceCop:data.base_price_cop,pricingUnit:data.pricing_unit,estimatedDurationMinutes:data.estimated_duration_minutes,minDurationMinutes:data.min_duration_minutes,maxDurationMinutes:data.max_duration_minutes,isActive:data.is_active,isFeatured:data.is_featured,requiresApproval:data.requires_approval,advanceBookingHours:data.advance_booking_hours,maxBookingDaysAhead:data.max_booking_days_ahead,requirements:data.requirements||[],includedItems:data.included_items||[],bookingCount:data.booking_count,averageRating:Number.parseFloat(data.average_rating),createdAt:data.created_at,updatedAt:data.updated_at}}var service_card=__webpack_require__("./src/components/services/service-card.tsx"),service_manager_console=__webpack_require__("./node_modules/console-browserify/index.js");function ServiceManager({profileId}){const t=(0,react_client.c3)("components.serviceManager"),[loading,setLoading]=(0,react.useState)(!0),[services,setServices]=(0,react.useState)([]),[filter,setFilter]=(0,react.useState)("all"),[error,setError]=(0,react.useState)(null),loadServices=async()=>{setLoading(!0),setError(null);try{const response=await async function getServices(profileId,activeOnly=!1){try{let query=(await(0,server_client.d)()).from("professional_services").select("*").eq("profile_id",profileId).order("created_at",{ascending:!1});activeOnly&&(query=query.eq("is_active",!0));const{data,error}=await query;return error?(console.error("Error fetching services:",error),{success:!1,error:error.message}):{success:!0,services:data.map(mapDatabaseService)}}catch(error){return console.error("Unexpected error:",error),{success:!1,error:error instanceof Error?error.message:"Unknown error"}}}(profileId,!1);if(!response.success)return void setError(response.error);setServices(response.services)}catch(err){setError(err instanceof Error?err.message:"Unknown error")}finally{setLoading(!1)}};(0,react.useEffect)(()=>{loadServices()},[loadServices]);const handleDelete=async serviceId=>{if(!confirm(t("confirmDelete")))return;const response=await async function deleteService(serviceId){try{const supabase=await(0,server_client.d)(),{error}=await supabase.from("professional_services").update({is_active:!1}).eq("id",serviceId);return error?(console.error("Error deleting service:",error),{success:!1,error:error.message}):{success:!0}}catch(error){return console.error("Unexpected error:",error),{success:!1,error:error instanceof Error?error.message:"Unknown error"}}}(serviceId);response.success?loadServices():alert(response.error)},handleEdit=service=>{service_manager_console.log("Edit service:",service)},filteredServices=services.filter(service=>"active"===filter?service.isActive:"inactive"!==filter||!service.isActive);return loading?(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,jsx_runtime.jsxs)("div",{className:"text-center",children:[(0,jsx_runtime.jsx)("div",{className:"mx-auto mb-4 h-12 w-12 animate-spin rounded-full border-[#64748b] border-t-2 border-b-2"}),(0,jsx_runtime.jsx)("p",{className:"text-[#94a3b8]",children:t("loading")})]})}):error?(0,jsx_runtime.jsxs)("div",{className:"rounded-[24px] border-2 border-[#64748b]/30 bg-[#64748b]/10 p-6",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold text-[#64748b]",children:t("error")}),(0,jsx_runtime.jsx)("p",{className:"mt-2 text-[#64748b] text-sm",children:error}),(0,jsx_runtime.jsx)("button",{className:"mt-4 rounded-xl bg-[#64748b] px-4 py-2 font-medium text-sm text-[#f8fafc] transition hover:bg-[#64748b]",onClick:()=>loadServices(),type:"button",children:t("retry")})]}):(0,jsx_runtime.jsxs)("div",{className:"space-y-6",children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-between",children:[(0,jsx_runtime.jsxs)("div",{children:[(0,jsx_runtime.jsx)("h2",{className:"font-bold text-2xl text-[#0f172a]",children:t("title")}),(0,jsx_runtime.jsx)("p",{className:"text-[#94a3b8] text-sm",children:t("description")})]}),(0,jsx_runtime.jsxs)("button",{className:"flex items-center gap-2 rounded-xl bg-[#64748b] px-4 py-2 font-medium text-sm text-[#f8fafc] transition hover:bg-[#64748b]",type:"button",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min._L6}),t("createService")]})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-5 w-5 text-[#94a3b8]",icon:index_min.YGH}),(0,jsx_runtime.jsxs)("button",{className:"rounded-lg px-4 py-2 font-medium text-sm transition "+("all"===filter?"bg-[#64748b] text-[#f8fafc]":"bg-[#f8fafc] text-[#94a3b8] hover:bg-[#e2e8f0]"),onClick:()=>setFilter("all"),type:"button",children:[t("all")," (",services.length,")"]}),(0,jsx_runtime.jsxs)("button",{className:"rounded-lg px-4 py-2 font-medium text-sm transition "+("active"===filter?"bg-[#64748b] text-[#f8fafc]":"bg-[#f8fafc] text-[#94a3b8] hover:bg-[#e2e8f0]"),onClick:()=>setFilter("active"),type:"button",children:[t("active")," (",services.filter(s=>s.isActive).length,")"]}),(0,jsx_runtime.jsxs)("button",{className:"rounded-lg px-4 py-2 font-medium text-sm transition "+("inactive"===filter?"bg-[#64748b] text-[#f8fafc]":"bg-[#f8fafc] text-[#94a3b8] hover:bg-[#e2e8f0]"),onClick:()=>setFilter("inactive"),type:"button",children:[t("inactive")," (",services.filter(s=>!s.isActive).length,")"]})]}),filteredServices.length>0?(0,jsx_runtime.jsx)("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:filteredServices.map(service=>(0,jsx_runtime.jsx)(service_card.m,{onDelete:handleDelete,onEdit:handleEdit,service,showActions:!0},service.id))}):(0,jsx_runtime.jsxs)("div",{className:"rounded-[24px] border-2 border-[#e2e8f0] bg-[#f8fafc] p-12 text-center",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold text-[#0f172a]",children:t("noServices")}),(0,jsx_runtime.jsx)("p",{className:"mt-2 text-[#94a3b8] text-sm",children:t("noServicesDescription")}),(0,jsx_runtime.jsx)("button",{className:"mt-6 rounded-xl bg-[#64748b] px-6 py-3 font-medium text-[#f8fafc] transition hover:bg-[#64748b]",type:"button",children:t("createFirstService")})]}),(0,jsx_runtime.jsxs)("div",{className:"rounded-xl bg-[#f8fafc] p-4 text-[#64748b] text-sm",children:[(0,jsx_runtime.jsx)("p",{className:"font-semibold",children:t("helpTitle")}),(0,jsx_runtime.jsx)("p",{className:"mt-1 text-[#64748b]",children:t("helpDescription")})]})]})}try{ServiceManager.displayName="ServiceManager",ServiceManager.__docgenInfo={description:"Service Manager Component\n\nMain component for managing a professional's service catalog.\nDisplays all services with filtering and CRUD operations.",displayName:"ServiceManager",props:{profileId:{defaultValue:null,description:"",name:"profileId",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/services/service-manager.tsx#ServiceManager"]={docgenInfo:ServiceManager.__docgenInfo,name:"ServiceManager",path:"src/components/services/service-manager.tsx#ServiceManager"})}catch(__react_docgen_typescript_loader_error){}const service_manager_stories={title:"Services/ServiceManager",component:ServiceManager,parameters:{layout:"padded"},tags:["autodocs"]},Default={},__namedExportsOrder=["Default"]},"./src/lib/supabase/server-client.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{d:()=>createSupabaseServerClient});var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@supabase/ssr/dist/module/index.js"),next_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/cache/index.js"),next_headers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js");async function createSupabaseServerClient(){(0,next_cache__WEBPACK_IMPORTED_MODULE_1__.Mo)();const supabaseUrl="https://hvnetxfsrtplextvtwfx.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2bmV0eGZzcnRwbGV4dHZ0d2Z4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1ODc0NTEsImV4cCI6MjA3NzE2MzQ1MX0.7-N06om_ntUuGP1NZ0Zcqz01s975xJfiKno34aIW__o";const cookieStore=await(0,next_headers__WEBPACK_IMPORTED_MODULE_2__.UL)();return(0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl,supabaseKey,{cookies:{getAll:()=>cookieStore.getAll(),setAll(cookiesToSet){try{cookiesToSet.forEach(({name,value,options})=>cookieStore.set(name,value,options))}catch{}}}})}}}]);