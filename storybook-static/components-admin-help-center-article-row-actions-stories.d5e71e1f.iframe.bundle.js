(self.webpackChunkcasaora=self.webpackChunkcasaora||[]).push([[24081,98043],{"./messages lazy recursive ^\\.\\/.*\\.json$":(module,__unused_webpack_exports,__webpack_require__)=>{var map={"./en.json":["./messages/en.json"],"./es.json":["./messages/es.json",81775]};function webpackAsyncContext(req){if(!__webpack_require__.o(map,req))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e});var ids=map[req],id=ids[0];return Promise.all(ids.slice(1).map(__webpack_require__.e)).then(()=>__webpack_require__.t(id,19))}webpackAsyncContext.keys=()=>Object.keys(map),webpackAsyncContext.id="./messages lazy recursive ^\\.\\/.*\\.json$",module.exports=webpackAsyncContext},"./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{n:()=>HugeiconsIcon});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");const defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none"},HugeiconsIcon=(0,react__WEBPACK_IMPORTED_MODULE_0__.forwardRef)(({color="currentColor",size=24,strokeWidth,absoluteStrokeWidth=!1,className="",altIcon,showAlt=!1,icon,primaryColor,secondaryColor,disableSecondaryOpacity=!1,...rest},ref)=>{const calculatedStrokeWidth=void 0!==strokeWidth?absoluteStrokeWidth?24*Number(strokeWidth)/Number(size):strokeWidth:void 0,strokeProps=void 0!==calculatedStrokeWidth?{strokeWidth:calculatedStrokeWidth,stroke:"currentColor"}:{},elementProps={ref,...defaultAttributes,width:size,height:size,color:primaryColor||color,className,...strokeProps,...rest},svgChildren=[...showAlt&&altIcon?altIcon:icon].sort(([,a],[,b])=>{const hasOpacityA=void 0!==a.opacity;return void 0!==b.opacity?1:hasOpacityA?-1:0}).map(([tag,attrs])=>{const isSecondaryPath=void 0!==attrs.opacity,pathOpacity=isSecondaryPath&&!disableSecondaryOpacity?attrs.opacity:void 0,fillProps=secondaryColor?{...void 0!==attrs.stroke?{stroke:isSecondaryPath?secondaryColor:primaryColor||color}:{fill:isSecondaryPath?secondaryColor:primaryColor||color}}:{};return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)(tag,{...attrs,...strokeProps,...fillProps,opacity:pathOpacity,key:attrs.key})});return(0,react__WEBPACK_IMPORTED_MODULE_0__.createElement)("svg",elementProps,svgChildren)});HugeiconsIcon.displayName="HugeiconsIcon"},"./node_modules/next-intl/dist/esm/production/navigation/react-client/createNavigation.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{A:()=>createNavigation_c});var navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),react_namespaceObject=__webpack_require__.t(react,2),production_react=__webpack_require__("./node_modules/use-intl/dist/esm/production/react.js");var a=react_namespaceObject["use".trim()],process=__webpack_require__("./node_modules/process/browser.js");function utils_n(n){return function(n){return"object"==typeof n?null==n.host&&null==n.hostname:!/^[a-z]+:/i.test(n)}(n)&&!function(n){const t="object"==typeof n?n.pathname:n;return null!=t&&!t.startsWith("/")}(n)}function t(n,t){return n.replace(new RegExp(`^${t}`),"")||"/"}function utils_r(n,t){return t===n||t.startsWith(`${n}/`)}function u(n,t,e){return"string"==typeof n?n:n[t]||e}function utils_i(n){const t=function(){try{return"true"===process.env._next_intl_trailing_slash}catch{return!1}}(),[e,...r]=n.split("#"),u=r.join("#");let i=e;if("/"!==i){const n=i.endsWith("/");t&&!n?i+="/":!t&&n&&(i=i.slice(0,-1))}return u&&(i+="#"+u),i}function utils_c(n,t){const e=utils_i(n),r=utils_i(t);return function s(n){const t=n.replace(/\[\[(\.\.\.[^\]]+)\]\]/g,"?(.*)").replace(/\[(\.\.\.[^\]]+)\]/g,"(.+)").replace(/\[([^\]]+)\]/g,"([^/]+)");return new RegExp(`^${t}$`)}(e).test(r)}function utils_o(n,t){return"never"!==t.mode&&t.prefixes?.[n]||f(n)}function f(n){return"/"+n}function l(n){return n.includes("[[...")}function p(n){return n.includes("[...")}function utils_a(n){return n.includes("[")}function h(n,t){const e=n.split("/"),r=t.split("/"),u=Math.max(e.length,r.length);for(let n=0;n<u;n++){const t=e[n],u=r[n];if(!t&&u)return-1;if(t&&!u)return 1;if(t||u){if(!utils_a(t)&&utils_a(u))return-1;if(utils_a(t)&&!utils_a(u))return 1;if(!p(t)&&p(u))return-1;if(p(t)&&!p(u))return 1;if(!l(t)&&l(u))return-1;if(l(t)&&!l(u))return 1}}return 0}var next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link);function c(e){return"string"==typeof e?{pathname:e}:e}function utils_s(e){function n(e){return String(e)}const t=new URLSearchParams;for(const[r,o]of Object.entries(e))Array.isArray(o)?o.forEach(e=>{t.append(r,n(e))}):t.set(r,n(o));return"?"+t.toString()}function utils_f({pathname:e,locale:n,params:t,pathnames:r,query:i}){function c(e){const c=r[e];let f;if(c){const r=u(c,n,e);f=r,t&&Object.entries(t).forEach(([e,n])=>{let t,r;Array.isArray(n)?(t=`(\\[)?\\[...${e}\\](\\])?`,r=n.map(e=>String(e)).join("/")):(t=`\\[${e}\\]`,r=String(n)),f=f.replace(new RegExp(t,"g"),r)}),f=f.replace(/\[\[\.\.\..+\]\]/g,""),f=function(e){return new URL(e,"http://l").pathname}(f)}else f=e;return f=utils_i(f),i&&(f+=utils_s(i)),f}if("string"==typeof e)return c(e);{const{pathname:n,...t}=e;return{...t,pathname:c(n)}}}function utils_u(t,r,o){const i=function g(n){return n.sort(h)}(Object.keys(o)),c=decodeURI(r);for(const e of i){const r=o[e];if("string"==typeof r){if(utils_c(r,c))return e}else if(utils_c(u(r,t,e),c))return e}return r}function syncLocaleCookie_e(e,o,n,a){if(!e||a===n||null==a||!o)return;const f=function utils_l(e,n=window.location.pathname){return"/"===e?n:n.replace(e,"")}(o),r=""!==f?f:"/",{name:c,...i}=e;i.path||(i.path=r);let l=`${c}=${a};`;for(const[t,e]of Object.entries(i))l+=`${"maxAge"===t?"max-age":t}`,"boolean"!=typeof e&&(l+="="+e),l+=";";document.cookie=l}var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");var BaseLink_c=(0,react.forwardRef)(function BaseLink_f({href:e,locale:f,localeCookie:c,onClick:m,prefetch:l,...a},p){const s=(0,production_react.Ym)(),u=null!=f&&f!==s,h=(0,navigation.usePathname)();return u&&(l=!1),(0,jsx_runtime.jsx)(link_default(),{ref:p,href:e,hrefLang:u?f:void 0,onClick:function(o){syncLocaleCookie_e(c,h,s,f),m&&m(o)},prefetch:l,...a})});function createSharedNavigationFns_u(u,h){const j=function e(e){return{...e,localePrefix:(a=e.localePrefix,"object"==typeof a?a:{mode:a||"always"}),localeCookie:(o=e.localeCookie,!!(o??1)&&{name:"NEXT_LOCALE",sameSite:"lax",..."object"==typeof o&&o}),localeDetection:e.localeDetection??!0,alternateLinks:e.alternateLinks??!0};var o,a}(h||{}),d=j.pathnames;const x=(0,react.forwardRef)(function g({href:e,locale:t,...o},r){let f,m;"object"==typeof e?(f=e.pathname,m=e.params):f=e;const l=utils_n(e),s=u(),h=function utils_x(n){return"function"==typeof n.then}(s)?a(s):s,g=l?y({locale:t||h,href:null==d?f:{pathname:f,params:m},forcePrefix:null!=t||void 0}):f;return(0,jsx_runtime.jsx)(BaseLink_c,{ref:r,href:"object"==typeof e?{...e,pathname:g}:g,locale:t,localeCookie:j.localeCookie,...o})});function y(e){const{forcePrefix:t,href:o,locale:r}=e;let n;return null==d?"object"==typeof o?(n=o.pathname,o.query&&(n+=utils_s(o.query))):n=o:n=utils_f({locale:r,...c(o),pathnames:j.pathnames}),function utils_p(e,n,o,a){const{mode:c}=o.localePrefix;let s;return void 0!==a?s=a:utils_n(e)&&("always"===c?s=!0:"as-needed"===c&&(s=o.domains?!o.domains.some(e=>e.defaultLocale===n):n!==o.defaultLocale)),s?function utils_e(n,t){let e=n;return/^\/(\?.*)?$/.test(t)&&(t=t.slice(1)),e+=t,e}(utils_o(n,o.localePrefix),e):e}(n,r,j,t)}function k(e){return function(t,...o){return e(y(t),...o)}}const b=k(navigation.redirect),P=k(navigation.permanentRedirect);return{config:j,Link:x,redirect:b,permanentRedirect:P,getPathname:y}}function n(n){const s=(0,navigation.usePathname)(),a=(0,production_react.Ym)();return(0,react.useMemo)(()=>{if(!s)return s;let e=s;const r=utils_o(a,n.localePrefix);if(utils_r(r,s))e=t(s,r);else if("never"!==n.localePrefix.mode&&n.localePrefix.prefixes){const r=f(a);utils_r(r,s)&&(e=t(s,r))}return e},[n.localePrefix,a,s])}function createNavigation_c(c){const{Link:u,config:m,getPathname:f,...h}=createSharedNavigationFns_u(production_react.Ym,c);return{...h,Link:u,usePathname:function(){const e=n(m),t=(0,production_react.Ym)();return(0,react.useMemo)(()=>e&&m.pathnames?utils_u(t,e,m.pathnames):e,[t,e])},useRouter:function(){const n=(0,navigation.useRouter)(),s=(0,production_react.Ym)(),i=(0,navigation.usePathname)();return(0,react.useMemo)(()=>{function e(e){return function(t,r){const{locale:o,...n}=r||{},c=[f({href:t,locale:o||s,forcePrefix:null!=o||void 0})];Object.keys(n).length>0&&c.push(n),syncLocaleCookie_e(m.localeCookie,i,s,o),e(...c)}}return{...n,push:e(n.push),replace:e(n.replace),prefetch:e(n.prefetch)}},[s,i,n])},getPathname:f}}},"./node_modules/next-intl/dist/esm/production/routing/defineRouting.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function t(t){return t}__webpack_require__.d(__webpack_exports__,{A:()=>t})},"./node_modules/next-intl/dist/esm/production/server/react-client/index.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";function e(e){return()=>{throw new Error(`\`${e}\` is not supported in Client Components.`)}}function t(...t){return e("getRequestConfig")}__webpack_require__.d(__webpack_exports__,{$:()=>i,M6:()=>t});e("getFormatter"),e("getNow"),e("getTimeZone"),e("getMessages"),e("getLocale");const i=e("getTranslations");e("setRequestLocale")},"./src/components/admin/help-center/article-actions.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N6:()=>createArticle,a:()=>deleteArticle,iZ:()=>updateArticle});var next_cache__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/cache/index.js"),zod__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zod/v4/classic/external.js"),_lib_auth__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/lib/auth/index.ts"),_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/lib/supabase/server-client.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");const ArticleSchema=zod__WEBPACK_IMPORTED_MODULE_1__.object({category_id:zod__WEBPACK_IMPORTED_MODULE_1__.string().uuid(),slug:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(100).regex(/^[a-z0-9-]+$/,"Slug must contain only lowercase letters, numbers, and hyphens"),title_en:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(200),title_es:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(1).max(200),excerpt_en:zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500).nullable(),excerpt_es:zod__WEBPACK_IMPORTED_MODULE_1__.string().max(500).nullable(),content_en:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(10),content_es:zod__WEBPACK_IMPORTED_MODULE_1__.string().min(10),is_published:zod__WEBPACK_IMPORTED_MODULE_1__.boolean()});async function createArticle(data){await(0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.JR)({allowedRoles:["admin"]});const validated=ArticleSchema.parse(data),supabase=await(0,_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_3__.d)(),{data:existing}=await supabase.from("help_articles").select("id").eq("slug",validated.slug).maybeSingle();if(existing)throw new Error("An article with this slug already exists");const{data:article,error}=await supabase.from("help_articles").insert({category_id:validated.category_id,slug:validated.slug,title_en:validated.title_en,title_es:validated.title_es,excerpt_en:validated.excerpt_en,excerpt_es:validated.excerpt_es,content_en:validated.content_en,content_es:validated.content_es,is_published:validated.is_published,view_count:0,helpful_count:0,not_helpful_count:0}).select().single();if(error)throw console.error("Failed to create article:",error),new Error(`Failed to create article: ${error.message}`);return(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/admin/help-center"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/help"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)(`/help/${validated.slug}`),article}async function updateArticle(articleId,data){await(0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.JR)({allowedRoles:["admin"]});const validated=ArticleSchema.parse(data),supabase=await(0,_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_3__.d)(),{data:existing}=await supabase.from("help_articles").select("id").eq("slug",validated.slug).neq("id",articleId).maybeSingle();if(existing)throw new Error("An article with this slug already exists");const{data:article,error}=await supabase.from("help_articles").update({category_id:validated.category_id,slug:validated.slug,title_en:validated.title_en,title_es:validated.title_es,excerpt_en:validated.excerpt_en,excerpt_es:validated.excerpt_es,content_en:validated.content_en,content_es:validated.content_es,is_published:validated.is_published}).eq("id",articleId).select().single();if(error)throw console.error("Failed to update article:",error),new Error(`Failed to update article: ${error.message}`);return(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/admin/help-center"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)(`/admin/help-center/${articleId}`),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/help"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)(`/help/${validated.slug}`),article}async function deleteArticle(articleId){await(0,_lib_auth__WEBPACK_IMPORTED_MODULE_2__.JR)({allowedRoles:["admin"]});const supabase=await(0,_lib_supabase_server_client__WEBPACK_IMPORTED_MODULE_3__.d)(),{error}=await supabase.from("help_articles").delete().eq("id",articleId);if(error)throw console.error("Failed to delete article:",error),new Error(`Failed to delete article: ${error.message}`);return(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/admin/help-center"),(0,next_cache__WEBPACK_IMPORTED_MODULE_0__.xy)("/help"),{success:!0}}},"./src/components/admin/help-center/article-row-actions.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>article_row_actions_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),index_min=__webpack_require__("./node_modules/@hugeicons/core-free-icons/dist/esm/index.min.js"),HugeiconsIcon=__webpack_require__("./node_modules/@hugeicons/react/dist/esm/HugeiconsIcon.js"),next_link=__webpack_require__("./node_modules/next/link.js"),link_default=__webpack_require__.n(next_link),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),toast=__webpack_require__("./src/lib/toast.ts"),article_actions=__webpack_require__("./src/components/admin/help-center/article-actions.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");function ArticleRowActions({articleId,articleTitle,categorySlug,articleSlug}){const router=(0,navigation.useRouter)(),[showDeleteConfirm,setShowDeleteConfirm]=(0,react.useState)(!1),[deleting,setDeleting]=(0,react.useState)(!1);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,jsx_runtime.jsx)(link_default(),{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 transition hover:border-slate-900 dark:border-slate-100 hover:text-slate-900 dark:text-slate-100",href:`/help/${categorySlug}/${articleSlug}`,target:"_blank",title:"View article",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.bMW})}),(0,jsx_runtime.jsx)(link_default(),{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 transition hover:border-slate-900 dark:border-slate-100 hover:text-slate-900 dark:text-slate-100",href:`/admin/help-center/${articleId}`,title:"Edit article",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.WHm})}),(0,jsx_runtime.jsx)("button",{className:"inline-flex h-9 w-9 items-center justify-center rounded-lg border border-slate-200 dark:border-slate-800 text-slate-600 dark:text-slate-400 transition hover:border-slate-900 dark:border-slate-100 hover:text-slate-900 dark:text-slate-100",onClick:()=>setShowDeleteConfirm(!0),title:"Delete article",type:"button",children:(0,jsx_runtime.jsx)(HugeiconsIcon.n,{className:"h-4 w-4",icon:index_min.rvS})})]}),showDeleteConfirm&&(0,jsx_runtime.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-[#0f172a]/50 p-4",children:(0,jsx_runtime.jsxs)("div",{className:"max-w-md rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-6 shadow-xl",children:[(0,jsx_runtime.jsx)("h3",{className:"mb-2 font-bold text-slate-900 dark:text-slate-100 text-xl",children:"Delete Article"}),(0,jsx_runtime.jsxs)("p",{className:"mb-6 text-slate-600 dark:text-slate-400",children:["Are you sure you want to delete ",(0,jsx_runtime.jsxs)("strong",{children:['"',articleTitle,'"']}),"? This action cannot be undone."]}),(0,jsx_runtime.jsxs)("div",{className:"flex gap-3",children:[(0,jsx_runtime.jsx)("button",{className:"flex-1 rounded-lg border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 px-6 py-3 font-semibold text-slate-900 dark:text-slate-100 transition hover:bg-white dark:bg-slate-950",onClick:()=>setShowDeleteConfirm(!1),type:"button",children:"Cancel"}),(0,jsx_runtime.jsx)("button",{className:"flex-1 rounded-lg bg-slate-900 dark:bg-slate-100 px-6 py-3 font-semibold text-white dark:text-slate-950 transition hover:bg-slate-900 dark:bg-slate-100 disabled:opacity-50",disabled:deleting,onClick:async()=>{setDeleting(!0);try{await(0,article_actions.a)(articleId),toast.o.success("Article deleted successfully"),router.refresh(),setShowDeleteConfirm(!1)}catch(error){console.error("Delete error:",error),toast.o.error(error instanceof Error?error.message:"Failed to delete article")}finally{setDeleting(!1)}},type:"button",children:deleting?"Deleting...":"Delete"})]})]})})]})}try{ArticleRowActions.displayName="ArticleRowActions",ArticleRowActions.__docgenInfo={description:"",displayName:"ArticleRowActions",props:{articleId:{defaultValue:null,description:"",name:"articleId",required:!0,type:{name:"string"}},articleTitle:{defaultValue:null,description:"",name:"articleTitle",required:!0,type:{name:"string"}},categorySlug:{defaultValue:null,description:"",name:"categorySlug",required:!0,type:{name:"string"}},articleSlug:{defaultValue:null,description:"",name:"articleSlug",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/admin/help-center/article-row-actions.tsx#ArticleRowActions"]={docgenInfo:ArticleRowActions.__docgenInfo,name:"ArticleRowActions",path:"src/components/admin/help-center/article-row-actions.tsx#ArticleRowActions"})}catch(__react_docgen_typescript_loader_error){}const article_row_actions_stories={title:"Admin/Article Row Actions",component:ArticleRowActions,parameters:{layout:"centered"},tags:["autodocs"]},Default={args:{}},__namedExportsOrder=["Default"]},"./src/i18n/routing.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{DT:()=>routing,N_:()=>Link,a8:()=>usePathname,rd:()=>useRouter});var next_intl_navigation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next-intl/dist/esm/production/navigation/react-client/createNavigation.js");const routing=(0,__webpack_require__("./node_modules/next-intl/dist/esm/production/routing/defineRouting.js").A)({locales:["en","es"],defaultLocale:"en",localeCookie:{name:"NEXT_LOCALE",maxAge:31536e3}}),{Link,redirect,usePathname,useRouter}=(0,next_intl_navigation__WEBPACK_IMPORTED_MODULE_0__.A)(routing)},"./src/lib/auth/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ei:()=>AUTH_ROUTES,bH:()=>getDashboardRouteForRole,Ht:()=>getSession,JR:()=>requireUser});const DASHBOARD_ROUTES={professional:"/dashboard/pro",customer:"/dashboard/customer",admin:"/admin"};function getDashboardRouteForRole(role,locale){const path=DASHBOARD_ROUTES[role]??"/dashboard";return locale?`/${locale}${path}`:path}const AUTH_ROUTES={signIn:"/auth/sign-in",signUp:"/auth/sign-up",signOut:"/auth/sign-out"};var headers=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js"),navigation=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/navigation/index.js"),react_client=__webpack_require__("./node_modules/next-intl/dist/esm/production/server/react-client/index.js"),routing=__webpack_require__("./src/i18n/routing.ts");const locales=["en","es"],defaultLocale="en";(0,react_client.M6)(async({requestLocale})=>{const locale=await requestLocale,validatedLocale=locale&&locales.includes(locale)?locale:routing.DT.defaultLocale;return{locale:validatedLocale,messages:(await __webpack_require__("./messages lazy recursive ^\\.\\/.*\\.json$")(`./${validatedLocale}.json`)).default}});var server_client=__webpack_require__("./src/lib/supabase/server-client.ts");const LOCALE_PATTERN=/^\/?([a-z]{2})\//;async function getLocaleFromHeaders(){const headersList=await(0,headers.b3)(),match=(headersList.get("x-pathname")||headersList.get("referer")||"").match(LOCALE_PATTERN);return match?.[1]||defaultLocale}async function getSession(){const supabase=await(0,server_client.d)(),{data:{session}}=await supabase.auth.getSession();if(!session?.user)return{user:null};const appUser=await async function fetchProfileForUser(supabase,userId,roleFallback="customer"){const[{data:profile,error:profileError},{data:authUser,error:authError}]=await Promise.all([supabase.from("profiles").select("role, locale, onboarding_status").eq("id",userId).maybeSingle(),supabase.auth.getUser()]);if(profileError)return null;if(authError)return null;const user=authUser.user;if(!user)return null;const role=profile?.role??roleFallback,locale=profile?.locale??"en-US",onboardingStatus=profile?.onboarding_status??"application_pending";return{id:user.id,email:user.email??null,role,locale,onboardingStatus}}(supabase,session.user.id);return{user:appUser}}async function requireUser(options={}){const{allowedRoles,fallback}=options,{user}=await getSession();if(!user){const locale=await getLocaleFromHeaders(),redirectPath=fallback||function getAuthRoute(route,locale){const path=AUTH_ROUTES[route];return locale?`/${locale}${path}`:path}("signIn",locale);(0,navigation.redirect)(redirectPath)}if(allowedRoles&&!allowedRoles.includes(user.role)){const locale=await async function getUserLocale(user){return user?.locale?user.locale.split("-")[0]||defaultLocale:await getLocaleFromHeaders()}(user);(0,navigation.redirect)(getDashboardRouteForRole(user.role,locale))}return user}},"./src/lib/supabase/server-client.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{d:()=>createSupabaseServerClient});var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@supabase/ssr/dist/module/index.js"),next_cache__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/cache/index.js"),next_headers__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/nextjs/dist/export-mocks/headers/index.js");async function createSupabaseServerClient(){(0,next_cache__WEBPACK_IMPORTED_MODULE_1__.Mo)();const supabaseUrl="https://hvnetxfsrtplextvtwfx.supabase.co",supabaseKey="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imh2bmV0eGZzcnRwbGV4dHZ0d2Z4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE1ODc0NTEsImV4cCI6MjA3NzE2MzQ1MX0.7-N06om_ntUuGP1NZ0Zcqz01s975xJfiKno34aIW__o";const cookieStore=await(0,next_headers__WEBPACK_IMPORTED_MODULE_2__.UL)();return(0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createServerClient)(supabaseUrl,supabaseKey,{cookies:{getAll:()=>cookieStore.getAll(),setAll(cookiesToSet){try{cookiesToSet.forEach(({name,value,options})=>cookieStore.set(name,value,options))}catch{}}}})}},"./src/lib/toast.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{l:()=>confirm,o:()=>toast});let toastContainer=null;function showToast(message,options={}){const{duration=3e3,type="info"}=options,container=function getToastContainer(){return toastContainer&&document.body.contains(toastContainer)||(toastContainer=document.createElement("div"),toastContainer.id="toast-container",toastContainer.style.cssText="\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    z-index: 9999;\n    display: flex;\n    flex-direction: column;\n    gap: 10px;\n    pointer-events: none;\n  ",document.body.appendChild(toastContainer)),toastContainer}(),toast=document.createElement("div");if(toast.textContent=message,toast.style.cssText=function getToastStyles(type){return"\n    padding: 12px 20px;\n    border-radius: 8px;\n    font-family: system-ui, -apple-system, sans-serif;\n    font-size: 14px;\n    font-weight: 500;\n    box-shadow: 0 4px 12px rgba(22, 22, 22, 0.15);\n    pointer-events: auto;\n    min-width: 300px;\n    max-width: 500px;\n    word-wrap: break-word;\n    animation: slideIn 0.3s ease-out;\n  "+{success:"background-color: #FF4444A22; color: white;",error:"background-color: #FF4444A22; color: white;",info:"background-color: #FF4444A22; color: white;",warning:"background-color: #FF4444A22; color: white;"}[type]}(type),!document.getElementById("toast-animations")){const style=document.createElement("style");style.id="toast-animations",style.textContent="\n      @keyframes slideIn {\n        from {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n        to {\n          transform: translateX(0);\n          opacity: 1;\n        }\n      }\n      @keyframes slideOut {\n        from {\n          transform: translateX(0);\n          opacity: 1;\n        }\n        to {\n          transform: translateX(100%);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(style)}container.appendChild(toast),setTimeout(()=>{toast.style.animation="slideOut 0.3s ease-in",setTimeout(()=>{toast.parentNode&&toast.parentNode.removeChild(toast),0===container.children.length&&container.parentNode&&(container.parentNode.removeChild(container),toastContainer=null)},300)},duration)}const toast={success:(message,duration)=>showToast(message,{type:"success",duration}),error:(message,duration)=>showToast(message,{type:"error",duration}),info:(message,duration)=>showToast(message,{type:"info",duration}),warning:(message,duration)=>showToast(message,{type:"warning",duration})};function confirm(message,title="Confirm"){return new Promise(resolve=>{const overlay=document.createElement("div");overlay.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n      background-color: rgba(22, 22, 22, 0.5);\n      z-index: 10000;\n      display: flex;\n      align-items: center;\n      justify-center;\n      animation: fadeIn 0.2s ease-out;\n    ";const modal=document.createElement("div");modal.style.cssText="\n      background-color: white;\n      border-radius: 12px;\n      padding: 24px;\n      max-width: 400px;\n      width: 90%;\n      box-shadow: 0 20px 25px -5px rgba(22, 22, 22, 0.1);\n      animation: scaleIn 0.2s ease-out;\n    ";const titleElement=document.createElement("h3");titleElement.textContent=title,titleElement.style.cssText="\n      font-size: 18px;\n      font-weight: 600;\n      color: #116611616;\n      margin-bottom: 12px;\n    ";const messageElement=document.createElement("p");messageElement.textContent=message,messageElement.style.cssText="\n      font-size: 14px;\n      color: #116611616;\n      margin-bottom: 20px;\n      line-height: 1.5;\n    ";const buttonContainer=document.createElement("div");buttonContainer.style.cssText="\n      display: flex;\n      gap: 12px;\n      justify-content: flex-end;\n    ";const cancelButton=document.createElement("button");cancelButton.textContent="Cancel",cancelButton.style.cssText="\n      padding: 8px 16px;\n      border-radius: 8px;\n      border: 2px solid #EE44EE2E3;\n      background-color: white;\n      color: #116611616;\n      font-weight: 600;\n      font-size: 14px;\n      cursor: pointer;\n      transition: all 0.2s;\n    ",cancelButton.onmouseover=()=>{cancelButton.style.borderColor="#AA88AAAAC",cancelButton.style.color="#AA88AAAAC"},cancelButton.onmouseout=()=>{cancelButton.style.borderColor="#EE44EE2E3",cancelButton.style.color="#116611616"};const confirmButton=document.createElement("button");confirmButton.textContent="Confirm",confirmButton.style.cssText="\n      padding: 8px 16px;\n      border-radius: 8px;\n      border: none;\n      background-color: #AA88AAAAC;\n      color: white;\n      font-weight: 600;\n      font-size: 14px;\n      cursor: pointer;\n      transition: all 0.2s;\n    ",confirmButton.onmouseover=()=>{confirmButton.style.backgroundColor="#AA88AAAAC"},confirmButton.onmouseout=()=>{confirmButton.style.backgroundColor="#AA88AAAAC"};const cleanup=()=>{overlay.style.animation="fadeOut 0.2s ease-in",setTimeout(()=>{overlay.parentNode&&overlay.parentNode.removeChild(overlay)},200)};if(cancelButton.onclick=()=>{cleanup(),resolve(!1)},confirmButton.onclick=()=>{cleanup(),resolve(!0)},!document.getElementById("modal-animations")){const style=document.createElement("style");style.id="modal-animations",style.textContent="\n        @keyframes fadeIn {\n          from { opacity: 0; }\n          to { opacity: 1; }\n        }\n        @keyframes fadeOut {\n          from { opacity: 1; }\n          to { opacity: 0; }\n        }\n        @keyframes scaleIn {\n          from {\n            transform: scale(0.9);\n            opacity: 0;\n          }\n          to {\n            transform: scale(1);\n            opacity: 1;\n          }\n        }\n      ",document.head.appendChild(style)}buttonContainer.appendChild(cancelButton),buttonContainer.appendChild(confirmButton),modal.appendChild(titleElement),modal.appendChild(messageElement),modal.appendChild(buttonContainer),overlay.appendChild(modal),document.body.appendChild(overlay),confirmButton.focus()})}}}]);